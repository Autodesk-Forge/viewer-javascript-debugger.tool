/*
 zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License  zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License  Copyright (c) 2013 Autodesk Inc.  Copyright (c) 2013 Autodesk Inc.  Copyright (c) 2014 Autodesk Inc.  Copyright (c) 2014 Autodesk Inc.  Copyright (c) 2013 Autodesk Inc.  Copyright (c) 2014 Autodesk Inc.  Copyright (c) 2013 Autodesk Inc.  Copyright (c) 2013 Autodesk Inc.  Copyright (c) 2013 Autodesk Inc.  Copyright (c) 2013 Autodesk Inc.  Copyright (c) 2013 Autodesk Inc.  Copyright (c) 2013 Autodesk Inc.  Copyright (c) 2013 Autodesk Inc.  Copyright (c) 2014 Autodesk Inc. */
var IS_CONCAT_BUILD=!0,BUILD_LMV_WORKER_URL="viewer3D.min.js",LMV_WORKER_URL=BUILD_LMV_WORKER_URL,ENABLE_DEBUG=!1,ENABLE_TRACE=!1,ENABLE_INLINE_WORKER=!0,FORCE_USE_LOCAL_WORKER_SCRIPT=!1;AutodeskNamespace=function(a){var b=this;a=a.split(".");for(var c=0;c<a.length;++c)b[a[c]]=b[a[c]]||{},b=b[a[c]];return b};var _isIE11=!!navigator.userAgent.match(/Trident\/7\./);
"undefined"!==typeof window&&_isIE11&&function(){function a(a,c){c=c||{bubbles:!1,cancelable:!1,detail:void 0};var e=document.createEvent("CustomEvent");e.initCustomEvent(a,c.bubbles,c.cancelable,c.detail);return e}a.prototype=window.CustomEvent.prototype;window.CustomEvent=a}();
ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(a,b){!b||b>this.byteLength?b=this.byteLength:0>b&&(b=this.byteLength+b,0>b&&(b=0));0>a&&(a=this.byteLength+a,0>a&&(a=0));if(b<=a)return new ArrayBuffer;for(var c=b-a,e=new Uint8Array(this,a,c),d=new Uint8Array(c),g=0;g<c;g++)d[g]=e[g];return d.buffer});"undefined"!==typeof window&&(window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);
function launchFullscreen(a){a.requestFullscreen?a.requestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen?a.webkitRequestFullscreen():a.msRequestFullscreen&&a.msRequestFullscreen()}function exitFullscreen(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()}
function inFullscreen(){return document.fullscreenEnabled||document.mozFullScreenElement||document.webkitIsFullScreen||document.msFullscreenElement?!0:!1}function fullscreenElement(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement}function isFullscreenAvailable(a){return a.requestFullscreen||a.mozRequestFullScreen||a.webkitRequestFullscreen||a.msRequestFullscreen}AutodeskNamespace("Autodesk.Viewing");
Autodesk.Viewing.ESCAPE_EVENT="escape";Autodesk.Viewing.PROGRESS_UPDATE_EVENT="progress";Autodesk.Viewing.FULLSCREEN_MODE_EVENT="fullScreenMode";Autodesk.Viewing.NAVIGATION_MODE_CHANGED_EVENT="navmode";Autodesk.Viewing.VIEWER_STATE_RESTORED_EVENT="viewerStateRestored";Autodesk.Viewing.VIEWER_RESIZE_EVENT="viewerResize";Autodesk.Viewing.TOOLBAR_CREATED_EVENT="toolbarCreated";Autodesk.Viewing.VIEWER_UNINITIALIZED="viewerUninitialized";
Autodesk.Viewing.Viewer=function(a,b){this.clientContainer=a;this.container=document.createElement("div");this.container.className="adsk-viewing-viewer";this.container.style.height="100%";this.container.style.width="100%";this.container.style.overflow="hidden";this.clientContainer.appendChild(this.container);this.listeners={};this.dockingPanels=[];this.config=b;this.contextMenu=null;this.__firefoxLMBfix=!1;this.screenModeDelegateClass=this.screenModeDelegate=null;this.setScreenModeDelegate(b?b.screenModeDelegate:
void 0);this.loadedExtensions={};this.started=!1};Autodesk.Viewing.Viewer.prototype={load:function(a,b){throw"bool load(urn, function(void)) must be implemented.  For more details, read the Viewer class documentation.";}};Autodesk.Viewing.Viewer.prototype.start=function(){if(this.started)return 0;var a=this.initialize();if(0===a&&(this.started=!0,this.config&&this.config.hasOwnProperty("extensions")))for(var b=this.config.extensions,c=0;c<b.length;++c)this.loadExtension(b[c],this.config);return a};
Autodesk.Viewing.Viewer.prototype.initialize=function(){var a=this;this.onResizeCallback=function(b){a.resize()};window.addEventListener("resize",this.onResizeCallback,!1);this.initContextMenu();this.localize()};
Autodesk.Viewing.Viewer.prototype.uninitialize=function(){this.container.parentNode.removeChild(this.container);this.container=null;this.screenModeDelegate&&(this.screenModeDelegate.uninitialize(),this.screenModeDelegate=null);this.config=this.clientContainer=null;this.listeners={};this.dockingPanels=[];this.contextMenu=null;window.removeEventListener("resize",this.onResizeCallback,!1);this.fireEvent({type:Autodesk.Viewing.VIEWER_UNINITIALIZED})};
Autodesk.Viewing.Viewer.prototype.finish=function(){for(var a in this.loadedExtensions)this.unloadExtension(a);this.uninitialize()};Autodesk.Viewing.Viewer.prototype.loadExtension=function(a,b){var c=!1;if(this.isExtensionLoaded(a))stderr("Extension already loaded: "+a);else{var e=Autodesk.Viewing.theExtensionManager.getExtension(a);if(e){if(e=new e(this,b),c=e.load())this.loadedExtensions[a]=e,stderr("Extension loaded: "+a)}else stderr("Extension not found: "+a)}return c};
Autodesk.Viewing.Viewer.prototype.isExtensionLoaded=function(a){return a in this.loadedExtensions};Autodesk.Viewing.Viewer.prototype.unloadExtension=function(a){var b=!1;this.isExtensionLoaded(a)?(b=this.loadedExtensions[a].unload(),stderr("Extension unloaded: "+a),delete this.loadedExtensions[a]):stderr("Extension not found: "+a);return b};Autodesk.Viewing.Viewer.prototype.localize=function(){Autodesk.Viewing.i18n.localize()};
Autodesk.Viewing.Viewer.prototype.addEventListener=function(a,b){"undefined"==typeof this.listeners[a]&&(this.listeners[a]=[]);this.listeners[a].push(b)};Autodesk.Viewing.Viewer.prototype.removeEventListener=function(a,b){if(this.listeners[a]instanceof Array)for(var c=this.listeners[a],e=0,d=c.length;e<d;e++)if(c[e]===b){c.splice(e,1);break}};
Autodesk.Viewing.Viewer.prototype.fireEvent=function(a){"string"==typeof a&&(a={type:a});a.target||(a.target=this);if(!a.type)throw Error("event type unknown.");if(this.listeners[a.type]instanceof Array)for(var b=this.listeners[a.type].slice(),c=0;c<b.length;c++)try{b[c].call(this,a)}catch(e){console.log("Exception in "+a.type+" listener:\n"+e.toString());var d="",g;for(g in e)d+="property="+g+" value=["+e[g]+"]\n";d&&console.log(d)}};
Autodesk.Viewing.Viewer.prototype.getDimensions=function(){if(this.container){var a={};this.getScreenMode()===this.ScreenMode.kFullScreen?(a.width=screen.width,a.height=screen.height):a=this.container.getBoundingClientRect();return{width:a.width,height:a.height}}return null};Autodesk.Viewing.Viewer.prototype.getState=function(a){throw"Implement getState() in derived class";};Autodesk.Viewing.Viewer.prototype.restoreState=function(a,b,c){throw"Implement restoreState() in derived class";};
Autodesk.Viewing.Viewer.prototype.setViewFromArray=function(a){};Autodesk.Viewing.Viewer.prototype.setViewFromFile=function(){};Autodesk.Viewing.Viewer.prototype.resize=function(){this.resizePanels()};Autodesk.Viewing.Viewer.prototype.addPanel=function(a){return-1===this.dockingPanels.indexOf(a)?(this.dockingPanels.push(a),!0):!1};Autodesk.Viewing.Viewer.prototype.removePanel=function(a){a=this.dockingPanels.indexOf(a);return-1<a?(this.dockingPanels.splice(a,1),!0):!1};
Autodesk.Viewing.Viewer.prototype.resizePanels=function(a){var b=a?a.viewer:null;b||(b=this);a=a?a.dockingPanels:null;a||(a=b.dockingPanels);for(var c=b.container.getBoundingClientRect(),b=c.top,e=c.bottom,d=c.left,g=c.right,f=c.width,c=c.height,h=0;h<a.length;++h){var k=a[h].container,l=k.getBoundingClientRect(),n=l.top,n=l.bottom,m=l.left,m=l.right,p=l.width,l=l.height;if(p&&l){f<p&&(p=Math.round(f),k.style.width=p+"px");c<l&&(l=Math.round(c),k.style.height=l+"px");if(g<m||k.dockRight)m=Math.round(g-
p-d),k.style.left=m+"px";if(e<n||k.dockBottom)n=Math.round(e-l-b),k.style.top=n+"px";k.style.maxWidth=Math.round(f)+"px";k.style.maxHeight=Math.round(c)+"px"}}};Autodesk.Viewing.Viewer.prototype.search=function(a,b,c){};Autodesk.Viewing.Viewer.prototype.setContextMenu=function(a){this.contextMenu&&this.contextMenu.hide();this.contextMenu=a};
Autodesk.Viewing.Viewer.prototype.initContextMenu=function(){function a(a){var d=a.button;"buttons"in a&&(!b.__firefoxLMBfix||a.buttons&1?2===d&&a.buttons&1&&(d=0,b.__firefoxLMBfix=!0):(b.__firefoxLMBfix=!1,d=0));a=b.navigation&&b.navigation.getUseLeftHandedInput()?0:2;return d===a?!0:!1}var b=this,c=this.canvas||this.container;c.addEventListener("mousedown",function(c){a(c)&&(b.startX=c.clientX,b.startY=c.clientY)});c.addEventListener("mouseup",function(c){return a(c)&&b.contextMenu&&c.clientX===
b.startX&&c.clientY===b.startY&&b.preContextMenuShow(c)?b.contextMenu.show(c):!0},!1)};Autodesk.Viewing.Viewer.prototype.preContextMenuShow=function(a){return!0};Autodesk.Viewing.Viewer.prototype.ScreenMode={kNormal:0,kFullBrowser:1,kFullScreen:2};Autodesk.Viewing.Viewer.prototype.setScreenModeDelegate=function(a){this.screenModeDelegate&&(this.screenModeDelegate.uninitialize(),this.screenModeDelegate=null);this.screenModeDelegateClass=a?a:null===a?Autodesk.Viewing.NullScreenModeDelegate:Autodesk.Viewing.ViewerScreenModeDelegate};
Autodesk.Viewing.Viewer.prototype.getScreenModeDelegate=function(){this.screenModeDelegate||(this.screenModeDelegate=new this.screenModeDelegateClass(this));return this.screenModeDelegate};Autodesk.Viewing.Viewer.prototype.isScreenModeSupported=function(a){return this.getScreenModeDelegate().isModeSupported(a)};Autodesk.Viewing.Viewer.prototype.canChangeScreenMode=function(){return this.isScreenModeSupported(Autodesk.Viewing.Viewer.prototype.kNormal)};
Autodesk.Viewing.Viewer.prototype.setScreenMode=function(a){return this.getScreenModeDelegate().setMode(a)};Autodesk.Viewing.Viewer.prototype.getScreenMode=function(){return this.getScreenModeDelegate().getMode()};Autodesk.Viewing.Viewer.prototype.nextScreenMode=function(){var a=this.getScreenModeDelegate().getNextMode();return void 0!==a?this.setScreenMode(a):!1};
Autodesk.Viewing.Viewer.prototype.escapeScreenMode=function(){var a=this.getScreenModeDelegate().getEscapeMode();return void 0!==a?this.setScreenMode(a):!1};
Autodesk.Viewing.ScreenModeDelegate=function(a){this.viewer=a;this.bindFullscreenEventListener=this.fullscreenEventListener.bind(this);this.getMode()===Autodesk.Viewing.Viewer.prototype.ScreenMode.kFullScreen&&(document.addEventListener("fullscreenchange",this.bindFullscreenEventListener,!1),document.addEventListener("mozfullscreenchange",this.bindFullscreenEventListener,!1),document.addEventListener("webkitfullscreenchange",this.bindFullscreenEventListener,!1),document.addEventListener("MSFullscreenChange",
this.bindFullscreenEventListener,!1))};Autodesk.Viewing.ScreenModeDelegate.prototype.uninitialize=function(){document.removeEventListener("fullscreenchange",this.bindFullscreenEventListener,!1);document.removeEventListener("mozfullscreenchange",this.bindFullscreenEventListener,!1);document.removeEventListener("webkitfullscreenchange",this.bindFullscreenEventListener,!1);document.removeEventListener("MSFullscreenChange",this.bindFullscreenEventListener,!1);this.viewer=null};
Autodesk.Viewing.ScreenModeDelegate.prototype.isModeSupported=function(a){return!0};Autodesk.Viewing.ScreenModeDelegate.prototype.setMode=function(a){var b=this.getMode();if(a!==b&&this.isModeSupported(a)){this.doScreenModeChange(b,a);if(b!==Autodesk.Viewing.Viewer.prototype.ScreenMode.kFullScreen)this.onScreenModeChanged(b,a);return!0}return!1};Autodesk.Viewing.ScreenModeDelegate.prototype.getMode=function(){throw"Implement getMode() in derived class";};
Autodesk.Viewing.ScreenModeDelegate.prototype.getNextMode=function(){var a=this.getMode(),b;a===Autodesk.Viewing.Viewer.prototype.ScreenMode.kNormal&&this.isModeSupported(Autodesk.Viewing.Viewer.prototype.ScreenMode.kFullBrowser)?b=Autodesk.Viewing.Viewer.prototype.ScreenMode.kFullBrowser:a===Autodesk.Viewing.Viewer.prototype.ScreenMode.kNormal&&this.isModeSupported(Autodesk.Viewing.Viewer.prototype.ScreenMode.kFullScreen)?b=Autodesk.Viewing.Viewer.prototype.ScreenMode.kFullScreen:a===Autodesk.Viewing.Viewer.prototype.ScreenMode.kFullBrowser&&
this.isModeSupported(Autodesk.Viewing.Viewer.prototype.ScreenMode.kFullScreen)?b=Autodesk.Viewing.Viewer.prototype.ScreenMode.kFullScreen:a===Autodesk.Viewing.Viewer.prototype.ScreenMode.kFullBrowser&&this.isModeSupported(Autodesk.Viewing.Viewer.prototype.ScreenMode.kNormal)?b=Autodesk.Viewing.Viewer.prototype.ScreenMode.kNormal:a===Autodesk.Viewing.Viewer.prototype.ScreenMode.kFullScreen&&this.isModeSupported(Autodesk.Viewing.Viewer.prototype.ScreenMode.kNormal)?b=Autodesk.Viewing.Viewer.prototype.ScreenMode.kNormal:
a===Autodesk.Viewing.Viewer.prototype.ScreenMode.kFullScreen&&this.isModeSupported(Autodesk.Viewing.Viewer.prototype.ScreenMode.kFullBrowser)&&(b=Autodesk.Viewing.Viewer.prototype.ScreenMode.kFullBrowser);return b};Autodesk.Viewing.ScreenModeDelegate.prototype.getEscapeMode=function(){return this.getMode()!==Autodesk.Viewing.Viewer.prototype.ScreenMode.kNormal?Autodesk.Viewing.Viewer.prototype.ScreenMode.kNormal:void 0};
Autodesk.Viewing.ScreenModeDelegate.prototype.fullscreenEventListener=function(){if(inFullscreen())this.viewer.resize();else{var a=Autodesk.Viewing.Viewer.prototype.ScreenMode;this.doScreenModeChange(a.kFullScreen,a.kNormal);this.onScreenModeChanged(a.kFullScreen,a.kNormal)}};Autodesk.Viewing.ScreenModeDelegate.prototype.doScreenModeChange=function(a,b){throw"Implement doScreenModeChange() in derived class";};
Autodesk.Viewing.ScreenModeDelegate.prototype.onScreenModeChanged=function(a,b){a===Autodesk.Viewing.Viewer.prototype.ScreenMode.kFullScreen?(document.removeEventListener("fullscreenchange",this.bindFullscreenEventListener,!1),document.removeEventListener("mozfullscreenchange",this.bindFullscreenEventListener,!1),document.removeEventListener("webkitfullscreenchange",this.bindFullscreenEventListener,!1),document.removeEventListener("MSFullscreenChange",this.bindFullscreenEventListener,!1)):b===Autodesk.Viewing.Viewer.prototype.ScreenMode.kFullScreen&&
(document.addEventListener("fullscreenchange",this.bindFullscreenEventListener,!1),document.addEventListener("mozfullscreenchange",this.bindFullscreenEventListener,!1),document.addEventListener("webkitfullscreenchange",this.bindFullscreenEventListener,!1),document.addEventListener("MSFullscreenChange",this.bindFullscreenEventListener,!1));this.viewer.resize();this.viewer.fireEvent({type:Autodesk.Viewing.FULLSCREEN_MODE_EVENT,mode:b})};
Autodesk.Viewing.ViewerScreenModeDelegate=function(a){Autodesk.Viewing.ScreenModeDelegate.call(this,a)};Autodesk.Viewing.ViewerScreenModeDelegate.prototype=Object.create(Autodesk.Viewing.ScreenModeDelegate.prototype);Autodesk.Viewing.ViewerScreenModeDelegate.prototype.constructor=Autodesk.Viewing.ViewerScreenModeDelegate;
Autodesk.Viewing.ViewerScreenModeDelegate.prototype.getMode=function(){return inFullscreen()&&fullscreenElement()===this.viewer.container?Autodesk.Viewing.Viewer.prototype.ScreenMode.kFullScreen:this.viewer.container.classList.contains("viewer-fill-browser")?Autodesk.Viewing.Viewer.prototype.ScreenMode.kFullBrowser:Autodesk.Viewing.Viewer.prototype.ScreenMode.kNormal};
Autodesk.Viewing.ViewerScreenModeDelegate.prototype.doScreenModeChange=function(a,b){var c=this.viewer.container;switch(b){case Autodesk.Viewing.Viewer.prototype.ScreenMode.kNormal:c.classList.remove("viewer-fill-browser");exitFullscreen();break;case Autodesk.Viewing.Viewer.prototype.ScreenMode.kFullBrowser:c.classList.add("viewer-fill-browser");break;case Autodesk.Viewing.Viewer.prototype.ScreenMode.kFullScreen:c.classList.add("viewer-fill-browser"),launchFullscreen(c)}};
Autodesk.Viewing.ApplicationScreenModeDelegate=function(a){Autodesk.Viewing.ScreenModeDelegate.call(this,a)};Autodesk.Viewing.ApplicationScreenModeDelegate.prototype=Object.create(Autodesk.Viewing.ScreenModeDelegate.prototype);Autodesk.Viewing.ApplicationScreenModeDelegate.prototype.constructor=Autodesk.Viewing.ApplicationScreenModeDelegate;Autodesk.Viewing.ApplicationScreenModeDelegate.prototype.isModeSupported=function(a){return a!==Autodesk.Viewing.Viewer.prototype.ScreenMode.kFullBrowser};
Autodesk.Viewing.ApplicationScreenModeDelegate.prototype.getMode=function(){return inFullscreen()&&fullscreenElement()===document.documentElement?Autodesk.Viewing.Viewer.prototype.ScreenMode.kFullScreen:Autodesk.Viewing.Viewer.prototype.ScreenMode.kNormal};Autodesk.Viewing.ApplicationScreenModeDelegate.prototype.doScreenModeChange=function(a,b){b===Autodesk.Viewing.Viewer.prototype.ScreenMode.kNormal?exitFullscreen():b===Autodesk.Viewing.Viewer.prototype.ScreenMode.kFullScreen&&launchFullscreen(document.documentElement)};
Autodesk.Viewing.NullScreenModeDelegate=function(a){Autodesk.Viewing.ScreenModeDelegate.call(this,a)};Autodesk.Viewing.NullScreenModeDelegate.prototype=Object.create(Autodesk.Viewing.ScreenModeDelegate.prototype);Autodesk.Viewing.NullScreenModeDelegate.prototype.constructor=Autodesk.Viewing.ScreenModeDelegate;Autodesk.Viewing.NullScreenModeDelegate.prototype.isModeSupported=function(a){return!1};Autodesk.Viewing.NullScreenModeDelegate.prototype.getMode=function(){return Autodesk.Viewing.Viewer.prototype.ScreenMode.kNormal};
"use strict";var THREE={REVISION:"66"};self.console=self.console||{info:function(){},log:function(){},debug:function(){},warn:function(){},error:function(){}};
(function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!self.requestAnimationFrame;++c)self.requestAnimationFrame=self[b[c]+"RequestAnimationFrame"],self.cancelAnimationFrame=self[b[c]+"CancelAnimationFrame"]||self[b[c]+"CancelRequestAnimationFrame"];void 0===self.requestAnimationFrame&&void 0!==self.setTimeout&&(self.requestAnimationFrame=function(b){var d=Date.now(),c=Math.max(0,16-(d-a)),f=self.setTimeout(function(){b(d+c)},c);a=d+c;return f});void 0===self.cancelAnimationFrame&&void 0!==
self.clearTimeout&&(self.cancelAnimationFrame=function(a){self.clearTimeout(a)})})();THREE.CullFaceNone=0;THREE.CullFaceBack=1;THREE.CullFaceFront=2;THREE.CullFaceFrontBack=3;THREE.FrontFaceDirectionCW=0;THREE.FrontFaceDirectionCCW=1;THREE.BasicShadowMap=0;THREE.PCFShadowMap=1;THREE.PCFSoftShadowMap=2;THREE.FrontSide=0;THREE.BackSide=1;THREE.DoubleSide=2;THREE.NoShading=0;THREE.FlatShading=1;THREE.SmoothShading=2;THREE.NoColors=0;THREE.FaceColors=1;THREE.VertexColors=2;THREE.NoBlending=0;
THREE.NormalBlending=1;THREE.AdditiveBlending=2;THREE.SubtractiveBlending=3;THREE.MultiplyBlending=4;THREE.CustomBlending=5;THREE.AddEquation=100;THREE.SubtractEquation=101;THREE.ReverseSubtractEquation=102;THREE.ZeroFactor=200;THREE.OneFactor=201;THREE.SrcColorFactor=202;THREE.OneMinusSrcColorFactor=203;THREE.SrcAlphaFactor=204;THREE.OneMinusSrcAlphaFactor=205;THREE.DstAlphaFactor=206;THREE.OneMinusDstAlphaFactor=207;THREE.DstColorFactor=208;THREE.OneMinusDstColorFactor=209;
THREE.SrcAlphaSaturateFactor=210;THREE.MultiplyOperation=0;THREE.MixOperation=1;THREE.AddOperation=2;THREE.UVMapping=function(){};THREE.CubeReflectionMapping=function(){};THREE.CubeRefractionMapping=function(){};THREE.SphericalReflectionMapping=function(){};THREE.SphericalRefractionMapping=function(){};THREE.RepeatWrapping=1E3;THREE.ClampToEdgeWrapping=1001;THREE.MirroredRepeatWrapping=1002;THREE.NearestFilter=1003;THREE.NearestMipMapNearestFilter=1004;THREE.NearestMipMapLinearFilter=1005;
THREE.LinearFilter=1006;THREE.LinearMipMapNearestFilter=1007;THREE.LinearMipMapLinearFilter=1008;THREE.UnsignedByteType=1009;THREE.ByteType=1010;THREE.ShortType=1011;THREE.UnsignedShortType=1012;THREE.IntType=1013;THREE.UnsignedIntType=1014;THREE.FloatType=1015;THREE.HalfFloatType=1099;THREE.UnsignedShort4444Type=1016;THREE.UnsignedShort5551Type=1017;THREE.UnsignedShort565Type=1018;THREE.AlphaFormat=1019;THREE.RGBFormat=1020;THREE.RGBAFormat=1021;THREE.LuminanceFormat=1022;
THREE.LuminanceAlphaFormat=1023;THREE.RGB_S3TC_DXT1_Format=2001;THREE.RGBA_S3TC_DXT1_Format=2002;THREE.RGBA_S3TC_DXT3_Format=2003;THREE.RGBA_S3TC_DXT5_Format=2004;THREE.Color=function(a){return 3===arguments.length?this.setRGB(arguments[0],arguments[1],arguments[2]):this.set(a)};
THREE.Color.prototype={constructor:THREE.Color,r:1,g:1,b:1,set:function(a){a instanceof THREE.Color?this.copy(a):"number"===typeof a?this.setHex(a):"string"===typeof a&&this.setStyle(a);return this},setHex:function(a){a=Math.floor(a);this.r=(a>>16&255)/255;this.g=(a>>8&255)/255;this.b=(a&255)/255;return this},setRGB:function(a,b,c){this.r=a;this.g=b;this.b=c;return this},setHSL:function(a,b,c){if(0===b)this.r=this.g=this.b=c;else{var e=function(a,b,f){0>f&&(f+=1);1<f&&(f-=1);return f<1/6?a+6*(b-a)*
f:0.5>f?b:f<2/3?a+6*(b-a)*(2/3-f):a};b=0.5>=c?c*(1+b):c+b-c*b;c=2*c-b;this.r=e(c,b,a+1/3);this.g=e(c,b,a);this.b=e(c,b,a-1/3)}return this},setStyle:function(a){if(/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.test(a))return a=/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.exec(a),this.r=Math.min(255,parseInt(a[1],10))/255,this.g=Math.min(255,parseInt(a[2],10))/255,this.b=Math.min(255,parseInt(a[3],10))/255,this;if(/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.test(a))return a=/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.exec(a),this.r=
Math.min(100,parseInt(a[1],10))/100,this.g=Math.min(100,parseInt(a[2],10))/100,this.b=Math.min(100,parseInt(a[3],10))/100,this;if(/^\#([0-9a-f]{6})$/i.test(a))return a=/^\#([0-9a-f]{6})$/i.exec(a),this.setHex(parseInt(a[1],16)),this;if(/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test(a))return a=/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(a),this.setHex(parseInt(a[1]+a[1]+a[2]+a[2]+a[3]+a[3],16)),this;if(/^(\w+)$/i.test(a))return this.setHex(THREE.ColorKeywords[a]),this},copy:function(a){this.r=a.r;this.g=
a.g;this.b=a.b;return this},copyGammaToLinear:function(a){this.r=a.r*a.r;this.g=a.g*a.g;this.b=a.b*a.b;return this},copyLinearToGamma:function(a){this.r=Math.sqrt(a.r);this.g=Math.sqrt(a.g);this.b=Math.sqrt(a.b);return this},convertGammaToLinear:function(){var a=this.r,b=this.g,c=this.b;this.r=a*a;this.g=b*b;this.b=c*c;return this},convertLinearToGamma:function(){this.r=Math.sqrt(this.r);this.g=Math.sqrt(this.g);this.b=Math.sqrt(this.b);return this},getHex:function(){return 255*this.r<<16^255*this.g<<
8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(a){a=a||{h:0,s:0,l:0};var b=this.r,c=this.g,e=this.b,d=Math.max(b,c,e),g=Math.min(b,c,e),f,h=(g+d)/2;if(g===d)g=f=0;else{var k=d-g,g=0.5>=h?k/(d+g):k/(2-d-g);switch(d){case b:f=(c-e)/k+(c<e?6:0);break;case c:f=(e-b)/k+2;break;case e:f=(b-c)/k+4}f/=6}a.h=f;a.s=g;a.l=h;return a},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(a,
b,c){var e=this.getHSL();e.h+=a;e.s+=b;e.l+=c;this.setHSL(e.h,e.s,e.l);return this},add:function(a){this.r+=a.r;this.g+=a.g;this.b+=a.b;return this},addColors:function(a,b){this.r=a.r+b.r;this.g=a.g+b.g;this.b=a.b+b.b;return this},addScalar:function(a){this.r+=a;this.g+=a;this.b+=a;return this},multiply:function(a){this.r*=a.r;this.g*=a.g;this.b*=a.b;return this},multiplyScalar:function(a){this.r*=a;this.g*=a;this.b*=a;return this},lerp:function(a,b){this.r+=(a.r-this.r)*b;this.g+=(a.g-this.g)*b;
this.b+=(a.b-this.b)*b;return this},equals:function(a){return a.r===this.r&&a.g===this.g&&a.b===this.b},fromArray:function(a){this.r=a[0];this.g=a[1];this.b=a[2];return this},toArray:function(){return[this.r,this.g,this.b]},clone:function(){return(new THREE.Color).setRGB(this.r,this.g,this.b)}};
THREE.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,
darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,
grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,
lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,
palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,
tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};THREE.Quaternion=function(a,b,c,e){this._x=a||0;this._y=b||0;this._z=c||0;this._w=void 0!==e?e:1};
THREE.Quaternion.prototype={constructor:THREE.Quaternion,_x:0,_y:0,_z:0,_w:0,_euler:void 0,_updateEuler:function(a){void 0!==this._euler&&this._euler.setFromQuaternion(this,void 0,!1)},get x(){return this._x},set x(a){this._x=a;this._updateEuler()},get y(){return this._y},set y(a){this._y=a;this._updateEuler()},get z(){return this._z},set z(a){this._z=a;this._updateEuler()},get w(){return this._w},set w(a){this._w=a;this._updateEuler()},set:function(a,b,c,e){this._x=a;this._y=b;this._z=c;this._w=
e;this._updateEuler();return this},copy:function(a){this._x=a._x;this._y=a._y;this._z=a._z;this._w=a._w;this._updateEuler();return this},setFromEuler:function(a,b){if(!1===a instanceof THREE.Euler)throw Error("ERROR: Quaternion's .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.  Please update your code.");var c=Math.cos(a._x/2),e=Math.cos(a._y/2),d=Math.cos(a._z/2),g=Math.sin(a._x/2),f=Math.sin(a._y/2),h=Math.sin(a._z/2);"XYZ"===a.order?(this._x=g*e*d+c*f*h,this._y=c*
f*d-g*e*h,this._z=c*e*h+g*f*d,this._w=c*e*d-g*f*h):"YXZ"===a.order?(this._x=g*e*d+c*f*h,this._y=c*f*d-g*e*h,this._z=c*e*h-g*f*d,this._w=c*e*d+g*f*h):"ZXY"===a.order?(this._x=g*e*d-c*f*h,this._y=c*f*d+g*e*h,this._z=c*e*h+g*f*d,this._w=c*e*d-g*f*h):"ZYX"===a.order?(this._x=g*e*d-c*f*h,this._y=c*f*d+g*e*h,this._z=c*e*h-g*f*d,this._w=c*e*d+g*f*h):"YZX"===a.order?(this._x=g*e*d+c*f*h,this._y=c*f*d+g*e*h,this._z=c*e*h-g*f*d,this._w=c*e*d-g*f*h):"XZY"===a.order&&(this._x=g*e*d-c*f*h,this._y=c*f*d-g*e*h,
this._z=c*e*h+g*f*d,this._w=c*e*d+g*f*h);!1!==b&&this._updateEuler();return this},setFromAxisAngle:function(a,b){var c=b/2,e=Math.sin(c);this._x=a.x*e;this._y=a.y*e;this._z=a.z*e;this._w=Math.cos(c);this._updateEuler();return this},setFromRotationMatrix:function(a){var b=a.elements,c=b[0];a=b[4];var e=b[8],d=b[1],g=b[5],f=b[9],h=b[2],k=b[6],b=b[10],l=c+g+b;0<l?(c=0.5/Math.sqrt(l+1),this._w=0.25/c,this._x=(k-f)*c,this._y=(e-h)*c,this._z=(d-a)*c):c>g&&c>b?(c=2*Math.sqrt(1+c-g-b),this._w=(k-f)/c,this._x=
0.25*c,this._y=(a+d)/c,this._z=(e+h)/c):g>b?(c=2*Math.sqrt(1+g-c-b),this._w=(e-h)/c,this._x=(a+d)/c,this._y=0.25*c,this._z=(f+k)/c):(c=2*Math.sqrt(1+b-c-g),this._w=(d-a)/c,this._x=(e+h)/c,this._y=(f+k)/c,this._z=0.25*c);this._updateEuler();return this},inverse:function(){this.conjugate().normalize();return this},conjugate:function(){this._x*=-1;this._y*=-1;this._z*=-1;this._updateEuler();return this},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*
this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var a=this.length();0===a?(this._z=this._y=this._x=0,this._w=1):(a=1/a,this._x*=a,this._y*=a,this._z*=a,this._w*=a);return this},multiply:function(a,b){return void 0!==b?(console.warn("DEPRECATED: Quaternion's .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(a,b)):this.multiplyQuaternions(this,a)},multiplyQuaternions:function(a,b){var c=a._x,e=a._y,d=a._z,g=
a._w,f=b._x,h=b._y,k=b._z,l=b._w;this._x=c*l+g*f+e*k-d*h;this._y=e*l+g*h+d*f-c*k;this._z=d*l+g*k+c*h-e*f;this._w=g*l-c*f-e*h-d*k;this._updateEuler();return this},multiplyVector3:function(a){console.warn("DEPRECATED: Quaternion's .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");return a.applyQuaternion(this)},slerp:function(a,b){var c=this._x,e=this._y,d=this._z,g=this._w,f=g*a._w+c*a._x+e*a._y+d*a._z;0>f?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=
-a._z,f=-f):this.copy(a);if(1<=f)return this._w=g,this._x=c,this._y=e,this._z=d,this;var h=Math.acos(f),k=Math.sqrt(1-f*f);if(0.001>Math.abs(k))return this._w=0.5*(g+this._w),this._x=0.5*(c+this._x),this._y=0.5*(e+this._y),this._z=0.5*(d+this._z),this;f=Math.sin((1-b)*h)/k;h=Math.sin(b*h)/k;this._w=g*f+this._w*h;this._x=c*f+this._x*h;this._y=e*f+this._y*h;this._z=d*f+this._z*h;this._updateEuler();return this},equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w},
fromArray:function(a){this._x=a[0];this._y=a[1];this._z=a[2];this._w=a[3];this._updateEuler();return this},toArray:function(){return[this._x,this._y,this._z,this._w]},clone:function(){return new THREE.Quaternion(this._x,this._y,this._z,this._w)}};THREE.Quaternion.slerp=function(a,b,c,e){return c.copy(a).slerp(b,e)};THREE.Vector2=function(a,b){this.x=a||0;this.y=b||0};
THREE.Vector2.prototype={constructor:THREE.Vector2,set:function(a,b){this.x=a;this.y=b;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+a);}},copy:function(a){this.x=a.x;this.y=a.y;return this},add:function(a,
b){if(void 0!==b)return console.warn("DEPRECATED: Vector2's .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this},addScalar:function(a){this.x+=a;this.y+=a;return this},sub:function(a,b){if(void 0!==b)return console.warn("DEPRECATED: Vector2's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=
a.y;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;return this},divideScalar:function(a){0!==a?(a=1/a,this.x*=a,this.y*=a):this.y=this.x=0;return this},min:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);return this},max:function(a){this.x<a.x&&(this.x=a.x);this.y<a.y&&(this.y=a.y);return this},clamp:function(a,b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);
return this},clampScalar:function(){var a,b;return function(c,e){void 0===a&&(a=new THREE.Vector2,b=new THREE.Vector2);a.set(c,c);b.set(e,e);return this.clamp(a,b)}}(),floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?
Math.ceil(this.y):Math.floor(this.y);return this},negate:function(){return this.multiplyScalar(-1)},dot:function(a){return this.x*a.x+this.y*a.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x;a=this.y-a.y;return b*b+a*a},setLength:function(a){var b=
this.length();0!==b&&a!==b&&this.multiplyScalar(a/b);return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;return this},equals:function(a){return a.x===this.x&&a.y===this.y},fromArray:function(a){this.x=a[0];this.y=a[1];return this},toArray:function(){return[this.x,this.y]},clone:function(){return new THREE.Vector2(this.x,this.y)}};THREE.Vector3=function(a,b,c){this.x=a||0;this.y=b||0;this.z=c||0};
THREE.Vector3.prototype={constructor:THREE.Vector3,set:function(a,b,c){this.x=a;this.y=b;this.z=c;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+
a);}},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},add:function(a,b){if(void 0!==b)return console.warn("DEPRECATED: Vector3's .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this},sub:function(a,b){if(void 0!==b)return console.warn("DEPRECATED: Vector3's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),
this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this},multiply:function(a,b){if(void 0!==b)return console.warn("DEPRECATED: Vector3's .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(a,b);this.x*=a.x;this.y*=a.y;this.z*=a.z;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;return this},multiplyVectors:function(a,b){this.x=a.x*
b.x;this.y=a.y*b.y;this.z=a.z*b.z;return this},applyEuler:function(){var a;return function(b){!1===b instanceof THREE.Euler&&console.error("ERROR: Vector3's .applyEuler() now expects a Euler rotation rather than a Vector3 and order.  Please update your code.");void 0===a&&(a=new THREE.Quaternion);this.applyQuaternion(a.setFromEuler(b));return this}}(),applyAxisAngle:function(){var a;return function(b,c){void 0===a&&(a=new THREE.Quaternion);this.applyQuaternion(a.setFromAxisAngle(b,c));return this}}(),
applyMatrix3:function(a){var b=this.x,c=this.y,e=this.z;a=a.elements;this.x=a[0]*b+a[3]*c+a[6]*e;this.y=a[1]*b+a[4]*c+a[7]*e;this.z=a[2]*b+a[5]*c+a[8]*e;return this},applyMatrix4:function(a){var b=this.x,c=this.y,e=this.z;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*e+a[12];this.y=a[1]*b+a[5]*c+a[9]*e+a[13];this.z=a[2]*b+a[6]*c+a[10]*e+a[14];return this},applyProjection:function(a){var b=this.x,c=this.y,e=this.z;a=a.elements;var d=1/(a[3]*b+a[7]*c+a[11]*e+a[15]);this.x=(a[0]*b+a[4]*c+a[8]*e+a[12])*d;this.y=
(a[1]*b+a[5]*c+a[9]*e+a[13])*d;this.z=(a[2]*b+a[6]*c+a[10]*e+a[14])*d;return this},applyQuaternion:function(a){var b=this.x,c=this.y,e=this.z,d=a.x,g=a.y,f=a.z;a=a.w;var h=a*b+g*e-f*c,k=a*c+f*b-d*e,l=a*e+d*c-g*b,b=-d*b-g*c-f*e;this.x=h*a+b*-d+k*-f-l*-g;this.y=k*a+b*-g+l*-d-h*-f;this.z=l*a+b*-f+h*-g-k*-d;return this},transformDirection:function(a){var b=this.x,c=this.y,e=this.z;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*e;this.y=a[1]*b+a[5]*c+a[9]*e;this.z=a[2]*b+a[6]*c+a[10]*e;this.normalize();return this},
divide:function(a){this.x/=a.x;this.y/=a.y;this.z/=a.z;return this},divideScalar:function(a){0!==a?(a=1/a,this.x*=a,this.y*=a,this.z*=a):this.z=this.y=this.x=0;return this},min:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);this.z>a.z&&(this.z=a.z);return this},max:function(a){this.x<a.x&&(this.x=a.x);this.y<a.y&&(this.y=a.y);this.z<a.z&&(this.z=a.z);return this},clamp:function(a,b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);this.z<
a.z?this.z=a.z:this.z>b.z&&(this.z=b.z);return this},clampScalar:function(){var a,b;return function(c,e){void 0===a&&(a=new THREE.Vector3,b=new THREE.Vector3);a.set(c,c,c);b.set(e,e,e);return this.clamp(a,b)}}(),floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);
return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);return this},negate:function(){return this.multiplyScalar(-1)},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+
Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){var b=this.length();0!==b&&a!==b&&this.multiplyScalar(a/b);return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;return this},cross:function(a,b){if(void 0!==b)return console.warn("DEPRECATED: Vector3's .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(a,b);var c=this.x,e=this.y,d=this.z;this.x=
e*a.z-d*a.y;this.y=d*a.x-c*a.z;this.z=c*a.y-e*a.x;return this},crossVectors:function(a,b){var c=a.x,e=a.y,d=a.z,g=b.x,f=b.y,h=b.z;this.x=e*h-d*f;this.y=d*g-c*h;this.z=c*f-e*g;return this},projectOnVector:function(){var a,b;return function(c){void 0===a&&(a=new THREE.Vector3);a.copy(c).normalize();b=this.dot(a);return this.copy(a).multiplyScalar(b)}}(),projectOnPlane:function(){var a;return function(b){void 0===a&&(a=new THREE.Vector3);a.copy(this).projectOnVector(b);return this.sub(a)}}(),reflect:function(){var a;
return function(b){void 0===a&&(a=new THREE.Vector3);return this.sub(a.copy(b).multiplyScalar(2*this.dot(b)))}}(),angleTo:function(a){a=this.dot(a)/(this.length()*a.length());return Math.acos(THREE.Math.clamp(a,-1,1))},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x,c=this.y-a.y;a=this.z-a.z;return b*b+c*c+a*a},setEulerFromRotationMatrix:function(a,b){console.error("REMOVED: Vector3's setEulerFromRotationMatrix has been removed in favor of Euler.setFromRotationMatrix(), please update your code.")},
setEulerFromQuaternion:function(a,b){console.error("REMOVED: Vector3's setEulerFromQuaternion: has been removed in favor of Euler.setFromQuaternion(), please update your code.")},getPositionFromMatrix:function(a){console.warn("DEPRECATED: Vector3's .getPositionFromMatrix() has been renamed to .setFromMatrixPosition(). Please update your code.");return this.setFromMatrixPosition(a)},getScaleFromMatrix:function(a){console.warn("DEPRECATED: Vector3's .getScaleFromMatrix() has been renamed to .setFromMatrixScale(). Please update your code.");
return this.setFromMatrixScale(a)},getColumnFromMatrix:function(a,b){console.warn("DEPRECATED: Vector3's .getColumnFromMatrix() has been renamed to .setFromMatrixColumn(). Please update your code.");return this.setFromMatrixColumn(a,b)},setFromMatrixPosition:function(a){this.x=a.elements[12];this.y=a.elements[13];this.z=a.elements[14];return this},setFromMatrixScale:function(a){var b=this.set(a.elements[0],a.elements[1],a.elements[2]).length(),c=this.set(a.elements[4],a.elements[5],a.elements[6]).length();
a=this.set(a.elements[8],a.elements[9],a.elements[10]).length();this.x=b;this.y=c;this.z=a;return this},setFromMatrixColumn:function(a,b){var c=4*a,e=b.elements;this.x=e[c];this.y=e[c+1];this.z=e[c+2];return this},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},fromArray:function(a){this.x=a[0];this.y=a[1];this.z=a[2];return this},toArray:function(){return[this.x,this.y,this.z]},clone:function(){return new THREE.Vector3(this.x,this.y,this.z)}};
THREE.Vector4=function(a,b,c,e){this.x=a||0;this.y=b||0;this.z=c||0;this.w=void 0!==e?e:1};
THREE.Vector4.prototype={constructor:THREE.Vector4,set:function(a,b,c,e){this.x=a;this.y=b;this.z=c;this.w=e;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setW:function(a){this.w=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;case 3:this.w=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;
case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+a);}},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=void 0!==a.w?a.w:1;return this},add:function(a,b){if(void 0!==b)return console.warn("DEPRECATED: Vector4's .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;this.w+=a.w;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;this.w+=a;return this},
addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;this.w=a.w+b.w;return this},sub:function(a,b){if(void 0!==b)return console.warn("DEPRECATED: Vector4's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;this.w-=a.w;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;this.w=a.w-b.w;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;this.w*=a;return this},
applyMatrix4:function(a){var b=this.x,c=this.y,e=this.z,d=this.w;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*e+a[12]*d;this.y=a[1]*b+a[5]*c+a[9]*e+a[13]*d;this.z=a[2]*b+a[6]*c+a[10]*e+a[14]*d;this.w=a[3]*b+a[7]*c+a[11]*e+a[15]*d;return this},divideScalar:function(a){0!==a?(a=1/a,this.x*=a,this.y*=a,this.z*=a,this.w*=a):(this.z=this.y=this.x=0,this.w=1);return this},setAxisAngleFromQuaternion:function(a){this.w=2*Math.acos(a.w);var b=Math.sqrt(1-a.w*a.w);1E-4>b?(this.x=1,this.z=this.y=0):(this.x=a.x/b,
this.y=a.y/b,this.z=a.z/b);return this},setAxisAngleFromRotationMatrix:function(a){var b,c,e;a=a.elements;var d=a[0];e=a[4];var g=a[8],f=a[1],h=a[5],k=a[9];c=a[2];b=a[6];var l=a[10];if(0.01>Math.abs(e-f)&&0.01>Math.abs(g-c)&&0.01>Math.abs(k-b)){if(0.1>Math.abs(e+f)&&0.1>Math.abs(g+c)&&0.1>Math.abs(k+b)&&0.1>Math.abs(d+h+l-3))return this.set(1,0,0,0),this;a=Math.PI;d=(d+1)/2;h=(h+1)/2;l=(l+1)/2;e=(e+f)/4;g=(g+c)/4;k=(k+b)/4;d>h&&d>l?0.01>d?(b=0,e=c=0.707106781):(b=Math.sqrt(d),c=e/b,e=g/b):h>l?0.01>
h?(b=0.707106781,c=0,e=0.707106781):(c=Math.sqrt(h),b=e/c,e=k/c):0.01>l?(c=b=0.707106781,e=0):(e=Math.sqrt(l),b=g/e,c=k/e);this.set(b,c,e,a);return this}a=Math.sqrt((b-k)*(b-k)+(g-c)*(g-c)+(f-e)*(f-e));0.001>Math.abs(a)&&(a=1);this.x=(b-k)/a;this.y=(g-c)/a;this.z=(f-e)/a;this.w=Math.acos((d+h+l-1)/2);return this},min:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);this.z>a.z&&(this.z=a.z);this.w>a.w&&(this.w=a.w);return this},max:function(a){this.x<a.x&&(this.x=a.x);this.y<a.y&&(this.y=
a.y);this.z<a.z&&(this.z=a.z);this.w<a.w&&(this.w=a.w);return this},clamp:function(a,b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);this.z<a.z?this.z=a.z:this.z>b.z&&(this.z=b.z);this.w<a.w?this.w=a.w:this.w>b.w&&(this.w=b.w);return this},clampScalar:function(){var a,b;return function(c,e){void 0===a&&(a=new THREE.Vector4,b=new THREE.Vector4);a.set(c,c,c,c);b.set(e,e,e,e);return this.clamp(a,b)}}(),floor:function(){this.x=Math.floor(this.x);this.y=
Math.floor(this.y);this.z=Math.floor(this.z);this.w=Math.floor(this.w);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);this.w=Math.ceil(this.w);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.w=Math.round(this.w);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):
Math.floor(this.z);this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w);return this},negate:function(){return this.multiplyScalar(-1)},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},
setLength:function(a){var b=this.length();0!==b&&a!==b&&this.multiplyScalar(a/b);return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;this.w+=(a.w-this.w)*b;return this},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z&&a.w===this.w},fromArray:function(a){this.x=a[0];this.y=a[1];this.z=a[2];this.w=a[3];return this},toArray:function(){return[this.x,this.y,this.z,this.w]},clone:function(){return new THREE.Vector4(this.x,this.y,this.z,
this.w)}};THREE.Euler=function(a,b,c,e){this._x=a||0;this._y=b||0;this._z=c||0;this._order=e||THREE.Euler.DefaultOrder};THREE.Euler.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" ");THREE.Euler.DefaultOrder="XYZ";
THREE.Euler.prototype={constructor:THREE.Euler,_x:0,_y:0,_z:0,_order:THREE.Euler.DefaultOrder,_quaternion:void 0,_updateQuaternion:function(){void 0!==this._quaternion&&this._quaternion.setFromEuler(this,!1)},get x(){return this._x},set x(a){this._x=a;this._updateQuaternion()},get y(){return this._y},set y(a){this._y=a;this._updateQuaternion()},get z(){return this._z},set z(a){this._z=a;this._updateQuaternion()},get order(){return this._order},set order(a){this._order=a;this._updateQuaternion()},
set:function(a,b,c,e){this._x=a;this._y=b;this._z=c;this._order=e||this._order;this._updateQuaternion();return this},copy:function(a){this._x=a._x;this._y=a._y;this._z=a._z;this._order=a._order;this._updateQuaternion();return this},setFromRotationMatrix:function(a,b){function c(a){return Math.min(Math.max(a,-1),1)}var e=a.elements,d=e[0],g=e[4],f=e[8],h=e[1],k=e[5],l=e[9],n=e[2],m=e[6],e=e[10];b=b||this._order;"XYZ"===b?(this._y=Math.asin(c(f)),0.99999>Math.abs(f)?(this._x=Math.atan2(-l,e),this._z=
Math.atan2(-g,d)):(this._x=Math.atan2(m,k),this._z=0)):"YXZ"===b?(this._x=Math.asin(-c(l)),0.99999>Math.abs(l)?(this._y=Math.atan2(f,e),this._z=Math.atan2(h,k)):(this._y=Math.atan2(-n,d),this._z=0)):"ZXY"===b?(this._x=Math.asin(c(m)),0.99999>Math.abs(m)?(this._y=Math.atan2(-n,e),this._z=Math.atan2(-g,k)):(this._y=0,this._z=Math.atan2(h,d))):"ZYX"===b?(this._y=Math.asin(-c(n)),0.99999>Math.abs(n)?(this._x=Math.atan2(m,e),this._z=Math.atan2(h,d)):(this._x=0,this._z=Math.atan2(-g,k))):"YZX"===b?(this._z=
Math.asin(c(h)),0.99999>Math.abs(h)?(this._x=Math.atan2(-l,k),this._y=Math.atan2(-n,d)):(this._x=0,this._y=Math.atan2(f,e))):"XZY"===b?(this._z=Math.asin(-c(g)),0.99999>Math.abs(g)?(this._x=Math.atan2(m,k),this._y=Math.atan2(f,d)):(this._x=Math.atan2(-l,e),this._y=0)):console.warn("WARNING: Euler.setFromRotationMatrix() given unsupported order: "+b);this._order=b;this._updateQuaternion();return this},setFromQuaternion:function(a,b,c){function e(a){return Math.min(Math.max(a,-1),1)}var d=a.x*a.x,g=
a.y*a.y,f=a.z*a.z,h=a.w*a.w;b=b||this._order;"XYZ"===b?(this._x=Math.atan2(2*(a.x*a.w-a.y*a.z),h-d-g+f),this._y=Math.asin(e(2*(a.x*a.z+a.y*a.w))),this._z=Math.atan2(2*(a.z*a.w-a.x*a.y),h+d-g-f)):"YXZ"===b?(this._x=Math.asin(e(2*(a.x*a.w-a.y*a.z))),this._y=Math.atan2(2*(a.x*a.z+a.y*a.w),h-d-g+f),this._z=Math.atan2(2*(a.x*a.y+a.z*a.w),h-d+g-f)):"ZXY"===b?(this._x=Math.asin(e(2*(a.x*a.w+a.y*a.z))),this._y=Math.atan2(2*(a.y*a.w-a.z*a.x),h-d-g+f),this._z=Math.atan2(2*(a.z*a.w-a.x*a.y),h-d+g-f)):"ZYX"===
b?(this._x=Math.atan2(2*(a.x*a.w+a.z*a.y),h-d-g+f),this._y=Math.asin(e(2*(a.y*a.w-a.x*a.z))),this._z=Math.atan2(2*(a.x*a.y+a.z*a.w),h+d-g-f)):"YZX"===b?(this._x=Math.atan2(2*(a.x*a.w-a.z*a.y),h-d+g-f),this._y=Math.atan2(2*(a.y*a.w-a.x*a.z),h+d-g-f),this._z=Math.asin(e(2*(a.x*a.y+a.z*a.w)))):"XZY"===b?(this._x=Math.atan2(2*(a.x*a.w+a.y*a.z),h-d+g-f),this._y=Math.atan2(2*(a.x*a.z+a.y*a.w),h+d-g-f),this._z=Math.asin(e(2*(a.z*a.w-a.x*a.y)))):console.warn("WARNING: Euler.setFromQuaternion() given unsupported order: "+
b);this._order=b;!1!==c&&this._updateQuaternion();return this},reorder:function(){var a=new THREE.Quaternion;return function(b){a.setFromEuler(this);this.setFromQuaternion(a,b)}}(),fromArray:function(a){this._x=a[0];this._y=a[1];this._z=a[2];void 0!==a[3]&&(this._order=a[3]);this._updateQuaternion();return this},toArray:function(){return[this._x,this._y,this._z,this._order]},equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order},clone:function(){return new THREE.Euler(this._x,
this._y,this._z,this._order)}};THREE.Line3=function(a,b){this.start=void 0!==a?a:new THREE.Vector3;this.end=void 0!==b?b:new THREE.Vector3};
THREE.Line3.prototype={constructor:THREE.Line3,set:function(a,b){this.start.copy(a);this.end.copy(b);return this},copy:function(a){this.start.copy(a.start);this.end.copy(a.end);return this},center:function(a){return(a||new THREE.Vector3).addVectors(this.start,this.end).multiplyScalar(0.5)},delta:function(a){return(a||new THREE.Vector3).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(a,
b){var c=b||new THREE.Vector3;return this.delta(c).multiplyScalar(a).add(this.start)},closestPointToPointParameter:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c,e){a.subVectors(c,this.start);b.subVectors(this.end,this.start);var d=b.dot(b),d=b.dot(a)/d;e&&(d=THREE.Math.clamp(d,0,1));return d}}(),closestPointToPoint:function(a,b,c){a=this.closestPointToPointParameter(a,b);c=c||new THREE.Vector3;return this.delta(c).multiplyScalar(a).add(this.start)},applyMatrix4:function(a){this.start.applyMatrix4(a);
this.end.applyMatrix4(a);return this},equals:function(a){return a.start.equals(this.start)&&a.end.equals(this.end)},clone:function(){return(new THREE.Line3).copy(this)}};THREE.Box2=function(a,b){this.min=void 0!==a?a:new THREE.Vector2(Infinity,Infinity);this.max=void 0!==b?b:new THREE.Vector2(-Infinity,-Infinity)};
THREE.Box2.prototype={constructor:THREE.Box2,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setFromPoints:function(a){if(0<a.length){var b=a[0];this.min.copy(b);this.max.copy(b);for(var c=1,e=a.length;c<e;c++)b=a[c],b.x<this.min.x?this.min.x=b.x:b.x>this.max.x&&(this.max.x=b.x),b.y<this.min.y?this.min.y=b.y:b.y>this.max.y&&(this.max.y=b.y)}else this.makeEmpty();return this},setFromCenterAndSize:function(){var a=new THREE.Vector2;return function(b,c){var e=a.copy(c).multiplyScalar(0.5);
this.min.copy(b).sub(e);this.max.copy(b).add(e);return this}}(),copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this},makeEmpty:function(){this.min.x=this.min.y=Infinity;this.max.x=this.max.y=-Infinity;return this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(a){return(a||new THREE.Vector2).addVectors(this.min,this.max).multiplyScalar(0.5)},size:function(a){return(a||new THREE.Vector2).subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);
this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);this.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);this.max.addScalar(a);return this},containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y?!0:!1},getParameter:function(a,b){return(b||new THREE.Vector2).set((a.x-this.min.x)/(this.max.x-this.min.x),
(a.y-this.min.y)/(this.max.y-this.min.y))},isIntersectionBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y?!1:!0},clampPoint:function(a,b){return(b||new THREE.Vector2).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new THREE.Vector2;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);return this},union:function(a){this.min.min(a.min);this.max.max(a.max);
return this},translate:function(a){this.min.add(a);this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)},clone:function(){return(new THREE.Box2).copy(this)}};THREE.Box3=function(a,b){this.min=void 0!==a?a:new THREE.Vector3(Infinity,Infinity,Infinity);this.max=void 0!==b?b:new THREE.Vector3(-Infinity,-Infinity,-Infinity)};
THREE.Box3.prototype={constructor:THREE.Box3,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},addPoint:function(a){a.x<this.min.x?this.min.x=a.x:a.x>this.max.x&&(this.max.x=a.x);a.y<this.min.y?this.min.y=a.y:a.y>this.max.y&&(this.max.y=a.y);a.z<this.min.z?this.min.z=a.z:a.z>this.max.z&&(this.max.z=a.z)},setFromPoints:function(a){if(0<a.length){var b=a[0];this.min.copy(b);this.max.copy(b);for(var b=1,c=a.length;b<c;b++)this.addPoint(a[b])}else this.makeEmpty();return this},setFromCenterAndSize:function(){var a=
new THREE.Vector3;return function(b,c){var e=a.copy(c).multiplyScalar(0.5);this.min.copy(b).sub(e);this.max.copy(b).add(e);return this}}(),setFromObject:function(){var a=new THREE.Vector3;return function(b){var c=this;b.updateMatrixWorld(!0);this.makeEmpty();b.traverse(function(b){if(void 0!==b.geometry&&void 0!==b.geometry.vertices)for(var d=b.geometry.vertices,g=0,f=d.length;g<f;g++)a.copy(d[g]),a.applyMatrix4(b.matrixWorld),c.expandByPoint(a)});return this}}(),copy:function(a){this.min.copy(a.min);
this.max.copy(a.max);return this},makeEmpty:function(){this.min.x=this.min.y=this.min.z=Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(a){return(a||new THREE.Vector3).addVectors(this.min,this.max).multiplyScalar(0.5)},size:function(a){return(a||new THREE.Vector3).subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);
this.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);this.max.addScalar(a);return this},containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y||a.z<this.min.z||a.z>this.max.z?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z?!0:!1},getParameter:function(a,b){return(b||new THREE.Vector3).set((a.x-this.min.x)/(this.max.x-
this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))},isIntersectionBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<this.min.z||a.min.z>this.max.z?!1:!0},clampPoint:function(a,b){return(b||new THREE.Vector3).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new THREE.Vector3;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),getBoundingSphere:function(){var a=
new THREE.Vector3;return function(b){b=b||new THREE.Sphere;b.center=this.center();b.radius=0.5*this.size(a).length();return b}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);return this},union:function(a){this.min.min(a.min);this.max.max(a.max);return this},applyMatrix4:function(){var a=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];return function(b){a[0].set(this.min.x,this.min.y,
this.min.z).applyMatrix4(b);a[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(b);a[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(b);a[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(b);a[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(b);a[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(b);a[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(b);a[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(b);this.makeEmpty();this.setFromPoints(a);return this}}(),getTransformedBox:function(a,
b){function c(a,b,d){var c=g[0]*a+g[4]*b+g[8]*d+g[12],e=g[1]*a+g[5]*b+g[9]*d+g[13];a=g[2]*a+g[6]*b+g[10]*d+g[14];c<f&&(f=c);e<h&&(h=e);a<k&&(k=a);c>l&&(l=c);e>n&&(n=e);a>m&&(m=a)}var e=this.min,d=this.max,g=a.elements,f=Infinity,h=Infinity,k=Infinity,l=-Infinity,n=-Infinity,m=-Infinity;c(e.x,e.y,e.z);c(e.x,e.y,d.z);c(e.x,d.y,e.z);c(e.x,d.y,d.z);c(d.x,e.y,e.z);c(d.x,e.y,d.z);c(d.x,d.y,e.z);c(d.x,d.y,d.z);b.min.set(f,h,k);b.max.set(l,n,m)},translate:function(a){this.min.add(a);this.max.add(a);return this},
equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)},clone:function(){return(new THREE.Box3).copy(this)}};THREE.Matrix3=function(a,b,c,e,d,g,f,h,k){this.elements=new Float32Array(9);this.set(void 0!==a?a:1,b||0,c||0,e||0,void 0!==d?d:1,g||0,f||0,h||0,void 0!==k?k:1)};
THREE.Matrix3.prototype={constructor:THREE.Matrix3,set:function(a,b,c,e,d,g,f,h,k){var l=this.elements;l[0]=a;l[3]=b;l[6]=c;l[1]=e;l[4]=d;l[7]=g;l[2]=f;l[5]=h;l[8]=k;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},copy:function(a){a=a.elements;this.set(a[0],a[3],a[6],a[1],a[4],a[7],a[2],a[5],a[8]);return this},multiplyVector3:function(a){console.warn("DEPRECATED: Matrix3's .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");return a.applyMatrix3(this)},
multiplyVector3Array:function(){var a=new THREE.Vector3;return function(b){for(var c=0,e=b.length;c<e;c+=3)a.x=b[c],a.y=b[c+1],a.z=b[c+2],a.applyMatrix3(this),b[c]=a.x,b[c+1]=a.y,b[c+2]=a.z;return b}}(),multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[3]*=a;b[6]*=a;b[1]*=a;b[4]*=a;b[7]*=a;b[2]*=a;b[5]*=a;b[8]*=a;return this},determinant:function(){var a=this.elements,b=a[0],c=a[1],e=a[2],d=a[3],g=a[4],f=a[5],h=a[6],k=a[7],a=a[8];return b*g*a-b*f*k-c*d*a+c*f*h+e*d*k-e*g*h},getInverse:function(a,
b){var c=a.elements,e=this.elements;e[0]=c[10]*c[5]-c[6]*c[9];e[1]=-c[10]*c[1]+c[2]*c[9];e[2]=c[6]*c[1]-c[2]*c[5];e[3]=-c[10]*c[4]+c[6]*c[8];e[4]=c[10]*c[0]-c[2]*c[8];e[5]=-c[6]*c[0]+c[2]*c[4];e[6]=c[9]*c[4]-c[5]*c[8];e[7]=-c[9]*c[0]+c[1]*c[8];e[8]=c[5]*c[0]-c[1]*c[4];c=c[0]*e[0]+c[1]*e[3]+c[2]*e[6];if(0===c){if(b)throw Error("Matrix3.getInverse(): can't invert matrix, determinant is 0");console.warn("Matrix3.getInverse(): can't invert matrix, determinant is 0");this.identity();return this}this.multiplyScalar(1/
c);return this},transpose:function(){var a,b=this.elements;a=b[1];b[1]=b[3];b[3]=a;a=b[2];b[2]=b[6];b[6]=a;a=b[5];b[5]=b[7];b[7]=a;return this},getNormalMatrix:function(a){this.getInverse(a).transpose();return this},transposeIntoArray:function(a){var b=this.elements;a[0]=b[0];a[1]=b[3];a[2]=b[6];a[3]=b[1];a[4]=b[4];a[5]=b[7];a[6]=b[2];a[7]=b[5];a[8]=b[8];return this},fromArray:function(a){this.elements.set(a);return this},toArray:function(){var a=this.elements;return[a[0],a[1],a[2],a[3],a[4],a[5],
a[6],a[7],a[8]]},clone:function(){var a=this.elements;return new THREE.Matrix3(a[0],a[3],a[6],a[1],a[4],a[7],a[2],a[5],a[8])}};THREE.Matrix4=function(a,b,c,e,d,g,f,h,k,l,n,m,p,q,s,r){var u=this.elements=new Float32Array(16);u[0]=void 0!==a?a:1;u[4]=b||0;u[8]=c||0;u[12]=e||0;u[1]=d||0;u[5]=void 0!==g?g:1;u[9]=f||0;u[13]=h||0;u[2]=k||0;u[6]=l||0;u[10]=void 0!==n?n:1;u[14]=m||0;u[3]=p||0;u[7]=q||0;u[11]=s||0;u[15]=void 0!==r?r:1};
THREE.Matrix4.prototype={constructor:THREE.Matrix4,set:function(a,b,c,e,d,g,f,h,k,l,n,m,p,q,s,r){var u=this.elements;u[0]=a;u[4]=b;u[8]=c;u[12]=e;u[1]=d;u[5]=g;u[9]=f;u[13]=h;u[2]=k;u[6]=l;u[10]=n;u[14]=m;u[3]=p;u[7]=q;u[11]=s;u[15]=r;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},copy:function(a){this.elements.set(a.elements);return this},extractPosition:function(a){console.warn("DEPRECATED: Matrix4's .extractPosition() has been renamed to .copyPosition().");
return this.copyPosition(a)},copyPosition:function(a){var b=this.elements;a=a.elements;b[12]=a[12];b[13]=a[13];b[14]=a[14];return this},extractRotation:function(){var a=new THREE.Vector3;return function(b){var c=this.elements;b=b.elements;var e=1/a.set(b[0],b[1],b[2]).length(),d=1/a.set(b[4],b[5],b[6]).length(),g=1/a.set(b[8],b[9],b[10]).length();c[0]=b[0]*e;c[1]=b[1]*e;c[2]=b[2]*e;c[4]=b[4]*d;c[5]=b[5]*d;c[6]=b[6]*d;c[8]=b[8]*g;c[9]=b[9]*g;c[10]=b[10]*g;return this}}(),makeRotationFromEuler:function(a){!1===
a instanceof THREE.Euler&&console.error("ERROR: Matrix's .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.  Please update your code.");var b=this.elements,c=a.x,e=a.y,d=a.z,g=Math.cos(c),c=Math.sin(c),f=Math.cos(e),e=Math.sin(e),h=Math.cos(d),d=Math.sin(d);if("XYZ"===a.order){a=g*h;var k=g*d,l=c*h,n=c*d;b[0]=f*h;b[4]=-f*d;b[8]=e;b[1]=k+l*e;b[5]=a-n*e;b[9]=-c*f;b[2]=n-a*e;b[6]=l+k*e;b[10]=g*f}else"YXZ"===a.order?(a=f*h,k=f*d,l=e*h,n=e*d,b[0]=a+n*c,b[4]=l*c-k,b[8]=
g*e,b[1]=g*d,b[5]=g*h,b[9]=-c,b[2]=k*c-l,b[6]=n+a*c,b[10]=g*f):"ZXY"===a.order?(a=f*h,k=f*d,l=e*h,n=e*d,b[0]=a-n*c,b[4]=-g*d,b[8]=l+k*c,b[1]=k+l*c,b[5]=g*h,b[9]=n-a*c,b[2]=-g*e,b[6]=c,b[10]=g*f):"ZYX"===a.order?(a=g*h,k=g*d,l=c*h,n=c*d,b[0]=f*h,b[4]=l*e-k,b[8]=a*e+n,b[1]=f*d,b[5]=n*e+a,b[9]=k*e-l,b[2]=-e,b[6]=c*f,b[10]=g*f):"YZX"===a.order?(a=g*f,k=g*e,l=c*f,n=c*e,b[0]=f*h,b[4]=n-a*d,b[8]=l*d+k,b[1]=d,b[5]=g*h,b[9]=-c*h,b[2]=-e*h,b[6]=k*d+l,b[10]=a-n*d):"XZY"===a.order&&(a=g*f,k=g*e,l=c*f,n=c*e,b[0]=
f*h,b[4]=-d,b[8]=e*h,b[1]=a*d+n,b[5]=g*h,b[9]=k*d-l,b[2]=l*d-k,b[6]=c*h,b[10]=n*d+a);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},setRotationFromQuaternion:function(a){console.warn("DEPRECATED: Matrix4's .setRotationFromQuaternion() has been deprecated in favor of makeRotationFromQuaternion.  Please update your code.");return this.makeRotationFromQuaternion(a)},makeRotationFromQuaternion:function(a){var b=this.elements,c=a.x,e=a.y,d=a.z,g=a.w,f=c+c,h=e+e,k=d+d;a=c*f;var l=c*
h,c=c*k,n=e*h,e=e*k,d=d*k,f=g*f,h=g*h,g=g*k;b[0]=1-(n+d);b[4]=l-g;b[8]=c+h;b[1]=l+g;b[5]=1-(a+d);b[9]=e-f;b[2]=c-h;b[6]=e+f;b[10]=1-(a+n);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},lookAt:function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3;return function(e,d,g){var f=this.elements;c.subVectors(e,d).normalize();0===c.length()&&(c.z=1);a.crossVectors(g,c).normalize();0===a.length()&&(c.x+=1E-4,a.crossVectors(g,c).normalize());b.crossVectors(c,a);f[0]=
a.x;f[4]=b.x;f[8]=c.x;f[1]=a.y;f[5]=b.y;f[9]=c.y;f[2]=a.z;f[6]=b.z;f[10]=c.z;return this}}(),multiply:function(a,b){return void 0!==b?(console.warn("DEPRECATED: Matrix4's .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(a,b)):this.multiplyMatrices(this,a)},multiplyMatrices:function(a,b){var c=a.elements,e=b.elements,d=this.elements,g=c[0],f=c[4],h=c[8],k=c[12],l=c[1],n=c[5],m=c[9],p=c[13],q=c[2],s=c[6],r=c[10],u=c[14],w=c[3],A=c[7],v=c[11],
c=c[15],B=e[0],C=e[4],N=e[8],G=e[12],I=e[1],H=e[5],F=e[9],P=e[13],z=e[2],K=e[6],E=e[10],S=e[14],D=e[3],U=e[7],J=e[11],e=e[15];d[0]=g*B+f*I+h*z+k*D;d[4]=g*C+f*H+h*K+k*U;d[8]=g*N+f*F+h*E+k*J;d[12]=g*G+f*P+h*S+k*e;d[1]=l*B+n*I+m*z+p*D;d[5]=l*C+n*H+m*K+p*U;d[9]=l*N+n*F+m*E+p*J;d[13]=l*G+n*P+m*S+p*e;d[2]=q*B+s*I+r*z+u*D;d[6]=q*C+s*H+r*K+u*U;d[10]=q*N+s*F+r*E+u*J;d[14]=q*G+s*P+r*S+u*e;d[3]=w*B+A*I+v*z+c*D;d[7]=w*C+A*H+v*K+c*U;d[11]=w*N+A*F+v*E+c*J;d[15]=w*G+A*P+v*S+c*e;return this},multiplyToArray:function(a,
b,c){var e=this.elements;this.multiplyMatrices(a,b);c[0]=e[0];c[1]=e[1];c[2]=e[2];c[3]=e[3];c[4]=e[4];c[5]=e[5];c[6]=e[6];c[7]=e[7];c[8]=e[8];c[9]=e[9];c[10]=e[10];c[11]=e[11];c[12]=e[12];c[13]=e[13];c[14]=e[14];c[15]=e[15];return this},multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return this},multiplyVector3:function(a){console.warn("DEPRECATED: Matrix4's .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead.");
return a.applyProjection(this)},multiplyVector4:function(a){console.warn("DEPRECATED: Matrix4's .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},multiplyVector3Array:function(){var a=new THREE.Vector3;return function(b){for(var c=0,e=b.length;c<e;c+=3)a.x=b[c],a.y=b[c+1],a.z=b[c+2],a.applyProjection(this),b[c]=a.x,b[c+1]=a.y,b[c+2]=a.z;return b}}(),rotateAxis:function(a){console.warn("DEPRECATED: Matrix4's .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");
a.transformDirection(this)},crossVector:function(a){console.warn("DEPRECATED: Matrix4's .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},determinant:function(){var a=this.elements,b=a[0],c=a[4],e=a[8],d=a[12],g=a[1],f=a[5],h=a[9],k=a[13],l=a[2],n=a[6],m=a[10],p=a[14];return a[3]*(+d*h*n-e*k*n-d*f*m+c*k*m+e*f*p-c*h*p)+a[7]*(+b*h*p-b*k*m+d*g*m-e*g*p+e*k*l-d*h*l)+a[11]*(+b*k*n-b*f*p-d*g*n+c*g*p+d*f*l-c*k*l)+a[15]*(-e*f*l-b*h*n+b*f*m+e*g*n-c*g*
m+c*h*l)},transpose:function(){var a=this.elements,b;b=a[1];a[1]=a[4];a[4]=b;b=a[2];a[2]=a[8];a[8]=b;b=a[6];a[6]=a[9];a[9]=b;b=a[3];a[3]=a[12];a[12]=b;b=a[7];a[7]=a[13];a[13]=b;b=a[11];a[11]=a[14];a[14]=b;return this},flattenToArray:function(a){var b=this.elements;a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a},flattenToArrayOffset:function(a,b){var c=this.elements;
a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];a[b+9]=c[9];a[b+10]=c[10];a[b+11]=c[11];a[b+12]=c[12];a[b+13]=c[13];a[b+14]=c[14];a[b+15]=c[15];return a},getPosition:function(){var a=new THREE.Vector3;return function(){console.warn("DEPRECATED: Matrix4's .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");var b=this.elements;return a.set(b[12],b[13],b[14])}}(),setPosition:function(a){var b=this.elements;
b[12]=a.x;b[13]=a.y;b[14]=a.z;return this},getInverse:function(a,b){var c=this.elements,e=a.elements,d=e[0],g=e[4],f=e[8],h=e[12],k=e[1],l=e[5],n=e[9],m=e[13],p=e[2],q=e[6],s=e[10],r=e[14],u=e[3],w=e[7],A=e[11],e=e[15];c[0]=n*r*w-m*s*w+m*q*A-l*r*A-n*q*e+l*s*e;c[4]=h*s*w-f*r*w-h*q*A+g*r*A+f*q*e-g*s*e;c[8]=f*m*w-h*n*w+h*l*A-g*m*A-f*l*e+g*n*e;c[12]=h*n*q-f*m*q-h*l*s+g*m*s+f*l*r-g*n*r;c[1]=m*s*u-n*r*u-m*p*A+k*r*A+n*p*e-k*s*e;c[5]=f*r*u-h*s*u+h*p*A-d*r*A-f*p*e+d*s*e;c[9]=h*n*u-f*m*u-h*k*A+d*m*A+f*k*e-
d*n*e;c[13]=f*m*p-h*n*p+h*k*s-d*m*s-f*k*r+d*n*r;c[2]=l*r*u-m*q*u+m*p*w-k*r*w-l*p*e+k*q*e;c[6]=h*q*u-g*r*u-h*p*w+d*r*w+g*p*e-d*q*e;c[10]=g*m*u-h*l*u+h*k*w-d*m*w-g*k*e+d*l*e;c[14]=h*l*p-g*m*p-h*k*q+d*m*q+g*k*r-d*l*r;c[3]=n*q*u-l*s*u-n*p*w+k*s*w+l*p*A-k*q*A;c[7]=g*s*u-f*q*u+f*p*w-d*s*w-g*p*A+d*q*A;c[11]=f*l*u-g*n*u-f*k*w+d*n*w+g*k*A-d*l*A;c[15]=g*n*p-f*l*p+f*k*q-d*n*q-g*k*s+d*l*s;c=d*c[0]+k*c[4]+p*c[8]+u*c[12];if(0==c){if(b)throw Error("Matrix4.getInverse(): can't invert matrix, determinant is 0");console.warn("Matrix4.getInverse(): can't invert matrix, determinant is 0");
this.identity();return this}this.multiplyScalar(1/c);return this},translate:function(a){console.warn("DEPRECATED: Matrix4's .translate() has been removed.")},rotateX:function(a){console.warn("DEPRECATED: Matrix4's .rotateX() has been removed.")},rotateY:function(a){console.warn("DEPRECATED: Matrix4's .rotateY() has been removed.")},rotateZ:function(a){console.warn("DEPRECATED: Matrix4's .rotateZ() has been removed.")},rotateByAxis:function(a,b){console.warn("DEPRECATED: Matrix4's .rotateByAxis() has been removed.")},
scale:function(a){var b=this.elements,c=a.x,e=a.y;a=a.z;b[0]*=c;b[4]*=e;b[8]*=a;b[1]*=c;b[5]*=e;b[9]*=a;b[2]*=c;b[6]*=e;b[10]*=a;b[3]*=c;b[7]*=e;b[11]*=a;return this},getMaxScaleOnAxis:function(){var a=this.elements;return Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],Math.max(a[4]*a[4]+a[5]*a[5]+a[6]*a[6],a[8]*a[8]+a[9]*a[9]+a[10]*a[10])))},makeTranslation:function(a,b,c){this.set(1,0,0,a,0,1,0,b,0,0,1,c,0,0,0,1);return this},makeRotationX:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(1,
0,0,0,0,b,-a,0,0,a,b,0,0,0,0,1);return this},makeRotationY:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(b,0,a,0,0,1,0,0,-a,0,b,0,0,0,0,1);return this},makeRotationZ:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(b,-a,0,0,a,b,0,0,0,0,1,0,0,0,0,1);return this},makeRotationAxis:function(a,b){var c=Math.cos(b),e=Math.sin(b),d=1-c,g=a.x,f=a.y,h=a.z,k=d*g,l=d*f;this.set(k*g+c,k*f-e*h,k*h+e*f,0,k*f+e*h,l*f+c,l*h-e*g,0,k*h-e*f,l*h+e*g,d*h*h+c,0,0,0,0,1);return this},makeScale:function(a,b,c){this.set(a,
0,0,0,0,b,0,0,0,0,c,0,0,0,0,1);return this},compose:function(a,b,c){this.makeRotationFromQuaternion(b);this.scale(c);this.setPosition(a);return this},decompose:function(){var a=new THREE.Vector3,b=new THREE.Matrix4;return function(c,e,d){var g=this.elements,f=a.set(g[0],g[1],g[2]).length(),h=a.set(g[4],g[5],g[6]).length(),k=a.set(g[8],g[9],g[10]).length();0>this.determinant()&&(f=-f);c.x=g[12];c.y=g[13];c.z=g[14];b.elements.set(this.elements);c=1/f;var g=1/h,l=1/k;b.elements[0]*=c;b.elements[1]*=
c;b.elements[2]*=c;b.elements[4]*=g;b.elements[5]*=g;b.elements[6]*=g;b.elements[8]*=l;b.elements[9]*=l;b.elements[10]*=l;e.setFromRotationMatrix(b);d.x=f;d.y=h;d.z=k;return this}}(),makeFrustum:function(a,b,c,e,d,g){var f=this.elements;f[0]=2*d/(b-a);f[4]=0;f[8]=(b+a)/(b-a);f[12]=0;f[1]=0;f[5]=2*d/(e-c);f[9]=(e+c)/(e-c);f[13]=0;f[2]=0;f[6]=0;f[10]=-(g+d)/(g-d);f[14]=-2*g*d/(g-d);f[3]=0;f[7]=0;f[11]=-1;f[15]=0;return this},makePerspective:function(a,b,c,e){a=c*Math.tan(THREE.Math.degToRad(0.5*a));
var d=-a;return this.makeFrustum(d*b,a*b,d,a,c,e)},makeOrthographic:function(a,b,c,e,d,g){var f=this.elements,h=b-a,k=c-e,l=g-d;f[0]=2/h;f[4]=0;f[8]=0;f[12]=-((b+a)/h);f[1]=0;f[5]=2/k;f[9]=0;f[13]=-((c+e)/k);f[2]=0;f[6]=0;f[10]=-2/l;f[14]=-((g+d)/l);f[3]=0;f[7]=0;f[11]=0;f[15]=1;return this},fromArray:function(a){this.elements.set(a);return this},toArray:function(){var a=this.elements;return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15]]},clone:function(){var a=
this.elements;return new THREE.Matrix4(a[0],a[4],a[8],a[12],a[1],a[5],a[9],a[13],a[2],a[6],a[10],a[14],a[3],a[7],a[11],a[15])}};THREE.Ray=function(a,b){this.origin=void 0!==a?a:new THREE.Vector3;this.direction=void 0!==b?b:new THREE.Vector3};
THREE.Ray.prototype={constructor:THREE.Ray,set:function(a,b){this.origin.copy(a);this.direction.copy(b);return this},copy:function(a){this.origin.copy(a.origin);this.direction.copy(a.direction);return this},at:function(a,b){return(b||new THREE.Vector3).copy(this.direction).multiplyScalar(a).add(this.origin)},recast:function(){var a=new THREE.Vector3;return function(b){this.origin.copy(this.at(b,a));return this}}(),closestPointToPoint:function(a,b){var c=b||new THREE.Vector3;c.subVectors(a,this.origin);
var e=c.dot(this.direction);return 0>e?c.copy(this.origin):c.copy(this.direction).multiplyScalar(e).add(this.origin)},distanceToPoint:function(){var a=new THREE.Vector3;return function(b){var c=a.subVectors(b,this.origin).dot(this.direction);if(0>c)return this.origin.distanceTo(b);a.copy(this.direction).multiplyScalar(c).add(this.origin);return a.distanceTo(b)}}(),distanceSqToSegment:function(a,b,c,e){var d=a.clone().add(b).multiplyScalar(0.5),g=b.clone().sub(a).normalize(),f=0.5*a.distanceTo(b),
h=this.origin.clone().sub(d);a=-this.direction.dot(g);b=h.dot(this.direction);var k=-h.dot(g),l=h.lengthSq(),n=Math.abs(1-a*a),m,p;0<=n?(h=a*k-b,m=a*b-k,p=f*n,0<=h?m>=-p?m<=p?(f=1/n,h*=f,m*=f,a=h*(h+a*m+2*b)+m*(a*h+m+2*k)+l):(m=f,h=Math.max(0,-(a*m+b)),a=-h*h+m*(m+2*k)+l):(m=-f,h=Math.max(0,-(a*m+b)),a=-h*h+m*(m+2*k)+l):m<=-p?(h=Math.max(0,-(-a*f+b)),m=0<h?-f:Math.min(Math.max(-f,-k),f),a=-h*h+m*(m+2*k)+l):m<=p?(h=0,m=Math.min(Math.max(-f,-k),f),a=m*(m+2*k)+l):(h=Math.max(0,-(a*f+b)),m=0<h?f:Math.min(Math.max(-f,
-k),f),a=-h*h+m*(m+2*k)+l)):(m=0<a?-f:f,h=Math.max(0,-(a*m+b)),a=-h*h+m*(m+2*k)+l);c&&c.copy(this.direction.clone().multiplyScalar(h).add(this.origin));e&&e.copy(g.clone().multiplyScalar(m).add(d));return a},isIntersectionSphere:function(a){return this.distanceToPoint(a.center)<=a.radius},isIntersectionPlane:function(a){var b=a.distanceToPoint(this.origin);return 0===b||0>a.normal.dot(this.direction)*b?!0:!1},distanceToPlane:function(a){var b=a.normal.dot(this.direction);if(0==b)return 0==a.distanceToPoint(this.origin)?
0:null;a=-(this.origin.dot(a.normal)+a.constant)/b;return 0<=a?a:null},intersectPlane:function(a,b){var c=this.distanceToPlane(a);return null===c?null:this.at(c,b)},isIntersectionBox:function(){var a=new THREE.Vector3;return function(b){return null!==this.intersectBox(b,a)}}(),intersectBox:function(a,b){var c,e,d,g,f;e=1/this.direction.x;g=1/this.direction.y;f=1/this.direction.z;var h=this.origin;0<=e?(c=(a.min.x-h.x)*e,e*=a.max.x-h.x):(c=(a.max.x-h.x)*e,e*=a.min.x-h.x);0<=g?(d=(a.min.y-h.y)*g,g*=
a.max.y-h.y):(d=(a.max.y-h.y)*g,g*=a.min.y-h.y);if(c>g||d>e)return null;if(d>c||c!==c)c=d;if(g<e||e!==e)e=g;0<=f?(d=(a.min.z-h.z)*f,f*=a.max.z-h.z):(d=(a.max.z-h.z)*f,f*=a.min.z-h.z);if(c>f||d>e)return null;if(d>c||c!==c)c=d;if(f<e||e!==e)e=f;return 0>e?null:this.at(0<=c?c:e,b)},intersectTriangle:function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3,e=new THREE.Vector3;return function(d,g,f,h,k){b.subVectors(g,d);c.subVectors(f,d);e.crossVectors(b,c);g=this.direction.dot(e);if(0<
g){if(h)return null;h=1}else if(0>g)h=-1,g=-g;else return null;a.subVectors(this.origin,d);d=h*this.direction.dot(c.crossVectors(a,c));if(0>d)return null;f=h*this.direction.dot(b.cross(a));if(0>f||d+f>g)return null;d=-h*a.dot(e);return 0>d?null:this.at(d/g,k)}}(),applyMatrix4:function(a){this.direction.add(this.origin).applyMatrix4(a);this.origin.applyMatrix4(a);this.direction.sub(this.origin);this.direction.normalize();return this},equals:function(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)},
clone:function(){return(new THREE.Ray).copy(this)}};THREE.Sphere=function(a,b){this.center=void 0!==a?a:new THREE.Vector3;this.radius=void 0!==b?b:0};
THREE.Sphere.prototype={constructor:THREE.Sphere,set:function(a,b){this.center.copy(a);this.radius=b;return this},setFromPoints:function(){var a=new THREE.Box3;return function(b,c){var e=this.center;void 0!==c?e.copy(c):a.setFromPoints(b).center(e);for(var d=0,g=0,f=b.length;g<f;g++)d=Math.max(d,e.distanceToSquared(b[g]));this.radius=Math.sqrt(d);return this}}(),copy:function(a){this.center.copy(a.center);this.radius=a.radius;return this},empty:function(){return 0>=this.radius},containsPoint:function(a){return a.distanceToSquared(this.center)<=
this.radius*this.radius},distanceToPoint:function(a){return a.distanceTo(this.center)-this.radius},intersectsSphere:function(a){var b=this.radius+a.radius;return a.center.distanceToSquared(this.center)<=b*b},clampPoint:function(a,b){var c=this.center.distanceToSquared(a),e=b||new THREE.Vector3;e.copy(a);c>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center));return e},getBoundingBox:function(a){a=a||new THREE.Box3;a.set(this.center,this.center);a.expandByScalar(this.radius);
return a},applyMatrix4:function(a){this.center.applyMatrix4(a);this.radius*=a.getMaxScaleOnAxis();return this},translate:function(a){this.center.add(a);return this},equals:function(a){return a.center.equals(this.center)&&a.radius===this.radius},clone:function(){return(new THREE.Sphere).copy(this)}};
THREE.Frustum=function(a,b,c,e,d,g){this.planes=[void 0!==a?a:new THREE.Plane,void 0!==b?b:new THREE.Plane,void 0!==c?c:new THREE.Plane,void 0!==e?e:new THREE.Plane,void 0!==d?d:new THREE.Plane,void 0!==g?g:new THREE.Plane]};
THREE.Frustum.prototype={constructor:THREE.Frustum,set:function(a,b,c,e,d,g){var f=this.planes;f[0].copy(a);f[1].copy(b);f[2].copy(c);f[3].copy(e);f[4].copy(d);f[5].copy(g);return this},copy:function(a){for(var b=this.planes,c=0;6>c;c++)b[c].copy(a.planes[c]);return this},setFromMatrix:function(a){var b=this.planes,c=a.elements;a=c[0];var e=c[1],d=c[2],g=c[3],f=c[4],h=c[5],k=c[6],l=c[7],n=c[8],m=c[9],p=c[10],q=c[11],s=c[12],r=c[13],u=c[14],c=c[15];b[0].setComponents(g-a,l-f,q-n,c-s).normalize();b[1].setComponents(g+
a,l+f,q+n,c+s).normalize();b[2].setComponents(g+e,l+h,q+m,c+r).normalize();b[3].setComponents(g-e,l-h,q-m,c-r).normalize();b[4].setComponents(g-d,l-k,q-p,c-u).normalize();b[5].setComponents(g+d,l+k,q+p,c+u).normalize();return this},intersectsObject:function(){var a=new THREE.Sphere;return function(b){var c=b.geometry;null===c.boundingSphere&&c.computeBoundingSphere();a.copy(c.boundingSphere);a.applyMatrix4(b.matrixWorld);return this.intersectsSphere(a)}}(),intersectsSphere:function(a){var b=this.planes,
c=a.center;a=-a.radius;for(var e=0;6>e;e++)if(b[e].distanceToPoint(c)<a)return!1;return!0},intersectsBox:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c){for(var e=this.planes,d=0;6>d;d++){var g=e[d];a.x=0<g.normal.x?c.min.x:c.max.x;b.x=0<g.normal.x?c.max.x:c.min.x;a.y=0<g.normal.y?c.min.y:c.max.y;b.y=0<g.normal.y?c.max.y:c.min.y;a.z=0<g.normal.z?c.min.z:c.max.z;b.z=0<g.normal.z?c.max.z:c.min.z;var f=g.distanceToPoint(a),g=g.distanceToPoint(b);if(0>f&&0>g)return!1}return!0}}(),
containsPoint:function(a){for(var b=this.planes,c=0;6>c;c++)if(0>b[c].distanceToPoint(a))return!1;return!0},clone:function(){return(new THREE.Frustum).copy(this)}};THREE.Plane=function(a,b){this.normal=void 0!==a?a:new THREE.Vector3(1,0,0);this.constant=void 0!==b?b:0};
THREE.Plane.prototype={constructor:THREE.Plane,set:function(a,b){this.normal.copy(a);this.constant=b;return this},setComponents:function(a,b,c,e){this.normal.set(a,b,c);this.constant=e;return this},setFromNormalAndCoplanarPoint:function(a,b){this.normal.copy(a);this.constant=-b.dot(this.normal);return this},setFromCoplanarPoints:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c,e,d){e=a.subVectors(d,e).cross(b.subVectors(c,e)).normalize();this.setFromNormalAndCoplanarPoint(e,
c);return this}}(),copy:function(a){this.normal.copy(a.normal);this.constant=a.constant;return this},normalize:function(){var a=1/this.normal.length();this.normal.multiplyScalar(a);this.constant*=a;return this},negate:function(){this.constant*=-1;this.normal.negate();return this},distanceToPoint:function(a){return this.normal.dot(a)+this.constant},distanceToSphere:function(a){return this.distanceToPoint(a.center)-a.radius},projectPoint:function(a,b){return this.orthoPoint(a,b).sub(a).negate()},orthoPoint:function(a,
b){var c=this.distanceToPoint(a);return(b||new THREE.Vector3).copy(this.normal).multiplyScalar(c)},isIntersectionLine:function(a){var b=this.distanceToPoint(a.start);a=this.distanceToPoint(a.end);return 0>b&&0<a||0>a&&0<b},intersectLine:function(){var a=new THREE.Vector3;return function(b,c){var e=c||new THREE.Vector3,d=b.delta(a),g=this.normal.dot(d);if(0==g){if(0==this.distanceToPoint(b.start))return e.copy(b.start)}else return g=-(b.start.dot(this.normal)+this.constant)/g,0>g||1<g?void 0:e.copy(d).multiplyScalar(g).add(b.start)}}(),
coplanarPoint:function(a){return(a||new THREE.Vector3).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Matrix3;return function(e,d){var g=d||c.getNormalMatrix(e),g=a.copy(this.normal).applyMatrix3(g),f=this.coplanarPoint(b);f.applyMatrix4(e);this.setFromNormalAndCoplanarPoint(g,f);return this}}(),translate:function(a){this.constant-=a.dot(this.normal);return this},equals:function(a){return a.normal.equals(this.normal)&&
a.constant==this.constant},clone:function(){return(new THREE.Plane).copy(this)}};
THREE.Math={PI2:2*Math.PI,generateUUID:function(){var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),b=Array(36),c=0,e;return function(){for(var d=0;36>d;d++)8==d||13==d||18==d||23==d?b[d]="-":14==d?b[d]="4":(2>=c&&(c=33554432+16777216*Math.random()|0),e=c&15,c>>=4,b[d]=a[19==d?e&3|8:e]);return b.join("")}}(),clamp:function(a,b,c){return a<b?b:a>c?c:a},clampBottom:function(a,b){return a<b?b:a},mapLinear:function(a,b,c,e,d){return e+(a-b)*(d-e)/(c-b)},smoothstep:function(a,
b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*(3-2*a)},smootherstep:function(a,b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*a*(a*(6*a-15)+10)},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(a,b){return a+Math.floor(Math.random()*(b-a+1))},randFloat:function(a,b){return a+Math.random()*(b-a)},randFloatSpread:function(a){return a*(0.5-Math.random())},sign:function(a){return 0>a?-1:0<a?1:0},degToRad:function(){var a=Math.PI/
180;return function(b){return b*a}}(),radToDeg:function(){var a=180/Math.PI;return function(b){return b*a}}(),isPowerOfTwo:function(a){return 0===(a&a-1)&&0!==a}};
THREE.Spline=function(a){function b(a,b,f,d,c,h,e){a=0.5*(f-a);d=0.5*(d-b);return(2*(b-f)+a+d)*e+(-3*(b-f)-2*a-d)*h+a*c+b}this.points=a;var c=[],e={x:0,y:0,z:0},d,g,f,h,k,l,n,m,p;this.initFromArray=function(a){this.points=[];for(var b=0;b<a.length;b++)this.points[b]={x:a[b][0],y:a[b][1],z:a[b][2]}};this.getPoint=function(a){d=(this.points.length-1)*a;g=Math.floor(d);f=d-g;c[0]=0===g?g:g-1;c[1]=g;c[2]=g>this.points.length-2?this.points.length-1:g+1;c[3]=g>this.points.length-3?this.points.length-1:
g+2;l=this.points[c[0]];n=this.points[c[1]];m=this.points[c[2]];p=this.points[c[3]];h=f*f;k=f*h;e.x=b(l.x,n.x,m.x,p.x,f,h,k);e.y=b(l.y,n.y,m.y,p.y,f,h,k);e.z=b(l.z,n.z,m.z,p.z,f,h,k);return e};this.getControlPointsArray=function(){var a,b,f=this.points.length,d=[];for(a=0;a<f;a++)b=this.points[a],d[a]=[b.x,b.y,b.z];return d};this.getLength=function(a){var b,f,d,c=0,h=new THREE.Vector3,e=new THREE.Vector3,k=[],g=0;k[0]=0;a||(a=100);f=this.points.length*a;h.copy(this.points[0]);for(a=1;a<f;a++)b=a/
f,d=this.getPoint(b),e.copy(d),g+=e.distanceTo(h),h.copy(d),b*=this.points.length-1,b=Math.floor(b),b!=c&&(k[b]=g,c=b);k[k.length]=g;return{chunks:k,total:g}};this.reparametrizeByArcLength=function(a){var b,f,d,c,h,e,k=[],g=new THREE.Vector3,l=this.getLength();k.push(g.copy(this.points[0]).clone());for(b=1;b<this.points.length;b++){f=l.chunks[b]-l.chunks[b-1];e=Math.ceil(a*f/l.total);c=(b-1)/(this.points.length-1);h=b/(this.points.length-1);for(f=1;f<e-1;f++)d=c+1/e*f*(h-c),d=this.getPoint(d),k.push(g.copy(d).clone());
k.push(g.copy(this.points[b]).clone())}this.points=k}};THREE.Triangle=function(a,b,c){this.a=void 0!==a?a:new THREE.Vector3;this.b=void 0!==b?b:new THREE.Vector3;this.c=void 0!==c?c:new THREE.Vector3};THREE.Triangle.normal=function(){var a=new THREE.Vector3;return function(b,c,e,d){d=d||new THREE.Vector3;d.subVectors(e,c);a.subVectors(b,c);d.cross(a);b=d.lengthSq();return 0<b?d.multiplyScalar(1/Math.sqrt(b)):d.set(0,0,0)}}();
THREE.Triangle.barycoordFromPoint=function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3;return function(e,d,g,f,h){a.subVectors(f,d);b.subVectors(g,d);c.subVectors(e,d);e=a.dot(a);d=a.dot(b);g=a.dot(c);var k=b.dot(b);f=b.dot(c);var l=e*k-d*d;h=h||new THREE.Vector3;if(0==l)return h.set(-2,-1,-1);l=1/l;k=(k*g-d*f)*l;e=(e*f-d*g)*l;return h.set(1-k-e,e,k)}}();
THREE.Triangle.containsPoint=function(){var a=new THREE.Vector3;return function(b,c,e,d){b=THREE.Triangle.barycoordFromPoint(b,c,e,d,a);return 0<=b.x&&0<=b.y&&1>=b.x+b.y}}();
THREE.Triangle.prototype={constructor:THREE.Triangle,set:function(a,b,c){this.a.copy(a);this.b.copy(b);this.c.copy(c);return this},setFromPointsAndIndices:function(a,b,c,e){this.a.copy(a[b]);this.b.copy(a[c]);this.c.copy(a[e]);return this},copy:function(a){this.a.copy(a.a);this.b.copy(a.b);this.c.copy(a.c);return this},area:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(){a.subVectors(this.c,this.b);b.subVectors(this.a,this.b);return 0.5*a.cross(b).length()}}(),midpoint:function(a){return(a||
new THREE.Vector3).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(a){return THREE.Triangle.normal(this.a,this.b,this.c,a)},plane:function(a){return(a||new THREE.Plane).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(a,b){return THREE.Triangle.barycoordFromPoint(a,this.a,this.b,this.c,b)},containsPoint:function(a){return THREE.Triangle.containsPoint(a,this.a,this.b,this.c)},equals:function(a){return a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)},
clone:function(){return(new THREE.Triangle).copy(this)}};THREE.Vertex=function(a){console.warn("THREE.Vertex has been DEPRECATED. Use THREE.Vector3 instead.");return a};THREE.UV=function(a,b){console.warn("THREE.UV has been DEPRECATED. Use THREE.Vector2 instead.");return new THREE.Vector2(a,b)};THREE.Clock=function(a){this.autoStart=void 0!==a?a:!0;this.elapsedTime=this.oldTime=this.startTime=0;this.running=!1};
THREE.Clock.prototype={constructor:THREE.Clock,start:function(){this.oldTime=this.startTime=void 0!==self.performance&&void 0!==self.performance.now?self.performance.now():Date.now();this.running=!0},stop:function(){this.getElapsedTime();this.running=!1},getElapsedTime:function(){this.getDelta();return this.elapsedTime},getDelta:function(){var a=0;this.autoStart&&!this.running&&this.start();if(this.running){var b=void 0!==self.performance&&void 0!==self.performance.now?self.performance.now():Date.now(),
a=0.001*(b-this.oldTime);this.oldTime=b;this.elapsedTime+=a}return a}};THREE.EventDispatcher=function(){};
THREE.EventDispatcher.prototype={constructor:THREE.EventDispatcher,apply:function(a){a.addEventListener=THREE.EventDispatcher.prototype.addEventListener;a.hasEventListener=THREE.EventDispatcher.prototype.hasEventListener;a.removeEventListener=THREE.EventDispatcher.prototype.removeEventListener;a.dispatchEvent=THREE.EventDispatcher.prototype.dispatchEvent},addEventListener:function(a,b){void 0===this._listeners&&(this._listeners={});var c=this._listeners;void 0===c[a]&&(c[a]=[]);-1===c[a].indexOf(b)&&
c[a].push(b)},hasEventListener:function(a,b){if(void 0===this._listeners)return!1;var c=this._listeners;return void 0!==c[a]&&-1!==c[a].indexOf(b)?!0:!1},removeEventListener:function(a,b){if(void 0!==this._listeners){var c=this._listeners[a];if(void 0!==c){var e=c.indexOf(b);-1!==e&&c.splice(e,1)}}},dispatchEvent:function(){var a=[];return function(b){if(void 0!==this._listeners){var c=this._listeners[b.type];if(void 0!==c){b.target=this;for(var e=c.length,d=0;d<e;d++)a[d]=c[d];for(d=0;d<e;d++)a[d].call(this,
b)}}}}()};
(function(a){a.Raycaster=function(b,f,d,c){this.ray=new a.Ray(b,f);this.near=d||0;this.far=c||Infinity};var b=new a.Sphere,c=new a.Ray;new a.Plane;new a.Vector3;var e=new a.Vector3,d=new a.Matrix4,g=function(a,b){return a.distance-b.distance},f=new a.Vector3,h=new a.Vector3,k=new a.Vector3,l=function(g,n,q){if(g instanceof a.Sprite){e.setFromMatrixPosition(g.matrixWorld);var s=n.ray.distanceToPoint(e);if(s>g.scale.x)return q;q.push({distance:s,point:g.position,face:null,object:g})}else if(g instanceof a.LOD)e.setFromMatrixPosition(g.matrixWorld),
s=n.ray.origin.distanceTo(e),l(g.getObjectForDistance(s),n,q);else if(g instanceof a.Mesh){var r=g.geometry;null===r.boundingSphere&&r.computeBoundingSphere();b.copy(r.boundingSphere);b.applyMatrix4(g.matrixWorld);if(!1===n.ray.isIntersectionSphere(b))return q;d.getInverse(g.matrixWorld);c.copy(n.ray).applyMatrix4(d);if(null!==r.boundingBox&&!1===c.isIntersectionBox(r.boundingBox))return q;if(r instanceof a.BufferGeometry){var u=g.material;if(void 0===u)return q;var w=r.attributes,A,v,B=n.precision;
if(void 0!==w.index)for(var C=w.index.array,N=r.offsets||[{start:0,index:0,count:C.length}],G=r.vb?r.vb:w.position.array,I=r.vb?r.vbstride:3,H=0,F=N.length;H<F;++H)for(var w=N[H].start,P=N[H].index,r=w,z=w+N[H].count;r<z;r+=3){w=P+C[r];A=P+C[r+1];v=P+C[r+2];f.set(G[w*I],G[w*I+1],G[w*I+2]);h.set(G[A*I],G[A*I+1],G[A*I+2]);k.set(G[v*I],G[v*I+1],G[v*I+2]);var K=u.side===a.BackSide?c.intersectTriangle(k,h,f,!0):c.intersectTriangle(f,h,k,u.side!==a.DoubleSide);null!==K&&(K.applyMatrix4(g.matrixWorld),s=
n.ray.origin.distanceTo(K),s<B||s<n.near||s>n.far||q.push({distance:s,point:K,indices:[w,A,v],face:null,faceIndex:null,object:g}))}else for(G=r.vb?r.vb:w.position.array,I=r.vb?r.vbstride:3,r=0,z=w.position.array.length;r<z;r+=3)w=r,A=r+1,v=r+2,f.set(G[w*I],G[w*I+1],G[w*I+2]),h.set(G[A*I],G[A*I+1],G[A*I+2]),k.set(G[v*I],G[v*I+1],G[v*I+2]),K=u.side===a.BackSide?c.intersectTriangle(k,h,f,!0):c.intersectTriangle(f,h,k,u.side!==a.DoubleSide),null!==K&&(K.applyMatrix4(g.matrixWorld),s=n.ray.origin.distanceTo(K),
s<B||s<n.near||s>n.far||q.push({distance:s,point:K,indices:[w,A,v],face:null,faceIndex:null,object:g}))}else if(r instanceof a.Geometry)for(N=g.material instanceof a.MeshFaceMaterial,G=!0===N?g.material.materials:null,B=n.precision,C=r.vertices,I=0,H=r.faces.length;I<H;I++)if(F=r.faces[I],u=!0===N?G[F.materialIndex]:g.material,void 0!==u){w=C[F.a];A=C[F.b];v=C[F.c];if(!0===u.morphTargets){s=r.morphTargets;K=g.morphTargetInfluences;f.set(0,0,0);h.set(0,0,0);k.set(0,0,0);P=0;for(z=s.length;P<z;P++){var E=
K[P];if(0!==E){var S=s[P].vertices;f.x+=(S[F.a].x-w.x)*E;f.y+=(S[F.a].y-w.y)*E;f.z+=(S[F.a].z-w.z)*E;h.x+=(S[F.b].x-A.x)*E;h.y+=(S[F.b].y-A.y)*E;h.z+=(S[F.b].z-A.z)*E;k.x+=(S[F.c].x-v.x)*E;k.y+=(S[F.c].y-v.y)*E;k.z+=(S[F.c].z-v.z)*E}}f.add(w);h.add(A);k.add(v);w=f;A=h;v=k}K=u.side===a.BackSide?c.intersectTriangle(v,A,w,!0):c.intersectTriangle(w,A,v,u.side!==a.DoubleSide);null!==K&&(K.applyMatrix4(g.matrixWorld),s=n.ray.origin.distanceTo(K),s<B||s<n.near||s>n.far||q.push({distance:s,point:K,face:F,
faceIndex:I,object:g}))}}else if(g instanceof a.Line){B=n.linePrecision;u=B*B;r=g.geometry;null===r.boundingSphere&&r.computeBoundingSphere();b.copy(r.boundingSphere);b.applyMatrix4(g.matrixWorld);if(!1===n.ray.isIntersectionSphere(b))return q;d.getInverse(g.matrixWorld);c.copy(n.ray).applyMatrix4(d);if(r instanceof a.Geometry)for(C=r.vertices,B=C.length,w=new a.Vector3,A=new a.Vector3,v=g.type===a.LineStrip?1:2,r=0;r<B-1;r+=v)c.distanceSqToSegment(C[r],C[r+1],A,w)>u||(s=c.origin.distanceTo(A),s<
n.near||s>n.far||q.push({distance:s,point:w.clone().applyMatrix4(g.matrixWorld),face:null,faceIndex:null,object:g}))}},n=function(a,b,f){a=a.getDescendants();for(var d=0,c=a.length;d<c;d++)l(a[d],b,f)};a.Raycaster.prototype.precision=1E-4;a.Raycaster.prototype.linePrecision=1;a.Raycaster.prototype.set=function(a,b){this.ray.set(a,b)};a.Raycaster.prototype.intersectObject=function(a,b){var f=[];!0===b&&n(a,this,f);l(a,this,f);f.sort(g);return f};a.Raycaster.prototype.intersectObjects=function(a,b){for(var f=
[],d=0,c=a.length;d<c;d++)l(a[d],this,f),!0===b&&n(a[d],this,f);f.sort(g);return f}})(THREE);
THREE.Object3D=function(a){this.id=THREE.Object3DIdCount++;this.parent=void 0;a?(this.matrixAutoUpdate=!1,this.skipModTerms=!0):(this.up=new THREE.Vector3(0,1,0),this.position=new THREE.Vector3,this._rotation=new THREE.Euler,this._quaternion=new THREE.Quaternion,this.scale=new THREE.Vector3(1,1,1),this._rotation._quaternion=this.quaternion,this._quaternion._euler=this.rotation,this.matrixAutoUpdate=!0,this.matrix=new THREE.Matrix4,this.skipModTerms=!1,this.rotationAutoUpdate=!0);this.renderDepth=
null;this.matrixWorld=new THREE.Matrix4;this.visible=this.matrixWorldNeedsUpdate=!0;this.receiveShadow=this.castShadow=!1;this.frustumCulled=!0};
THREE.Object3D.prototype={constructor:THREE.Object3D,get rotation(){return this._rotation},set rotation(a){this._rotation=a;this._rotation._quaternion=this._quaternion;this._quaternion._euler=this._rotation;this._rotation._updateQuaternion()},get quaternion(){return this._quaternion},set quaternion(a){this._quaternion=a;this._quaternion._euler=this._rotation;this._rotation._quaternion=this._quaternion;this._quaternion._updateEuler()},get eulerOrder(){console.warn("DEPRECATED: Object3D's .eulerOrder has been moved to Object3D's .rotation.order.");
return this.rotation.order},set eulerOrder(a){console.warn("DEPRECATED: Object3D's .eulerOrder has been moved to Object3D's .rotation.order.");this.rotation.order=a},get useQuaternion(){console.warn("DEPRECATED: Object3D's .useQuaternion has been removed. The library now uses quaternions by default.")},set useQuaternion(a){console.warn("DEPRECATED: Object3D's .useQuaternion has been removed. The library now uses quaternions by default.")},applyMatrix:function(a){this.matrix.multiplyMatrices(a,this.matrix);
this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(a,b){this.quaternion.setFromAxisAngle(a,b)},setRotationFromEuler:function(a){this.quaternion.setFromEuler(a,!0)},setRotationFromMatrix:function(a){this.quaternion.setFromRotationMatrix(a)},setRotationFromQuaternion:function(a){this.quaternion.copy(a)},rotateOnAxis:function(){var a=new THREE.Quaternion;return function(b,c){a.setFromAxisAngle(b,c);this.quaternion.multiply(a);return this}}(),rotateX:function(){var a=
new THREE.Vector3(1,0,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateY:function(){var a=new THREE.Vector3(0,1,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateZ:function(){var a=new THREE.Vector3(0,0,1);return function(b){return this.rotateOnAxis(a,b)}}(),translateOnAxis:function(){var a=new THREE.Vector3;return function(b,c){a.copy(b);a.applyQuaternion(this.quaternion);this.position.add(a.multiplyScalar(c));return this}}(),translate:function(a,b){console.warn("DEPRECATED: Object3D's .translate() has been removed. Use .translateOnAxis( axis, distance ) instead. Note args have been changed.");
return this.translateOnAxis(b,a)},translateX:function(){var a=new THREE.Vector3(1,0,0);return function(b){return this.translateOnAxis(a,b)}}(),translateY:function(){var a=new THREE.Vector3(0,1,0);return function(b){return this.translateOnAxis(a,b)}}(),translateZ:function(){var a=new THREE.Vector3(0,0,1);return function(b){return this.translateOnAxis(a,b)}}(),localToWorld:function(a){return a.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var a=new THREE.Matrix4;return function(b){return b.applyMatrix4(a.getInverse(this.matrixWorld))}}(),
lookAt:function(){var a=new THREE.Matrix4;return function(b){a.lookAt(b,this.position,this.up);this.quaternion.setFromRotationMatrix(a)}}(),add:function(a){if(a===this)console.warn("THREE.Object3D.add: An object can't be added as a child of itself.");else if(a instanceof THREE.Object3D){void 0!==a.parent&&a.parent.remove(a);a.parent=this;a.dispatchEvent({type:"added"});this.children||(this.children=[]);this.children.push(a);for(var b=this;void 0!==b.parent;)b=b.parent;void 0!==b&&b instanceof THREE.Scene&&
b.__addObject(a)}},remove:function(a){if(this.children){var b=this.children.indexOf(a);if(-1!==b){a.parent=void 0;a.dispatchEvent({type:"removed"});this.children.splice(b,1);for(b=this;void 0!==b.parent;)b=b.parent;void 0!==b&&b instanceof THREE.Scene&&b.__removeObject(a)}}},traverse:function(a){a(this);var b=this.children;if(b)for(var c=0,e=b.length;c<e;c++)b[c].traverse(a)},getObjectById:function(a,b){for(var c=0,e=this.children.length;c<e;c++){var d=this.children[c];if(d.id===a||!0===b&&(d=d.getObjectById(a,
b),void 0!==d))return d}},getObjectByName:function(a,b){for(var c=0,e=this.children.length;c<e;c++){var d=this.children[c];if(d.name===a||!0===b&&(d=d.getObjectByName(a,b),void 0!==d))return d}},getChildByName:function(a,b){console.warn("DEPRECATED: Object3D's .getChildByName() has been renamed to .getObjectByName().");return this.getObjectByName(a,b)},getDescendants:function(a){if(!this.children)return null;void 0===a&&(a=[]);Array.prototype.push.apply(a,this.children);for(var b=0,c=this.children.length;b<
c;b++)this.children[b].getDescendants(a);return a},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale);this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(a){!0===this.matrixAutoUpdate&&this.updateMatrix();if(!0===this.matrixWorldNeedsUpdate||!0===a)void 0===this.parent&&this.matrix?this.matrixWorld.copy(this.matrix):this.matrix&&this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0;if(this.children)for(var b=
0,c=this.children.length;b<c;b++)this.children[b].updateMatrixWorld(a)},clone:function(a,b){void 0===a&&(a=new THREE.Object3D(this.skipModTerms));void 0===b&&(b=!0);this.name&&(a.name=this.name);this.skipModTerms||(a.up.copy(this.up),a.position.copy(this.position),a.quaternion.copy(this.quaternion),a.scale.copy(this.scale));a.renderDepth=this.renderDepth;a.rotationAutoUpdate=this.rotationAutoUpdate;this.matrix?a.matrix.copy(this.matrix):a.matrix=null;a.matrixWorld.copy(this.matrixWorld);a.matrixAutoUpdate=
this.matrixAutoUpdate;a.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate;a.visible=this.visible;a.castShadow=this.castShadow;a.receiveShadow=this.receiveShadow;a.frustumCulled=this.frustumCulled;this.userData&&(a.userData=JSON.parse(JSON.stringify(this.userData)));if(!0===b&&this.children)for(var c=0;c<this.children.length;c++)a.add(this.children[c].clone());return a}};THREE.EventDispatcher.prototype.apply(THREE.Object3D.prototype);THREE.Object3DIdCount=0;
THREE.Projector=function(){function a(){if(n===p){var a=new THREE.RenderableVertex;m.push(a);p++;n++;return a}return m[n++]}function b(){if(s===u){var a=new THREE.RenderableFace;r.push(a);u++;s++;return a}return r[s++]}function c(){if(A===B){var a=new THREE.RenderableLine;v.push(a);B++;A++;return a}return v[A++]}function e(a,b){return a.z!==b.z?b.z-a.z:a.id!==b.id?a.id-b.id:0}function d(a,b){var f=0,d=1,c=a.z+a.w,h=b.z+b.w,e=-a.z+a.w,k=-b.z+b.w;if(0<=c&&0<=h&&0<=e&&0<=k)return!0;if(0>c&&0>h||0>e&&
0>k)return!1;0>c?f=Math.max(f,c/(c-h)):0>h&&(d=Math.min(d,c/(c-h)));0>e?f=Math.max(f,e/(e-k)):0>k&&(d=Math.min(d,e/(e-k)));if(d<f)return!1;a.lerp(b,f);b.lerp(a,1-d);return!0}var g,f,h=[],k=0,l,n,m=[],p=0,q,s,r=[],u=0,w,A,v=[],B=0,C,N,G=[],I=0,H={objects:[],lights:[],elements:[]},F=new THREE.Vector3,P=new THREE.Vector3,z=new THREE.Vector3,K=new THREE.Vector3,E=new THREE.Vector4,S=new THREE.Box3(new THREE.Vector3(-1,-1,-1),new THREE.Vector3(1,1,1)),D=new THREE.Box3,U=Array(3),J=new THREE.Matrix4,V=
new THREE.Matrix4,R,da=new THREE.Matrix4,O=new THREE.Matrix3,ba=new THREE.Frustum,M=new THREE.Vector4,aa=new THREE.Vector4;this.projectVector=function(a,b){b.matrixWorldInverse.getInverse(b.matrixWorld);V.multiplyMatrices(b.projectionMatrix,b.matrixWorldInverse);return a.applyProjection(V)};this.unprojectVector=function(){var a=new THREE.Matrix4;return function(b,f){a.getInverse(f.projectionMatrix);V.multiplyMatrices(f.matrixWorld,a);return b.applyProjection(V)}}();this.pickingRay=function(a,b){a.z=
-1;var f=new THREE.Vector3(a.x,a.y,1);this.unprojectVector(a,b);this.unprojectVector(f,b);f.sub(a).normalize();return new THREE.Raycaster(a,f)};var ca=function(a){if(!1!==a.visible){if(a instanceof THREE.Light)H.lights.push(a);else if(a instanceof THREE.Mesh||a instanceof THREE.Line||a instanceof THREE.Sprite)if(!1===a.frustumCulled||!0===ba.intersectsObject(a)){if(f===k){var b=new THREE.RenderableObject;h.push(b);k++;f++;g=b}else g=h[f++];g.id=a.id;g.object=a;null!==a.renderDepth?g.z=a.renderDepth:
(K.setFromMatrixPosition(a.matrixWorld),K.applyProjection(V),g.z=K.z);H.objects.push(g)}for(var b=0,d=a.children.length;b<d;b++)ca(a.children[b])}},ea=new function(){var f=[],d=null,h=new THREE.Matrix3,e=function(a){var b=a.positionWorld,f=a.positionScreen;b.copy(a.position).applyMatrix4(R);f.copy(b).applyMatrix4(V);b=1/f.w;f.x*=b;f.y*=b;f.z*=b;a.visible=-1<=f.x&&1>=f.x&&-1<=f.y&&1>=f.y&&-1<=f.z&&1>=f.z},k=function(a,b,f){U[0]=a.positionScreen;U[1]=b.positionScreen;U[2]=f.positionScreen;return!0===
a.visible||!0===b.visible||!0===f.visible||S.isIntersectionBox(D.setFromPoints(U))?0>(f.positionScreen.x-a.positionScreen.x)*(b.positionScreen.y-a.positionScreen.y)-(f.positionScreen.y-a.positionScreen.y)*(b.positionScreen.x-a.positionScreen.x):!1};return{setObject:function(a){d=a;h.getNormalMatrix(d.matrixWorld);f.length=0},projectVertex:e,checkTriangleVisibility:k,pushVertex:function(b,f,d){l=a();l.position.set(b,f,d);e(l)},pushNormal:function(a,b,d){f.push(a,b,d)},pushLine:function(a,b){var f=
m[a],h=m[b];w=c();w.id=d.id;w.v1.copy(f);w.v2.copy(h);w.z=(f.positionScreen.z+h.positionScreen.z)/2;w.material=d.material;H.elements.push(w)},pushTriangle:function(a,c,e){var g=m[a],l=m[c],n=m[e];if(!0===k(g,l,n)){q=b();q.id=d.id;q.v1.copy(g);q.v2.copy(l);q.v3.copy(n);q.z=(g.positionScreen.z+l.positionScreen.z+n.positionScreen.z)/3;for(g=0;3>g;g++)l=3*arguments[g],n=q.vertexNormalsModel[g],n.set(f[l+0],f[l+1],f[l+2]),n.applyMatrix3(h).normalize();q.vertexNormalsLength=3;q.material=d.material;H.elements.push(q)}}}};
this.projectScene=function(h,k,g,l){var p,D,U,r,S,u,v,K,B;N=A=s=0;H.elements.length=0;!0===h.autoUpdate&&h.updateMatrixWorld();void 0===k.parent&&k.updateMatrixWorld();J.copy(k.matrixWorldInverse.getInverse(k.matrixWorld));V.multiplyMatrices(k.projectionMatrix,J);ba.setFromMatrix(V);f=0;H.objects.length=0;H.lights.length=0;ca(h);!0===g&&H.objects.sort(e);h=0;for(g=H.objects.length;h<g;h++)if(p=H.objects[h].object,D=p.geometry,ea.setObject(p),R=p.matrixWorld,n=0,p instanceof THREE.Mesh)if(D instanceof
THREE.BufferGeometry){if(u=D.attributes,p=D.offsets,void 0!==u.position){K=u.position.array;D=0;for(r=K.length;D<r;D+=3)ea.pushVertex(K[D],K[D+1],K[D+2]);B=u.normal.array;D=0;for(r=B.length;D<r;D+=3)ea.pushNormal(B[D],B[D+1],B[D+2]);if(void 0!==u.index)if(u=u.index.array,0<p.length)for(h=0;h<p.length;h++)for(r=p[h],K=r.index,D=r.start,r=r.start+r.count;D<r;D+=3)ea.pushTriangle(u[D]+K,u[D+1]+K,u[D+2]+K);else for(D=0,r=u.length;D<r;D+=3)ea.pushTriangle(u[D],u[D+1],u[D+2]);else for(D=0,r=K.length/3;D<
r;D+=3)ea.pushTriangle(D,D+1,D+2)}}else{if(D instanceof THREE.Geometry){U=D.vertices;r=D.faces;u=D.faceVertexUvs;O.getNormalMatrix(R);K=p.material instanceof THREE.MeshFaceMaterial;B=!0===K?p.material:null;for(var za=0,Ia=U.length;za<Ia;za++){var fa=U[za];ea.pushVertex(fa.x,fa.y,fa.z)}za=0;for(Ia=r.length;za<Ia;za++){U=r[za];var ha=!0===K?B.materials[U.materialIndex]:p.material;if(void 0!==ha){v=ha.side;var fa=m[U.a],pa=m[U.b],Ga=m[U.c];if(!0===ha.morphTargets){S=D.morphTargets;var sa=p.morphTargetInfluences,
qa=fa.position,ta=pa.position,wa=Ga.position;F.set(0,0,0);P.set(0,0,0);z.set(0,0,0);for(var ua=0,la=S.length;ua<la;ua++){var ga=sa[ua];if(0!==ga){var ra=S[ua].vertices;F.x+=(ra[U.a].x-qa.x)*ga;F.y+=(ra[U.a].y-qa.y)*ga;F.z+=(ra[U.a].z-qa.z)*ga;P.x+=(ra[U.b].x-ta.x)*ga;P.y+=(ra[U.b].y-ta.y)*ga;P.z+=(ra[U.b].z-ta.z)*ga;z.x+=(ra[U.c].x-wa.x)*ga;z.y+=(ra[U.c].y-wa.y)*ga;z.z+=(ra[U.c].z-wa.z)*ga}}fa.position.add(F);pa.position.add(P);Ga.position.add(z);ea.projectVertex(fa);ea.projectVertex(pa);ea.projectVertex(Ga)}sa=
ea.checkTriangleVisibility(fa,pa,Ga);if(!(!1===sa&&v===THREE.FrontSide||!0===sa&&v===THREE.BackSide)){q=b();q.id=p.id;q.v1.copy(fa);q.v2.copy(pa);q.v3.copy(Ga);q.normalModel.copy(U.normal);!1!==sa||v!==THREE.BackSide&&v!==THREE.DoubleSide||q.normalModel.negate();q.normalModel.applyMatrix3(O).normalize();q.centroidModel.copy(U.centroid).applyMatrix4(R);S=U.vertexNormals;qa=0;for(ta=Math.min(S.length,3);qa<ta;qa++)wa=q.vertexNormalsModel[qa],wa.copy(S[qa]),!1!==sa||v!==THREE.BackSide&&v!==THREE.DoubleSide||
wa.negate(),wa.applyMatrix3(O).normalize();q.vertexNormalsLength=S.length;S=0;for(sa=Math.min(u.length,3);S<sa;S++)if(v=u[S][za],void 0!==v)for(qa=0,ta=v.length;qa<ta;qa++)q.uvs[S][qa]=v[qa];q.color=U.color;q.material=ha;q.z=(fa.positionScreen.z+pa.positionScreen.z+Ga.positionScreen.z)/3;H.elements.push(q)}}}}}else if(p instanceof THREE.Line)if(D instanceof THREE.BufferGeometry){if(u=D.attributes,void 0!==u.position){K=u.position.array;D=0;for(r=K.length;D<r;D+=3)ea.pushVertex(K[D],K[D+1],K[D+2]);
if(void 0!==u.index)for(u=u.index.array,D=0,r=u.length;D<r;D+=2)ea.pushLine(u[D],u[D+1]);else for(D=0,r=K.length/3-1;D<r;D++)ea.pushLine(D,D+1)}}else{if(D instanceof THREE.Geometry&&(da.multiplyMatrices(V,R),U=p.geometry.vertices,0!==U.length))for(fa=a(),fa.positionScreen.copy(U[0]).applyMatrix4(da),D=p.type===THREE.LinePieces?2:1,za=1,Ia=U.length;za<Ia;za++)fa=a(),fa.positionScreen.copy(U[za]).applyMatrix4(da),0<(za+1)%D||(pa=m[n-2],M.copy(fa.positionScreen),aa.copy(pa.positionScreen),!0===d(M,aa)&&
(M.multiplyScalar(1/M.w),aa.multiplyScalar(1/aa.w),w=c(),w.id=p.id,w.v1.positionScreen.copy(M),w.v2.positionScreen.copy(aa),w.z=Math.max(M.z,aa.z),w.material=p.material,p.material.vertexColors===THREE.VertexColors&&(w.vertexColors[0].copy(p.geometry.colors[za]),w.vertexColors[1].copy(p.geometry.colors[za-1])),H.elements.push(w)))}else p instanceof THREE.Sprite&&(E.set(R.elements[12],R.elements[13],R.elements[14],1),E.applyMatrix4(V),D=1/E.w,E.z*=D,-1<=E.z&&1>=E.z&&(N===I?(r=new THREE.RenderableSprite,
G.push(r),I++,N++,C=r):C=G[N++],C.id=p.id,C.x=E.x*D,C.y=E.y*D,C.z=E.z,C.object=p,C.rotation=p.rotation,C.scale.x=p.scale.x*Math.abs(C.x-(E.x+k.projectionMatrix.elements[0])/(E.w+k.projectionMatrix.elements[12])),C.scale.y=p.scale.y*Math.abs(C.y-(E.y+k.projectionMatrix.elements[5])/(E.w+k.projectionMatrix.elements[13])),C.material=p.material,H.elements.push(C)));!0===l&&H.elements.sort(e);return H}};
THREE.Face3=function(a,b,c,e,d,g){this.a=a;this.b=b;this.c=c;this.normal=e instanceof THREE.Vector3?e:new THREE.Vector3;this.vertexNormals=e instanceof Array?e:[];this.color=d instanceof THREE.Color?d:new THREE.Color;this.vertexColors=d instanceof Array?d:[];this.vertexTangents=[];this.materialIndex=void 0!==g?g:0;this.centroid=new THREE.Vector3};
THREE.Face3.prototype={constructor:THREE.Face3,clone:function(){var a=new THREE.Face3(this.a,this.b,this.c);a.normal.copy(this.normal);a.color.copy(this.color);a.centroid.copy(this.centroid);a.materialIndex=this.materialIndex;var b,c;b=0;for(c=this.vertexNormals.length;b<c;b++)a.vertexNormals[b]=this.vertexNormals[b].clone();b=0;for(c=this.vertexColors.length;b<c;b++)a.vertexColors[b]=this.vertexColors[b].clone();b=0;for(c=this.vertexTangents.length;b<c;b++)a.vertexTangents[b]=this.vertexTangents[b].clone();
return a}};THREE.Face4=function(a,b,c,e,d,g,f){console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead.");return new THREE.Face3(a,b,c,d,g,f)};THREE.BufferGeometry=function(){this.id=THREE.GeometryIdCount++;this.attributes={};this.boundingSphere=this.boundingBox=null};
THREE.BufferGeometry.prototype={constructor:THREE.BufferGeometry,addAttribute:function(a,b,c,e){this.attributes[a]={array:new b(c*e),itemSize:e};return this.attributes[a]},applyMatrix:function(a){var b=this.attributes.position;void 0!==b&&(a.multiplyVector3Array(b.array),b.needsUpdate=!0);b=this.attributes.normal;void 0!==b&&((new THREE.Matrix3).getNormalMatrix(a).multiplyVector3Array(b.array),b.needsUpdate=!0)},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);
var a=this.attributes.position.array;if(a){var b=this.boundingBox;3<=a.length&&(b.min.x=b.max.x=a[0],b.min.y=b.max.y=a[1],b.min.z=b.max.z=a[2]);for(var c=3,e=a.length;c<e;c+=3){var d=a[c],g=a[c+1],f=a[c+2];d<b.min.x?b.min.x=d:d>b.max.x&&(b.max.x=d);g<b.min.y?b.min.y=g:g>b.max.y&&(b.max.y=g);f<b.min.z?b.min.z=f:f>b.max.z&&(b.max.z=f)}}if(void 0===a||0===a.length)this.boundingBox.min.set(0,0,0),this.boundingBox.max.set(0,0,0)},computeBoundingSphere:function(){var a=new THREE.Box3,b=new THREE.Vector3;
return function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);var c=this.attributes.position.array;if(c){a.makeEmpty();for(var e=this.boundingSphere.center,d=0,g=c.length;d<g;d+=3)b.set(c[d],c[d+1],c[d+2]),a.addPoint(b);a.center(e);for(var f=0,d=0,g=c.length;d<g;d+=3)b.set(c[d],c[d+1],c[d+2]),f=Math.max(f,e.distanceToSquared(b));this.boundingSphere.radius=Math.sqrt(f)}}}(),computeVertexNormals:function(){if(this.attributes.position){var a,b,c,e;a=this.attributes.position.array.length;
if(void 0===this.attributes.normal)this.attributes.normal={itemSize:3,array:new Float32Array(a)};else for(a=0,b=this.attributes.normal.array.length;a<b;a++)this.attributes.normal.array[a]=0;var d=this.attributes.position.array,g=this.attributes.normal.array,f,h,k,l,n,m,p=new THREE.Vector3,q=new THREE.Vector3,s=new THREE.Vector3,r=new THREE.Vector3,u=new THREE.Vector3;if(this.attributes.index){var w=this.attributes.index.array,A=this.offsets;c=0;for(e=A.length;c<e;++c){b=A[c].start;f=A[c].count;var v=
A[c].index;a=b;for(b+=f;a<b;a+=3)f=v+w[a],h=v+w[a+1],k=v+w[a+2],l=d[3*f],n=d[3*f+1],m=d[3*f+2],p.set(l,n,m),l=d[3*h],n=d[3*h+1],m=d[3*h+2],q.set(l,n,m),l=d[3*k],n=d[3*k+1],m=d[3*k+2],s.set(l,n,m),r.subVectors(s,q),u.subVectors(p,q),r.cross(u),g[3*f]+=r.x,g[3*f+1]+=r.y,g[3*f+2]+=r.z,g[3*h]+=r.x,g[3*h+1]+=r.y,g[3*h+2]+=r.z,g[3*k]+=r.x,g[3*k+1]+=r.y,g[3*k+2]+=r.z}}else for(a=0,b=d.length;a<b;a+=9)l=d[a],n=d[a+1],m=d[a+2],p.set(l,n,m),l=d[a+3],n=d[a+4],m=d[a+5],q.set(l,n,m),l=d[a+6],n=d[a+7],m=d[a+8],
s.set(l,n,m),r.subVectors(s,q),u.subVectors(p,q),r.cross(u),g[a]=r.x,g[a+1]=r.y,g[a+2]=r.z,g[a+3]=r.x,g[a+4]=r.y,g[a+5]=r.z,g[a+6]=r.x,g[a+7]=r.y,g[a+8]=r.z;this.normalizeNormals();this.normalsNeedUpdate=!0}},normalizeNormals:function(){for(var a=this.attributes.normal.array,b,c,e,d=0,g=a.length;d<g;d+=3)b=a[d],c=a[d+1],e=a[d+2],b=1/Math.sqrt(b*b+c*c+e*e),a[d]*=b,a[d+1]*=b,a[d+2]*=b},computeTangents:function(){function a(a,b,f){m=e[3*a];p=e[3*a+1];q=e[3*a+2];s=e[3*b];r=e[3*b+1];u=e[3*b+2];w=e[3*f];
A=e[3*f+1];v=e[3*f+2];B=g[2*a];C=g[2*a+1];N=g[2*b];G=g[2*b+1];I=g[2*f];H=g[2*f+1];F=s-m;P=w-m;z=r-p;K=A-p;E=u-q;S=v-q;D=N-B;U=I-B;J=G-C;V=H-C;R=1/(D*V-U*J);da.set((V*F-J*P)*R,(V*z-J*K)*R,(V*E-J*S)*R);O.set((D*P-U*F)*R,(D*K-U*z)*R,(D*S-U*E)*R);k[a].add(da);k[b].add(da);k[f].add(da);l[a].add(O);l[b].add(O);l[f].add(O)}function b(a){X.x=d[3*a];X.y=d[3*a+1];X.z=d[3*a+2];Z.copy(X);Da=k[a];ja.copy(Da);ja.sub(X.multiplyScalar(X.dot(Da))).normalize();ka.crossVectors(Z,Da);La=ka.dot(l[a]);oa=0>La?-1:1;h[4*
a]=ja.x;h[4*a+1]=ja.y;h[4*a+2]=ja.z;h[4*a+3]=oa}if(void 0===this.attributes.index||void 0===this.attributes.position||void 0===this.attributes.normal||void 0===this.attributes.uv)console.warn("Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");else{var c=this.attributes.index.array,e=this.attributes.position.array,d=this.attributes.normal.array,g=this.attributes.uv.array,f=e.length/3;void 0===this.attributes.tangent&&(this.attributes.tangent={itemSize:4,
array:new Float32Array(4*f)});for(var h=this.attributes.tangent.array,k=[],l=[],n=0;n<f;n++)k[n]=new THREE.Vector3,l[n]=new THREE.Vector3;var m,p,q,s,r,u,w,A,v,B,C,N,G,I,H,F,P,z,K,E,S,D,U,J,V,R,da=new THREE.Vector3,O=new THREE.Vector3,ba,M,aa,ca,ea,xa=this.offsets,n=0;for(M=xa.length;n<M;++n){ba=xa[n].start;aa=xa[n].count;var na=xa[n].index,f=ba;for(ba+=aa;f<ba;f+=3)aa=na+c[f],ca=na+c[f+1],ea=na+c[f+2],a(aa,ca,ea)}var ja=new THREE.Vector3,ka=new THREE.Vector3,X=new THREE.Vector3,Z=new THREE.Vector3,
oa,Da,La,n=0;for(M=xa.length;n<M;++n)for(ba=xa[n].start,aa=xa[n].count,na=xa[n].index,f=ba,ba+=aa;f<ba;f+=3)aa=na+c[f],ca=na+c[f+1],ea=na+c[f+2],b(aa),b(ca),b(ea)}},computeOffsets:function(a){var b=a;void 0===a&&(b=65535);Date.now();a=this.attributes.index.array;for(var c=this.attributes.position.array,e=a.length/3,d=new Uint16Array(a.length),g=0,f=0,h=[{start:0,count:0,index:0}],k=h[0],l=0,n=0,m=new Int32Array(6),p=new Int32Array(c.length),q=new Int32Array(c.length),s=0;s<c.length;s++)p[s]=-1,q[s]=
-1;for(c=0;c<e;c++){for(var r=n=0;3>r;r++)s=a[3*c+r],-1==p[s]?(m[2*r]=s,m[2*r+1]=-1,n++):p[s]<k.index?(m[2*r]=s,m[2*r+1]=-1,l++):(m[2*r]=s,m[2*r+1]=p[s]);if(f+n>k.index+b)for(k={start:g,count:0,index:f},h.push(k),n=0;6>n;n+=2)r=m[n+1],-1<r&&r<k.index&&(m[n+1]=-1);for(n=0;6>n;n+=2)s=m[n],r=m[n+1],-1===r&&(r=f++),p[s]=r,q[r]=s,d[g++]=r-k.index,k.count++}this.reorderBuffers(d,q,f);return this.offsets=h},reorderBuffers:function(a,b,c){var e={},d=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,
Int32Array,Uint32Array,Float32Array,Float64Array],g;for(g in this.attributes)if("index"!=g)for(var f=this.attributes[g].array,h=0,k=d.length;h<k;h++){var l=d[h];if(f instanceof l){e[g]=new l(this.attributes[g].itemSize*c);break}}for(d=0;d<c;d++)for(g in f=b[d],this.attributes)if("index"!=g)for(var h=this.attributes[g].array,k=this.attributes[g].itemSize,l=e[g],n=0;n<k;n++)l[d*k+n]=h[f*k+n];this.attributes.index.array=a;for(g in this.attributes)"index"!=g&&(this.attributes[g].array=e[g],this.attributes[g].numItems=
this.attributes[g].itemSize*c)},clone:function(){var a=new THREE.BufferGeometry,b=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],c;for(c in this.attributes){for(var e=this.attributes[c],d=e.array,g={itemSize:e.itemSize,array:null},e=0,f=b.length;e<f;e++){var h=b[e];if(d instanceof h){g.array=new h(d);break}}a.attributes[c]=g}e=0;for(f=this.offsets.length;e<f;e++)b=this.offsets[e],a.offsets.push({start:b.start,index:b.index,count:b.count});
return a},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.BufferGeometry.prototype);
THREE.Geometry=function(){this.id=THREE.GeometryIdCount++;this.uuid=THREE.Math.generateUUID();this.name="";this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphColors=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.hasTangents=!1;this.dynamic=!0;this.buffersNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.tangentsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=
this.elementsNeedUpdate=this.verticesNeedUpdate=!1};
THREE.Geometry.prototype={constructor:THREE.Geometry,applyMatrix:function(a){for(var b=(new THREE.Matrix3).getNormalMatrix(a),c=0,e=this.vertices.length;c<e;c++)this.vertices[c].applyMatrix4(a);c=0;for(e=this.faces.length;c<e;c++){var d=this.faces[c];d.normal.applyMatrix3(b).normalize();for(var g=0,f=d.vertexNormals.length;g<f;g++)d.vertexNormals[g].applyMatrix3(b).normalize();d.centroid.applyMatrix4(a)}this.boundingBox instanceof THREE.Box3&&this.computeBoundingBox();this.boundingSphere instanceof
THREE.Sphere&&this.computeBoundingSphere()},computeCentroids:function(){var a,b,c;a=0;for(b=this.faces.length;a<b;a++)c=this.faces[a],c.centroid.set(0,0,0),c.centroid.add(this.vertices[c.a]),c.centroid.add(this.vertices[c.b]),c.centroid.add(this.vertices[c.c]),c.centroid.divideScalar(3)},computeFaceNormals:function(){for(var a=new THREE.Vector3,b=new THREE.Vector3,c=0,e=this.faces.length;c<e;c++){var d=this.faces[c],g=this.vertices[d.a],f=this.vertices[d.b];a.subVectors(this.vertices[d.c],f);b.subVectors(g,
f);a.cross(b);a.normalize();d.normal.copy(a)}},computeVertexNormals:function(a){var b,c,e;e=Array(this.vertices.length);b=0;for(c=this.vertices.length;b<c;b++)e[b]=new THREE.Vector3;if(a){var d,g,f,h=new THREE.Vector3,k=new THREE.Vector3;new THREE.Vector3;new THREE.Vector3;new THREE.Vector3;a=0;for(b=this.faces.length;a<b;a++)c=this.faces[a],d=this.vertices[c.a],g=this.vertices[c.b],f=this.vertices[c.c],h.subVectors(f,g),k.subVectors(d,g),h.cross(k),e[c.a].add(h),e[c.b].add(h),e[c.c].add(h)}else for(a=
0,b=this.faces.length;a<b;a++)c=this.faces[a],e[c.a].add(c.normal),e[c.b].add(c.normal),e[c.c].add(c.normal);b=0;for(c=this.vertices.length;b<c;b++)e[b].normalize();a=0;for(b=this.faces.length;a<b;a++)c=this.faces[a],c.vertexNormals[0]=e[c.a].clone(),c.vertexNormals[1]=e[c.b].clone(),c.vertexNormals[2]=e[c.c].clone()},computeMorphNormals:function(){var a,b,c,e,d;c=0;for(e=this.faces.length;c<e;c++)for(d=this.faces[c],d.__originalFaceNormal?d.__originalFaceNormal.copy(d.normal):d.__originalFaceNormal=
d.normal.clone(),d.__originalVertexNormals||(d.__originalVertexNormals=[]),a=0,b=d.vertexNormals.length;a<b;a++)d.__originalVertexNormals[a]?d.__originalVertexNormals[a].copy(d.vertexNormals[a]):d.__originalVertexNormals[a]=d.vertexNormals[a].clone();var g=new THREE.Geometry;g.faces=this.faces;a=0;for(b=this.morphTargets.length;a<b;a++){if(!this.morphNormals[a]){this.morphNormals[a]={};this.morphNormals[a].faceNormals=[];this.morphNormals[a].vertexNormals=[];d=this.morphNormals[a].faceNormals;var f=
this.morphNormals[a].vertexNormals,h,k;c=0;for(e=this.faces.length;c<e;c++)h=new THREE.Vector3,k={a:new THREE.Vector3,b:new THREE.Vector3,c:new THREE.Vector3},d.push(h),f.push(k)}f=this.morphNormals[a];g.vertices=this.morphTargets[a].vertices;g.computeFaceNormals();g.computeVertexNormals();c=0;for(e=this.faces.length;c<e;c++)d=this.faces[c],h=f.faceNormals[c],k=f.vertexNormals[c],h.copy(d.normal),k.a.copy(d.vertexNormals[0]),k.b.copy(d.vertexNormals[1]),k.c.copy(d.vertexNormals[2])}c=0;for(e=this.faces.length;c<
e;c++)d=this.faces[c],d.normal=d.__originalFaceNormal,d.vertexNormals=d.__originalVertexNormals},computeTangents:function(){var a,b,c,e,d,g,f,h,k,l,n,m,p,q,s,r,u,w=[],A=[];c=new THREE.Vector3;var v=new THREE.Vector3,B=new THREE.Vector3,C=new THREE.Vector3,N=new THREE.Vector3;a=0;for(b=this.vertices.length;a<b;a++)w[a]=new THREE.Vector3,A[a]=new THREE.Vector3;a=0;for(b=this.faces.length;a<b;a++)d=this.faces[a],g=this.faceVertexUvs[0][a],e=d.a,u=d.b,d=d.c,f=this.vertices[e],h=this.vertices[u],k=this.vertices[d],
l=g[0],n=g[1],m=g[2],g=h.x-f.x,p=k.x-f.x,q=h.y-f.y,s=k.y-f.y,h=h.z-f.z,f=k.z-f.z,k=n.x-l.x,r=m.x-l.x,n=n.y-l.y,l=m.y-l.y,m=1/(k*l-r*n),c.set((l*g-n*p)*m,(l*q-n*s)*m,(l*h-n*f)*m),v.set((k*p-r*g)*m,(k*s-r*q)*m,(k*f-r*h)*m),w[e].add(c),w[u].add(c),w[d].add(c),A[e].add(v),A[u].add(v),A[d].add(v);v=["a","b","c","d"];a=0;for(b=this.faces.length;a<b;a++)for(d=this.faces[a],c=0;c<Math.min(d.vertexNormals.length,3);c++)N.copy(d.vertexNormals[c]),e=d[v[c]],u=w[e],B.copy(u),B.sub(N.multiplyScalar(N.dot(u))).normalize(),
C.crossVectors(d.vertexNormals[c],u),e=C.dot(A[e]),e=0>e?-1:1,d.vertexTangents[c]=new THREE.Vector4(B.x,B.y,B.z,e);this.hasTangents=!0},computeLineDistances:function(){for(var a=0,b=this.vertices,c=0,e=b.length;c<e;c++)0<c&&(a+=b[c].distanceTo(b[c-1])),this.lineDistances[c]=a},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);
this.boundingSphere.setFromPoints(this.vertices)},mergeVertices:function(){var a={},b=[],c=[],e,d=Math.pow(10,4),g,f;g=0;for(f=this.vertices.length;g<f;g++)e=this.vertices[g],e=Math.round(e.x*d)+"_"+Math.round(e.y*d)+"_"+Math.round(e.z*d),void 0===a[e]?(a[e]=g,b.push(this.vertices[g]),c[g]=b.length-1):c[g]=c[a[e]];a=[];g=0;for(f=this.faces.length;g<f;g++)for(d=this.faces[g],d.a=c[d.a],d.b=c[d.b],d.c=c[d.c],d=[d.a,d.b,d.c],e=0;3>e;e++)if(d[e]==d[(e+1)%3]){a.push(g);break}for(g=a.length-1;0<=g;g--)for(d=
a[g],this.faces.splice(d,1),c=0,f=this.faceVertexUvs.length;c<f;c++)this.faceVertexUvs[c].splice(d,1);g=this.vertices.length-b.length;this.vertices=b;return g},makeGroups:function(){var a=0;return function(b){var c,e,d,g,f={},h=this.morphTargets.length,k=this.morphNormals.length;this.geometryGroups={};c=0;for(e=this.faces.length;c<e;c++)d=this.faces[c],d=b?d.materialIndex:0,d in f||(f[d]={hash:d,counter:0}),g=f[d].hash+"_"+f[d].counter,g in this.geometryGroups||(this.geometryGroups[g]={faces3:[],
materialIndex:d,vertices:0,numMorphTargets:h,numMorphNormals:k}),65535<this.geometryGroups[g].vertices+3&&(f[d].counter+=1,g=f[d].hash+"_"+f[d].counter,g in this.geometryGroups||(this.geometryGroups[g]={faces3:[],materialIndex:d,vertices:0,numMorphTargets:h,numMorphNormals:k})),this.geometryGroups[g].faces3.push(c),this.geometryGroups[g].vertices+=3;this.geometryGroupsList=[];for(var l in this.geometryGroups)this.geometryGroups[l].id=a++,this.geometryGroupsList.push(this.geometryGroups[l])}}(),clone:function(){for(var a=
new THREE.Geometry,b=this.vertices,c=0,e=b.length;c<e;c++)a.vertices.push(b[c].clone());b=this.faces;c=0;for(e=b.length;c<e;c++)a.faces.push(b[c].clone());b=this.faceVertexUvs[0];c=0;for(e=b.length;c<e;c++){for(var d=b[c],g=[],f=0,h=d.length;f<h;f++)g.push(new THREE.Vector2(d[f].x,d[f].y));a.faceVertexUvs[0].push(g)}return a},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.Geometry.prototype);THREE.GeometryIdCount=0;
THREE.Geometry2=function(a){THREE.BufferGeometry.call(this);this.vertices=this.addAttribute("position",Float32Array,a,3).array;this.normals=this.addAttribute("normal",Float32Array,a,3).array;this.uvs=this.addAttribute("uv",Float32Array,a,2).array;this.boundingSphere=this.boundingBox=null};THREE.Geometry2.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.Camera=function(){THREE.Object3D.call(this);this.matrixWorldInverse=new THREE.Matrix4;this.projectionMatrix=new THREE.Matrix4};
THREE.Camera.prototype=Object.create(THREE.Object3D.prototype);THREE.Camera.prototype.lookAt=function(){var a=new THREE.Matrix4;return function(b){a.lookAt(this.position,b,this.up);this.quaternion.setFromRotationMatrix(a)}}();THREE.Camera.prototype.clone=function(a){void 0===a&&(a=new THREE.Camera);THREE.Object3D.prototype.clone.call(this,a);a.matrixWorldInverse.copy(this.matrixWorldInverse);a.projectionMatrix.copy(this.projectionMatrix);return a};
THREE.OrthographicCamera=function(a,b,c,e,d,g){THREE.Camera.call(this);this.left=a;this.right=b;this.top=c;this.bottom=e;this.near=void 0!==d?d:0.1;this.far=void 0!==g?g:2E3;this.updateProjectionMatrix()};THREE.OrthographicCamera.prototype=Object.create(THREE.Camera.prototype);THREE.OrthographicCamera.prototype.updateProjectionMatrix=function(){this.projectionMatrix.makeOrthographic(this.left,this.right,this.top,this.bottom,this.near,this.far)};
THREE.OrthographicCamera.prototype.clone=function(){var a=new THREE.OrthographicCamera;THREE.Camera.prototype.clone.call(this,a);a.left=this.left;a.right=this.right;a.top=this.top;a.bottom=this.bottom;a.near=this.near;a.far=this.far;return a};THREE.PerspectiveCamera=function(a,b,c,e){THREE.Camera.call(this);this.fov=void 0!==a?a:50;this.aspect=void 0!==b?b:1;this.near=void 0!==c?c:0.1;this.far=void 0!==e?e:2E3;this.updateProjectionMatrix()};THREE.PerspectiveCamera.prototype=Object.create(THREE.Camera.prototype);
THREE.PerspectiveCamera.prototype.setLens=function(a,b){void 0===b&&(b=24);this.fov=2*THREE.Math.radToDeg(Math.atan(b/(2*a)));this.updateProjectionMatrix()};THREE.PerspectiveCamera.prototype.setViewOffset=function(a,b,c,e,d,g){this.fullWidth=a;this.fullHeight=b;this.x=c;this.y=e;this.width=d;this.height=g;this.updateProjectionMatrix()};
THREE.PerspectiveCamera.prototype.updateProjectionMatrix=function(){if(this.fullWidth){var a=this.fullWidth/this.fullHeight,b=Math.tan(THREE.Math.degToRad(0.5*this.fov))*this.near,c=-b,e=a*c,a=Math.abs(a*b-e),c=Math.abs(b-c);this.projectionMatrix.makeFrustum(e+this.x*a/this.fullWidth,e+(this.x+this.width)*a/this.fullWidth,b-(this.y+this.height)*c/this.fullHeight,b-this.y*c/this.fullHeight,this.near,this.far)}else this.projectionMatrix.makePerspective(this.fov,this.aspect,this.near,this.far)};
THREE.PerspectiveCamera.prototype.clone=function(){var a=new THREE.PerspectiveCamera;THREE.Camera.prototype.clone.call(this,a);a.fov=this.fov;a.aspect=this.aspect;a.near=this.near;a.far=this.far;return a};THREE.Light=function(a){THREE.Object3D.call(this);this.color=new THREE.Color(a)};THREE.Light.prototype=Object.create(THREE.Object3D.prototype);THREE.Light.prototype.clone=function(a){void 0===a&&(a=new THREE.Light);THREE.Object3D.prototype.clone.call(this,a);a.color.copy(this.color);return a};
THREE.AmbientLight=function(a){THREE.Light.call(this,a)};THREE.AmbientLight.prototype=Object.create(THREE.Light.prototype);THREE.AmbientLight.prototype.clone=function(){var a=new THREE.AmbientLight;THREE.Light.prototype.clone.call(this,a);return a};
THREE.AreaLight=function(a,b){THREE.Light.call(this,a);this.normal=new THREE.Vector3(0,-1,0);this.right=new THREE.Vector3(1,0,0);this.intensity=void 0!==b?b:1;this.height=this.width=1;this.constantAttenuation=1.5;this.linearAttenuation=0.5;this.quadraticAttenuation=0.1};THREE.AreaLight.prototype=Object.create(THREE.Light.prototype);
THREE.DirectionalLight=function(a,b){THREE.Light.call(this,a);this.position.set(0,1,0);this.target=new THREE.Object3D;this.intensity=void 0!==b?b:1;this.onlyShadow=this.castShadow=!1;this.shadowCameraNear=50;this.shadowCameraFar=5E3;this.shadowCameraLeft=-500;this.shadowCameraTop=this.shadowCameraRight=500;this.shadowCameraBottom=-500;this.shadowCameraVisible=!1;this.shadowBias=0;this.shadowDarkness=0.5;this.shadowMapHeight=this.shadowMapWidth=512;this.shadowCascade=!1;this.shadowCascadeOffset=new THREE.Vector3(0,
0,-1E3);this.shadowCascadeCount=2;this.shadowCascadeBias=[0,0,0];this.shadowCascadeWidth=[512,512,512];this.shadowCascadeHeight=[512,512,512];this.shadowCascadeNearZ=[-1,0.99,0.998];this.shadowCascadeFarZ=[0.99,0.998,1];this.shadowCascadeArray=[];this.shadowMatrix=this.shadowCamera=this.shadowMapSize=this.shadowMap=null};THREE.DirectionalLight.prototype=Object.create(THREE.Light.prototype);
THREE.DirectionalLight.prototype.clone=function(){var a=new THREE.DirectionalLight;THREE.Light.prototype.clone.call(this,a);a.target=this.target.clone();a.intensity=this.intensity;a.castShadow=this.castShadow;a.onlyShadow=this.onlyShadow;return a};THREE.HemisphereLight=function(a,b,c){THREE.Light.call(this,a);this.position.set(0,100,0);this.groundColor=new THREE.Color(b);this.intensity=void 0!==c?c:1};THREE.HemisphereLight.prototype=Object.create(THREE.Light.prototype);
THREE.HemisphereLight.prototype.clone=function(){var a=new THREE.HemisphereLight;THREE.Light.prototype.clone.call(this,a);a.groundColor.copy(this.groundColor);a.intensity=this.intensity;return a};THREE.PointLight=function(a,b,c){THREE.Light.call(this,a);this.intensity=void 0!==b?b:1;this.distance=void 0!==c?c:0};THREE.PointLight.prototype=Object.create(THREE.Light.prototype);
THREE.PointLight.prototype.clone=function(){var a=new THREE.PointLight;THREE.Light.prototype.clone.call(this,a);a.intensity=this.intensity;a.distance=this.distance;return a};
THREE.SpotLight=function(a,b,c,e,d){THREE.Light.call(this,a);this.position.set(0,1,0);this.target=new THREE.Object3D;this.intensity=void 0!==b?b:1;this.distance=void 0!==c?c:0;this.angle=void 0!==e?e:Math.PI/3;this.exponent=void 0!==d?d:10;this.onlyShadow=this.castShadow=!1;this.shadowCameraNear=50;this.shadowCameraFar=5E3;this.shadowCameraFov=50;this.shadowCameraVisible=!1;this.shadowBias=0;this.shadowDarkness=0.5;this.shadowMapHeight=this.shadowMapWidth=512;this.shadowMatrix=this.shadowCamera=this.shadowMapSize=
this.shadowMap=null};THREE.SpotLight.prototype=Object.create(THREE.Light.prototype);THREE.SpotLight.prototype.clone=function(){var a=new THREE.SpotLight;THREE.Light.prototype.clone.call(this,a);a.target=this.target.clone();a.intensity=this.intensity;a.distance=this.distance;a.angle=this.angle;a.exponent=this.exponent;a.castShadow=this.castShadow;a.onlyShadow=this.onlyShadow;return a};
THREE.Loader=function(a){this.statusDomElement=(this.showStatus=a)?THREE.Loader.prototype.addStatusElement():null;this.onLoadStart=function(){};this.onLoadProgress=function(){};this.onLoadComplete=function(){}};
THREE.Loader.prototype={constructor:THREE.Loader,crossOrigin:void 0,addStatusElement:function(){var a=document.createElement("div");a.style.position="absolute";a.style.right="0px";a.style.top="0px";a.style.fontSize="0.8em";a.style.textAlign="left";a.style.background="rgba(0,0,0,0.25)";a.style.color="#fff";a.style.width="120px";a.style.padding="0.5em 0.5em 0.5em 0.5em";a.style.zIndex=1E3;a.innerHTML="Loading ...";return a},updateProgress:function(a){var b="Loaded ",b=a.total?b+((100*a.loaded/a.total).toFixed(0)+
"%"):b+((a.loaded/1E3).toFixed(2)+" KB");this.statusDomElement.innerHTML=b},extractUrlBase:function(a){a=a.split("/");if(1===a.length)return"./";a.pop();return a.join("/")+"/"},initMaterials:function(a,b){for(var c=[],e=0;e<a.length;++e)c[e]=THREE.Loader.prototype.createMaterial(a[e],b);return c},needsTangents:function(a){for(var b=0,c=a.length;b<c;b++)if(a[b]instanceof THREE.ShaderMaterial)return!0;return!1},createMaterial:function(a,b){function c(a){a=Math.log(a)/Math.LN2;return Math.floor(a)==
a}function e(a){a=Math.log(a)/Math.LN2;return Math.pow(2,Math.round(a))}function d(a,b){var f=new Image;f.onload=function(){if(c(this.width)&&c(this.height))a.image=this;else{var b=e(this.width),f=e(this.height);a.image.width=b;a.image.height=f;a.image.getContext("2d").drawImage(this,0,0,b,f)}a.needsUpdate=!0};void 0!==h.crossOrigin&&(f.crossOrigin=h.crossOrigin);f.src=b}function g(a,f,c,h,e,k,g){var l=/\.dds$/i.test(c),n=b+c;if(l){var B=THREE.ImageUtils.loadCompressedTexture(n);a[f]=B}else B=document.createElement("canvas"),
a[f]=new THREE.Texture(B);a[f].sourceFile=c;h&&(a[f].repeat.set(h[0],h[1]),1!==h[0]&&(a[f].wrapS=THREE.RepeatWrapping),1!==h[1]&&(a[f].wrapT=THREE.RepeatWrapping));e&&a[f].offset.set(e[0],e[1]);k&&(c={repeat:THREE.RepeatWrapping,mirror:THREE.MirroredRepeatWrapping},void 0!==c[k[0]]&&(a[f].wrapS=c[k[0]]),void 0!==c[k[1]]&&(a[f].wrapT=c[k[1]]));g&&(a[f].anisotropy=g);l||d(a[f],n)}function f(a){return(255*a[0]<<16)+(255*a[1]<<8)+255*a[2]}var h=this,k="MeshLambertMaterial",l={color:15658734,opacity:1,
map:null,lightMap:null,normalMap:null,bumpMap:null,wireframe:!1};if(a.shading){var n=a.shading.toLowerCase();"phong"===n?k="MeshPhongMaterial":"basic"===n&&(k="MeshBasicMaterial")}void 0!==a.blending&&void 0!==THREE[a.blending]&&(l.blending=THREE[a.blending]);if(void 0!==a.transparent||1>a.opacity)l.transparent=a.transparent;void 0!==a.depthTest&&(l.depthTest=a.depthTest);void 0!==a.depthWrite&&(l.depthWrite=a.depthWrite);void 0!==a.visible&&(l.visible=a.visible);void 0!==a.flipSided&&(l.side=THREE.BackSide);
void 0!==a.doubleSided&&(l.side=THREE.DoubleSide);void 0!==a.wireframe&&(l.wireframe=a.wireframe);void 0!==a.vertexColors&&("face"===a.vertexColors?l.vertexColors=THREE.FaceColors:a.vertexColors&&(l.vertexColors=THREE.VertexColors));a.colorDiffuse?l.color=f(a.colorDiffuse):a.DbgColor&&(l.color=a.DbgColor);a.colorSpecular&&(l.specular=f(a.colorSpecular));a.colorAmbient&&(l.ambient=f(a.colorAmbient));a.transparency&&(l.opacity=a.transparency);a.specularCoef&&(l.shininess=a.specularCoef);a.mapDiffuse&&
b&&g(l,"map",a.mapDiffuse,a.mapDiffuseRepeat,a.mapDiffuseOffset,a.mapDiffuseWrap,a.mapDiffuseAnisotropy);a.mapLight&&b&&g(l,"lightMap",a.mapLight,a.mapLightRepeat,a.mapLightOffset,a.mapLightWrap,a.mapLightAnisotropy);a.mapBump&&b&&g(l,"bumpMap",a.mapBump,a.mapBumpRepeat,a.mapBumpOffset,a.mapBumpWrap,a.mapBumpAnisotropy);a.mapNormal&&b&&g(l,"normalMap",a.mapNormal,a.mapNormalRepeat,a.mapNormalOffset,a.mapNormalWrap,a.mapNormalAnisotropy);a.mapSpecular&&b&&g(l,"specularMap",a.mapSpecular,a.mapSpecularRepeat,
a.mapSpecularOffset,a.mapSpecularWrap,a.mapSpecularAnisotropy);a.mapBumpScale&&(l.bumpScale=a.mapBumpScale);a.mapNormal?(k=THREE.ShaderLib.normalmap,n=THREE.UniformsUtils.clone(k.uniforms),n.tNormal.value=l.normalMap,a.mapNormalFactor&&n.uNormalScale.value.set(a.mapNormalFactor,a.mapNormalFactor),l.map&&(n.tDiffuse.value=l.map,n.enableDiffuse.value=!0),l.specularMap&&(n.tSpecular.value=l.specularMap,n.enableSpecular.value=!0),l.lightMap&&(n.tAO.value=l.lightMap,n.enableAO.value=!0),n.diffuse.value.setHex(l.color),
n.specular.value.setHex(l.specular),n.ambient.value.setHex(l.ambient),n.shininess.value=l.shininess,void 0!==l.opacity&&(n.opacity.value=l.opacity),k=new THREE.ShaderMaterial({fragmentShader:k.fragmentShader,vertexShader:k.vertexShader,uniforms:n,lights:!0,fog:!0}),l.transparent&&(k.transparent=!0)):k=new THREE[k](l);void 0!==a.DbgName&&(k.name=a.DbgName);return k}};THREE.XHRLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.XHRLoader.prototype={constructor:THREE.XHRLoader,load:function(a,b,c,e){var d=this,g=new XMLHttpRequest;void 0!==b&&g.addEventListener("load",function(f){b(f.target.responseText);d.manager.itemEnd(a)},!1);void 0!==c&&g.addEventListener("progress",function(a){c(a)},!1);void 0!==e&&g.addEventListener("error",function(a){e(a)},!1);void 0!==this.crossOrigin&&(g.crossOrigin=this.crossOrigin);g.open("GET",a,!0);g.send(null);d.manager.itemStart(a)},setCrossOrigin:function(a){this.crossOrigin=a}};
THREE.ImageLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.ImageLoader.prototype={constructor:THREE.ImageLoader,load:function(a,b,c,e){var d=this,g=document.createElement("img");void 0!==b&&g.addEventListener("load",function(f){d.manager.itemEnd(a);b(this)},!1);void 0!==c&&g.addEventListener("progress",function(a){c(a)},!1);void 0!==e&&g.addEventListener("error",function(a){e(a)},!1);void 0!==this.crossOrigin&&(g.crossOrigin=this.crossOrigin);g.src=a;d.manager.itemStart(a);return g},setCrossOrigin:function(a){this.crossOrigin=a}};
THREE.LoadingManager=function(a,b,c){var e=this,d=0,g=0;this.onLoad=a;this.onProgress=b;this.onError=c;this.itemStart=function(a){g++};this.itemEnd=function(a){d++;if(void 0!==e.onProgress)e.onProgress(a,d,g);if(d===g&&void 0!==e.onLoad)e.onLoad()}};THREE.DefaultLoadingManager=new THREE.LoadingManager;THREE.TextureLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.TextureLoader.prototype={constructor:THREE.TextureLoader,load:function(a,b,c,e){c=new THREE.ImageLoader(this.manager);c.setCrossOrigin(this.crossOrigin);c.load(a,function(a){a=new THREE.Texture(a);a.needsUpdate=!0;void 0!==b&&b(a)})},setCrossOrigin:function(a){this.crossOrigin=a}};
THREE.Material=function(){this.id=THREE.MaterialIdCount++;this.uuid=THREE.Math.generateUUID();this.name="";this.side=THREE.FrontSide;this.opacity=1;this.transparent=!1;this.blending=THREE.NormalBlending;this.blendSrc=THREE.SrcAlphaFactor;this.blendDst=THREE.OneMinusSrcAlphaFactor;this.blendEquation=THREE.AddEquation;this.depthWrite=this.depthTest=!0;this.polygonOffset=!1;this.overdraw=this.alphaTest=this.polygonOffsetUnits=this.polygonOffsetFactor=0;this.needsUpdate=this.visible=!0};
THREE.Material.prototype={constructor:THREE.Material,setValues:function(a){if(void 0!==a)for(var b in a){var c=a[b];if(void 0===c)console.warn("THREE.Material: '"+b+"' parameter is undefined.");else if(b in this){var e=this[b];e instanceof THREE.Color?e.set(c):e instanceof THREE.Vector3&&c instanceof THREE.Vector3?e.copy(c):this[b]="overdraw"==b?Number(c):c}}},clone:function(a){void 0===a&&(a=new THREE.Material);a.name=this.name;a.side=this.side;a.opacity=this.opacity;a.transparent=this.transparent;
a.blending=this.blending;a.blendSrc=this.blendSrc;a.blendDst=this.blendDst;a.blendEquation=this.blendEquation;a.depthTest=this.depthTest;a.depthWrite=this.depthWrite;a.polygonOffset=this.polygonOffset;a.polygonOffsetFactor=this.polygonOffsetFactor;a.polygonOffsetUnits=this.polygonOffsetUnits;a.alphaTest=this.alphaTest;a.overdraw=this.overdraw;a.visible=this.visible;return a},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.Material.prototype);
THREE.MaterialIdCount=0;THREE.LineBasicMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.linewidth=1;this.linejoin=this.linecap="round";this.vertexColors=!1;this.fog=!0;this.setValues(a)};THREE.LineBasicMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.LineBasicMaterial.prototype.clone=function(){var a=new THREE.LineBasicMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.linewidth=this.linewidth;a.linecap=this.linecap;a.linejoin=this.linejoin;a.vertexColors=this.vertexColors;a.fog=this.fog;return a};THREE.LineDashedMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.scale=this.linewidth=1;this.dashSize=3;this.gapSize=1;this.vertexColors=!1;this.fog=!0;this.setValues(a)};
THREE.LineDashedMaterial.prototype=Object.create(THREE.Material.prototype);THREE.LineDashedMaterial.prototype.clone=function(){var a=new THREE.LineDashedMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.linewidth=this.linewidth;a.scale=this.scale;a.dashSize=this.dashSize;a.gapSize=this.gapSize;a.vertexColors=this.vertexColors;a.fog=this.fog;return a};
THREE.MeshBasicMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.envMap=this.alphaMap=this.specularMap=this.lightMap=this.map=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=0.98;this.fog=!0;this.shading=THREE.SmoothShading;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.vertexColors=THREE.NoColors;this.morphTargets=this.skinning=!1;this.setValues(a)};
THREE.MeshBasicMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.MeshBasicMaterial.prototype.clone=function(){var a=new THREE.MeshBasicMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.map=this.map;a.lightMap=this.lightMap;a.specularMap=this.specularMap;a.alphaMap=this.alphaMap;a.envMap=this.envMap;a.combine=this.combine;a.reflectivity=this.reflectivity;a.refractionRatio=this.refractionRatio;a.fog=this.fog;a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;a.wireframeLinecap=this.wireframeLinecap;
a.wireframeLinejoin=this.wireframeLinejoin;a.vertexColors=this.vertexColors;a.skinning=this.skinning;a.morphTargets=this.morphTargets;return a};
THREE.MeshLambertMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.ambient=new THREE.Color(16777215);this.emissive=new THREE.Color(0);this.wrapAround=!1;this.wrapRGB=new THREE.Vector3(1,1,1);this.envMap=this.alphaMap=this.specularMap=this.lightMap=this.map=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=0.98;this.fog=!0;this.shading=THREE.SmoothShading;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap=
"round";this.vertexColors=THREE.NoColors;this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)};THREE.MeshLambertMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.MeshLambertMaterial.prototype.clone=function(){var a=new THREE.MeshLambertMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.ambient.copy(this.ambient);a.emissive.copy(this.emissive);a.wrapAround=this.wrapAround;a.wrapRGB.copy(this.wrapRGB);a.map=this.map;a.lightMap=this.lightMap;a.specularMap=this.specularMap;a.alphaMap=this.alphaMap;a.envMap=this.envMap;a.combine=this.combine;a.reflectivity=this.reflectivity;a.refractionRatio=this.refractionRatio;a.fog=this.fog;
a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;a.wireframeLinecap=this.wireframeLinecap;a.wireframeLinejoin=this.wireframeLinejoin;a.vertexColors=this.vertexColors;a.skinning=this.skinning;a.morphTargets=this.morphTargets;a.morphNormals=this.morphNormals;return a};
THREE.MeshPhongMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.ambient=new THREE.Color(16777215);this.emissive=new THREE.Color(0);this.specular=new THREE.Color(1118481);this.shininess=30;this.wrapAround=this.metal=!1;this.wrapRGB=new THREE.Vector3(1,1,1);this.bumpMap=this.lightMap=this.map=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new THREE.Vector2(1,1);this.envMap=this.alphaMap=this.specularMap=null;this.combine=THREE.MultiplyOperation;this.reflectivity=
1;this.refractionRatio=0.98;this.fog=!0;this.shading=THREE.SmoothShading;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.vertexColors=THREE.NoColors;this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)};THREE.MeshPhongMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.MeshPhongMaterial.prototype.clone=function(){var a=new THREE.MeshPhongMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.ambient.copy(this.ambient);a.emissive.copy(this.emissive);a.specular.copy(this.specular);a.shininess=this.shininess;a.metal=this.metal;a.wrapAround=this.wrapAround;a.wrapRGB.copy(this.wrapRGB);a.map=this.map;a.lightMap=this.lightMap;a.bumpMap=this.bumpMap;a.bumpScale=this.bumpScale;a.normalMap=this.normalMap;a.normalScale.copy(this.normalScale);
a.specularMap=this.specularMap;a.alphaMap=this.alphaMap;a.envMap=this.envMap;a.combine=this.combine;a.reflectivity=this.reflectivity;a.refractionRatio=this.refractionRatio;a.fog=this.fog;a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;a.wireframeLinecap=this.wireframeLinecap;a.wireframeLinejoin=this.wireframeLinejoin;a.vertexColors=this.vertexColors;a.skinning=this.skinning;a.morphTargets=this.morphTargets;a.morphNormals=this.morphNormals;return a};
THREE.MeshDepthMaterial=function(a){THREE.Material.call(this);this.wireframe=!1;this.wireframeLinewidth=1;this.setValues(a)};THREE.MeshDepthMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshDepthMaterial.prototype.clone=function(){var a=new THREE.MeshDepthMaterial;THREE.Material.prototype.clone.call(this,a);a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;return a};
THREE.MeshNormalMaterial=function(a){THREE.Material.call(this,a);this.shading=THREE.FlatShading;this.wireframe=!1;this.wireframeLinewidth=1;this.morphTargets=!1;this.setValues(a)};THREE.MeshNormalMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshNormalMaterial.prototype.clone=function(){var a=new THREE.MeshNormalMaterial;THREE.Material.prototype.clone.call(this,a);a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;return a};
THREE.MeshFaceMaterial=function(a){this.materials=a instanceof Array?a:[]};THREE.MeshFaceMaterial.prototype.clone=function(){for(var a=new THREE.MeshFaceMaterial,b=0;b<this.materials.length;b++)a.materials.push(this.materials[b].clone());return a};
THREE.ShaderMaterial=function(a){THREE.Material.call(this);this.vertexShader=this.fragmentShader="void main() {}";this.uniforms={};this.defines={};this.attributes=null;this.shading=THREE.SmoothShading;this.linewidth=1;this.wireframe=!1;this.wireframeLinewidth=1;this.lights=this.fog=!1;this.vertexColors=THREE.NoColors;this.morphNormals=this.morphTargets=this.skinning=!1;this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};this.index0AttributeName="position";this.setValues(a)};
THREE.ShaderMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.ShaderMaterial.prototype.clone=function(){var a=new THREE.ShaderMaterial;THREE.Material.prototype.clone.call(this,a);a.fragmentShader=this.fragmentShader;a.vertexShader=this.vertexShader;a.uniforms=THREE.UniformsUtils.clone(this.uniforms);a.attributes=this.attributes;a.defines=this.defines;a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;a.fog=this.fog;a.lights=this.lights;a.vertexColors=this.vertexColors;a.skinning=this.skinning;a.morphTargets=
this.morphTargets;a.morphNormals=this.morphNormals;return a};
THREE.Texture=function(a,b,c,e,d,g,f,h,k){this.id=THREE.TextureIdCount++;this.uuid=THREE.Math.generateUUID();this.name="";this.image=a;this.mipmaps=[];this.mapping=void 0!==b?b:new THREE.UVMapping;this.wrapS=void 0!==c?c:THREE.ClampToEdgeWrapping;this.wrapT=void 0!==e?e:THREE.ClampToEdgeWrapping;this.magFilter=void 0!==d?d:THREE.LinearFilter;this.minFilter=void 0!==g?g:THREE.LinearMipMapLinearFilter;this.anisotropy=void 0!==k?k:1;this.format=void 0!==f?f:THREE.RGBAFormat;this.type=void 0!==h?h:THREE.UnsignedByteType;
this.offset=new THREE.Vector2(0,0);this.repeat=new THREE.Vector2(1,1);this.generateMipmaps=!0;this.premultiplyAlpha=!1;this.flipY=!0;this.unpackAlignment=4;this._needsUpdate=!1;this.onUpdate=null};
THREE.Texture.prototype={constructor:THREE.Texture,get needsUpdate(){return this._needsUpdate},set needsUpdate(a){!0===a&&this.update();this._needsUpdate=a},clone:function(a){void 0===a&&(a=new THREE.Texture);a.image=this.image;a.mipmaps=this.mipmaps.slice(0);a.mapping=this.mapping;a.wrapS=this.wrapS;a.wrapT=this.wrapT;a.magFilter=this.magFilter;a.minFilter=this.minFilter;a.anisotropy=this.anisotropy;a.format=this.format;a.type=this.type;a.offset.copy(this.offset);a.repeat.copy(this.repeat);a.generateMipmaps=
this.generateMipmaps;a.premultiplyAlpha=this.premultiplyAlpha;a.flipY=this.flipY;a.unpackAlignment=this.unpackAlignment;return a},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.Texture.prototype);THREE.TextureIdCount=0;THREE.CompressedTexture=function(a,b,c,e,d,g,f,h,k,l,n){THREE.Texture.call(this,null,g,f,h,k,l,e,d,n);this.image={width:b,height:c};this.mipmaps=a;this.generateMipmaps=!1};
THREE.CompressedTexture.prototype=Object.create(THREE.Texture.prototype);THREE.CompressedTexture.prototype.clone=function(){var a=new THREE.CompressedTexture;THREE.Texture.prototype.clone.call(this,a);return a};THREE.DataTexture=function(a,b,c,e,d,g,f,h,k,l,n){THREE.Texture.call(this,null,g,f,h,k,l,e,d,n);this.image={data:a,width:b,height:c}};THREE.DataTexture.prototype=Object.create(THREE.Texture.prototype);
THREE.DataTexture.prototype.clone=function(){var a=new THREE.DataTexture;THREE.Texture.prototype.clone.call(this,a);return a};THREE.Line=function(a,b,c){THREE.Object3D.call(this);this.geometry=void 0!==a?a:new THREE.Geometry;this.material=void 0!==b?b:new THREE.LineBasicMaterial({color:16777215*Math.random()});this.type=void 0!==c?c:THREE.LineStrip};THREE.LineStrip=0;THREE.LinePieces=1;THREE.Line.prototype=Object.create(THREE.Object3D.prototype);
THREE.Line.prototype.clone=function(a){void 0===a&&(a=new THREE.Line(this.geometry,this.material,this.type));THREE.Object3D.prototype.clone.call(this,a);return a};THREE.Mesh=function(a,b,c){THREE.Object3D.call(this,c);this.geometry=void 0!==a?a:new THREE.Geometry;this.material=void 0!==b?b:new THREE.MeshBasicMaterial({color:16777215*Math.random()});this.updateMorphTargets()};THREE.Mesh.prototype=Object.create(THREE.Object3D.prototype);
THREE.Mesh.prototype.updateMorphTargets=function(){if(void 0!==this.geometry.morphTargets&&0<this.geometry.morphTargets.length){this.morphTargetBase=-1;this.morphTargetForcedOrder=[];this.morphTargetInfluences=[];this.morphTargetDictionary={};for(var a=0,b=this.geometry.morphTargets.length;a<b;a++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[a].name]=a}};
THREE.Mesh.prototype.getMorphTargetIndexByName=function(a){if(void 0!==this.morphTargetDictionary[a])return this.morphTargetDictionary[a];console.log("THREE.Mesh.getMorphTargetIndexByName: morph target "+a+" does not exist. Returning 0.");return 0};THREE.Mesh.prototype.clone=function(a){void 0===a&&(a=new THREE.Mesh(this.geometry,this.material));THREE.Object3D.prototype.clone.call(this,a);return a};THREE.Bone=function(a){THREE.Object3D.call(this);this.skin=a;this.skinMatrix=new THREE.Matrix4};
THREE.Bone.prototype=Object.create(THREE.Object3D.prototype);THREE.Bone.prototype.update=function(a,b){this.matrixAutoUpdate&&(b|=this.updateMatrix());if(b||this.matrixWorldNeedsUpdate)a?this.skinMatrix.multiplyMatrices(a,this.matrix):this.skinMatrix.copy(this.matrix),this.matrixWorldNeedsUpdate=!1,b=!0;var c,e=this.children.length;for(c=0;c<e;c++)this.children[c].update(this.skinMatrix,b)};THREE.LOD=function(){THREE.Object3D.call(this);this.objects=[]};THREE.LOD.prototype=Object.create(THREE.Object3D.prototype);
THREE.LOD.prototype.addLevel=function(a,b){void 0===b&&(b=0);b=Math.abs(b);for(var c=0;c<this.objects.length&&!(b<this.objects[c].distance);c++);this.objects.splice(c,0,{distance:b,object:a});this.add(a)};THREE.LOD.prototype.getObjectForDistance=function(a){for(var b=1,c=this.objects.length;b<c&&!(a<this.objects[b].distance);b++);return this.objects[b-1].object};
THREE.LOD.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c){if(1<this.objects.length){a.setFromMatrixPosition(c.matrixWorld);b.setFromMatrixPosition(this.matrixWorld);c=a.distanceTo(b);this.objects[0].object.visible=!0;for(var e=1,d=this.objects.length;e<d;e++)if(c>=this.objects[e].distance)this.objects[e-1].object.visible=!1,this.objects[e].object.visible=!0;else break;for(;e<d;e++)this.objects[e].object.visible=!1}}}();
THREE.LOD.prototype.clone=function(a){void 0===a&&(a=new THREE.LOD);THREE.Object3D.prototype.clone.call(this,a);for(var b=0,c=this.objects.length;b<c;b++){var e=this.objects[b].object.clone();e.visible=0===b;a.addLevel(e,this.objects[b].distance)}return a};THREE.Sprite=function(){var a=new THREE.Geometry2(3);a.vertices.set([-0.5,-0.5,0,0.5,-0.5,0,0.5,0.5,0]);return function(b){THREE.Object3D.call(this);this.geometry=a;this.material=void 0!==b?b:new THREE.SpriteMaterial}}();
THREE.Sprite.prototype=Object.create(THREE.Object3D.prototype);THREE.Sprite.prototype.updateMatrix=function(){this.matrix.compose(this.position,this.quaternion,this.scale);this.matrixWorldNeedsUpdate=!0};THREE.Sprite.prototype.clone=function(a){void 0===a&&(a=new THREE.Sprite(this.material));THREE.Object3D.prototype.clone.call(this,a);return a};THREE.Particle=THREE.Sprite;
THREE.Scene=function(a){THREE.Object3D.call(this,a);this.children=[];this.overrideMaterial=this.fog=null;this.autoUpdate=!0;this.matrixAutoUpdate=!1;this.__lights=[];this.__objectsAdded=[];this.__objectsRemoved=[]};THREE.Scene.prototype=Object.create(THREE.Object3D.prototype);
THREE.Scene.prototype.__addObject=function(a){if(a instanceof THREE.Light)-1===this.__lights.indexOf(a)&&this.__lights.push(a),a.target&&void 0===a.target.parent&&this.add(a.target);else if(!(a instanceof THREE.Camera||a instanceof THREE.Bone)){this.__objectsAdded.push(a);var b=this.__objectsRemoved.indexOf(a);-1!==b&&this.__objectsRemoved.splice(b,1)}this.dispatchEvent({type:"objectAdded",object:a});a.dispatchEvent({type:"addedToScene",scene:this});if(a.children)for(b=0;b<a.children.length;b++)this.__addObject(a.children[b])};
THREE.Scene.prototype.__removeObject=function(a){if(a instanceof THREE.Light){var b=this.__lights.indexOf(a);-1!==b&&this.__lights.splice(b,1);if(a.shadowCascadeArray)for(b=0;b<a.shadowCascadeArray.length;b++)this.__removeObject(a.shadowCascadeArray[b])}else a instanceof THREE.Camera||(this.__objectsRemoved.push(a),b=this.__objectsAdded.indexOf(a),-1!==b&&this.__objectsAdded.splice(b,1));this.dispatchEvent({type:"objectRemoved",object:a});a.dispatchEvent({type:"removedFromScene",scene:this});if(a.children)for(b=
0;b<a.children.length;b++)this.__removeObject(a.children[b])};THREE.Scene.prototype.clone=function(a){void 0===a&&(a=new THREE.Scene);THREE.Object3D.prototype.clone.call(this,a);null!==this.fog&&(a.fog=this.fog.clone());null!==this.overrideMaterial&&(a.overrideMaterial=this.overrideMaterial.clone());a.autoUpdate=this.autoUpdate;a.matrixAutoUpdate=this.matrixAutoUpdate;return a};THREE.Fog=function(a,b,c){this.name="";this.color=new THREE.Color(a);this.near=void 0!==b?b:1;this.far=void 0!==c?c:1E3};
THREE.Fog.prototype.clone=function(){return new THREE.Fog(this.color.getHex(),this.near,this.far)};THREE.FogExp2=function(a,b){this.name="";this.color=new THREE.Color(a);this.density=void 0!==b?b:2.5E-4};THREE.FogExp2.prototype.clone=function(){return new THREE.FogExp2(this.color.getHex(),this.density)};
THREE.ShaderChunk={fog_pars_fragment:"#ifdef USE_FOG\nuniform vec3 fogColor;\n#ifdef FOG_EXP2\nuniform float fogDensity;\n#else\nuniform float fogNear;\nuniform float fogFar;\n#endif\n#endif",fog_fragment:"#ifdef USE_FOG\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n#ifdef FOG_EXP2\nconst float LOG2 = 1.442695;\nfloat fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n#else\nfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n#endif\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\nuniform float reflectivity;\nuniform samplerCube envMap;\nuniform float flipEnvMap;\nuniform int combine;\n#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\nuniform bool useRefract;\nuniform float refractionRatio;\n#endif\n#endif",
normal_fragment:"vec3 normal = normalize( vNormal );\nvec3 geomNormal = normal;\nvec3 viewPosition = normalize( vViewPosition );\n#ifdef DOUBLE_SIDED\nnormal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n#endif\n#ifdef USE_NORMALMAP\nnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\nnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",envmap_fragment:"#if defined(USE_ENVMAP)\nvec3 reflectVec;\n#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\nvec3 cameraToVertex = normalize( -vViewPosition );\nif ( useRefract ) {\nreflectVec = refract( cameraToVertex, normal, refractionRatio );\n} else { \nreflectVec = reflect( cameraToVertex, normal );\n}\n#else\nvec3 cameraToVertex = normalize( -vViewPosition );\nreflectVec = reflect( cameraToVertex, vNormal );\n#endif\nreflectVec = mat3( viewMatrixInverse[ 0 ].xyz, viewMatrixInverse[ 1 ].xyz, viewMatrixInverse[ 2 ].xyz ) * reflectVec;\nfloat logShiny = log(max(1.0+1e-10, shininess));\n#ifdef ENV_LOGLUV\nfloat MipmapIndex = max(0.0, -0.72134752 * logShiny + 5.5);\nvec4 envTexColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ), MipmapIndex );\nvec3 cubeColor = LogLuvDecode(envTexColor);\n#else\nvec4 envTexColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\nvec3 cubeColor = envTexColor.xyz;\n#ifdef GAMMA_INPUT\ncubeColor.xyz *= cubeColor.xyz;\n#endif\n#endif\nfloat facing = dot( viewPosition, normal );\nif (facing < 0.0) {\nfacing = 1.0;\n}\nvec4 speca = vec4(specular, gl_FragColor.a);\n#ifdef METAL\nvec4 schlickRefl = speca; /* + ( 1.0 - speca ) * pow( max(1.0 - facing, 0.0), 5.0 );*/\ngl_FragColor.xyz += cubeColor.xyz * specularStrength * schlickRefl.xyz;\ngl_FragColor.a = speca.a;\n#else\n#ifdef CLEARCOAT\nvec3 cubeColorClearcoat;\nvec3 reflectVecClearcoat = reflect( -vViewPosition, vNormal );\nreflectVecClearcoat = mat3( viewMatrixInverse[ 0 ].xyz, viewMatrixInverse[ 1 ].xyz, viewMatrixInverse[ 2 ].xyz ) * reflectVecClearcoat;\n#ifdef ENV_LOGLUV\nvec4 envTexColorClearcoat = textureCube( envMap, vec3( flipEnvMap * reflectVecClearcoat.x, reflectVecClearcoat.yz ));\ncubeColorClearcoat = LogLuvDecode(envTexColorClearcoat);\n#else\nvec4 envTexColorClearcoat = textureCube( envMap, vec3( flipEnvMap * reflectVecClearcoat.x, reflectVecClearcoat.yz ) );\ncubeColorClearcoat = envTexColorClearcoat.xyz;\n#ifdef GAMMA_INPUT\ncubeColorClearcoat.xyz *= cubeColorClearcoat.xyz;\n#endif\n#endif\ngl_FragColor.xyz += cubeColor.xyz * specularStrength * speca.xyz;\nfloat schlickRefl = reflectivity + ( 1.0 - reflectivity ) * pow( max(1.0 - facing, 0.0), 5.0 );\ngl_FragColor.xyz = mix(gl_FragColor.xyz, cubeColorClearcoat * schlickRefl, 0.5);\n#else\nvec4 schlickRefl = speca + ( 1.0 - speca ) * pow( max(1.0 - facing, 0.0), 5.0 );\nschlickRefl.rgb *= max(0.0, 1.0 - 2.0 / logShiny);\nif ( combine == 1 ) {\ngl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularStrength * schlickRefl.xyz );\ngl_FragColor.a = schlickRefl.a;\n} else if ( combine == 2 ) {\ngl_FragColor.xyz += cubeColor.xyz * specularStrength * schlickRefl.xyz;\ngl_FragColor.a = schlickRefl.a;\n} else {\ngl_FragColor = mix( gl_FragColor, vec4(gl_FragColor.xyz * cubeColor.xyz, gl_FragColor.a), specularStrength * schlickRefl );\n}\n#endif\n#endif\n#endif",
envmap_pars_vertex:"#if defined( USE_ENVMAP )\n#if ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )\nuniform float refractionRatio;\nuniform bool useRefract;\n#endif\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\nvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n#endif",envmap_vertex:"#if defined( USE_ENVMAP ) \nvec3 worldNormal = mat3( modelMatrix[ 0 ].xyz, modelMatrix[ 1 ].xyz, modelMatrix[ 2 ].xyz ) * objectNormal;\nworldNormal = normalize( worldNormal );\nvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n#endif",
map_pars_vertex:"#if defined( USE_MAP ) || defined( USE_SPECULARMAP )\nvarying vec2 vUv;\nuniform vec4 offsetRepeat;\n#endif\n#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\nvarying vec2 vUvBump;\nuniform vec4 offsetRepeatBump;\n#endif\n#if defined( USE_ALPHAMAP ) || defined( USE_ALPHAMAP )\nvarying vec2 vUvAlpha;\nuniform vec4 offsetRepeatAlpha;\n#endif",map_pars_fragment:"#if defined( USE_MAP ) || defined( USE_SPECULARMAP )\nvarying vec2 vUv;\n#endif\n#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\nvarying vec2 vUvBump;\n#endif\n#if defined( USE_ALPHAMAP )\nvarying vec2 vUvAlpha;\n#endif\n#ifdef USE_MAP\nuniform sampler2D map;\n#endif",
map_vertex:"#if defined( USE_MAP ) || defined( USE_SPECULARMAP )\nvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif\n#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\nvUvBump = uv * offsetRepeatBump.zw + offsetRepeatBump.xy;\n#endif\n#if defined( USE_ALPHAMAP )\nvUvAlpha = uv * offsetRepeatAlpha.zw + offsetRepeatAlpha.xy;\n#endif",map_fragment:"#ifdef USE_MAP\nvec4 texelColor = texture2D( map, vUv );\n#ifdef GAMMA_INPUT\ntexelColor.xyz *= texelColor.xyz;\n#endif\ngl_FragColor = gl_FragColor * texelColor;\n#endif",
lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\nvarying vec2 vUv2;\nuniform sampler2D lightMap;\n#endif",lightmap_pars_vertex:"#ifdef USE_LIGHTMAP\nvarying vec2 vUv2;\n#endif",lightmap_fragment:"#ifdef USE_LIGHTMAP\ngl_FragColor = gl_FragColor * texture2D( lightMap, vUv2 );\n#endif",lightmap_vertex:"#ifdef USE_LIGHTMAP\nvUv2 = uv2;\n#endif",logluv_pars_fragment:"const mat3 InverseM = mat3(\n6.0014, -2.7008, -1.7996,\n-1.3320,  3.1029, -5.7721,\n0.3008, -1.0882,  5.6268);\nvec3 LogLuvDecode(in vec4 vLogLuv) {\nfloat Le = vLogLuv.b * 255.0 + vLogLuv.a;\nvec3 Xp_Y_XYZp;\nXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\nXp_Y_XYZp.z = Xp_Y_XYZp.y / vLogLuv.g;\nXp_Y_XYZp.x = vLogLuv.r * Xp_Y_XYZp.z;\nvec3 vRGB = InverseM * Xp_Y_XYZp;\nreturn max(vRGB, vec3(0.0));\n}",
bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\nuniform sampler2D bumpMap;\nuniform float bumpScale;\nvec2 dHdxy_fwd() {\nvec2 dSTdx = dFdx( vUvBump );\nvec2 dSTdy = dFdy( vUvBump );\nfloat Hll = bumpScale * texture2D( bumpMap, vUvBump ).x;\nfloat dBx = bumpScale * texture2D( bumpMap, vUvBump + dSTdx ).x - Hll;\nfloat dBy = bumpScale * texture2D( bumpMap, vUvBump + dSTdy ).x - Hll;\nreturn vec2( dBx, dBy );\n}\nvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\nvec3 vSigmaX = dFdx( surf_pos );\nvec3 vSigmaY = dFdy( surf_pos );\nvec3 vN = surf_norm;\nvec3 R1 = cross( vSigmaY, vN );\nvec3 R2 = cross( vN, vSigmaX );\nfloat fDet = dot( vSigmaX, R1 );\nvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\nreturn normalize( abs( fDet ) * surf_norm - vGrad );\n}\n#endif",
normalmap_pars_fragment:"#ifdef USE_NORMALMAP\nuniform sampler2D normalMap;\nuniform vec2 normalScale;\nvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\nvec3 q0 = dFdx( eye_pos.xyz );\nvec3 q1 = dFdy( eye_pos.xyz );\nvec2 st0 = dFdx( vUvBump.st );\nvec2 st1 = dFdy( vUvBump.st );\nvec3 S = normalize(  q0 * st1.t - q1 * st0.t );\nvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\nvec3 N = normalize( surf_norm );\nvec3 mapN = texture2D( normalMap, vUvBump ).xyz * 2.0 - 1.0;\nmapN.xy = normalScale * mapN.xy;\nmat3 tsn = mat3( S, T, N );\nreturn normalize( tsn * mapN );\n}\n#endif",
specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\nuniform sampler2D specularMap;\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\nvec4 texelSpecular = texture2D( specularMap, vUv );\nspecularStrength = texelSpecular.r;\n#else\nspecularStrength = 1.0;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tvec4 texelAlpha = texture2D( alphaMap, vUvAlpha );\n\tgl_FragColor.a *= texelAlpha.r;\n#endif",
lights_phong_pars_vertex:"#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\nvarying vec3 vWorldPosition;\n#endif",lights_phong_vertex:"#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\nvWorldPosition = worldPosition.xyz;\n#endif",lights_phong_pars_fragment:"uniform vec3 ambientLightColor;\n#if MAX_DIR_LIGHTS > 0\nuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\nuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n#endif\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\nuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\nuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n#endif\n#if MAX_SPOT_LIGHTS > 0\nuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\nuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\nuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\nuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n#endif\n#ifdef USE_IRRADIANCEMAP\nuniform samplerCube irradianceMap;\n#endif\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\nvarying vec3 vWorldPosition;\n#endif\n#ifdef WRAP_AROUND\nuniform vec3 wrapRGB;\n#endif\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;",
lights_phong_fragment:"#if MAX_POINT_LIGHTS > 0\nvec3 pointDiffuse  = vec3( 0.0 );\nvec3 pointSpecular = vec3( 0.0 );\nfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz + vViewPosition.xyz;\nfloat lDistance = 1.0;\nif ( pointLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\nlVector = normalize( lVector );\nfloat dotProduct = dot( normal, lVector );\n#ifdef WRAP_AROUND\nfloat pointDiffuseWeightFull = max( dotProduct, 0.0 );\nfloat pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\nvec3 pointDiffuseWeight = mix( vec3 ( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n#else\nfloat pointDiffuseWeight = max( dotProduct, 0.0 );\n#endif\npointDiffuse  += diffuse * pointLightColor[ i ] * pointDiffuseWeight * lDistance;\nvec3 pointHalfVector = normalize( lVector + viewPosition );\nfloat pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\nfloat pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininess ), 0.0 );\nfloat specularNormalization = shininess * 0.125 + 0.25;\nvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max(1.0 - dot( lVector, pointHalfVector ), 0.0), 5.0 );\npointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance * specularNormalization ;\n}\n#endif\n#if MAX_SPOT_LIGHTS > 0\nvec3 spotDiffuse  = vec3( 0.0 );\nvec3 spotSpecular = vec3( 0.0 );\nfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz + vViewPosition.xyz;\nfloat lDistance = 1.0;\nif ( spotLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\nlVector = normalize( lVector );\nfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\nif ( spotEffect > spotLightAngleCos[ i ] ) {\nspotEffect = max( pow( spotEffect, spotLightExponent[ i ] ), 0.0 );\nfloat dotProduct = dot( normal, lVector );\n#ifdef WRAP_AROUND\nfloat spotDiffuseWeightFull = max( dotProduct, 0.0 );\nfloat spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\nvec3 spotDiffuseWeight = mix( vec3 ( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n#else\nfloat spotDiffuseWeight = max( dotProduct, 0.0 );\n#endif\nspotDiffuse += diffuse * spotLightColor[ i ] * spotDiffuseWeight * lDistance * spotEffect;\nvec3 spotHalfVector = normalize( lVector + viewPosition );\nfloat spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\nfloat spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininess ), 0.0 );\nfloat specularNormalization = shininess * 0.125 + 0.25;\nvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max(1.0 - dot( lVector, spotHalfVector ), 0.0), 5.0 );\nspotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * specularNormalization * spotEffect;\n}\n}\n#endif\n#if MAX_DIR_LIGHTS > 0\nvec3 dirDiffuse  = vec3( 0.0 );\nvec3 dirSpecular = vec3( 0.0 );\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\nvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\nvec3 dirVector = normalize( lDirection.xyz );\nfloat dotProduct = dot( normal, dirVector );\n#ifdef WRAP_AROUND\nfloat dirDiffuseWeightFull = max( dotProduct, 0.0 );\nfloat dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\nvec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );\n#else\nfloat dirDiffuseWeight = max( dotProduct, 0.0 );\n#endif\ndirDiffuse  += diffuse * directionalLightColor[ i ] * dirDiffuseWeight;\nvec3 dirHalfVector = normalize( dirVector + viewPosition );\nfloat dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\nfloat dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininess ), 0.0 );\nfloat specularNormalization = shininess * 0.125 + 0.25;\nvec3 schlick = specular + vec3( 1.0 - specular ) * pow( max(1.0 - dot( dirVector, dirHalfVector ), 0.0), 5.0 );\ndirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n}\n#endif\nvec3 totalDiffuse = vec3( 0.0 );\nvec3 totalSpecular = vec3( 0.0 );\n#if MAX_DIR_LIGHTS > 0\ntotalDiffuse += dirDiffuse;\ntotalSpecular += dirSpecular;\n#endif\n#if MAX_POINT_LIGHTS > 0\ntotalDiffuse += pointDiffuse;\ntotalSpecular += pointSpecular;\n#endif\n#if MAX_SPOT_LIGHTS > 0\ntotalDiffuse += spotDiffuse;\ntotalSpecular += spotSpecular;\n#endif\n#ifdef USE_IRRADIANCEMAP\nvec3 worldNormal = mat3( viewMatrixInverse[ 0 ].xyz, viewMatrixInverse[ 1 ].xyz, viewMatrixInverse[ 2 ].xyz ) * normal;\nvec4 cubeColor4 = textureCube(irradianceMap, worldNormal);\n#ifdef IRR_LOGLUV\nvec3 indirectDiffuse = LogLuvDecode(cubeColor4);\n#else\nvec3 indirectDiffuse = cubeColor.xyz;\n#ifdef GAMMA_INPUT\nindirectDiffuse.xyz *= indirectDiffuse.xyz;\n#endif\n#endif\ntotalDiffuse += diffuse * indirectDiffuse;\n#endif\n#ifdef METAL\ngl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient + totalSpecular );\n#else\ngl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient ) + totalSpecular;\n#endif",
color_pars_fragment:"#ifdef USE_COLOR\nvarying vec3 vColor;\n#endif",color_fragment:"#ifdef USE_COLOR\ngl_FragColor = gl_FragColor * vec4( vColor, 1.0 );\n#endif",color_pars_vertex:"#ifdef USE_COLOR\nvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n#ifdef GAMMA_INPUT\nvColor = color * color;\n#else\nvColor = color;\n#endif\n#endif",default_vertex:"vec4 mvPosition;\nmvPosition = modelViewMatrix * vec4( position, 1.0 );\ngl_Position = projectionMatrix * mvPosition;",defaultnormal_vertex:"vec3 objectNormal;\nobjectNormal = normal;\n#ifdef FLIP_SIDED\nobjectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;",
shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\nuniform sampler2D shadowMap[ MAX_SHADOWS ];\nuniform vec2 shadowMapSize[ MAX_SHADOWS ];\nuniform float shadowDarkness[ MAX_SHADOWS ];\nuniform float shadowBias[ MAX_SHADOWS ];\nvarying vec4 vShadowCoord[ MAX_SHADOWS ];\nfloat unpackDepth( const in vec4 rgba_depth ) {\nconst vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\nfloat depth = dot( rgba_depth, bit_shift );\nreturn depth;\n}\n#endif",shadowmap_fragment:"#ifdef USE_SHADOWMAP\n#ifdef SHADOWMAP_DEBUG\nvec3 frustumColors[3];\nfrustumColors[0] = vec3( 1.0, 0.5, 0.0 );\nfrustumColors[1] = vec3( 0.0, 1.0, 0.8 );\nfrustumColors[2] = vec3( 0.0, 0.5, 1.0 );\n#endif\n#ifdef SHADOWMAP_CASCADE\nint inFrustumCount = 0;\n#endif\nfloat fDepth;\nvec3 shadowColor = vec3( 1.0 );\nfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\nvec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\nbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\nbool inFrustum = all( inFrustumVec );\n#ifdef SHADOWMAP_CASCADE\ninFrustumCount += int( inFrustum );\nbvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );\n#else\nbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n#endif\nbool frustumTest = all( frustumTestVec );\nif ( frustumTest ) {\nshadowCoord.z += shadowBias[ i ];\n#if defined( SHADOWMAP_TYPE_PCF )\nfloat shadow = 0.0;\nconst float shadowDelta = 1.0 / 9.0;\nfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\nfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\nfloat dx0 = -1.25 * xPixelOffset;\nfloat dy0 = -1.25 * yPixelOffset;\nfloat dx1 = 1.25 * xPixelOffset;\nfloat dy1 = 1.25 * yPixelOffset;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\nfloat shadow = 0.0;\nfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\nfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\nfloat dx0 = -1.0 * xPixelOffset;\nfloat dy0 = -1.0 * yPixelOffset;\nfloat dx1 = 1.0 * xPixelOffset;\nfloat dy1 = 1.0 * yPixelOffset;\nmat3 shadowKernel;\nmat3 depthKernel;\ndepthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\ndepthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\ndepthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\ndepthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\ndepthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\ndepthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\ndepthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\ndepthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\ndepthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\nvec3 shadowZ = vec3( shadowCoord.z );\nshadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));\nshadowKernel[0] *= vec3(0.25);\nshadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));\nshadowKernel[1] *= vec3(0.25);\nshadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));\nshadowKernel[2] *= vec3(0.25);\nvec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );\nshadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );\nshadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );\nvec4 shadowValues;\nshadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );\nshadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );\nshadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );\nshadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );\nshadow = dot( shadowValues, vec4( 1.0 ) );\nshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n#else\nvec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\nfloat fDepth = unpackDepth( rgbaDepth );\nif ( fDepth < shadowCoord.z )\nshadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\n#endif\n}\n#ifdef SHADOWMAP_DEBUG\n#ifdef SHADOWMAP_CASCADE\nif ( inFrustum && inFrustumCount == 1 ) gl_FragColor.xyz *= frustumColors[ i ];\n#else\nif ( inFrustum ) gl_FragColor.xyz *= frustumColors[ i ];\n#endif\n#endif\n}\n#ifdef GAMMA_OUTPUT\nshadowColor *= shadowColor;\n#endif\ngl_FragColor.xyz = gl_FragColor.xyz * shadowColor;\n#endif",
shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\nvarying vec4 vShadowCoord[ MAX_SHADOWS ];\nuniform mat4 shadowMatrix[ MAX_SHADOWS ];\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\nfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\nvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n}\n#endif",alphatest_fragment:"#ifdef ALPHATEST\nif ( gl_FragColor.a < ALPHATEST ) discard;\n#endif",linear_to_gamma_fragment:"#ifdef GAMMA_OUTPUT\ngl_FragColor.xyz = sqrt( gl_FragColor.xyz );\n#endif",mrt_normals_pars_vertex:"#ifdef MRT_NORMALS\nvarying float depth;\n#endif",
mrt_normals_vertex:"#ifdef MRT_NORMALS\ndepth = mvPosition.z;\n#endif",mrt_normals_pars_fragment:["#ifdef MRT_NORMALS","undefined"!==typeof _isIE11&&_isIE11?"":"#extension GL_EXT_draw_buffers : require","varying float depth;\n#define gl_FragColor gl_FragData[0]\n#endif"].join("\n"),mrt_normals_fragment:"#ifdef MRT_NORMALS\ngeomNormal = geomNormal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\ngl_FragData[1] = vec4(geomNormal.x, geomNormal.y, depth, gl_FragColor.a < 1.0 ? 0.0 : 1.0);\n#endif"};
THREE.UniformsUtils={merge:function(a){var b,c,e,d={};for(b=0;b<a.length;b++)for(c in e=this.clone(a[b]),e)d[c]=e[c];return d},clone:function(a){var b,c,e,d={};for(b in a)for(c in d[b]={},a[b])e=a[b][c],d[b][c]=e instanceof THREE.Color||e instanceof THREE.Vector2||e instanceof THREE.Vector3||e instanceof THREE.Vector4||e instanceof THREE.Matrix4||e instanceof THREE.Texture?e.clone():e instanceof Array?e.slice():e;return d}};
THREE.UniformsLib={common:{diffuse:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new THREE.Vector4(0,0,1,1)},offsetRepeatBump:{type:"v4",value:new THREE.Vector4(0,0,1,1)},offsetRepeatAlpha:{type:"v4",value:new THREE.Vector4(0,0,1,1)},lightMap:{type:"t",value:null},specularMap:{type:"t",value:null},alphaMap:{type:"t",value:null},envMap:{type:"t",value:null},flipEnvMap:{type:"f",value:-1},useRefract:{type:"i",value:0},reflectivity:{type:"f",
value:1},refractionRatio:{type:"f",value:0.98},combine:{type:"i",value:0}},bump:{bumpMap:{type:"t",value:null},bumpScale:{type:"f",value:1}},normalmap:{normalMap:{type:"t",value:null},normalScale:{type:"v2",value:new THREE.Vector2(1,1)}},fog:{fogDensity:{type:"f",value:2.5E-4},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3},fogColor:{type:"c",value:new THREE.Color(16777215)}},lights:{ambientLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]},directionalLightColor:{type:"fv",
value:[]},hemisphereLightDirection:{type:"fv",value:[]},hemisphereLightSkyColor:{type:"fv",value:[]},hemisphereLightGroundColor:{type:"fv",value:[]},pointLightColor:{type:"fv",value:[]},pointLightPosition:{type:"fv",value:[]},pointLightDistance:{type:"fv1",value:[]},spotLightColor:{type:"fv",value:[]},spotLightPosition:{type:"fv",value:[]},spotLightDirection:{type:"fv",value:[]},spotLightDistance:{type:"fv1",value:[]},spotLightAngleCos:{type:"fv1",value:[]},spotLightExponent:{type:"fv1",value:[]},
irradianceMap:{type:"t",value:null}},shadowmap:{shadowMap:{type:"tv",value:[]},shadowMapSize:{type:"v2v",value:[]},shadowBias:{type:"fv1",value:[]},shadowDarkness:{type:"fv1",value:[]},shadowMatrix:{type:"m4v",value:[]}}};
THREE.ShaderLib={basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.shadowmap]),vertexShader:[THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,"#ifdef USE_ENVMAP",THREE.ShaderChunk.defaultnormal_vertex,
"#endif",THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,
"void main() {\ngl_FragColor = vec4( diffuse, opacity );",THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},phong:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.bump,
THREE.UniformsLib.normalmap,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{ambient:{type:"c",value:new THREE.Color(16777215)},emissive:{type:"c",value:new THREE.Color(0)},specular:{type:"c",value:new THREE.Color(1118481)},shininess:{type:"f",value:30},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["#define PHONG\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;",THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,
THREE.ShaderChunk.lights_phong_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.mrt_normals_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.defaultnormal_vertex,"vNormal = normalize( transformedNormal );",THREE.ShaderChunk.default_vertex,"vViewPosition = -mvPosition.xyz;",THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_phong_vertex,
THREE.ShaderChunk.shadowmap_vertex,THREE.ShaderChunk.mrt_normals_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;\nuniform vec3 ambient;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.logluv_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.lights_phong_pars_fragment,
THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.bumpmap_pars_fragment,THREE.ShaderChunk.normalmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.mrt_normals_pars_fragment,"void main() {\ngl_FragColor = vec4( vec3 ( 1.0 ), opacity );",THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.normal_fragment,THREE.ShaderChunk.lights_phong_fragment,
THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,THREE.ShaderChunk.mrt_normals_fragment,"}"].join("\n")},dashed:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,{scale:{type:"f",value:1},dashSize:{type:"f",value:1},totalSize:{type:"f",value:2}}]),vertexShader:["uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;",
THREE.ShaderChunk.color_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"vLineDistance = scale * lineDistance;\nvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,"void main() {\nif ( mod( vLineDistance, totalSize ) > dashSize ) {\ndiscard;\n}\ngl_FragColor = vec4( diffuse, opacity );",
THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},depth:{uniforms:{mNear:{type:"f",value:1},mFar:{type:"f",value:2E3},opacity:{type:"f",value:1}},vertexShader:"void main() {\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"uniform float mNear;\nuniform float mFar;\nuniform float opacity;\nvoid main() {\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\nfloat color = 1.0 - smoothstep( mNear, mFar, depth );\ngl_FragColor = vec4( vec3( color ), opacity );\n}"},
normal:{uniforms:{opacity:{type:"f",value:1}},vertexShader:["varying vec3 vNormal;",THREE.ShaderChunk.morphtarget_pars_vertex,"void main() {\nvNormal = normalize( normalMatrix * normal );",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.default_vertex,"}"].join("\n"),fragmentShader:"uniform float opacity;\nvarying vec3 vNormal;\nvoid main() {\ngl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );\n}"},cube:{uniforms:{tCube:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:"varying vec3 vWorldPosition;\nvoid main() {\nvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\nvWorldPosition = worldPosition.xyz;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",
fragmentShader:"uniform samplerCube tCube;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\nvoid main() {\ngl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n}"},depthRGBA:{uniforms:{},vertexShader:[THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,"void main() {",THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,"}"].join("\n"),fragmentShader:"vec4 pack_depth( const in float depth ) {\nconst vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\nconst vec4 bit_mask  = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\nvec4 res = fract( depth * bit_shift );\nres -= res.xxyz * bit_mask;\nreturn res;\n}\nvoid main() {\ngl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );\n}"}};
THREE.WebGLRenderTarget=function(a,b,c){this.width=a;this.height=b;c=c||{};this.wrapS=void 0!==c.wrapS?c.wrapS:THREE.ClampToEdgeWrapping;this.wrapT=void 0!==c.wrapT?c.wrapT:THREE.ClampToEdgeWrapping;this.magFilter=void 0!==c.magFilter?c.magFilter:THREE.LinearFilter;this.minFilter=void 0!==c.minFilter?c.minFilter:THREE.LinearMipMapLinearFilter;this.anisotropy=void 0!==c.anisotropy?c.anisotropy:1;this.offset=new THREE.Vector2(0,0);this.repeat=new THREE.Vector2(1,1);this.format=void 0!==c.format?c.format:
THREE.RGBAFormat;this.type=void 0!==c.type?c.type:THREE.UnsignedByteType;this.depthBuffer=void 0!==c.depthBuffer?c.depthBuffer:!0;this.stencilBuffer=void 0!==c.stencilBuffer?c.stencilBuffer:!0;this.generateMipmaps=!0;this.shareDepthFrom=null};
THREE.WebGLRenderTarget.prototype={constructor:THREE.WebGLRenderTarget,clone:function(){var a=new THREE.WebGLRenderTarget(this.width,this.height);a.wrapS=this.wrapS;a.wrapT=this.wrapT;a.magFilter=this.magFilter;a.minFilter=this.minFilter;a.anisotropy=this.anisotropy;a.offset.copy(this.offset);a.repeat.copy(this.repeat);a.format=this.format;a.type=this.type;a.depthBuffer=this.depthBuffer;a.stencilBuffer=this.stencilBuffer;a.generateMipmaps=this.generateMipmaps;a.shareDepthFrom=this.shareDepthFrom;
return a},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.WebGLRenderTarget.prototype);
THREE.GeometryUtils={merge:function(a,b,c){var e,d,g=a.vertices.length,f=b instanceof THREE.Mesh?b.geometry:b,h=a.vertices,k=f.vertices,l=a.faces,n=f.faces;a=a.faceVertexUvs[0];f=f.faceVertexUvs[0];void 0===c&&(c=0);b instanceof THREE.Mesh&&(b.matrixAutoUpdate&&b.updateMatrix(),e=b.matrix,d=(new THREE.Matrix3).getNormalMatrix(e));b=0;for(var m=k.length;b<m;b++){var p=k[b].clone();e&&p.applyMatrix4(e);h.push(p)}b=0;for(m=n.length;b<m;b++){var p=n[b],q,s,r=p.vertexNormals,u=p.vertexColors;q=new THREE.Face3(p.a+
g,p.b+g,p.c+g);q.normal.copy(p.normal);d&&q.normal.applyMatrix3(d).normalize();h=0;for(k=r.length;h<k;h++)s=r[h].clone(),d&&s.applyMatrix3(d).normalize(),q.vertexNormals.push(s);q.color.copy(p.color);h=0;for(k=u.length;h<k;h++)s=u[h],q.vertexColors.push(s.clone());q.materialIndex=p.materialIndex+c;q.centroid.copy(p.centroid);e&&q.centroid.applyMatrix4(e);l.push(q)}b=0;for(m=f.length;b<m;b++){c=f[b];e=[];h=0;for(k=c.length;h<k;h++)e.push(new THREE.Vector2(c[h].x,c[h].y));a.push(e)}},randomPointInTriangle:function(){var a=
new THREE.Vector3;return function(b,c,e){var d=new THREE.Vector3,g=THREE.Math.random16(),f=THREE.Math.random16();1<g+f&&(g=1-g,f=1-f);var h=1-g-f;d.copy(b);d.multiplyScalar(g);a.copy(c);a.multiplyScalar(f);d.add(a);a.copy(e);a.multiplyScalar(h);d.add(a);return d}}(),randomPointInFace:function(a,b,c){return THREE.GeometryUtils.randomPointInTriangle(b.vertices[a.a],b.vertices[a.b],b.vertices[a.c])},randomPointsInGeometry:function(a,b){function c(a){function b(f,d){if(d<f)return f;var c=f+Math.floor((d-
f)/2);return l[c]>a?b(f,c-1):l[c]<a?b(c+1,d):c}return b(0,l.length-1)}var e,d,g=a.faces,f=a.vertices,h=g.length,k=0,l=[],n,m,p;for(d=0;d<h;d++)e=g[d],n=f[e.a],m=f[e.b],p=f[e.c],e._area=THREE.GeometryUtils.triangleArea(n,m,p),k+=e._area,l[d]=k;e=[];for(d=0;d<b;d++)f=THREE.Math.random16()*k,f=c(f),e[d]=THREE.GeometryUtils.randomPointInFace(g[f],a,!0);return e},triangleArea:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c,e,d){a.subVectors(e,c);b.subVectors(d,c);a.cross(b);return 0.5*
a.length()}}(),center:function(a){a.computeBoundingBox();var b=a.boundingBox,c=new THREE.Vector3;c.addVectors(b.min,b.max);c.multiplyScalar(-0.5);a.applyMatrix((new THREE.Matrix4).makeTranslation(c.x,c.y,c.z));a.computeBoundingBox();return c},triangulateQuads:function(a){var b,c,e,d,g=[],f=[];b=0;for(c=a.faceVertexUvs.length;b<c;b++)f[b]=[];b=0;for(c=a.faces.length;b<c;b++)for(g.push(a.faces[b]),e=0,d=a.faceVertexUvs.length;e<d;e++)f[e].push(a.faceVertexUvs[e][b]);a.faces=g;a.faceVertexUvs=f;a.computeCentroids();
a.computeFaceNormals();a.computeVertexNormals();a.hasTangents&&a.computeTangents()}};
THREE.ImageUtils={crossOrigin:"",loadTexture:function(a,b,c,e){e=new THREE.ImageLoader;e.crossOrigin=this.crossOrigin;var d=new THREE.Texture(void 0,b);b=e.load(a,function(){d.needsUpdate=!0;c&&c(d)});d.image=b;d.sourceFile=a;return d},loadCompressedTexture:function(a,b,c,e){var d=new THREE.CompressedTexture;d.mapping=b;var g=new XMLHttpRequest;g.onload=function(){var a=THREE.ImageUtils.parseDDS(g.response,!0);d.format=a.format;d.type=a.type;d.mipmaps=a.mipmaps;d.image.width=a.width;d.image.height=
a.height;d.generateMipmaps=!1;d.needsUpdate=!0;c&&c(d)};g.onerror=e;g.open("GET",a,!0);g.responseType="arraybuffer";g.send(null);return d},loadTextureCube:function(a,b,c,e){var d=[];d.loadCount=0;var g=new THREE.Texture;g.image=d;void 0!==b&&(g.mapping=b);g.flipY=!1;b=0;for(var f=a.length;b<f;++b){var h=new Image;d[b]=h;h.onload=function(){d.loadCount+=1;6===d.loadCount&&(g.needsUpdate=!0,c&&c(g))};h.onerror=e;h.crossOrigin=this.crossOrigin;h.src=a[b]}return g},loadCompressedTextureCube:function(a,
b,c,e){var d=[];d.loadCount=0;var g=new THREE.CompressedTexture;g.image=d;void 0!==b&&(g.mapping=b);g.flipY=!1;g.generateMipmaps=!1;b=function(a,b){return function(){var f=THREE.ImageUtils.parseDDS(a.response,!0);b.format=f.format;b.type=f.type;b.mipmaps=f.mipmaps;b.width=f.width;b.height=f.height;d.loadCount+=1;6===d.loadCount&&(g.format=f.format,g.type=f.type,1==f.mipmapCount&&(g.minFilter=THREE.LinearFilter),g.needsUpdate=!0,c&&c(g))}};if(a instanceof Array)for(var f=0,h=a.length;f<h;++f){var k=
{};d[f]=k;var l=new XMLHttpRequest;l.onload=b(l,k);l.onerror=e;k=a[f];l.open("GET",k,!0);l.responseType="arraybuffer";l.send(null)}else l=new XMLHttpRequest,l.onload=function(){var a=THREE.ImageUtils.parseDDS(l.response,!0);if(a.isCubemap){for(var b=a.mipmaps.length/a.mipmapCount,f=0;f<b;f++){d[f]={mipmaps:[]};for(var h=0;h<a.mipmapCount;h++)d[f].mipmaps.push(a.mipmaps[f*a.mipmapCount+h]),d[f].format=a.format,d[f].type=a.type,d[f].width=a.width,d[f].height=a.height}g.format=a.format;g.type=a.type;
1==a.mipmapCount&&(g.minFilter=THREE.LinearFilter);g.needsUpdate=!0;c&&c(g)}},l.onerror=e,l.open("GET",a,!0),l.responseType="arraybuffer",l.send(null);return g},loadDDSTexture:function(a,b,c,e){var d=[];d.loadCount=0;var g=new THREE.CompressedTexture;g.image=d;void 0!==b&&(g.mapping=b);g.flipY=!1;g.generateMipmaps=!1;var f=new XMLHttpRequest;f.onload=function(){var a=THREE.ImageUtils.parseDDS(f.response,!0);if(a.isCubemap)for(var b=a.mipmaps.length/a.mipmapCount,e=0;e<b;e++){d[e]={mipmaps:[]};for(var n=
0;n<a.mipmapCount;n++)d[e].mipmaps.push(a.mipmaps[e*a.mipmapCount+n]),d[e].format=a.format,d[e].type=a.type,d[e].width=a.width,d[e].height=a.height}else g.image.width=a.width,g.image.height=a.height,g.mipmaps=a.mipmaps;g.format=a.format;g.type=a.type;1==a.mipmapCount&&(g.minFilter=THREE.LinearFilter);g.needsUpdate=!0;c&&c(g)};f.onerror=e;f.open("GET",a,!0);f.responseType="arraybuffer";f.send(null);return g},parseDDS:function(a,b){function c(a){return a.charCodeAt(0)+(a.charCodeAt(1)<<8)+(a.charCodeAt(2)<<
16)+(a.charCodeAt(3)<<24)}function e(a,b,f,d){var c=f*d*4;a=new Uint8Array(a,b,c);for(var c=new Uint8Array(c),h=b=0,e=0;e<d;e++)for(var k=0;k<f;k++){var g=a[h];h++;var l=a[h];h++;var n=a[h];h++;var m=a[h];h++;c[b]=n;b++;c[b]=l;b++;c[b]=g;b++;c[b]=m;b++}return c}var d={mipmaps:[],width:0,height:0,format:null,type:THREE.UnsignedByteType,mipmapCount:1},g=c("DXT1"),f=c("DXT3"),h=c("DXT5"),k=new Int32Array(a,0,31);if(542327876!==k[0])return console.error("ImageUtils.parseDDS(): Invalid magic number in DDS header"),
d;if(!k[20]&4)return console.error("ImageUtils.parseDDS(): Unsupported format, must contain a FourCC code"),d;var l=k[21],n=!1;switch(l){case g:g=8;d.format=THREE.RGB_S3TC_DXT1_Format;break;case f:g=16;d.format=THREE.RGBA_S3TC_DXT3_Format;break;case h:g=16;d.format=THREE.RGBA_S3TC_DXT5_Format;break;case 116:g=16;d.format=THREE.RGBAFormat;d.type=THREE.FloatType;n=!0;break;default:if(32==k[22]&&k[23]&16711680&&k[24]&65280&&k[25]&255&&k[26]&4278190080)n=!0,g=64,d.format=THREE.RGBAFormat,d.type=THREE.UnsignedByteType;
else return console.error("ImageUtils.parseDDS(): Unsupported FourCC code: ",String.fromCharCode(l&255,l>>8&255,l>>16&255,l>>24&255)),d}d.mipmapCount=1;k[2]&131072&&!1!==b&&(d.mipmapCount=Math.max(1,k[7]));d.isCubemap=k[28]&512?!0:!1;d.width=k[4];d.height=k[3];for(var k=k[1]+4,f=d.width,h=d.height,l=d.isCubemap?6:1,m=0;m<l;m++){for(var p=0;p<d.mipmapCount;p++){if(n)if(d.type==THREE.FloatType)var q=f*h*16,s=new Float32Array(a.slice(k,k+q));else s=e(a,k,f,h),q=s.length;else q=Math.max(4,f)/4*Math.max(4,
h)/4*g,s=new Uint8Array(a,k,q);d.mipmaps.push({data:s,width:f,height:h});k+=q;f=Math.max(0.5*f,1);h=Math.max(0.5*h,1)}f=d.width;h=d.height}return d},getNormalMap:function(a,b){var c=function(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);return[a[0]/b,a[1]/b,a[2]/b]};b|=1;var e=a.width,d=a.height,g=document.createElement("canvas");g.width=e;g.height=d;var f=g.getContext("2d");f.drawImage(a,0,0);for(var h=f.getImageData(0,0,e,d).data,k=f.createImageData(e,d),l=k.data,n=0;n<e;n++)for(var m=0;m<d;m++){var p=
0>m-1?0:m-1,q=m+1>d-1?d-1:m+1,s=0>n-1?0:n-1,r=n+1>e-1?e-1:n+1,u=[],w=[0,0,h[4*(m*e+n)]/255*b];u.push([-1,0,h[4*(m*e+s)]/255*b]);u.push([-1,-1,h[4*(p*e+s)]/255*b]);u.push([0,-1,h[4*(p*e+n)]/255*b]);u.push([1,-1,h[4*(p*e+r)]/255*b]);u.push([1,0,h[4*(m*e+r)]/255*b]);u.push([1,1,h[4*(q*e+r)]/255*b]);u.push([0,1,h[4*(q*e+n)]/255*b]);u.push([-1,1,h[4*(q*e+s)]/255*b]);p=[];s=u.length;for(q=0;q<s;q++){var r=u[q],A=u[(q+1)%s],r=[r[0]-w[0],r[1]-w[1],r[2]-w[2]],A=[A[0]-w[0],A[1]-w[1],A[2]-w[2]];p.push(c([r[1]*
A[2]-r[2]*A[1],r[2]*A[0]-r[0]*A[2],r[0]*A[1]-r[1]*A[0]]))}u=[0,0,0];for(q=0;q<p.length;q++)u[0]+=p[q][0],u[1]+=p[q][1],u[2]+=p[q][2];u[0]/=p.length;u[1]/=p.length;u[2]/=p.length;w=4*(m*e+n);l[w]=(u[0]+1)/2*255|0;l[w+1]=(u[1]+1)/2*255|0;l[w+2]=255*u[2]|0;l[w+3]=255}f.putImageData(k,0,0);return g},generateDataTexture:function(a,b,c){var e=a*b,d=new Uint8Array(3*e),g=Math.floor(255*c.r),f=Math.floor(255*c.g);c=Math.floor(255*c.b);for(var h=0;h<e;h++)d[3*h]=g,d[3*h+1]=f,d[3*h+2]=c;a=new THREE.DataTexture(d,
a,b,THREE.RGBFormat);a.needsUpdate=!0;return a}};THREE.SceneUtils={createMultiMaterialObject:function(a,b){for(var c=new THREE.Object3D,e=0,d=b.length;e<d;e++)c.add(new THREE.Mesh(a,b[e]));return c},detach:function(a,b,c){a.applyMatrix(b.matrixWorld);b.remove(a);c.add(a)},attach:function(a,b,c){var e=new THREE.Matrix4;e.getInverse(c.matrixWorld);a.applyMatrix(e);b.remove(a);c.add(a)}};
THREE.FontUtils={faces:{},face:"helvetiker",weight:"normal",style:"normal",size:150,divisions:10,getFace:function(){return this.faces[this.face][this.weight][this.style]},loadFace:function(a){var b=a.familyName.toLowerCase();this.faces[b]=this.faces[b]||{};this.faces[b][a.cssFontWeight]=this.faces[b][a.cssFontWeight]||{};this.faces[b][a.cssFontWeight][a.cssFontStyle]=a;return this.faces[b][a.cssFontWeight][a.cssFontStyle]=a},drawText:function(a){var b=this.getFace(),c=this.size/b.resolution,e=0,d=
String(a).split(""),g=d.length,f=[];for(a=0;a<g;a++){var h=new THREE.Path,h=this.extractGlyphPoints(d[a],b,c,e,h),e=e+h.offset;f.push(h.path)}return{paths:f,offset:e/2}},extractGlyphPoints:function(a,b,c,e,d){var g=[],f,h,k,l,n,m,p,q,s,r,u,w=b.glyphs[a]||b.glyphs["?"];if(w){if(w.o)for(b=w._cachedOutline||(w._cachedOutline=w.o.split(" ")),l=b.length,a=0;a<l;)switch(k=b[a++],k){case "m":k=b[a++]*c+e;n=b[a++]*c;d.moveTo(k,n);break;case "l":k=b[a++]*c+e;n=b[a++]*c;d.lineTo(k,n);break;case "q":k=b[a++]*
c+e;n=b[a++]*c;q=b[a++]*c+e;s=b[a++]*c;d.quadraticCurveTo(q,s,k,n);if(f=g[g.length-1])for(m=f.x,p=f.y,f=1,h=this.divisions;f<=h;f++){var A=f/h;THREE.Shape.Utils.b2(A,m,q,k);THREE.Shape.Utils.b2(A,p,s,n)}break;case "b":if(k=b[a++]*c+e,n=b[a++]*c,q=b[a++]*c+e,s=b[a++]*-c,r=b[a++]*c+e,u=b[a++]*-c,d.bezierCurveTo(k,n,q,s,r,u),f=g[g.length-1])for(m=f.x,p=f.y,f=1,h=this.divisions;f<=h;f++)A=f/h,THREE.Shape.Utils.b3(A,m,q,r,k),THREE.Shape.Utils.b3(A,p,s,u,n)}return{offset:w.ha*c,path:d}}}};
THREE.FontUtils.generateShapes=function(a,b){b=b||{};var c=void 0!==b.curveSegments?b.curveSegments:4,e=void 0!==b.font?b.font:"helvetiker",d=void 0!==b.weight?b.weight:"normal",g=void 0!==b.style?b.style:"normal";THREE.FontUtils.size=void 0!==b.size?b.size:100;THREE.FontUtils.divisions=c;THREE.FontUtils.face=e;THREE.FontUtils.weight=d;THREE.FontUtils.style=g;c=THREE.FontUtils.drawText(a).paths;e=[];d=0;for(g=c.length;d<g;d++)Array.prototype.push.apply(e,c[d].toShapes());return e};
(function(a){var b=function(a){for(var b=a.length,d=0,g=b-1,f=0;f<b;g=f++)d+=a[g].x*a[f].y-a[f].x*a[g].y;return 0.5*d};a.Triangulate=function(a,e){var d=a.length;if(3>d)return null;var g=[],f=[],h=[],k,l,n;if(0<b(a))for(l=0;l<d;l++)f[l]=l;else for(l=0;l<d;l++)f[l]=d-1-l;var m=2*d;for(l=d-1;2<d;){if(0>=m--){console.log("Warning, unable to triangulate polygon!");break}k=l;d<=k&&(k=0);l=k+1;d<=l&&(l=0);n=l+1;d<=n&&(n=0);var p;a:{var q=void 0,s=void 0,r=void 0,u=void 0,w=void 0,A=void 0,v=void 0,B=void 0,
q=a[f[k]].x,s=a[f[k]].y,r=a[f[l]].x,u=a[f[l]].y,w=a[f[n]].x,A=a[f[n]].y;if(1E-10>(r-q)*(A-s)-(u-s)*(w-q))p=!1;else{var C=void 0,N=void 0,G=void 0,I=void 0,H=void 0,F=void 0,P=void 0,z=void 0,K=void 0,E=void 0,K=z=P=B=v=void 0,C=w-r,N=A-u,G=q-w,I=s-A,H=r-q,F=u-s;for(p=0;p<d;p++)if(v=a[f[p]].x,B=a[f[p]].y,!(v===q&&B===s||v===r&&B===u||v===w&&B===A)&&(P=v-q,z=B-s,K=v-r,E=B-u,v-=w,B-=A,K=C*E-N*K,P=H*z-F*P,z=G*B-I*v,-1E-10<=K&&-1E-10<=z&&-1E-10<=P)){p=!1;break a}p=!0}}if(p){g.push([a[f[k]],a[f[l]],a[f[n]]]);
h.push([f[k],f[l],f[n]]);k=l;for(n=l+1;n<d;k++,n++)f[k]=f[n];d--;m=2*d}}return e?h:g};a.Triangulate.area=b;return a})(THREE.FontUtils);self._typeface_js={faces:THREE.FontUtils.faces,loadFace:THREE.FontUtils.loadFace};THREE.typeface_js=self._typeface_js;THREE.Gyroscope=function(){THREE.Object3D.call(this)};THREE.Gyroscope.prototype=Object.create(THREE.Object3D.prototype);
THREE.Gyroscope.prototype.updateMatrixWorld=function(a){this.matrixAutoUpdate&&this.updateMatrix();if(this.matrixWorldNeedsUpdate||a)this.parent?(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorld.decompose(this.translationWorld,this.quaternionWorld,this.scaleWorld),this.matrix.decompose(this.translationObject,this.quaternionObject,this.scaleObject),this.matrixWorld.compose(this.translationWorld,this.quaternionObject,this.scaleWorld)):this.matrixWorld.copy(this.matrix),
this.matrixWorldNeedsUpdate=!1,a=!0;for(var b=0,c=this.children.length;b<c;b++)this.children[b].updateMatrixWorld(a)};THREE.Gyroscope.prototype.translationWorld=new THREE.Vector3;THREE.Gyroscope.prototype.translationObject=new THREE.Vector3;THREE.Gyroscope.prototype.quaternionWorld=new THREE.Quaternion;THREE.Gyroscope.prototype.quaternionObject=new THREE.Quaternion;THREE.Gyroscope.prototype.scaleWorld=new THREE.Vector3;THREE.Gyroscope.prototype.scaleObject=new THREE.Vector3;
THREE.AnimationHandler=function(){var a=[],b={},c={update:function(b){for(var c=0;c<a.length;c++)a[c].update(b)},addToUpdate:function(b){-1===a.indexOf(b)&&a.push(b)},removeFromUpdate:function(b){b=a.indexOf(b);-1!==b&&a.splice(b,1)},add:function(a){void 0!==b[a.name]&&console.log("THREE.AnimationHandler.add: Warning! "+a.name+" already exists in library. Overwriting.");b[a.name]=a;if(!0!==a.initialized){for(var c=0;c<a.hierarchy.length;c++){for(var f=0;f<a.hierarchy[c].keys.length;f++)if(0>a.hierarchy[c].keys[f].time&&
(a.hierarchy[c].keys[f].time=0),void 0!==a.hierarchy[c].keys[f].rot&&!(a.hierarchy[c].keys[f].rot instanceof THREE.Quaternion)){var h=a.hierarchy[c].keys[f].rot;a.hierarchy[c].keys[f].rot=new THREE.Quaternion(h[0],h[1],h[2],h[3])}if(a.hierarchy[c].keys.length&&void 0!==a.hierarchy[c].keys[0].morphTargets){h={};for(f=0;f<a.hierarchy[c].keys.length;f++)for(var e=0;e<a.hierarchy[c].keys[f].morphTargets.length;e++){var l=a.hierarchy[c].keys[f].morphTargets[e];h[l]=-1}a.hierarchy[c].usedMorphTargets=h;
for(f=0;f<a.hierarchy[c].keys.length;f++){var n={};for(l in h){for(e=0;e<a.hierarchy[c].keys[f].morphTargets.length;e++)if(a.hierarchy[c].keys[f].morphTargets[e]===l){n[l]=a.hierarchy[c].keys[f].morphTargetsInfluences[e];break}e===a.hierarchy[c].keys[f].morphTargets.length&&(n[l]=0)}a.hierarchy[c].keys[f].morphTargetsInfluences=n}}for(f=1;f<a.hierarchy[c].keys.length;f++)a.hierarchy[c].keys[f].time===a.hierarchy[c].keys[f-1].time&&(a.hierarchy[c].keys.splice(f,1),f--);for(f=0;f<a.hierarchy[c].keys.length;f++)a.hierarchy[c].keys[f].index=
f}a.initialized=!0}},get:function(a){if("string"===typeof a){if(b[a])return b[a];console.log("THREE.AnimationHandler.get: Couldn't find animation "+a);return null}},parse:function(a){var b=[];if(a instanceof THREE.SkinnedMesh)for(var f=0;f<a.bones.length;f++)b.push(a.bones[f]);else e(a,b);return b}},e=function(a,b){b.push(a);for(var f=0;f<a.children.length;f++)e(a.children[f],b)};c.LINEAR=0;c.CATMULLROM=1;c.CATMULLROM_FORWARD=2;return c}();
THREE.Animation=function(a,b){this.root=a;this.data=THREE.AnimationHandler.get(b);this.hierarchy=THREE.AnimationHandler.parse(a);this.currentTime=0;this.timeScale=1;this.isPlaying=!1;this.loop=this.isPaused=!0;this.interpolationType=THREE.AnimationHandler.LINEAR};THREE.Animation.prototype.play=function(a){this.currentTime=void 0!==a?a:0;!1===this.isPlaying&&(this.isPlaying=!0,this.reset(),this.update(0));this.isPaused=!1;THREE.AnimationHandler.addToUpdate(this)};
THREE.Animation.prototype.pause=function(){!0===this.isPaused?THREE.AnimationHandler.addToUpdate(this):THREE.AnimationHandler.removeFromUpdate(this);this.isPaused=!this.isPaused};THREE.Animation.prototype.stop=function(){this.isPaused=this.isPlaying=!1;THREE.AnimationHandler.removeFromUpdate(this)};
THREE.Animation.prototype.reset=function(){for(var a=0,b=this.hierarchy.length;a<b;a++){var c=this.hierarchy[a];c.matrixAutoUpdate=!0;void 0===c.animationCache&&(c.animationCache={},c.animationCache.prevKey={pos:0,rot:0,scl:0},c.animationCache.nextKey={pos:0,rot:0,scl:0},c.animationCache.originalMatrix=c instanceof THREE.Bone?c.skinMatrix:c.matrix);var e=c.animationCache.prevKey,c=c.animationCache.nextKey;e.pos=this.data.hierarchy[a].keys[0];e.rot=this.data.hierarchy[a].keys[0];e.scl=this.data.hierarchy[a].keys[0];
c.pos=this.getNextKeyWith("pos",a,1);c.rot=this.getNextKeyWith("rot",a,1);c.scl=this.getNextKeyWith("scl",a,1)}};
THREE.Animation.prototype.update=function(){var a=[],b=new THREE.Vector3,c=function(a,b){var f=[],c=[],k,l,n,m,p,q;k=(a.length-1)*b;l=Math.floor(k);k-=l;f[0]=0===l?l:l-1;f[1]=l;f[2]=l>a.length-2?l:l+1;f[3]=l>a.length-3?l:l+2;l=a[f[0]];m=a[f[1]];p=a[f[2]];q=a[f[3]];f=k*k;n=k*f;c[0]=e(l[0],m[0],p[0],q[0],k,f,n);c[1]=e(l[1],m[1],p[1],q[1],k,f,n);c[2]=e(l[2],m[2],p[2],q[2],k,f,n);return c},e=function(a,b,f,c,e,l,n){a=0.5*(f-a);c=0.5*(c-b);return(2*(b-f)+a+c)*n+(-3*(b-f)-2*a-c)*l+a*e+b};return function(d){if(!1!==
this.isPlaying){this.currentTime+=d*this.timeScale;var e;d=["pos","rot","scl"];var f=this.data.length;if(!0===this.loop&&this.currentTime>f)this.currentTime%=f,this.reset();else if(!1===this.loop&&this.currentTime>f){this.stop();return}this.currentTime=Math.min(this.currentTime,f);for(var f=0,h=this.hierarchy.length;f<h;f++)for(var k=this.hierarchy[f],l=k.animationCache,n=0;3>n;n++){e=d[n];var m=l.prevKey[e],p=l.nextKey[e];if(p.time<=this.currentTime){m=this.data.hierarchy[f].keys[0];for(p=this.getNextKeyWith(e,
f,1);p.time<this.currentTime&&p.index>m.index;)m=p,p=this.getNextKeyWith(e,f,p.index+1);l.prevKey[e]=m;l.nextKey[e]=p}k.matrixAutoUpdate=!0;k.matrixWorldNeedsUpdate=!0;var q=(this.currentTime-m.time)/(p.time-m.time),s=m[e],r=p[e];0>q&&(q=0);1<q&&(q=1);if("pos"===e)if(e=k.position,this.interpolationType===THREE.AnimationHandler.LINEAR)e.x=s[0]+(r[0]-s[0])*q,e.y=s[1]+(r[1]-s[1])*q,e.z=s[2]+(r[2]-s[2])*q;else{if(this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD)a[0]=
this.getPrevKeyWith("pos",f,m.index-1).pos,a[1]=s,a[2]=r,a[3]=this.getNextKeyWith("pos",f,p.index+1).pos,q=0.33*q+0.33,m=c(a,q),e.x=m[0],e.y=m[1],e.z=m[2],this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD&&(q=c(a,1.01*q),b.set(q[0],q[1],q[2]),b.sub(e),b.y=0,b.normalize(),e=Math.atan2(b.x,b.z),k.rotation.set(0,e,0))}else"rot"===e?THREE.Quaternion.slerp(s,r,k.quaternion,q):"scl"===e&&(e=k.scale,e.x=s[0]+(r[0]-s[0])*q,e.y=s[1]+(r[1]-s[1])*q,e.z=s[2]+(r[2]-s[2])*q)}}}}();
THREE.Animation.prototype.getNextKeyWith=function(a,b,c){var e=this.data.hierarchy[b].keys;for(c=this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD?c<e.length-1?c:e.length-1:c%e.length;c<e.length;c++)if(void 0!==e[c][a])return e[c];return this.data.hierarchy[b].keys[0]};
THREE.Animation.prototype.getPrevKeyWith=function(a,b,c){var e=this.data.hierarchy[b].keys;for(c=this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD?0<c?c:0:0<=c?c:c+e.length;0<=c;c--)if(void 0!==e[c][a])return e[c];return this.data.hierarchy[b].keys[e.length-1]};
THREE.KeyFrameAnimation=function(a,b){this.root=a;this.data=THREE.AnimationHandler.get(b);this.hierarchy=THREE.AnimationHandler.parse(a);this.currentTime=0;this.timeScale=0.001;this.isPlaying=!1;this.loop=this.isPaused=!0;for(var c=0,e=this.hierarchy.length;c<e;c++){var d=this.data.hierarchy[c].sids,g=this.hierarchy[c];if(this.data.hierarchy[c].keys.length&&d){for(var f=0;f<d.length;f++){var h=d[f],k=this.getNextKeyWith(h,c,0);k&&k.apply(h)}g.matrixAutoUpdate=!1;this.data.hierarchy[c].node.updateMatrix();
g.matrixWorldNeedsUpdate=!0}}};
THREE.KeyFrameAnimation.prototype.play=function(a){this.currentTime=void 0!==a?a:0;if(!1===this.isPlaying){this.isPlaying=!0;var b=this.hierarchy.length,c,e;for(a=0;a<b;a++)c=this.hierarchy[a],e=this.data.hierarchy[a],void 0===e.animationCache&&(e.animationCache={},e.animationCache.prevKey=null,e.animationCache.nextKey=null,e.animationCache.originalMatrix=c instanceof THREE.Bone?c.skinMatrix:c.matrix),c=this.data.hierarchy[a].keys,c.length&&(e.animationCache.prevKey=c[0],e.animationCache.nextKey=
c[1],this.startTime=Math.min(c[0].time,this.startTime),this.endTime=Math.max(c[c.length-1].time,this.endTime));this.update(0)}this.isPaused=!1;THREE.AnimationHandler.addToUpdate(this)};THREE.KeyFrameAnimation.prototype.pause=function(){this.isPaused?THREE.AnimationHandler.addToUpdate(this):THREE.AnimationHandler.removeFromUpdate(this);this.isPaused=!this.isPaused};
THREE.KeyFrameAnimation.prototype.stop=function(){this.isPaused=this.isPlaying=!1;THREE.AnimationHandler.removeFromUpdate(this);for(var a=0;a<this.data.hierarchy.length;a++){var b=this.hierarchy[a],c=this.data.hierarchy[a];if(void 0!==c.animationCache){var e=c.animationCache.originalMatrix;b instanceof THREE.Bone?(e.copy(b.skinMatrix),b.skinMatrix=e):(e.copy(b.matrix),b.matrix=e);delete c.animationCache}}};
THREE.KeyFrameAnimation.prototype.update=function(a){if(!1!==this.isPlaying){this.currentTime+=a*this.timeScale;a=this.data.length;!0===this.loop&&this.currentTime>a&&(this.currentTime%=a);this.currentTime=Math.min(this.currentTime,a);a=0;for(var b=this.hierarchy.length;a<b;a++){var c=this.hierarchy[a],e=this.data.hierarchy[a],d=e.keys,e=e.animationCache;if(d.length){var g=e.prevKey,f=e.nextKey;if(f.time<=this.currentTime){for(;f.time<this.currentTime&&f.index>g.index;)g=f,f=d[g.index+1];e.prevKey=
g;e.nextKey=f}f.time>=this.currentTime?g.interpolate(f,this.currentTime):g.interpolate(f,f.time);this.data.hierarchy[a].node.updateMatrix();c.matrixWorldNeedsUpdate=!0}}}};THREE.KeyFrameAnimation.prototype.getNextKeyWith=function(a,b,c){b=this.data.hierarchy[b].keys;for(c%=b.length;c<b.length;c++)if(b[c].hasTarget(a))return b[c];return b[0]};
THREE.KeyFrameAnimation.prototype.getPrevKeyWith=function(a,b,c){b=this.data.hierarchy[b].keys;for(c=0<=c?c:c+b.length;0<=c;c--)if(b[c].hasTarget(a))return b[c];return b[b.length-1]};
THREE.CubeCamera=function(a,b,c){THREE.Object3D.call(this);var e=new THREE.PerspectiveCamera(90,1,a,b);e.up.set(0,-1,0);e.lookAt(new THREE.Vector3(1,0,0));this.add(e);var d=new THREE.PerspectiveCamera(90,1,a,b);d.up.set(0,-1,0);d.lookAt(new THREE.Vector3(-1,0,0));this.add(d);var g=new THREE.PerspectiveCamera(90,1,a,b);g.up.set(0,0,1);g.lookAt(new THREE.Vector3(0,1,0));this.add(g);var f=new THREE.PerspectiveCamera(90,1,a,b);f.up.set(0,0,-1);f.lookAt(new THREE.Vector3(0,-1,0));this.add(f);var h=new THREE.PerspectiveCamera(90,
1,a,b);h.up.set(0,-1,0);h.lookAt(new THREE.Vector3(0,0,1));this.add(h);var k=new THREE.PerspectiveCamera(90,1,a,b);k.up.set(0,-1,0);k.lookAt(new THREE.Vector3(0,0,-1));this.add(k);this.renderTarget=new THREE.WebGLRenderTargetCube(c,c,{format:THREE.RGBFormat,magFilter:THREE.LinearFilter,minFilter:THREE.LinearFilter});this.updateCubeMap=function(a,b){var c=this.renderTarget,p=c.generateMipmaps;c.generateMipmaps=!1;c.activeCubeFace=0;a.render(b,e,c);c.activeCubeFace=1;a.render(b,d,c);c.activeCubeFace=
2;a.render(b,g,c);c.activeCubeFace=3;a.render(b,f,c);c.activeCubeFace=4;a.render(b,h,c);c.generateMipmaps=p;c.activeCubeFace=5;a.render(b,k,c)}};THREE.CubeCamera.prototype=Object.create(THREE.Object3D.prototype);THREE.CombinedCamera=function(a,b,c,e,d,g,f){THREE.Camera.call(this);this.fov=c;this.left=-a/2;this.right=a/2;this.top=b/2;this.bottom=-b/2;this.cameraO=new THREE.OrthographicCamera(a/-2,a/2,b/2,b/-2,g,f);this.cameraP=new THREE.PerspectiveCamera(c,a/b,e,d);this.zoom=1;this.toPerspective()};
THREE.CombinedCamera.prototype=Object.create(THREE.Camera.prototype);THREE.CombinedCamera.prototype.toPerspective=function(){this.near=this.cameraP.near;this.far=this.cameraP.far;this.cameraP.fov=this.fov/this.zoom;this.cameraP.updateProjectionMatrix();this.projectionMatrix=this.cameraP.projectionMatrix;this.inPerspectiveMode=!0;this.inOrthographicMode=!1};
THREE.CombinedCamera.prototype.toOrthographic=function(){var a=this.cameraP.aspect,b=(this.cameraP.near+this.cameraP.far)/2,b=Math.tan(this.fov/2)*b,a=2*b*a/2,b=b/this.zoom,a=a/this.zoom;this.cameraO.left=-a;this.cameraO.right=a;this.cameraO.top=b;this.cameraO.bottom=-b;this.cameraO.updateProjectionMatrix();this.near=this.cameraO.near;this.far=this.cameraO.far;this.projectionMatrix=this.cameraO.projectionMatrix;this.inPerspectiveMode=!1;this.inOrthographicMode=!0};
THREE.CombinedCamera.prototype.setSize=function(a,b){this.cameraP.aspect=a/b;this.left=-a/2;this.right=a/2;this.top=b/2;this.bottom=-b/2};THREE.CombinedCamera.prototype.setFov=function(a){this.fov=a;this.inPerspectiveMode?this.toPerspective():this.toOrthographic()};THREE.CombinedCamera.prototype.updateProjectionMatrix=function(){this.inPerspectiveMode?this.toPerspective():(this.toPerspective(),this.toOrthographic())};
THREE.CombinedCamera.prototype.setLens=function(a,b){void 0===b&&(b=24);var c=2*THREE.Math.radToDeg(Math.atan(b/(2*a)));this.setFov(c);return c};THREE.CombinedCamera.prototype.setZoom=function(a){this.zoom=a;this.inPerspectiveMode?this.toPerspective():this.toOrthographic()};THREE.CombinedCamera.prototype.toFrontView=function(){this.rotation.x=0;this.rotation.y=0;this.rotation.z=0;this.rotationAutoUpdate=!1};
THREE.CombinedCamera.prototype.toBackView=function(){this.rotation.x=0;this.rotation.y=Math.PI;this.rotation.z=0;this.rotationAutoUpdate=!1};THREE.CombinedCamera.prototype.toLeftView=function(){this.rotation.x=0;this.rotation.y=-Math.PI/2;this.rotation.z=0;this.rotationAutoUpdate=!1};THREE.CombinedCamera.prototype.toRightView=function(){this.rotation.x=0;this.rotation.y=Math.PI/2;this.rotation.z=0;this.rotationAutoUpdate=!1};
THREE.CombinedCamera.prototype.toTopView=function(){this.rotation.x=-Math.PI/2;this.rotation.y=0;this.rotation.z=0;this.rotationAutoUpdate=!1};THREE.CombinedCamera.prototype.toBottomView=function(){this.rotation.x=Math.PI/2;this.rotation.y=0;this.rotation.z=0;this.rotationAutoUpdate=!1};
THREE.BoxGeometry=function(a,b,c,e,d,g){function f(a,b,f,c,d,e,g,r){var u,w=h.widthSegments,A=h.heightSegments,v=d/2,B=e/2,C=h.vertices.length;if("x"===a&&"y"===b||"y"===a&&"x"===b)u="z";else if("x"===a&&"z"===b||"z"===a&&"x"===b)u="y",A=h.depthSegments;else if("z"===a&&"y"===b||"y"===a&&"z"===b)u="x",w=h.depthSegments;var N=w+1,G=A+1,I=d/w,H=e/A,F=new THREE.Vector3;F[u]=0<g?1:-1;for(d=0;d<G;d++)for(e=0;e<N;e++){var P=new THREE.Vector3;P[a]=(e*I-v)*f;P[b]=(d*H-B)*c;P[u]=g;h.vertices.push(P)}for(d=
0;d<A;d++)for(e=0;e<w;e++)B=e+N*d,a=e+N*(d+1),b=e+1+N*(d+1),f=e+1+N*d,c=new THREE.Vector2(e/w,1-d/A),g=new THREE.Vector2(e/w,1-(d+1)/A),u=new THREE.Vector2((e+1)/w,1-(d+1)/A),v=new THREE.Vector2((e+1)/w,1-d/A),B=new THREE.Face3(B+C,a+C,f+C),B.normal.copy(F),B.vertexNormals.push(F.clone(),F.clone(),F.clone()),B.materialIndex=r,h.faces.push(B),h.faceVertexUvs[0].push([c,g,v]),B=new THREE.Face3(a+C,b+C,f+C),B.normal.copy(F),B.vertexNormals.push(F.clone(),F.clone(),F.clone()),B.materialIndex=r,h.faces.push(B),
h.faceVertexUvs[0].push([g.clone(),u,v.clone()])}THREE.Geometry.call(this);var h=this;this.width=a;this.height=b;this.depth=c;this.widthSegments=e||1;this.heightSegments=d||1;this.depthSegments=g||1;a=this.width/2;b=this.height/2;c=this.depth/2;f("z","y",-1,-1,this.depth,this.height,a,0);f("z","y",1,-1,this.depth,this.height,-a,1);f("x","z",1,1,this.width,this.depth,b,2);f("x","z",1,-1,this.width,this.depth,-b,3);f("x","y",1,-1,this.width,this.height,c,4);f("x","y",-1,-1,this.width,this.height,-c,
5);this.computeCentroids();this.mergeVertices()};THREE.BoxGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.CircleGeometry=function(a,b,c,e){THREE.Geometry.call(this);this.radius=a=a||50;this.segments=b=void 0!==b?Math.max(3,b):8;this.thetaStart=c=void 0!==c?c:0;this.thetaLength=e=void 0!==e?e:2*Math.PI;var d,g=[];d=new THREE.Vector3;var f=new THREE.Vector2(0.5,0.5);this.vertices.push(d);g.push(f);for(d=0;d<=b;d++){var h=new THREE.Vector3,k=c+d/b*e;h.x=a*Math.cos(k);h.y=a*Math.sin(k);this.vertices.push(h);g.push(new THREE.Vector2((h.x/a+1)/2,(h.y/a+1)/2))}c=new THREE.Vector3(0,0,1);for(d=1;d<=b;d++)this.faces.push(new THREE.Face3(d,
d+1,0,[c.clone(),c.clone(),c.clone()])),this.faceVertexUvs[0].push([g[d].clone(),g[d+1].clone(),f.clone()]);this.computeCentroids();this.computeFaceNormals();this.boundingSphere=new THREE.Sphere(new THREE.Vector3,a)};THREE.CircleGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.CylinderGeometry=function(a,b,c,e,d,g){THREE.Geometry.call(this);this.radiusTop=a=void 0!==a?a:20;this.radiusBottom=b=void 0!==b?b:20;this.height=c=void 0!==c?c:100;this.radialSegments=e=e||8;this.heightSegments=d=d||1;this.openEnded=g=void 0!==g?g:!1;var f=c/2,h,k,l=[],n=[];for(k=0;k<=d;k++){var m=[],p=[],q=k/d,s=q*(b-a)+a;for(h=0;h<=e;h++){var r=h/e,u=new THREE.Vector3;u.x=s*Math.sin(r*Math.PI*2);u.y=-q*c+f;u.z=s*Math.cos(r*Math.PI*2);this.vertices.push(u);m.push(this.vertices.length-1);p.push(new THREE.Vector2(r,
1-q))}l.push(m);n.push(p)}c=(b-a)/c;for(h=0;h<e;h++)for(0!==a?(m=this.vertices[l[0][h]].clone(),p=this.vertices[l[0][h+1]].clone()):(m=this.vertices[l[1][h]].clone(),p=this.vertices[l[1][h+1]].clone()),m.setY(Math.sqrt(m.x*m.x+m.z*m.z)*c).normalize(),p.setY(Math.sqrt(p.x*p.x+p.z*p.z)*c).normalize(),k=0;k<d;k++){var q=l[k][h],s=l[k+1][h],r=l[k+1][h+1],u=l[k][h+1],w=m.clone(),A=m.clone(),v=p.clone(),B=p.clone(),C=n[k][h].clone(),N=n[k+1][h].clone(),G=n[k+1][h+1].clone(),I=n[k][h+1].clone();this.faces.push(new THREE.Face3(q,
s,u,[w,A,B]));this.faceVertexUvs[0].push([C,N,I]);this.faces.push(new THREE.Face3(s,r,u,[A.clone(),v,B.clone()]));this.faceVertexUvs[0].push([N.clone(),G,I.clone()])}if(!1===g&&0<a)for(this.vertices.push(new THREE.Vector3(0,f,0)),h=0;h<e;h++)q=l[0][h],s=l[0][h+1],r=this.vertices.length-1,w=new THREE.Vector3(0,1,0),A=new THREE.Vector3(0,1,0),v=new THREE.Vector3(0,1,0),C=n[0][h].clone(),N=n[0][h+1].clone(),G=new THREE.Vector2(N.x,0),this.faces.push(new THREE.Face3(q,s,r,[w,A,v])),this.faceVertexUvs[0].push([C,
N,G]);if(!1===g&&0<b)for(this.vertices.push(new THREE.Vector3(0,-f,0)),h=0;h<e;h++)q=l[k][h+1],s=l[k][h],r=this.vertices.length-1,w=new THREE.Vector3(0,-1,0),A=new THREE.Vector3(0,-1,0),v=new THREE.Vector3(0,-1,0),C=n[k][h+1].clone(),N=n[k][h].clone(),G=new THREE.Vector2(N.x,1),this.faces.push(new THREE.Face3(q,s,r,[w,A,v])),this.faceVertexUvs[0].push([C,N,G]);this.computeCentroids();this.computeFaceNormals()};THREE.CylinderGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.ExtrudeGeometry=function(a,b){"undefined"!==typeof a&&(THREE.Geometry.call(this),a=a instanceof Array?a:[a],this.shapebb=a[a.length-1].getBoundingBox(),this.addShapeList(a,b),this.computeCentroids(),this.computeFaceNormals())};THREE.ExtrudeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ExtrudeGeometry.prototype.addShapeList=function(a,b){for(var c=a.length,e=0;e<c;e++)this.addShape(a[e],b)};
THREE.ExtrudeGeometry.prototype.addShape=function(a,b){function c(a,b,f){b||console.log("die");return b.clone().multiplyScalar(f).add(a)}function e(a,b,f){var c=THREE.Math.sign,d=1,d=a.x-b.x,e=a.y-b.y,h=f.x-a.x,k=f.y-a.y,g=d*d+e*e;if(1E-10<Math.abs(d*k-e*h)){var l=Math.sqrt(g),c=Math.sqrt(h*h+k*k),g=b.x-e/l;b=b.y+d/l;h=((f.x-k/c-g)*k-(f.y+h/c-b)*h)/(d*k-e*h);f=g+d*h-a.x;a=b+e*h-a.y;d=f*f+a*a;if(2>=d)return new THREE.Vector2(f,a);d=Math.sqrt(d/2)}else a=!1,1E-10<d?1E-10<h&&(a=!0):-1E-10>d?-1E-10>h&&
(a=!0):c(e)==c(k)&&(a=!0),a?(f=-e,a=d,d=Math.sqrt(g)):(f=d,a=e,d=Math.sqrt(g/2));return new THREE.Vector2(f/d,a/d)}function d(f,c){var d,h;for(M=f.length;0<=--M;){d=M;h=M-1;0>h&&(h=f.length-1);for(var e=0,k=q+2*n,e=0;e<k;e++){var g=da*e,l=da*(e+1),m=c+d+g,g=c+h+g,D=c+h+l,l=c+d+l,p=f,V=e,R=k,U=d,J=h,m=m+z,g=g+z,D=D+z,l=l+z;P.faces.push(new THREE.Face3(m,g,l,null,null,A));P.faces.push(new THREE.Face3(g,D,l,null,null,A));m=v.generateSideWallUV(P,a,p,b,m,g,D,l,V,R,U,J);P.faceVertexUvs[0].push([m[0],m[1],
m[3]]);P.faceVertexUvs[0].push([m[1],m[2],m[3]])}}}function g(a,b,f){P.vertices.push(new THREE.Vector3(a,b,f))}function f(f,c,d,h){f+=z;c+=z;d+=z;P.faces.push(new THREE.Face3(f,c,d,null,null,w));f=h?v.generateBottomUV(P,a,b,f,c,d):v.generateTopUV(P,a,b,f,c,d);P.faceVertexUvs[0].push(f)}var h=void 0!==b.amount?b.amount:100,k=void 0!==b.bevelThickness?b.bevelThickness:6,l=void 0!==b.bevelSize?b.bevelSize:k-2,n=void 0!==b.bevelSegments?b.bevelSegments:3,m=void 0!==b.bevelEnabled?b.bevelEnabled:!0,p=
void 0!==b.curveSegments?b.curveSegments:12,q=void 0!==b.steps?b.steps:1,s=b.extrudePath,r,u=!1,w=b.material,A=b.extrudeMaterial,v=void 0!==b.UVGenerator?b.UVGenerator:THREE.ExtrudeGeometry.WorldUVGenerator,B,C,N,G;s&&(r=s.getSpacedPoints(q),u=!0,m=!1,B=void 0!==b.frames?b.frames:new THREE.TubeGeometry.FrenetFrames(s,q,!1),C=new THREE.Vector3,N=new THREE.Vector3,G=new THREE.Vector3);m||(l=k=n=0);var I,H,F,P=this,z=this.vertices.length,s=a.extractPoints(p),p=s.shape,K=s.holes;if(s=!THREE.Shape.Utils.isClockWise(p)){p=
p.reverse();H=0;for(F=K.length;H<F;H++)I=K[H],THREE.Shape.Utils.isClockWise(I)&&(K[H]=I.reverse());s=!1}var E=THREE.Shape.Utils.triangulateShape(p,K),S=p;H=0;for(F=K.length;H<F;H++)I=K[H],p=p.concat(I);var D,U,J,V,R,da=p.length,O,ba=E.length,s=[],M=0;J=S.length;D=J-1;for(U=M+1;M<J;M++,D++,U++)D===J&&(D=0),U===J&&(U=0),s[M]=e(S[M],S[D],S[U]);var aa=[],ca,ea=s.concat();H=0;for(F=K.length;H<F;H++){I=K[H];ca=[];M=0;J=I.length;D=J-1;for(U=M+1;M<J;M++,D++,U++)D===J&&(D=0),U===J&&(U=0),ca[M]=e(I[M],I[D],
I[U]);aa.push(ca);ea=ea.concat(ca)}for(D=0;D<n;D++){J=D/n;V=k*(1-J);U=l*Math.sin(J*Math.PI/2);M=0;for(J=S.length;M<J;M++)R=c(S[M],s[M],U),g(R.x,R.y,-V);H=0;for(F=K.length;H<F;H++)for(I=K[H],ca=aa[H],M=0,J=I.length;M<J;M++)R=c(I[M],ca[M],U),g(R.x,R.y,-V)}U=l;for(M=0;M<da;M++)R=m?c(p[M],ea[M],U):p[M],u?(N.copy(B.normals[0]).multiplyScalar(R.x),C.copy(B.binormals[0]).multiplyScalar(R.y),G.copy(r[0]).add(N).add(C),g(G.x,G.y,G.z)):g(R.x,R.y,0);for(J=1;J<=q;J++)for(M=0;M<da;M++)R=m?c(p[M],ea[M],U):p[M],
u?(N.copy(B.normals[J]).multiplyScalar(R.x),C.copy(B.binormals[J]).multiplyScalar(R.y),G.copy(r[J]).add(N).add(C),g(G.x,G.y,G.z)):g(R.x,R.y,h/q*J);for(D=n-1;0<=D;D--){J=D/n;V=k*(1-J);U=l*Math.sin(J*Math.PI/2);M=0;for(J=S.length;M<J;M++)R=c(S[M],s[M],U),g(R.x,R.y,h+V);H=0;for(F=K.length;H<F;H++)for(I=K[H],ca=aa[H],M=0,J=I.length;M<J;M++)R=c(I[M],ca[M],U),u?g(R.x,R.y+r[q-1].y,r[q-1].x+V):g(R.x,R.y,h+V)}(function(){if(m){var a;a=0*da;for(M=0;M<ba;M++)O=E[M],f(O[2]+a,O[1]+a,O[0]+a,!0);a=q+2*n;a*=da;for(M=
0;M<ba;M++)O=E[M],f(O[0]+a,O[1]+a,O[2]+a,!1)}else{for(M=0;M<ba;M++)O=E[M],f(O[2],O[1],O[0],!0);for(M=0;M<ba;M++)O=E[M],f(O[0]+da*q,O[1]+da*q,O[2]+da*q,!1)}})();(function(){var a=0;d(S,a);a+=S.length;H=0;for(F=K.length;H<F;H++)I=K[H],d(I,a),a+=I.length})()};
THREE.ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(a,b,c,e,d,g){b=a.vertices[d].x;d=a.vertices[d].y;c=a.vertices[g].x;g=a.vertices[g].y;return[new THREE.Vector2(a.vertices[e].x,a.vertices[e].y),new THREE.Vector2(b,d),new THREE.Vector2(c,g)]},generateBottomUV:function(a,b,c,e,d,g){return this.generateTopUV(a,b,c,e,d,g)},generateSideWallUV:function(a,b,c,e,d,g,f,h,k,l,n,m){b=a.vertices[d].x;c=a.vertices[d].y;d=a.vertices[d].z;e=a.vertices[g].x;k=a.vertices[g].y;g=a.vertices[g].z;l=a.vertices[f].x;
n=a.vertices[f].y;f=a.vertices[f].z;m=a.vertices[h].x;var p=a.vertices[h].y;a=a.vertices[h].z;return 0.01>Math.abs(c-k)?[new THREE.Vector2(b,1-d),new THREE.Vector2(e,1-g),new THREE.Vector2(l,1-f),new THREE.Vector2(m,1-a)]:[new THREE.Vector2(c,1-d),new THREE.Vector2(k,1-g),new THREE.Vector2(n,1-f),new THREE.Vector2(p,1-a)]}};THREE.ExtrudeGeometry.__v1=new THREE.Vector2;THREE.ExtrudeGeometry.__v2=new THREE.Vector2;THREE.ExtrudeGeometry.__v3=new THREE.Vector2;THREE.ExtrudeGeometry.__v4=new THREE.Vector2;
THREE.ExtrudeGeometry.__v5=new THREE.Vector2;THREE.ExtrudeGeometry.__v6=new THREE.Vector2;THREE.ShapeGeometry=function(a,b){THREE.Geometry.call(this);!1===a instanceof Array&&(a=[a]);this.shapebb=a[a.length-1].getBoundingBox();this.addShapeList(a,b);this.computeCentroids();this.computeFaceNormals()};THREE.ShapeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ShapeGeometry.prototype.addShapeList=function(a,b){for(var c=0,e=a.length;c<e;c++)this.addShape(a[c],b);return this};
THREE.ShapeGeometry.prototype.addShape=function(a,b){void 0===b&&(b={});var c=b.material,e=void 0===b.UVGenerator?THREE.ExtrudeGeometry.WorldUVGenerator:b.UVGenerator,d,g,f,h=this.vertices.length;d=a.extractPoints(void 0!==b.curveSegments?b.curveSegments:12);var k=d.shape,l=d.holes;if(!THREE.Shape.Utils.isClockWise(k))for(k=k.reverse(),d=0,g=l.length;d<g;d++)f=l[d],THREE.Shape.Utils.isClockWise(f)&&(l[d]=f.reverse());var n=THREE.Shape.Utils.triangulateShape(k,l);d=0;for(g=l.length;d<g;d++)f=l[d],
k=k.concat(f);l=k.length;g=n.length;for(d=0;d<l;d++)f=k[d],this.vertices.push(new THREE.Vector3(f.x,f.y,0));for(d=0;d<g;d++)l=n[d],k=l[0]+h,f=l[1]+h,l=l[2]+h,this.faces.push(new THREE.Face3(k,f,l,null,null,c)),this.faceVertexUvs[0].push(e.generateBottomUV(this,a,b,k,f,l))};
THREE.LatheGeometry=function(a,b,c,e){THREE.Geometry.call(this);b=b||12;c=c||0;e=e||2*Math.PI;for(var d=1/(a.length-1),g=1/b,f=0,h=b;f<=h;f++)for(var k=c+f*g*e,l=Math.cos(k),n=Math.sin(k),k=0,m=a.length;k<m;k++){var p=a[k],q=new THREE.Vector3;q.x=l*p.x-n*p.y;q.y=n*p.x+l*p.y;q.z=p.z;this.vertices.push(q)}c=a.length;f=0;for(h=b;f<h;f++)for(k=0,m=a.length-1;k<m;k++){b=n=k+c*f;e=n+c;var l=n+1+c,n=n+1,p=f*g,q=k*d,s=p+g,r=q+d;this.faces.push(new THREE.Face3(b,e,n));this.faceVertexUvs[0].push([new THREE.Vector2(p,
q),new THREE.Vector2(s,q),new THREE.Vector2(p,r)]);this.faces.push(new THREE.Face3(e,l,n));this.faceVertexUvs[0].push([new THREE.Vector2(s,q),new THREE.Vector2(s,r),new THREE.Vector2(p,r)])}this.mergeVertices();this.computeCentroids();this.computeFaceNormals();this.computeVertexNormals()};THREE.LatheGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.PlaneGeometry=function(a,b,c,e){THREE.Geometry.call(this);this.width=a;this.height=b;this.widthSegments=c||1;this.heightSegments=e||1;var d=a/2,g=b/2;c=this.widthSegments;e=this.heightSegments;var f=c+1,h=e+1,k=this.width/c,l=this.height/e,n=new THREE.Vector3(0,0,1);for(a=0;a<h;a++)for(b=0;b<f;b++)this.vertices.push(new THREE.Vector3(b*k-d,-(a*l-g),0));for(a=0;a<e;a++)for(b=0;b<c;b++){var m=b+f*a,d=b+f*(a+1),g=b+1+f*(a+1),h=b+1+f*a,k=new THREE.Vector2(b/c,1-a/e),l=new THREE.Vector2(b/c,1-(a+
1)/e),p=new THREE.Vector2((b+1)/c,1-(a+1)/e),q=new THREE.Vector2((b+1)/c,1-a/e),m=new THREE.Face3(m,d,h);m.normal.copy(n);m.vertexNormals.push(n.clone(),n.clone(),n.clone());this.faces.push(m);this.faceVertexUvs[0].push([k,l,q]);m=new THREE.Face3(d,g,h);m.normal.copy(n);m.vertexNormals.push(n.clone(),n.clone(),n.clone());this.faces.push(m);this.faceVertexUvs[0].push([l.clone(),p,q.clone()])}this.computeCentroids()};THREE.PlaneGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.RingGeometry=function(a,b,c,e,d,g){THREE.Geometry.call(this);a=a||0;b=b||50;d=void 0!==d?d:0;g=void 0!==g?g:2*Math.PI;c=void 0!==c?Math.max(3,c):8;e=void 0!==e?Math.max(3,e):8;var f,h=[],k=a,l=(b-a)/e;for(a=0;a<=e;a++){for(f=0;f<=c;f++){var n=new THREE.Vector3,m=d+f/c*g;n.x=k*Math.cos(m);n.y=k*Math.sin(m);this.vertices.push(n);h.push(new THREE.Vector2((n.x/b+1)/2,(n.y/b+1)/2))}k+=l}b=new THREE.Vector3(0,0,1);for(a=0;a<e;a++)for(d=a*c,f=0;f<=c;f++)m=f+d,g=m+a,l=m+c+a,n=m+c+1+a,this.faces.push(new THREE.Face3(g,
l,n,[b.clone(),b.clone(),b.clone()])),this.faceVertexUvs[0].push([h[g].clone(),h[l].clone(),h[n].clone()]),g=m+a,l=m+c+1+a,n=m+1+a,this.faces.push(new THREE.Face3(g,l,n,[b.clone(),b.clone(),b.clone()])),this.faceVertexUvs[0].push([h[g].clone(),h[l].clone(),h[n].clone()]);this.computeCentroids();this.computeFaceNormals();this.boundingSphere=new THREE.Sphere(new THREE.Vector3,k)};THREE.RingGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.SphereGeometry=function(a,b,c,e,d,g,f){THREE.Geometry.call(this);this.radius=a=a||50;this.widthSegments=b=Math.max(3,Math.floor(b)||8);this.heightSegments=c=Math.max(2,Math.floor(c)||6);this.phiStart=e=void 0!==e?e:0;this.phiLength=d=void 0!==d?d:2*Math.PI;this.thetaStart=g=void 0!==g?g:0;this.thetaLength=f=void 0!==f?f:Math.PI;var h,k,l=[],n=[];for(k=0;k<=c;k++){var m=[],p=[];for(h=0;h<=b;h++){var q=h/b,s=k/c,r=new THREE.Vector3;r.x=-a*Math.cos(e+q*d)*Math.sin(g+s*f);r.y=a*Math.cos(g+s*f);
r.z=a*Math.sin(e+q*d)*Math.sin(g+s*f);this.vertices.push(r);m.push(this.vertices.length-1);p.push(new THREE.Vector2(q,1-s))}l.push(m);n.push(p)}for(k=0;k<this.heightSegments;k++)for(h=0;h<this.widthSegments;h++){b=l[k][h+1];c=l[k][h];e=l[k+1][h];d=l[k+1][h+1];g=this.vertices[b].clone().normalize();f=this.vertices[c].clone().normalize();var m=this.vertices[e].clone().normalize(),p=this.vertices[d].clone().normalize(),q=n[k][h+1].clone(),s=n[k][h].clone(),r=n[k+1][h].clone(),u=n[k+1][h+1].clone();Math.abs(this.vertices[b].y)===
this.radius?(q.x=(q.x+s.x)/2,this.faces.push(new THREE.Face3(b,e,d,[g,m,p])),this.faceVertexUvs[0].push([q,r,u])):Math.abs(this.vertices[e].y)===this.radius?(r.x=(r.x+u.x)/2,this.faces.push(new THREE.Face3(b,c,e,[g,f,m])),this.faceVertexUvs[0].push([q,s,r])):(this.faces.push(new THREE.Face3(b,c,d,[g,f,p])),this.faceVertexUvs[0].push([q,s,u]),this.faces.push(new THREE.Face3(c,e,d,[f.clone(),m,p.clone()])),this.faceVertexUvs[0].push([s.clone(),r,u.clone()]))}this.computeCentroids();this.computeFaceNormals();
this.boundingSphere=new THREE.Sphere(new THREE.Vector3,a)};THREE.SphereGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TextGeometry=function(a,b){b=b||{};var c=THREE.FontUtils.generateShapes(a,b);b.amount=void 0!==b.height?b.height:50;void 0===b.bevelThickness&&(b.bevelThickness=10);void 0===b.bevelSize&&(b.bevelSize=8);void 0===b.bevelEnabled&&(b.bevelEnabled=!1);THREE.ExtrudeGeometry.call(this,c,b)};THREE.TextGeometry.prototype=Object.create(THREE.ExtrudeGeometry.prototype);
THREE.TorusGeometry=function(a,b,c,e,d){THREE.Geometry.call(this);this.radius=a||100;this.tube=b||40;this.radialSegments=c||8;this.tubularSegments=e||6;this.arc=d||2*Math.PI;d=new THREE.Vector3;a=[];b=[];for(c=0;c<=this.radialSegments;c++)for(e=0;e<=this.tubularSegments;e++){var g=e/this.tubularSegments*this.arc,f=c/this.radialSegments*Math.PI*2;d.x=this.radius*Math.cos(g);d.y=this.radius*Math.sin(g);var h=new THREE.Vector3;h.x=(this.radius+this.tube*Math.cos(f))*Math.cos(g);h.y=(this.radius+this.tube*
Math.cos(f))*Math.sin(g);h.z=this.tube*Math.sin(f);this.vertices.push(h);a.push(new THREE.Vector2(e/this.tubularSegments,c/this.radialSegments));b.push(h.clone().sub(d).normalize())}for(c=1;c<=this.radialSegments;c++)for(e=1;e<=this.tubularSegments;e++){d=(this.tubularSegments+1)*c+e-1;var g=(this.tubularSegments+1)*(c-1)+e-1,f=(this.tubularSegments+1)*(c-1)+e,h=(this.tubularSegments+1)*c+e,k=new THREE.Face3(d,g,h,[b[d].clone(),b[g].clone(),b[h].clone()]);this.faces.push(k);this.faceVertexUvs[0].push([a[d].clone(),
a[g].clone(),a[h].clone()]);k=new THREE.Face3(g,f,h,[b[g].clone(),b[f].clone(),b[h].clone()]);this.faces.push(k);this.faceVertexUvs[0].push([a[g].clone(),a[f].clone(),a[h].clone()])}this.computeCentroids();this.computeFaceNormals()};THREE.TorusGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.TubeGeometry=function(a,b,c,e,d){THREE.Geometry.call(this);this.path=a;this.segments=b||64;this.radius=c||1;this.radialSegments=e||8;this.closed=d||!1;this.grid=[];var g,f;e=this.segments+1;var h,k,l;d=new THREE.Vector3;var n,m;b=new THREE.TubeGeometry.FrenetFrames(this.path,this.segments,this.closed);n=b.normals;m=b.binormals;this.tangents=b.tangents;this.normals=n;this.binormals=m;for(b=0;b<e;b++)for(this.grid[b]=[],c=b/(e-1),l=a.getPointAt(c),g=n[b],f=m[b],c=0;c<this.radialSegments;c++)h=
c/this.radialSegments*2*Math.PI,k=-this.radius*Math.cos(h),h=this.radius*Math.sin(h),d.copy(l),d.x+=k*g.x+h*f.x,d.y+=k*g.y+h*f.y,d.z+=k*g.z+h*f.z,this.grid[b][c]=this.vertices.push(new THREE.Vector3(d.x,d.y,d.z))-1;for(b=0;b<this.segments;b++)for(c=0;c<this.radialSegments;c++)d=this.closed?(b+1)%this.segments:b+1,n=(c+1)%this.radialSegments,a=this.grid[b][c],e=this.grid[d][c],d=this.grid[d][n],n=this.grid[b][n],m=new THREE.Vector2(b/this.segments,c/this.radialSegments),g=new THREE.Vector2((b+1)/this.segments,
c/this.radialSegments),f=new THREE.Vector2((b+1)/this.segments,(c+1)/this.radialSegments),k=new THREE.Vector2(b/this.segments,(c+1)/this.radialSegments),this.faces.push(new THREE.Face3(a,e,n)),this.faceVertexUvs[0].push([m,g,k]),this.faces.push(new THREE.Face3(e,d,n)),this.faceVertexUvs[0].push([g.clone(),f,k.clone()]);this.computeCentroids();this.computeFaceNormals();this.computeVertexNormals()};THREE.TubeGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.TubeGeometry.FrenetFrames=function(a,b,c){new THREE.Vector3;var e=new THREE.Vector3;new THREE.Vector3;var d=[],g=[],f=[],h=new THREE.Vector3,k=new THREE.Matrix4;b+=1;var l,n,m;this.tangents=d;this.normals=g;this.binormals=f;for(l=0;l<b;l++)n=l/(b-1),d[l]=a.getTangentAt(n),d[l].normalize();g[0]=new THREE.Vector3;f[0]=new THREE.Vector3;a=Number.MAX_VALUE;l=Math.abs(d[0].x);n=Math.abs(d[0].y);m=Math.abs(d[0].z);l<=a&&(a=l,e.set(1,0,0));n<=a&&(a=n,e.set(0,1,0));m<=a&&e.set(0,0,1);h.crossVectors(d[0],
e).normalize();g[0].crossVectors(d[0],h);f[0].crossVectors(d[0],g[0]);for(l=1;l<b;l++)g[l]=g[l-1].clone(),f[l]=f[l-1].clone(),h.crossVectors(d[l-1],d[l]),1E-4<h.length()&&(h.normalize(),e=Math.acos(THREE.Math.clamp(d[l-1].dot(d[l]),-1,1)),g[l].applyMatrix4(k.makeRotationAxis(h,e))),f[l].crossVectors(d[l],g[l]);if(c)for(e=Math.acos(THREE.Math.clamp(g[0].dot(g[b-1]),-1,1)),e/=b-1,0<d[0].dot(h.crossVectors(g[0],g[b-1]))&&(e=-e),l=1;l<b;l++)g[l].applyMatrix4(k.makeRotationAxis(d[l],e*l)),f[l].crossVectors(d[l],
g[l])};
THREE.ParametricGeometry=function(a,b,c){THREE.Geometry.call(this);var e=this.vertices,d=this.faces,g=this.faceVertexUvs[0],f,h,k,l,n=b+1;for(f=0;f<=c;f++)for(l=f/c,h=0;h<=b;h++)k=h/b,k=a(k,l),e.push(k);var m,p,q,s;for(f=0;f<c;f++)for(h=0;h<b;h++)a=f*n+h,e=f*n+h+1,l=(f+1)*n+h+1,k=(f+1)*n+h,m=new THREE.Vector2(h/b,f/c),p=new THREE.Vector2((h+1)/b,f/c),q=new THREE.Vector2((h+1)/b,(f+1)/c),s=new THREE.Vector2(h/b,(f+1)/c),d.push(new THREE.Face3(a,e,k)),g.push([m,p,s]),d.push(new THREE.Face3(e,l,k)),
g.push([p.clone(),q,s.clone()]);this.computeCentroids();this.computeFaceNormals();this.computeVertexNormals()};THREE.ParametricGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.AxisHelper=function(a){a=a||1;var b=new THREE.Geometry;b.vertices.push(new THREE.Vector3,new THREE.Vector3(a,0,0),new THREE.Vector3,new THREE.Vector3(0,a,0),new THREE.Vector3,new THREE.Vector3(0,0,a));b.colors.push(new THREE.Color(16711680),new THREE.Color(16755200),new THREE.Color(65280),new THREE.Color(11206400),new THREE.Color(255),new THREE.Color(43775));a=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});THREE.Line.call(this,b,a,THREE.LinePieces)};
THREE.AxisHelper.prototype=Object.create(THREE.Line.prototype);
THREE.ArrowHelper=function(a,b,c,e,d,g){THREE.Object3D.call(this);void 0===e&&(e=16776960);void 0===c&&(c=1);void 0===d&&(d=0.2*c);void 0===g&&(g=0.2*d);this.position=b;b=new THREE.Geometry;b.vertices.push(new THREE.Vector3(0,0,0));b.vertices.push(new THREE.Vector3(0,1,0));this.line=new THREE.Line(b,new THREE.LineBasicMaterial({color:e}));this.line.matrixAutoUpdate=!1;this.add(this.line);b=new THREE.CylinderGeometry(0,0.5,1,5,1);b.applyMatrix((new THREE.Matrix4).makeTranslation(0,-0.5,0));this.cone=
new THREE.Mesh(b,new THREE.MeshBasicMaterial({color:e}));this.cone.matrixAutoUpdate=!1;this.add(this.cone);this.setDirection(a);this.setLength(c,d,g)};THREE.ArrowHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.ArrowHelper.prototype.setDirection=function(){var a=new THREE.Vector3,b;return function(c){0.99999<c.y?this.quaternion.set(0,0,0,1):-0.99999>c.y?this.quaternion.set(1,0,0,0):(a.set(c.z,0,-c.x).normalize(),b=Math.acos(c.y),this.quaternion.setFromAxisAngle(a,b))}}();
THREE.ArrowHelper.prototype.setLength=function(a,b,c){void 0===b&&(b=0.2*a);void 0===c&&(c=0.2*b);this.line.scale.set(1,a,1);this.line.updateMatrix();this.cone.scale.set(c,b,c);this.cone.position.y=a;this.cone.updateMatrix()};THREE.ArrowHelper.prototype.setColor=function(a){this.line.material.color.setHex(a);this.cone.material.color.setHex(a)};
THREE.BoxHelper=function(a){var b=[new THREE.Vector3(1,1,1),new THREE.Vector3(-1,1,1),new THREE.Vector3(-1,-1,1),new THREE.Vector3(1,-1,1),new THREE.Vector3(1,1,-1),new THREE.Vector3(-1,1,-1),new THREE.Vector3(-1,-1,-1),new THREE.Vector3(1,-1,-1)];this.vertices=b;var c=new THREE.Geometry;c.vertices.push(b[0],b[1],b[1],b[2],b[2],b[3],b[3],b[0],b[4],b[5],b[5],b[6],b[6],b[7],b[7],b[4],b[0],b[4],b[1],b[5],b[2],b[6],b[3],b[7]);THREE.Line.call(this,c,new THREE.LineBasicMaterial({color:16776960}),THREE.LinePieces);
void 0!==a&&this.update(a)};THREE.BoxHelper.prototype=Object.create(THREE.Line.prototype);
THREE.BoxHelper.prototype.update=function(a){var b=a.geometry;null===b.boundingBox&&b.computeBoundingBox();var c=b.boundingBox.min,b=b.boundingBox.max,e=this.vertices;e[0].set(b.x,b.y,b.z);e[1].set(c.x,b.y,b.z);e[2].set(c.x,c.y,b.z);e[3].set(b.x,c.y,b.z);e[4].set(b.x,b.y,c.z);e[5].set(c.x,b.y,c.z);e[6].set(c.x,c.y,c.z);e[7].set(b.x,c.y,c.z);this.geometry.computeBoundingSphere();this.geometry.verticesNeedUpdate=!0;this.matrixAutoUpdate=!1;this.matrixWorld=a.matrixWorld};
THREE.BoundingBoxHelper=function(a,b){var c=void 0!==b?b:8947848;this.object=a;this.box=new THREE.Box3;THREE.Mesh.call(this,new THREE.BoxGeometry(1,1,1),new THREE.MeshBasicMaterial({color:c,wireframe:!0}))};THREE.BoundingBoxHelper.prototype=Object.create(THREE.Mesh.prototype);THREE.BoundingBoxHelper.prototype.update=function(){this.box.setFromObject(this.object);this.box.size(this.scale);this.box.center(this.position)};
THREE.CameraHelper=function(a){function b(a,b,d){c(a,d);c(b,d)}function c(a,b){e.vertices.push(new THREE.Vector3);e.colors.push(new THREE.Color(b));void 0===g[a]&&(g[a]=[]);g[a].push(e.vertices.length-1)}var e=new THREE.Geometry,d=new THREE.LineBasicMaterial({color:16777215,vertexColors:THREE.FaceColors}),g={};b("n1","n2",16755200);b("n2","n4",16755200);b("n4","n3",16755200);b("n3","n1",16755200);b("f1","f2",16755200);b("f2","f4",16755200);b("f4","f3",16755200);b("f3","f1",16755200);b("n1","f1",16755200);
b("n2","f2",16755200);b("n3","f3",16755200);b("n4","f4",16755200);b("p","n1",16711680);b("p","n2",16711680);b("p","n3",16711680);b("p","n4",16711680);b("u1","u2",43775);b("u2","u3",43775);b("u3","u1",43775);b("c","t",16777215);b("p","c",3355443);b("cn1","cn2",3355443);b("cn3","cn4",3355443);b("cf1","cf2",3355443);b("cf3","cf4",3355443);THREE.Line.call(this,e,d,THREE.LinePieces);this.camera=a;this.matrixWorld=a.matrixWorld;this.matrixAutoUpdate=!1;this.pointMap=g;this.update()};
THREE.CameraHelper.prototype=Object.create(THREE.Line.prototype);
THREE.CameraHelper.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Camera,c=new THREE.Projector;return function(){function e(e,f,h,k){a.set(f,h,k);c.unprojectVector(a,b);e=d.pointMap[e];if(void 0!==e)for(f=0,h=e.length;f<h;f++)d.geometry.vertices[e[f]].copy(a)}var d=this;b.projectionMatrix.copy(this.camera.projectionMatrix);e("c",0,0,-1);e("t",0,0,1);e("n1",-1,-1,-1);e("n2",1,-1,-1);e("n3",-1,1,-1);e("n4",1,1,-1);e("f1",-1,-1,1);e("f2",1,-1,1);e("f3",-1,1,1);e("f4",1,1,1);e("u1",0.7,
1.1,-1);e("u2",-0.7,1.1,-1);e("u3",0,2,-1);e("cf1",-1,0,1);e("cf2",1,0,1);e("cf3",0,-1,1);e("cf4",0,1,1);e("cn1",-1,0,-1);e("cn2",1,0,-1);e("cn3",0,-1,-1);e("cn4",0,1,-1);this.geometry.verticesNeedUpdate=!0}}();
THREE.DirectionalLightHelper=function(a,b){THREE.Object3D.call(this);this.light=a;this.light.updateMatrixWorld();this.matrixWorld=a.matrixWorld;this.matrixAutoUpdate=!1;b=b||1;var c=new THREE.PlaneGeometry(b,b),e=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});e.color.copy(this.light.color).multiplyScalar(this.light.intensity);this.lightPlane=new THREE.Mesh(c,e);this.add(this.lightPlane);c=new THREE.Geometry;c.vertices.push(new THREE.Vector3);c.vertices.push(new THREE.Vector3);e=new THREE.LineBasicMaterial({fog:!1});
e.color.copy(this.light.color).multiplyScalar(this.light.intensity);this.targetLine=new THREE.Line(c,e);this.add(this.targetLine);this.update()};THREE.DirectionalLightHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose();this.lightPlane.material.dispose();this.targetLine.geometry.dispose();this.targetLine.material.dispose()};
THREE.DirectionalLightHelper.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3;return function(){a.setFromMatrixPosition(this.light.matrixWorld);b.setFromMatrixPosition(this.light.target.matrixWorld);c.subVectors(b,a);this.lightPlane.lookAt(c);this.lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);this.targetLine.geometry.vertices[1].copy(c);this.targetLine.geometry.verticesNeedUpdate=!0;this.targetLine.material.color.copy(this.lightPlane.material.color)}}();
THREE.EdgesHelper=function(a,b){var c=void 0!==b?b:16777215,e=[0,0],d={},g=function(a,b){return a-b},f=["a","b","c"],h=new THREE.BufferGeometry,k=a.geometry.clone();k.mergeVertices();k.computeFaceNormals();for(var l=k.vertices,k=k.faces,n=0,m=0,p=k.length;m<p;m++)for(var q=k[m],s=0;3>s;s++){e[0]=q[f[s]];e[1]=q[f[(s+1)%3]];e.sort(g);var r=e.toString();void 0===d[r]?(d[r]={vert1:e[0],vert2:e[1],face1:m,face2:void 0},n++):d[r].face2=m}h.addAttribute("position",Float32Array,2*n,3);e=h.attributes.position.array;
g=0;for(r in d)if(f=d[r],void 0===f.face2||0.9999>k[f.face1].normal.dot(k[f.face2].normal))n=l[f.vert1],e[g++]=n.x,e[g++]=n.y,e[g++]=n.z,n=l[f.vert2],e[g++]=n.x,e[g++]=n.y,e[g++]=n.z;THREE.Line.call(this,h,new THREE.LineBasicMaterial({color:c}),THREE.LinePieces);this.matrixAutoUpdate=!1;this.matrixWorld=a.matrixWorld};THREE.EdgesHelper.prototype=Object.create(THREE.Line.prototype);
THREE.FaceNormalsHelper=function(a,b,c,e){this.object=a;this.size=void 0!==b?b:1;a=void 0!==c?c:16776960;e=void 0!==e?e:1;b=new THREE.Geometry;c=0;for(var d=this.object.geometry.faces.length;c<d;c++)b.vertices.push(new THREE.Vector3),b.vertices.push(new THREE.Vector3);THREE.Line.call(this,b,new THREE.LineBasicMaterial({color:a,linewidth:e}),THREE.LinePieces);this.matrixAutoUpdate=!1;this.normalMatrix=new THREE.Matrix3;this.update()};THREE.FaceNormalsHelper.prototype=Object.create(THREE.Line.prototype);
THREE.FaceNormalsHelper.prototype.update=function(a){var b=new THREE.Vector3;return function(a){this.object.updateMatrixWorld(!0);this.normalMatrix.getNormalMatrix(this.object.matrixWorld);a=this.geometry.vertices;for(var e=this.object.geometry.faces,d=this.object.matrixWorld,g=0,f=e.length;g<f;g++){var h=e[g];b.copy(h.normal).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size);var k=2*g;a[k].copy(h.centroid).applyMatrix4(d);a[k+1].addVectors(a[k],b)}this.geometry.verticesNeedUpdate=
!0;return this}}();THREE.GridHelper=function(a,b){var c=new THREE.Geometry,e=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});this.color1=new THREE.Color(4473924);this.color2=new THREE.Color(8947848);for(var d=-a;d<=a;d+=b){c.vertices.push(new THREE.Vector3(-a,0,d),new THREE.Vector3(a,0,d),new THREE.Vector3(d,0,-a),new THREE.Vector3(d,0,a));var g=0===d?this.color1:this.color2;c.colors.push(g,g,g,g)}THREE.Line.call(this,c,e,THREE.LinePieces)};THREE.GridHelper.prototype=Object.create(THREE.Line.prototype);
THREE.GridHelper.prototype.setColors=function(a,b){this.color1.set(a);this.color2.set(b);this.geometry.colorsNeedUpdate=!0};
THREE.HemisphereLightHelper=function(a,b,c,e){THREE.Object3D.call(this);this.light=a;this.light.updateMatrixWorld();this.matrixWorld=a.matrixWorld;this.matrixAutoUpdate=!1;this.colors=[new THREE.Color,new THREE.Color];a=new THREE.SphereGeometry(b,4,2);a.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI/2));for(b=0;8>b;b++)a.faces[b].color=this.colors[4>b?0:1];b=new THREE.MeshBasicMaterial({vertexColors:THREE.FaceColors,wireframe:!0});this.lightSphere=new THREE.Mesh(a,b);this.add(this.lightSphere);
this.update()};THREE.HemisphereLightHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.HemisphereLightHelper.prototype.dispose=function(){this.lightSphere.geometry.dispose();this.lightSphere.material.dispose()};
THREE.HemisphereLightHelper.prototype.update=function(){var a=new THREE.Vector3;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity);this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity);this.lightSphere.lookAt(a.setFromMatrixPosition(this.light.matrixWorld).negate());this.lightSphere.geometry.colorsNeedUpdate=!0}}();
THREE.PointLightHelper=function(a,b){this.light=a;this.light.updateMatrixWorld();var c=new THREE.SphereGeometry(b,4,2),e=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});e.color.copy(this.light.color).multiplyScalar(this.light.intensity);THREE.Mesh.call(this,c,e);this.matrixWorld=this.light.matrixWorld;this.matrixAutoUpdate=!1};THREE.PointLightHelper.prototype=Object.create(THREE.Mesh.prototype);THREE.PointLightHelper.prototype.dispose=function(){this.geometry.dispose();this.material.dispose()};
THREE.PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)};
THREE.SpotLightHelper=function(a){THREE.Object3D.call(this);this.light=a;this.light.updateMatrixWorld();this.matrixWorld=a.matrixWorld;this.matrixAutoUpdate=!1;a=new THREE.CylinderGeometry(0,1,1,8,1,!0);a.applyMatrix((new THREE.Matrix4).makeTranslation(0,-0.5,0));a.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI/2));var b=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});this.cone=new THREE.Mesh(a,b);this.add(this.cone);this.update()};THREE.SpotLightHelper.prototype=Object.create(THREE.Object3D.prototype);
THREE.SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose();this.cone.material.dispose()};THREE.SpotLightHelper.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(){var c=this.light.distance?this.light.distance:1E4,e=c*Math.tan(this.light.angle);this.cone.scale.set(e,e,c);a.setFromMatrixPosition(this.light.matrixWorld);b.setFromMatrixPosition(this.light.target.matrixWorld);this.cone.lookAt(b.sub(a));this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}();
THREE.VertexNormalsHelper=function(a,b,c,e){this.object=a;this.size=void 0!==b?b:1;b=void 0!==c?c:16711680;e=void 0!==e?e:1;c=new THREE.Geometry;a=a.geometry.faces;for(var d=0,g=a.length;d<g;d++)for(var f=0,h=a[d].vertexNormals.length;f<h;f++)c.vertices.push(new THREE.Vector3),c.vertices.push(new THREE.Vector3);THREE.Line.call(this,c,new THREE.LineBasicMaterial({color:b,linewidth:e}),THREE.LinePieces);this.matrixAutoUpdate=!1;this.normalMatrix=new THREE.Matrix3;this.update()};
THREE.VertexNormalsHelper.prototype=Object.create(THREE.Line.prototype);
THREE.VertexNormalsHelper.prototype.update=function(a){var b=new THREE.Vector3;return function(a){a=["a","b","c","d"];this.object.updateMatrixWorld(!0);this.normalMatrix.getNormalMatrix(this.object.matrixWorld);for(var e=this.geometry.vertices,d=this.object.geometry.vertices,g=this.object.geometry.faces,f=this.object.matrixWorld,h=0,k=0,l=g.length;k<l;k++)for(var n=g[k],m=0,p=n.vertexNormals.length;m<p;m++){var q=n.vertexNormals[m];e[h].copy(d[n[a[m]]]).applyMatrix4(f);b.copy(q).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size);
b.add(e[h]);h+=1;e[h].copy(b);h+=1}this.geometry.verticesNeedUpdate=!0;return this}}();
THREE.VertexTangentsHelper=function(a,b,c,e){this.object=a;this.size=void 0!==b?b:1;b=void 0!==c?c:255;e=void 0!==e?e:1;c=new THREE.Geometry;a=a.geometry.faces;for(var d=0,g=a.length;d<g;d++)for(var f=0,h=a[d].vertexTangents.length;f<h;f++)c.vertices.push(new THREE.Vector3),c.vertices.push(new THREE.Vector3);THREE.Line.call(this,c,new THREE.LineBasicMaterial({color:b,linewidth:e}),THREE.LinePieces);this.matrixAutoUpdate=!1;this.update()};THREE.VertexTangentsHelper.prototype=Object.create(THREE.Line.prototype);
THREE.VertexTangentsHelper.prototype.update=function(a){var b=new THREE.Vector3;return function(a){a=["a","b","c","d"];this.object.updateMatrixWorld(!0);for(var e=this.geometry.vertices,d=this.object.geometry.vertices,g=this.object.geometry.faces,f=this.object.matrixWorld,h=0,k=0,l=g.length;k<l;k++)for(var n=g[k],m=0,p=n.vertexTangents.length;m<p;m++){var q=n.vertexTangents[m];e[h].copy(d[n[a[m]]]).applyMatrix4(f);b.copy(q).transformDirection(f).multiplyScalar(this.size);b.add(e[h]);h+=1;e[h].copy(b);
h+=1}this.geometry.verticesNeedUpdate=!0;return this}}();
THREE.WireframeHelper=function(a,b){var c=void 0!==b?b:16777215,e=[0,0],d={},g=function(a,b){return a-b},f=["a","b","c"],h=new THREE.BufferGeometry;if(a.geometry instanceof THREE.Geometry){for(var k=a.geometry.vertices,l=a.geometry.faces,n=0,m=new Uint32Array(6*l.length),p=0,q=l.length;p<q;p++)for(var s=l[p],r=0;3>r;r++){e[0]=s[f[r]];e[1]=s[f[(r+1)%3]];e.sort(g);var u=e.toString();void 0===d[u]&&(m[2*n]=e[0],m[2*n+1]=e[1],d[u]=!0,n++)}h.addAttribute("position",Float32Array,2*n,3);e=h.attributes.position.array;
p=0;for(q=n;p<q;p++)for(r=0;2>r;r++)n=k[m[2*p+r]],f=6*p+3*r,e[f+0]=n.x,e[f+1]=n.y,e[f+2]=n.z}else if(a.geometry instanceof THREE.BufferGeometry&&void 0!==a.geometry.attributes.index){for(var k=a.geometry.attributes.position.array,q=a.geometry.attributes.index.array,l=a.geometry.offsets,n=0,m=new Uint32Array(2*q.length),s=0,w=l.length;s<w;++s)for(var r=l[s].start,u=l[s].count,f=l[s].index,p=r,A=r+u;p<A;p+=3)for(r=0;3>r;r++)e[0]=f+q[p+r],e[1]=f+q[p+(r+1)%3],e.sort(g),u=e.toString(),void 0===d[u]&&(m[2*
n]=e[0],m[2*n+1]=e[1],d[u]=!0,n++);h.addAttribute("position",Float32Array,2*n,3);e=h.attributes.position.array;p=0;for(q=n;p<q;p++)for(r=0;2>r;r++)f=6*p+3*r,n=3*m[2*p+r],e[f+0]=k[n],e[f+1]=k[n+1],e[f+2]=k[n+2]}else if(a.geometry instanceof THREE.BufferGeometry)for(k=a.geometry.attributes.position.array,n=k.length/3,m=n/3,h.addAttribute("position",Float32Array,2*n,3),e=h.attributes.position.array,p=0,q=m;p<q;p++)for(r=0;3>r;r++)f=18*p+6*r,m=9*p+3*r,e[f+0]=k[m],e[f+1]=k[m+1],e[f+2]=k[m+2],n=9*p+(r+
1)%3*3,e[f+3]=k[n],e[f+4]=k[n+1],e[f+5]=k[n+2];THREE.Line.call(this,h,new THREE.LineBasicMaterial({color:c}),THREE.LinePieces);this.matrixAutoUpdate=!1;this.matrixWorld=a.matrixWorld};THREE.WireframeHelper.prototype=Object.create(THREE.Line.prototype);
THREE.ShadowMapPlugin=function(){var a,b,c,e,d,g,f=new THREE.Frustum,h=new THREE.Matrix4,k=new THREE.Vector3,l=new THREE.Vector3,n=new THREE.Vector3;this.init=function(f){a=f.context;b=f;f=THREE.ShaderLib.depthRGBA;var h=THREE.UniformsUtils.clone(f.uniforms);c=new THREE.ShaderMaterial({fragmentShader:f.fragmentShader,vertexShader:f.vertexShader,uniforms:h});e=new THREE.ShaderMaterial({fragmentShader:f.fragmentShader,vertexShader:f.vertexShader,uniforms:h,morphTargets:!0});d=new THREE.ShaderMaterial({fragmentShader:f.fragmentShader,
vertexShader:f.vertexShader,uniforms:h,skinning:!0});g=new THREE.ShaderMaterial({fragmentShader:f.fragmentShader,vertexShader:f.vertexShader,uniforms:h,morphTargets:!0,skinning:!0});c._shadowPass=!0;e._shadowPass=!0;d._shadowPass=!0;g._shadowPass=!0};this.render=function(a,f){b.shadowMapEnabled&&b.shadowMapAutoUpdate&&this.update(a,f)};this.update=function(m,p){var q,s,r,u,w,A,v,B,C,N=[];u=0;a.clearColor(1,1,1,1);a.disable(a.BLEND);a.enable(a.CULL_FACE);a.frontFace(a.CCW);b.shadowMapCullFace===THREE.CullFaceFront?
a.cullFace(a.FRONT):a.cullFace(a.BACK);b.setDepthTest(!0);q=0;for(s=m.__lights.length;q<s;q++)if(r=m.__lights[q],r.castShadow)if(r instanceof THREE.DirectionalLight&&r.shadowCascade)for(w=0;w<r.shadowCascadeCount;w++){var G;if(r.shadowCascadeArray[w])G=r.shadowCascadeArray[w];else{C=r;v=w;G=new THREE.DirectionalLight;G.isVirtual=!0;G.onlyShadow=!0;G.castShadow=!0;G.shadowCameraNear=C.shadowCameraNear;G.shadowCameraFar=C.shadowCameraFar;G.shadowCameraLeft=C.shadowCameraLeft;G.shadowCameraRight=C.shadowCameraRight;
G.shadowCameraBottom=C.shadowCameraBottom;G.shadowCameraTop=C.shadowCameraTop;G.shadowCameraVisible=C.shadowCameraVisible;G.shadowDarkness=C.shadowDarkness;G.shadowBias=C.shadowCascadeBias[v];G.shadowMapWidth=C.shadowCascadeWidth[v];G.shadowMapHeight=C.shadowCascadeHeight[v];G.pointsWorld=[];G.pointsFrustum=[];B=G.pointsWorld;A=G.pointsFrustum;for(var I=0;8>I;I++)B[I]=new THREE.Vector3,A[I]=new THREE.Vector3;B=C.shadowCascadeNearZ[v];C=C.shadowCascadeFarZ[v];A[0].set(-1,-1,B);A[1].set(1,-1,B);A[2].set(-1,
1,B);A[3].set(1,1,B);A[4].set(-1,-1,C);A[5].set(1,-1,C);A[6].set(-1,1,C);A[7].set(1,1,C);G.originalCamera=p;A=new THREE.Gyroscope;A.position=r.shadowCascadeOffset;A.add(G);A.add(G.target);p.add(A);r.shadowCascadeArray[w]=G;console.log("Created virtualLight",G)}v=r;B=w;C=v.shadowCascadeArray[B];C.position.copy(v.position);C.target.position.copy(v.target.position);C.lookAt(C.target);C.shadowCameraVisible=v.shadowCameraVisible;C.shadowDarkness=v.shadowDarkness;C.shadowBias=v.shadowCascadeBias[B];A=v.shadowCascadeNearZ[B];
v=v.shadowCascadeFarZ[B];C=C.pointsFrustum;C[0].z=A;C[1].z=A;C[2].z=A;C[3].z=A;C[4].z=v;C[5].z=v;C[6].z=v;C[7].z=v;N[u]=G;u++}else N[u]=r,u++;q=0;for(s=N.length;q<s;q++){r=N[q];r.shadowMap||(w=THREE.LinearFilter,b.shadowMapType===THREE.PCFSoftShadowMap&&(w=THREE.NearestFilter),r.shadowMap=new THREE.WebGLRenderTarget(r.shadowMapWidth,r.shadowMapHeight,{minFilter:w,magFilter:w,format:THREE.RGBAFormat}),r.shadowMapSize=new THREE.Vector2(r.shadowMapWidth,r.shadowMapHeight),r.shadowMatrix=new THREE.Matrix4);
if(!r.shadowCamera){if(r instanceof THREE.SpotLight)r.shadowCamera=new THREE.PerspectiveCamera(r.shadowCameraFov,r.shadowMapWidth/r.shadowMapHeight,r.shadowCameraNear,r.shadowCameraFar);else if(r instanceof THREE.DirectionalLight)r.shadowCamera=new THREE.OrthographicCamera(r.shadowCameraLeft,r.shadowCameraRight,r.shadowCameraTop,r.shadowCameraBottom,r.shadowCameraNear,r.shadowCameraFar);else{console.error("Unsupported light type for shadow");continue}m.add(r.shadowCamera);!0===m.autoUpdate&&m.updateMatrixWorld()}r.shadowCameraVisible&&
!r.cameraHelper&&(r.cameraHelper=new THREE.CameraHelper(r.shadowCamera),r.shadowCamera.add(r.cameraHelper));if(r.isVirtual&&G.originalCamera==p){w=p;u=r.shadowCamera;A=r.pointsFrustum;C=r.pointsWorld;k.set(Infinity,Infinity,Infinity);l.set(-Infinity,-Infinity,-Infinity);for(v=0;8>v;v++)B=C[v],B.copy(A[v]),THREE.ShadowMapPlugin.__projector.unprojectVector(B,w),B.applyMatrix4(u.matrixWorldInverse),B.x<k.x&&(k.x=B.x),B.x>l.x&&(l.x=B.x),B.y<k.y&&(k.y=B.y),B.y>l.y&&(l.y=B.y),B.z<k.z&&(k.z=B.z),B.z>l.z&&
(l.z=B.z);u.left=k.x;u.right=l.x;u.top=l.y;u.bottom=k.y;u.updateProjectionMatrix()}u=r.shadowMap;A=r.shadowMatrix;w=r.shadowCamera;w.position.setFromMatrixPosition(r.matrixWorld);n.setFromMatrixPosition(r.target.matrixWorld);w.lookAt(n);w.updateMatrixWorld();w.matrixWorldInverse.getInverse(w.matrixWorld);r.cameraHelper&&(r.cameraHelper.visible=r.shadowCameraVisible);r.shadowCameraVisible&&r.cameraHelper.update();A.set(0.5,0,0,0.5,0,0.5,0,0.5,0,0,0.5,0.5,0,0,0,1);A.multiply(w.projectionMatrix);A.multiply(w.matrixWorldInverse);
h.multiplyMatrices(w.projectionMatrix,w.matrixWorldInverse);f.setFromMatrix(h);b.setRenderTarget(u);b.clear();C=m.__webglObjects;r=0;for(u=C.length;r<u;r++)v=C[r],A=v.object,v.render=!1,!A.visible||!A.castShadow||(A instanceof THREE.Mesh||A instanceof THREE.ParticleSystem)&&A.frustumCulled&&!f.intersectsObject(A)||(A._modelViewMatrix.multiplyMatrices(w.matrixWorldInverse,A.matrixWorld),v.render=!0);r=0;for(u=C.length;r<u;r++)v=C[r],v.render&&(A=v.object,v=v.buffer,I=A.material instanceof THREE.MeshFaceMaterial?
A.material.materials[0]:A.material,B=void 0!==A.geometry.morphTargets&&0<A.geometry.morphTargets.length&&I.morphTargets,I=A instanceof THREE.SkinnedMesh&&I.skinning,B=A.customDepthMaterial?A.customDepthMaterial:I?B?g:d:B?e:c,v instanceof THREE.BufferGeometry?b.renderBufferDirect(w,m.__lights,null,B,v,A):b.renderBuffer(w,m.__lights,null,B,v,A));C=m.__webglObjectsImmediate;r=0;for(u=C.length;r<u;r++)v=C[r],A=v.object,A.visible&&A.castShadow&&(A._modelViewMatrix.multiplyMatrices(w.matrixWorldInverse,
A.matrixWorld),b.renderImmediateObject(w,m.__lights,null,c,A))}q=b.getClearColor();s=b.getClearAlpha();a.clearColor(q.r,q.g,q.b,s);a.enable(a.BLEND);b.shadowMapCullFace===THREE.CullFaceFront&&a.cullFace(a.BACK)}};THREE.ShadowMapPlugin.__projector=new THREE.Projector;
THREE.DepthPassPlugin=function(){this.enabled=!1;this.renderTarget=null;var a,b,c,e,d,g,f=new THREE.Frustum,h=new THREE.Matrix4;this.init=function(f){a=f.context;b=f;f=THREE.ShaderLib.depthRGBA;var h=THREE.UniformsUtils.clone(f.uniforms);c=new THREE.ShaderMaterial({fragmentShader:f.fragmentShader,vertexShader:f.vertexShader,uniforms:h});e=new THREE.ShaderMaterial({fragmentShader:f.fragmentShader,vertexShader:f.vertexShader,uniforms:h,morphTargets:!0});d=new THREE.ShaderMaterial({fragmentShader:f.fragmentShader,
vertexShader:f.vertexShader,uniforms:h,skinning:!0});g=new THREE.ShaderMaterial({fragmentShader:f.fragmentShader,vertexShader:f.vertexShader,uniforms:h,morphTargets:!0,skinning:!0});c._shadowPass=!0;e._shadowPass=!0;d._shadowPass=!0;g._shadowPass=!0};this.render=function(a,b){this.enabled&&this.update(a,b)};this.update=function(k,l){var n,m,p,q,s,r;a.clearColor(1,1,1,1);a.disable(a.BLEND);b.setDepthTest(!0);!0===k.autoUpdate&&k.updateMatrixWorld();l.matrixWorldInverse.getInverse(l.matrixWorld);h.multiplyMatrices(l.projectionMatrix,
l.matrixWorldInverse);f.setFromMatrix(h);b.setRenderTarget(this.renderTarget);b.clear();r=k.__webglObjects;n=0;for(m=r.length;n<m;n++)p=r[n],s=p.object,p.render=!1,!s.visible||(s instanceof THREE.Mesh||s instanceof THREE.ParticleSystem)&&s.frustumCulled&&!f.intersectsObject(s)||(s._modelViewMatrix.multiplyMatrices(l.matrixWorldInverse,s.matrixWorld),p.render=!0);var u;n=0;for(m=r.length;n<m;n++)p=r[n],p.render&&(s=p.object,p=p.buffer,s instanceof THREE.ParticleSystem&&!s.customDepthMaterial||((u=
s.material instanceof THREE.MeshFaceMaterial?s.material.materials[0]:s.material)&&b.setMaterialFaces(s.material),q=0<s.geometry.morphTargets.length&&u.morphTargets,u=s instanceof THREE.SkinnedMesh&&u.skinning,q=s.customDepthMaterial?s.customDepthMaterial:u?q?g:d:q?e:c,p instanceof THREE.BufferGeometry?b.renderBufferDirect(l,k.__lights,null,q,p,s):b.renderBuffer(l,k.__lights,null,q,p,s)));r=k.__webglObjectsImmediate;n=0;for(m=r.length;n<m;n++)p=r[n],s=p.object,s.visible&&(s._modelViewMatrix.multiplyMatrices(l.matrixWorldInverse,
s.matrixWorld),b.renderImmediateObject(l,k.__lights,null,c,s));n=b.getClearColor();m=b.getClearAlpha();a.clearColor(n.r,n.g,n.b,m);a.enable(a.BLEND)}};
(function(){function a(a){throw a;}function b(a,b){var f=a.split("."),c=r;f[0]in c||!c.execScript||c.execScript("var "+f[0]);for(var d;f.length&&(d=f.shift());)f.length||b===q?c=c[d]?c[d]:c[d]={}:c[d]=b}function c(a){var b=a.length,f=0,c=Number.POSITIVE_INFINITY,d,h,e,k,g,l,n,m,z;for(m=0;m<b;++m)a[m]>f&&(f=a[m]),a[m]<c&&(c=a[m]);d=1<<f;h=new (u?Uint32Array:Array)(d);e=1;k=0;for(g=2;e<=f;){for(m=0;m<b;++m)if(a[m]===e){l=0;n=k;for(z=0;z<e;++z)l=l<<1|n&1,n>>=1;for(z=l;z<d;z+=g)h[z]=e<<16|m;++k}++e;k<<=
1;g<<=1}return[h,f,c]}function e(b,f){this.l=[];this.m=32768;this.d=this.f=this.c=this.t=0;this.input=u?new Uint8Array(b):b;this.u=!1;this.n=C;this.K=!1;if(f||!(f={}))f.index&&(this.c=f.index),f.bufferSize&&(this.m=f.bufferSize),f.bufferType&&(this.n=f.bufferType),f.resize&&(this.K=f.resize);switch(this.n){case B:this.a=32768;this.b=new (u?Uint8Array:Array)(32768+this.m+258);break;case C:this.a=0;this.b=new (u?Uint8Array:Array)(this.m);this.e=this.W;this.B=this.R;this.q=this.V;break;default:a(Error("invalid inflate mode"))}}
function d(b,f){for(var c=b.f,d=b.d,e=b.input,h=b.c,k;d<f;)k=e[h++],k===q&&a(Error("input buffer is broken")),c|=k<<d,d+=8;b.f=c>>>f;b.d=d-f;b.c=h;return c&(1<<f)-1}function g(a,b){for(var f=a.f,c=a.d,d=a.input,h=a.c,e=b[0],k=b[1],g;c<k;){g=d[h++];if(g===q)break;f|=g<<c;c+=8}d=e[f&(1<<k)-1];e=d>>>16;a.f=f>>e;a.d=c-e;a.c=h;return d&65535}function f(a){function b(a,f,c){var h,e,k,l;for(l=0;l<a;)switch(h=g(this,f),h){case 16:for(k=3+d(this,2);k--;)c[l++]=e;break;case 17:for(k=3+d(this,3);k--;)c[l++]=
0;e=0;break;case 18:for(k=11+d(this,7);k--;)c[l++]=0;e=0;break;default:e=c[l++]=h}return c}var f=d(a,5)+257,e=d(a,5)+1,h=d(a,4)+4,k=new (u?Uint8Array:Array)(N.length),l;for(l=0;l<h;++l)k[N[l]]=d(a,3);h=c(k);k=new (u?Uint8Array:Array)(f);l=new (u?Uint8Array:Array)(e);a.q(c(b.call(a,f,h,k)),c(b.call(a,e,h,l)))}function h(a){a=a||{};this.files=[];this.v=a.comment}function k(a,b){b=b||{};this.input=u&&a instanceof Array?new Uint8Array(a):a;this.c=0;this.ba=b.verify||!1;this.j=b.password}function l(a,
b){this.input=a;this.offset=b}function n(a,b){this.input=a;this.offset=b}function m(b){var f=[],c={},d,e,h,k;if(!b.i){if(b.o===q){d=b.input;if(!b.D)a:{e=b.input;for(h=e.length-12;0<h;--h)if(e[h]===S[0]&&e[h+1]===S[1]&&e[h+2]===S[2]&&e[h+3]===S[3]){b.D=h;break a}a(Error("End of Central Directory Record not found"))}e=b.D;d[e++]===S[0]&&d[e++]===S[1]&&d[e++]===S[2]&&d[e++]===S[3]||a(Error("invalid signature"));b.ha=d[e++]|d[e++]<<8;b.ja=d[e++]|d[e++]<<8;b.ka=d[e++]|d[e++]<<8;b.aa=d[e++]|d[e++]<<8;b.Q=
(d[e++]|d[e++]<<8|d[e++]<<16|d[e++]<<24)>>>0;b.o=(d[e++]|d[e++]<<8|d[e++]<<16|d[e++]<<24)>>>0;b.w=d[e++]|d[e++]<<8;b.v=u?d.subarray(e,e+b.w):d.slice(e,e+b.w)}d=b.o;h=0;for(k=b.aa;h<k;++h)e=new l(b.input,d),e.parse(),d+=e.length,f[h]=e,c[e.filename]=h;b.Q<d-b.o&&a(Error("invalid file header size"));b.i=f;b.G=c}}function p(a,b,f){f^=a.s(b);a.k(b,f);return f}var q=void 0,s,r=this,u="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Uint32Array;new (u?Uint8Array:Array)(256);
for(s=0;256>s;++s)for(var w=s,A=7,w=w>>>1;w;w>>>=1)--A;s=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,
3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,
314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,
3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,
1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,
1231636301,1047427035,2932959818,3654703836,1088359270,936918E3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];var v=u?new Uint32Array(s):s;s=[];for(w=0;288>w;w++)switch(!0){case 143>=w:s.push([w+48,8]);break;case 255>=w:s.push([w-144+400,9]);break;case 279>=w:s.push([w-256+0,7]);break;case 287>=w:s.push([w-280+192,8]);break;default:a("invalid literal: "+
w)}s=function(){function b(f){switch(!0){case 3===f:return[257,f-3,0];case 4===f:return[258,f-4,0];case 5===f:return[259,f-5,0];case 6===f:return[260,f-6,0];case 7===f:return[261,f-7,0];case 8===f:return[262,f-8,0];case 9===f:return[263,f-9,0];case 10===f:return[264,f-10,0];case 12>=f:return[265,f-11,1];case 14>=f:return[266,f-13,1];case 16>=f:return[267,f-15,1];case 18>=f:return[268,f-17,1];case 22>=f:return[269,f-19,2];case 26>=f:return[270,f-23,2];case 30>=f:return[271,f-27,2];case 34>=f:return[272,
f-31,2];case 42>=f:return[273,f-35,3];case 50>=f:return[274,f-43,3];case 58>=f:return[275,f-51,3];case 66>=f:return[276,f-59,3];case 82>=f:return[277,f-67,4];case 98>=f:return[278,f-83,4];case 114>=f:return[279,f-99,4];case 130>=f:return[280,f-115,4];case 162>=f:return[281,f-131,5];case 194>=f:return[282,f-163,5];case 226>=f:return[283,f-195,5];case 257>=f:return[284,f-227,5];case 258===f:return[285,f-258,0];default:a("invalid length: "+f)}}var f=[],c,d;for(c=3;258>=c;c++)d=b(c),f[c]=d[2]<<24|d[1]<<
16|d[0];return f}();u&&new Uint32Array(s);var B=0,C=1;e.prototype.r=function(){for(;!this.u;){var b=d(this,3);b&1&&(this.u=!0);b>>>=1;switch(b){case 0:var b=this.input,c=this.c,e=this.b,h=this.a,k=q,g=q,l=q,n=e.length,k=q;this.d=this.f=0;k=b[c++];k===q&&a(Error("invalid uncompressed block header: LEN (first byte)"));g=k;k=b[c++];k===q&&a(Error("invalid uncompressed block header: LEN (second byte)"));g|=k<<8;k=b[c++];k===q&&a(Error("invalid uncompressed block header: NLEN (first byte)"));l=k;k=b[c++];
k===q&&a(Error("invalid uncompressed block header: NLEN (second byte)"));l|=k<<8;g===~l&&a(Error("invalid uncompressed block header: length verify"));c+g>b.length&&a(Error("input buffer is broken"));switch(this.n){case B:for(;h+g>e.length;){k=n-h;g-=k;if(u)e.set(b.subarray(c,c+k),h),h+=k,c+=k;else for(;k--;)e[h++]=b[c++];this.a=h;e=this.e();h=this.a}break;case C:for(;h+g>e.length;)e=this.e({H:2});break;default:a(Error("invalid inflate mode"))}if(u)e.set(b.subarray(c,c+g),h),h+=g,c+=g;else for(;g--;)e[h++]=
b[c++];this.c=c;this.a=h;this.b=e;break;case 1:this.q(P,z);break;case 2:f(this);break;default:a(Error("unknown BTYPE: "+b))}}return this.B()};s=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];var N=u?new Uint16Array(s):s;s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258];var G=u?new Uint16Array(s):s;s=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0];var I=u?new Uint8Array(s):s;s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,
769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];var H=u?new Uint16Array(s):s;s=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];var F=u?new Uint8Array(s):s;s=new (u?Uint8Array:Array)(288);w=0;for(A=s.length;w<A;++w)s[w]=143>=w?8:255>=w?9:279>=w?7:8;var P=c(s);s=new (u?Uint8Array:Array)(30);w=0;for(A=s.length;w<A;++w)s[w]=5;var z=c(s);s=e.prototype;s.q=function(a,b){var f=this.b,c=this.a;this.C=a;for(var e=f.length-258,h,k,l;256!==(h=g(this,a));)if(256>h)c>=e&&(this.a=
c,f=this.e(),c=this.a),f[c++]=h;else for(h-=257,l=G[h],0<I[h]&&(l+=d(this,I[h])),h=g(this,b),k=H[h],0<F[h]&&(k+=d(this,F[h])),c>=e&&(this.a=c,f=this.e(),c=this.a);l--;)f[c]=f[c++-k];for(;8<=this.d;)this.d-=8,this.c--;this.a=c};s.V=function(a,b){var f=this.b,c=this.a;this.C=a;for(var e=f.length,h,k,l;256!==(h=g(this,a));)if(256>h)c>=e&&(f=this.e(),e=f.length),f[c++]=h;else for(h-=257,l=G[h],0<I[h]&&(l+=d(this,I[h])),h=g(this,b),k=H[h],0<F[h]&&(k+=d(this,F[h])),c+l>e&&(f=this.e(),e=f.length);l--;)f[c]=
f[c++-k];for(;8<=this.d;)this.d-=8,this.c--;this.a=c};s.e=function(){var a=new (u?Uint8Array:Array)(this.a-32768),b=this.a-32768,f,c,d=this.b;if(u)a.set(d.subarray(32768,a.length));else for(f=0,c=a.length;f<c;++f)a[f]=d[f+32768];this.l.push(a);this.t+=a.length;if(u)d.set(d.subarray(b,b+32768));else for(f=0;32768>f;++f)d[f]=d[b+f];this.a=32768;return d};s.W=function(a){var b,f=this.input.length/this.c+1|0,c,d,e,h=this.input,k=this.b;a&&("number"===typeof a.H&&(f=a.H),"number"===typeof a.P&&(f+=a.P));
2>f?(c=(h.length-this.c)/this.C[2],e=c/2*258|0,d=e<k.length?k.length+e:k.length<<1):d=k.length*f;u?(b=new Uint8Array(d),b.set(k)):b=k;return this.b=b};s.B=function(){var a=0,b=this.b,f=this.l,c,d=new (u?Uint8Array:Array)(this.t+(this.a-32768)),e,h,k,g;if(0===f.length)return u?this.b.subarray(32768,this.a):this.b.slice(32768,this.a);e=0;for(h=f.length;e<h;++e)for(c=f[e],k=0,g=c.length;k<g;++k)d[a++]=c[k];e=32768;for(h=this.a;e<h;++e)d[a++]=b[e];this.l=[];return this.buffer=d};s.R=function(){var a,
b=this.a;u?this.K?(a=new Uint8Array(b),a.set(this.b.subarray(0,b))):a=this.b.subarray(0,b):(this.b.length>b&&(this.b.length=b),a=this.b);return this.buffer=a};h.prototype.L=function(a){this.j=a};h.prototype.s=function(a){a=a[2]&65535|2;return a*(a^1)>>8&255};h.prototype.k=function(a,b){a[0]=(v[(a[0]^b)&255]^a[0]>>>8)>>>0;a[1]=(6681*(20173*(a[1]+(a[0]&255))>>>0)>>>0)+1>>>0;a[2]=(v[(a[2]^a[1]>>>24)&255]^a[2]>>>8)>>>0};h.prototype.T=function(a){var b=[305419896,591751049,878082192],f,c;u&&(b=new Uint32Array(b));
f=0;for(c=a.length;f<c;++f)this.k(b,a[f]&255);return b};var K=[80,75,1,2],E=[80,75,3,4],S=[80,75,5,6];l.prototype.parse=function(){var b=this.input,f=this.offset;b[f++]===K[0]&&b[f++]===K[1]&&b[f++]===K[2]&&b[f++]===K[3]||a(Error("invalid file header signature"));this.version=b[f++];this.ia=b[f++];this.Z=b[f++]|b[f++]<<8;this.I=b[f++]|b[f++]<<8;this.A=b[f++]|b[f++]<<8;this.time=b[f++]|b[f++]<<8;this.U=b[f++]|b[f++]<<8;this.p=(b[f++]|b[f++]<<8|b[f++]<<16|b[f++]<<24)>>>0;this.z=(b[f++]|b[f++]<<8|b[f++]<<
16|b[f++]<<24)>>>0;this.J=(b[f++]|b[f++]<<8|b[f++]<<16|b[f++]<<24)>>>0;this.h=b[f++]|b[f++]<<8;this.g=b[f++]|b[f++]<<8;this.F=b[f++]|b[f++]<<8;this.ea=b[f++]|b[f++]<<8;this.ga=b[f++]|b[f++]<<8;this.fa=b[f++]|b[f++]<<8|b[f++]<<16|b[f++]<<24;this.$=(b[f++]|b[f++]<<8|b[f++]<<16|b[f++]<<24)>>>0;this.filename=String.fromCharCode.apply(null,u?b.subarray(f,f+=this.h):b.slice(f,f+=this.h));this.X=u?b.subarray(f,f+=this.g):b.slice(f,f+=this.g);this.v=u?b.subarray(f,f+this.F):b.slice(f,f+this.F);this.length=
f-this.offset};n.prototype.parse=function(){var b=this.input,f=this.offset;b[f++]===E[0]&&b[f++]===E[1]&&b[f++]===E[2]&&b[f++]===E[3]||a(Error("invalid local file header signature"));this.Z=b[f++]|b[f++]<<8;this.I=b[f++]|b[f++]<<8;this.A=b[f++]|b[f++]<<8;this.time=b[f++]|b[f++]<<8;this.U=b[f++]|b[f++]<<8;this.p=(b[f++]|b[f++]<<8|b[f++]<<16|b[f++]<<24)>>>0;this.z=(b[f++]|b[f++]<<8|b[f++]<<16|b[f++]<<24)>>>0;this.J=(b[f++]|b[f++]<<8|b[f++]<<16|b[f++]<<24)>>>0;this.h=b[f++]|b[f++]<<8;this.g=b[f++]|b[f++]<<
8;this.filename=String.fromCharCode.apply(null,u?b.subarray(f,f+=this.h):b.slice(f,f+=this.h));this.X=u?b.subarray(f,f+=this.g):b.slice(f,f+=this.g);this.length=f-this.offset};s=k.prototype;s.Y=function(){var a=[],b,f,c;this.i||m(this);c=this.i;b=0;for(f=c.length;b<f;++b)a[b]=c[b].filename;return a};s.r=function(b,f){var c;this.G||m(this);c=this.G[b];c===q&&a(Error(b+" not found"));var d;d=f||{};var h=this.input,k=this.i,g,l,z,s;k||m(this);k[c]===q&&a(Error("wrong index"));k=k[c].$;c=new n(this.input,
k);c.parse();k+=c.length;g=c.z;if(0!==(c.I&1)){d.password||this.j||a(Error("please set password"));d=this.S(d.password||this.j);z=k;for(s=k+12;z<s;++z)p(this,d,h[z]);k+=12;g-=12;z=k;for(s=k+g;z<s;++z)h[z]=p(this,d,h[z])}switch(c.A){case 0:l=u?this.input.subarray(k,k+g):this.input.slice(k,k+g);break;case 8:l=(new e(this.input,{index:k,bufferSize:c.J})).r();break;default:a(Error("unknown compression type"))}if(this.ba){h=q;g="number"===typeof h?h:h=0;d=l.length;k=-1;for(g=d&7;g--;++h)k=k>>>8^v[(k^l[h])&
255];for(g=d>>3;g--;h+=8)k=k>>>8^v[(k^l[h])&255],k=k>>>8^v[(k^l[h+1])&255],k=k>>>8^v[(k^l[h+2])&255],k=k>>>8^v[(k^l[h+3])&255],k=k>>>8^v[(k^l[h+4])&255],k=k>>>8^v[(k^l[h+5])&255],k=k>>>8^v[(k^l[h+6])&255],k=k>>>8^v[(k^l[h+7])&255];h=(k^4294967295)>>>0;c.p!==h&&a(Error("wrong crc: file=0x"+c.p.toString(16)+", data=0x"+h.toString(16)))}return l};s.L=function(a){this.j=a};s.k=h.prototype.k;s.S=h.prototype.T;s.s=h.prototype.s;b("Zlib.Unzip",k);b("Zlib.Unzip.prototype.decompress",k.prototype.r);b("Zlib.Unzip.prototype.getFilenames",
k.prototype.Y);b("Zlib.Unzip.prototype.setPassword",k.prototype.L)}).call(this);
(function(){function a(a){throw a;}function b(a,b){var f=a.split("."),c=m;f[0]in c||!c.execScript||c.execScript("var "+f[0]);for(var d;f.length&&(d=f.shift());)f.length||b===n?c=c[d]?c[d]:c[d]={}:c[d]=b}function c(a,b,f){var c="number"===typeof b?b:b=0,d="number"===typeof f?f:a.length;f=-1;for(c=d&7;c--;++b)f=f>>>8^u[(f^a[b])&255];for(c=d>>3;c--;b+=8)f=f>>>8^u[(f^a[b])&255],f=f>>>8^u[(f^a[b+1])&255],f=f>>>8^u[(f^a[b+2])&255],f=f>>>8^u[(f^a[b+3])&255],f=f>>>8^u[(f^a[b+4])&255],f=f>>>8^u[(f^a[b+5])&
255],f=f>>>8^u[(f^a[b+6])&255],f=f>>>8^u[(f^a[b+7])&255];return(f^4294967295)>>>0}function e(){}function d(a){var b=a.length,f=0,c=Number.POSITIVE_INFINITY,d,h,e,k,g,l,n,m,q;for(m=0;m<b;++m)a[m]>f&&(f=a[m]),a[m]<c&&(c=a[m]);d=1<<f;h=new (p?Uint32Array:Array)(d);e=1;k=0;for(g=2;e<=f;){for(m=0;m<b;++m)if(a[m]===e){l=0;n=k;for(q=0;q<e;++q)l=l<<1|n&1,n>>=1;for(q=l;q<d;q+=g)h[q]=e<<16|m;++k}++e;k<<=1;g<<=1}return[h,f,c]}function g(b,f){this.i=[];this.j=32768;this.d=this.f=this.c=this.n=0;this.input=p?
new Uint8Array(b):b;this.o=!1;this.k=A;this.w=!1;if(f||!(f={}))f.index&&(this.c=f.index),f.bufferSize&&(this.j=f.bufferSize),f.bufferType&&(this.k=f.bufferType),f.resize&&(this.w=f.resize);switch(this.k){case w:this.a=32768;this.b=new (p?Uint8Array:Array)(32768+this.j+258);break;case A:this.a=0;this.b=new (p?Uint8Array:Array)(this.j);this.e=this.D;this.q=this.A;this.l=this.C;break;default:a(Error("invalid inflate mode"))}}function f(b,f){for(var c=b.f,d=b.d,h=b.input,e=b.c,k;d<f;)k=h[e++],k===n&&
a(Error("input buffer is broken")),c|=k<<d,d+=8;b.f=c>>>f;b.d=d-f;b.c=e;return c&(1<<f)-1}function h(a,b){for(var f=a.f,c=a.d,d=a.input,h=a.c,e=b[0],k=b[1],g;c<k;){g=d[h++];if(g===n)break;f|=g<<c;c+=8}d=e[f&(1<<k)-1];e=d>>>16;a.f=f>>e;a.d=c-e;a.c=h;return d&65535}function k(a){function b(a,c,d){var e,k,g,l;for(l=0;l<a;)switch(e=h(this,c),e){case 16:for(g=3+f(this,2);g--;)d[l++]=k;break;case 17:for(g=3+f(this,3);g--;)d[l++]=0;k=0;break;case 18:for(g=11+f(this,7);g--;)d[l++]=0;k=0;break;default:k=d[l++]=
e}return d}var c=f(a,5)+257,e=f(a,5)+1,k=f(a,4)+4,g=new (p?Uint8Array:Array)(v.length),l;for(l=0;l<k;++l)g[v[l]]=f(a,3);k=d(g);g=new (p?Uint8Array:Array)(c);l=new (p?Uint8Array:Array)(e);a.l(d(b.call(a,c,k,g)),d(b.call(a,e,k,l)))}function l(a){this.input=a;this.c=0;this.m=[];this.s=!1}var n=void 0,m=this,p="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Uint32Array;new (p?Uint8Array:Array)(256);var q;for(q=0;256>q;++q)for(var s=q,r=7,s=s>>>1;s;s>>>=1)--r;q=
[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,
651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,
4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,
167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,
3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918E3,
2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];var u=p?new Uint32Array(q):q;e.prototype.getName=function(){return this.name};e.prototype.getData=function(){return this.data};e.prototype.G=function(){return this.H};b("Zlib.GunzipMember",e);b("Zlib.GunzipMember.prototype.getName",e.prototype.getName);b("Zlib.GunzipMember.prototype.getData",
e.prototype.getData);b("Zlib.GunzipMember.prototype.getMtime",e.prototype.G);q=[];for(s=0;288>s;s++)switch(!0){case 143>=s:q.push([s+48,8]);break;case 255>=s:q.push([s-144+400,9]);break;case 279>=s:q.push([s-256+0,7]);break;case 287>=s:q.push([s-280+192,8]);break;default:a("invalid literal: "+s)}q=function(){function b(f){switch(!0){case 3===f:return[257,f-3,0];case 4===f:return[258,f-4,0];case 5===f:return[259,f-5,0];case 6===f:return[260,f-6,0];case 7===f:return[261,f-7,0];case 8===f:return[262,
f-8,0];case 9===f:return[263,f-9,0];case 10===f:return[264,f-10,0];case 12>=f:return[265,f-11,1];case 14>=f:return[266,f-13,1];case 16>=f:return[267,f-15,1];case 18>=f:return[268,f-17,1];case 22>=f:return[269,f-19,2];case 26>=f:return[270,f-23,2];case 30>=f:return[271,f-27,2];case 34>=f:return[272,f-31,2];case 42>=f:return[273,f-35,3];case 50>=f:return[274,f-43,3];case 58>=f:return[275,f-51,3];case 66>=f:return[276,f-59,3];case 82>=f:return[277,f-67,4];case 98>=f:return[278,f-83,4];case 114>=f:return[279,
f-99,4];case 130>=f:return[280,f-115,4];case 162>=f:return[281,f-131,5];case 194>=f:return[282,f-163,5];case 226>=f:return[283,f-195,5];case 257>=f:return[284,f-227,5];case 258===f:return[285,f-258,0];default:a("invalid length: "+f)}}var f=[],c,d;for(c=3;258>=c;c++)d=b(c),f[c]=d[2]<<24|d[1]<<16|d[0];return f}();p&&new Uint32Array(q);var w=0,A=1;g.prototype.g=function(){for(;!this.o;){var b=f(this,3);b&1&&(this.o=!0);b>>>=1;switch(b){case 0:var b=this.input,c=this.c,d=this.b,h=this.a,e=n,g=n,l=n,m=
d.length,e=n;this.d=this.f=0;e=b[c++];e===n&&a(Error("invalid uncompressed block header: LEN (first byte)"));g=e;e=b[c++];e===n&&a(Error("invalid uncompressed block header: LEN (second byte)"));g|=e<<8;e=b[c++];e===n&&a(Error("invalid uncompressed block header: NLEN (first byte)"));l=e;e=b[c++];e===n&&a(Error("invalid uncompressed block header: NLEN (second byte)"));l|=e<<8;g===~l&&a(Error("invalid uncompressed block header: length verify"));c+g>b.length&&a(Error("input buffer is broken"));switch(this.k){case w:for(;h+
g>d.length;){e=m-h;g-=e;if(p)d.set(b.subarray(c,c+e),h),h+=e,c+=e;else for(;e--;)d[h++]=b[c++];this.a=h;d=this.e();h=this.a}break;case A:for(;h+g>d.length;)d=this.e({t:2});break;default:a(Error("invalid inflate mode"))}if(p)d.set(b.subarray(c,c+g),h),h+=g,c+=g;else for(;g--;)d[h++]=b[c++];this.c=c;this.a=h;this.b=d;break;case 1:this.l(I,H);break;case 2:k(this);break;default:a(Error("unknown BTYPE: "+b))}}return this.q()};q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];var v=p?new Uint16Array(q):
q;q=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258];var B=p?new Uint16Array(q):q;q=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0];var C=p?new Uint8Array(q):q;q=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];var N=p?new Uint16Array(q):q;q=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];var G=p?new Uint8Array(q):q;q=new (p?Uint8Array:Array)(288);s=
0;for(r=q.length;s<r;++s)q[s]=143>=s?8:255>=s?9:279>=s?7:8;var I=d(q);q=new (p?Uint8Array:Array)(30);s=0;for(r=q.length;s<r;++s)q[s]=5;var H=d(q);g.prototype.l=function(a,b){var c=this.b,d=this.a;this.r=a;for(var e=c.length-258,k,g,l;256!==(k=h(this,a));)if(256>k)d>=e&&(this.a=d,c=this.e(),d=this.a),c[d++]=k;else for(k-=257,l=B[k],0<C[k]&&(l+=f(this,C[k])),k=h(this,b),g=N[k],0<G[k]&&(g+=f(this,G[k])),d>=e&&(this.a=d,c=this.e(),d=this.a);l--;)c[d]=c[d++-g];for(;8<=this.d;)this.d-=8,this.c--;this.a=
d};g.prototype.C=function(a,b){var c=this.b,d=this.a;this.r=a;for(var e=c.length,k,g,l;256!==(k=h(this,a));)if(256>k)d>=e&&(c=this.e(),e=c.length),c[d++]=k;else for(k-=257,l=B[k],0<C[k]&&(l+=f(this,C[k])),k=h(this,b),g=N[k],0<G[k]&&(g+=f(this,G[k])),d+l>e&&(c=this.e(),e=c.length);l--;)c[d]=c[d++-g];for(;8<=this.d;)this.d-=8,this.c--;this.a=d};g.prototype.e=function(){var a=new (p?Uint8Array:Array)(this.a-32768),b=this.a-32768,f,c,d=this.b;if(p)a.set(d.subarray(32768,a.length));else for(f=0,c=a.length;f<
c;++f)a[f]=d[f+32768];this.i.push(a);this.n+=a.length;if(p)d.set(d.subarray(b,b+32768));else for(f=0;32768>f;++f)d[f]=d[b+f];this.a=32768;return d};g.prototype.D=function(a){var b,f=this.input.length/this.c+1|0,c,d,e,h=this.input,k=this.b;a&&("number"===typeof a.t&&(f=a.t),"number"===typeof a.z&&(f+=a.z));2>f?(c=(h.length-this.c)/this.r[2],e=c/2*258|0,d=e<k.length?k.length+e:k.length<<1):d=k.length*f;p?(b=new Uint8Array(d),b.set(k)):b=k;return this.b=b};g.prototype.q=function(){var a=0,b=this.b,f=
this.i,c,d=new (p?Uint8Array:Array)(this.n+(this.a-32768)),e,h,k,g;if(0===f.length)return p?this.b.subarray(32768,this.a):this.b.slice(32768,this.a);e=0;for(h=f.length;e<h;++e)for(c=f[e],k=0,g=c.length;k<g;++k)d[a++]=c[k];e=32768;for(h=this.a;e<h;++e)d[a++]=b[e];this.i=[];return this.buffer=d};g.prototype.A=function(){var a,b=this.a;p?this.w?(a=new Uint8Array(b),a.set(this.b.subarray(0,b))):a=this.b.subarray(0,b):(this.b.length>b&&(this.b.length=b),a=this.b);return this.buffer=a};l.prototype.F=function(){this.s||
this.g();return this.m.slice()};l.prototype.g=function(){for(var b=this.input.length;this.c<b;){var f=new e,d=n,h=n,k=n,l=d=k=n,m=n,d=d=n,q=this.input,h=this.c;f.u=q[h++];f.v=q[h++];31===f.u&&139===f.v||a(Error("invalid file signature:"+f.u+","+f.v));f.p=q[h++];switch(f.p){case 8:break;default:a(Error("unknown compression method: "+f.p))}f.h=q[h++];d=q[h++]|q[h++]<<8|q[h++]<<16|q[h++]<<24;f.H=new Date(1E3*d);f.N=q[h++];f.M=q[h++];0<(f.h&4)&&(f.I=q[h++]|q[h++]<<8,h+=f.I);if(0<(f.h&8)){m=[];for(l=0;0<
(d=q[h++]);)m[l++]=String.fromCharCode(d);f.name=m.join("")}if(0<(f.h&16)){m=[];for(l=0;0<(d=q[h++]);)m[l++]=String.fromCharCode(d);f.J=m.join("")}0<(f.h&2)&&(f.B=c(q,0,h)&65535,f.B!==(q[h++]|q[h++]<<8)&&a(Error("invalid header crc16")));d=q[q.length-4]|q[q.length-3]<<8|q[q.length-2]<<16|q[q.length-1]<<24;q.length-h-4-4<512*d&&(k=d);h=new g(q,{index:h,bufferSize:k});f.data=k=h.g();h=h.c;f.K=d=(q[h++]|q[h++]<<8|q[h++]<<16|q[h++]<<24)>>>0;c(k,n,n)!==d&&a(Error("invalid CRC-32 checksum: 0x"+c(k,n,n).toString(16)+
" / 0x"+d.toString(16)));f.L=d=(q[h++]|q[h++]<<8|q[h++]<<16|q[h++]<<24)>>>0;(k.length&4294967295)!==d&&a(Error("invalid input size: "+(k.length&4294967295)+" / "+d));this.m.push(f);this.c=h}this.s=!0;b=this.m;f=k=h=0;for(q=b.length;f<q;++f)k+=b[f].data.length;if(p)for(k=new Uint8Array(k),f=0;f<q;++f)k.set(b[f].data,h),h+=b[f].data.length;else{k=[];for(f=0;f<q;++f)k[f]=b[f].data;k=Array.prototype.concat.apply([],k)}return k};b("Zlib.Gunzip",l);b("Zlib.Gunzip.prototype.decompress",l.prototype.g);b("Zlib.Gunzip.prototype.getMembers",
l.prototype.F)}).call(this);
"undefined"!==typeof window&&!function(a,b,c){var e=a.L,d={version:"0.7.2",noConflict:function(){return a.L=e,this}};a.L=d;d.Util={extend:function(a){var b,c,d,e,g=Array.prototype.slice.call(arguments,1);c=0;for(d=g.length;d>c;c++)for(b in e=g[c]||{},e)e.hasOwnProperty(b)&&(a[b]=e[b]);return a},bind:function(a,b){var c=2<arguments.length?Array.prototype.slice.call(arguments,2):null;return function(){return a.apply(b,c||arguments)}},stamp:function(){var a=0;return function(b){return b._leaflet_id=b._leaflet_id||
++a,b._leaflet_id}}(),invokeEach:function(a,b,c){var d,e;if("object"==typeof a){e=Array.prototype.slice.call(arguments,3);for(d in a)b.apply(c,[d,a[d]].concat(e));return!0}return!1},limitExecByInterval:function(a,b,c){var d,e;return function p(){var g=arguments;return d?void(e=!0):(d=!0,setTimeout(function(){d=!1;e&&(p.apply(c,g),e=!1)},b),void a.apply(c,g))}},falseFn:function(){return!1},formatNum:function(a,b){var c=Math.pow(10,b||5);return Math.round(a*c)/c},trim:function(a){return a.trim?a.trim():
a.replace(/^\s+|\s+$/g,"")},splitWords:function(a){return d.Util.trim(a).split(/\s+/)},setOptions:function(a,b){return a.options=d.extend({},a.options,b),a.options},getParamString:function(a,b,c){var d=[],e;for(e in a)d.push(encodeURIComponent(c?e.toUpperCase():e)+"="+encodeURIComponent(a[e]));return(b&&-1!==b.indexOf("?")?"&":"?")+d.join("&")},template:function(a,b){return a.replace(/\{ *([\w_]+) *\}/g,function(a,f){var d=b[f];if(d===c)throw Error("No value provided for variable "+a);return"function"==
typeof d&&(d=d(b)),d})},isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="};(function(){function b(f){var c,d,e=["webkit","moz","o","ms"];for(c=0;c<e.length&&!d;c++)d=a[e[c]+f];return d}function c(b){var f=+new Date,d=Math.max(0,16-(f-e));return e=f+d,a.setTimeout(b,d)}var e=0,g=a.requestAnimationFrame||b("RequestAnimationFrame")||c,n=a.cancelAnimationFrame||b("CancelAnimationFrame")||
b("CancelRequestAnimationFrame")||function(b){a.clearTimeout(b)};d.Util.requestAnimFrame=function(b,f,e,k){return b=d.bind(b,f),e&&g===c?void b():g.call(a,b,k)};d.Util.cancelAnimFrame=function(b){b&&n.call(a,b)}})();d.extend=d.Util.extend;d.bind=d.Util.bind;d.stamp=d.Util.stamp;d.setOptions=d.Util.setOptions;d.Class=function(){};d.Class.extend=function(a){var b=function(){this.initialize&&this.initialize.apply(this,arguments);this._initHooks&&this.callInitHooks()},c=function(){};c.prototype=this.prototype;
var e=new c;e.constructor=b;b.prototype=e;for(var g in this)this.hasOwnProperty(g)&&"prototype"!==g&&(b[g]=this[g]);a.statics&&(d.extend(b,a.statics),delete a.statics);a.includes&&(d.Util.extend.apply(null,[e].concat(a.includes)),delete a.includes);a.options&&e.options&&(a.options=d.extend({},e.options,a.options));d.extend(e,a);e._initHooks=[];var m=this;return b.__super__=m.prototype,e.callInitHooks=function(){if(!this._initHooksCalled){m.prototype.callInitHooks&&m.prototype.callInitHooks.call(this);
this._initHooksCalled=!0;for(var a=0,b=e._initHooks.length;b>a;a++)e._initHooks[a].call(this)}},b};d.Class.include=function(a){d.extend(this.prototype,a)};d.Class.mergeOptions=function(a){d.extend(this.prototype.options,a)};d.Class.addInitHook=function(a){var b=Array.prototype.slice.call(arguments,1);this.prototype._initHooks=this.prototype._initHooks||[];this.prototype._initHooks.push("function"==typeof a?a:function(){this[a].apply(this,b)})};d.Mixin={};d.Mixin.Events={addEventListener:function(a,
b,c){if(d.Util.invokeEach(a,this.addEventListener,this,b,c))return this;var e,g,m,p,q,s,r,u=this._leaflet_events=this._leaflet_events||{},w=c&&c!==this&&d.stamp(c);a=d.Util.splitWords(a);e=0;for(g=a.length;g>e;e++)m={action:b,context:c||this},p=a[e],w?(q=p+"_idx",s=q+"_len",r=u[q]=u[q]||{},r[w]||(r[w]=[],u[s]=(u[s]||0)+1),r[w].push(m)):(u[p]=u[p]||[],u[p].push(m));return this},hasEventListeners:function(a){var b=this._leaflet_events;return!!b&&(a in b&&0<b[a].length||a+"_idx"in b&&0<b[a+"_idx_len"])},
removeEventListener:function(a,b,c){if(!this._leaflet_events)return this;if(!a)return this.clearAllEventListeners();if(d.Util.invokeEach(a,this.removeEventListener,this,b,c))return this;var e,g,m,p,q,s,r,u,w,A=this._leaflet_events,v=c&&c!==this&&d.stamp(c);a=d.Util.splitWords(a);e=0;for(g=a.length;g>e;e++)if(m=a[e],s=m+"_idx",r=s+"_len",u=A[s],b){if(p=v&&u?u[v]:A[m]){for(q=p.length-1;0<=q;q--)p[q].action!==b||c&&p[q].context!==c||(w=p.splice(q,1),w[0].action=d.Util.falseFn);c&&u&&0===p.length&&(delete u[v],
A[r]--)}}else delete A[m],delete A[s],delete A[r];return this},clearAllEventListeners:function(){return delete this._leaflet_events,this},fireEvent:function(a,b){if(!this.hasEventListeners(a))return this;var c,e,g,m,p,q=d.Util.extend({},b,{type:a,target:this});m=this._leaflet_events;if(m[a])for(c=m[a].slice(),e=0,g=c.length;g>e;e++)c[e].action.call(c[e].context,q);m=m[a+"_idx"];for(p in m)if(c=m[p].slice())for(e=0,g=c.length;g>e;e++)c[e].action.call(c[e].context,q);return this},addOneTimeEventListener:function(a,
b,c){if(d.Util.invokeEach(a,this.addOneTimeEventListener,this,b,c))return this;var e=d.bind(function(){this.removeEventListener(a,b,c).removeEventListener(a,e,c)},this);return this.addEventListener(a,b,c).addEventListener(a,e,c)}};d.Mixin.Events.on=d.Mixin.Events.addEventListener;d.Mixin.Events.off=d.Mixin.Events.removeEventListener;d.Mixin.Events.once=d.Mixin.Events.addOneTimeEventListener;d.Mixin.Events.fire=d.Mixin.Events.fireEvent;(function(){var f="ActiveXObject"in a,e=f&&!b.addEventListener,
k=navigator.userAgent.toLowerCase(),g=-1!==k.indexOf("webkit"),n=-1!==k.indexOf("chrome"),m=-1!==k.indexOf("phantom"),p=-1!==k.indexOf("android"),q=-1!==k.search("android [23]"),k=-1!==k.indexOf("gecko"),s=typeof orientation!=c+"",r=a.navigator&&a.navigator.msPointerEnabled&&a.navigator.msMaxTouchPoints&&!a.PointerEvent,u=a.PointerEvent&&a.navigator.pointerEnabled&&a.navigator.maxTouchPoints||r,w="devicePixelRatio"in a&&1<a.devicePixelRatio||"matchMedia"in a&&a.matchMedia("(min-resolution:144dpi)")&&
a.matchMedia("(min-resolution:144dpi)").matches,A=b.documentElement,v=f&&"transition"in A.style,B="WebKitCSSMatrix"in a&&"m11"in new a.WebKitCSSMatrix&&!q,C="MozPerspective"in A.style,N="OTransition"in A.style,G=!a.L_DISABLE_3D&&(v||B||C||N)&&!m,I;if(I=!a.L_NO_TOUCH){if(m=!m)u||"ontouchstart"in A?m=!0:(m=b.createElement("div"),A=!1,m=m.setAttribute?(m.setAttribute("ontouchstart","return;"),"function"==typeof m.ontouchstart&&(A=!0),m.removeAttribute("ontouchstart"),A):!1);I=m}d.Browser={ie:f,ielt9:e,
webkit:g,gecko:k&&!g&&!a.opera&&!f,android:p,android23:q,chrome:n,ie3d:v,webkit3d:B,gecko3d:C,opera3d:N,any3d:G,mobile:s,mobileWebkit:s&&g,mobileWebkit3d:s&&B,mobileOpera:s&&a.opera,touch:I,msPointer:r,pointer:u,retina:w}})();d.Point=function(a,b,c){this.x=c?Math.round(a):a;this.y=c?Math.round(b):b};d.Point.prototype={clone:function(){return new d.Point(this.x,this.y)},add:function(a){return this.clone()._add(d.point(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(d.point(a))},
_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),
this.y=Math.floor(this.y),this},distanceTo:function(a){a=d.point(a);var b=a.x-this.x;a=a.y-this.y;return Math.sqrt(b*b+a*a)},equals:function(a){return a=d.point(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=d.point(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+d.Util.formatNum(this.x)+", "+d.Util.formatNum(this.y)+")"}};d.point=function(a,b,e){return a instanceof d.Point?a:d.Util.isArray(a)?new d.Point(a[0],a[1]):a===c||null===
a?a:new d.Point(a,b,e)};d.Bounds=function(a,b){if(a)for(var c=b?[a,b]:a,d=0,e=c.length;e>d;d++)this.extend(c[d])};d.Bounds.prototype={extend:function(a){return a=d.point(a),this.min||this.max?(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(a.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(a.y,this.max.y)):(this.min=a.clone(),this.max=a.clone()),this},getCenter:function(a){return new d.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return new d.Point(this.min.x,
this.max.y)},getTopRight:function(){return new d.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var b,c;return a="number"==typeof a[0]||a instanceof d.Point?d.point(a):d.bounds(a),a instanceof d.Bounds?(b=a.min,c=a.max):b=c=a,b.x>=this.min.x&&c.x<=this.max.x&&b.y>=this.min.y&&c.y<=this.max.y},intersects:function(a){a=d.bounds(a);var b=this.min,c=this.max,e=a.min;a=a.max;var g=a.y>=b.y&&e.y<=c.y;return a.x>=b.x&&e.x<=c.x&&g},isValid:function(){return!(!this.min||
!this.max)}};d.bounds=function(a,b){return!a||a instanceof d.Bounds?a:new d.Bounds(a,b)};d.Transformation=function(a,b,c,d){this._a=a;this._b=b;this._c=c;this._d=d};d.Transformation.prototype={transform:function(a,b){return this._transform(a.clone(),b)},_transform:function(a,b){return b=b||1,a.x=b*(this._a*a.x+this._b),a.y=b*(this._c*a.y+this._d),a},untransform:function(a,b){return b=b||1,new d.Point((a.x/b-this._b)/this._a,(a.y/b-this._d)/this._c)}};d.DomUtil={get:function(a){return"string"==typeof a?
b.getElementById(a):a},getStyle:function(a,c){var d=a.style[c];(!d&&a.currentStyle&&(d=a.currentStyle[c]),d&&"auto"!==d||!b.defaultView)||(d=(d=b.defaultView.getComputedStyle(a,null))?d[c]:null);return"auto"===d?null:d},getViewportOffset:function(a){var c,e=0,g=0,n=a,m=b.body,p=b.documentElement;do{if(e+=n.offsetTop||0,g+=n.offsetLeft||0,e+=parseInt(d.DomUtil.getStyle(n,"borderTopWidth"),10)||0,g+=parseInt(d.DomUtil.getStyle(n,"borderLeftWidth"),10)||0,c=d.DomUtil.getStyle(n,"position"),n.offsetParent===
m&&"absolute"===c)break;if("fixed"===c){e+=m.scrollTop||p.scrollTop||0;g+=m.scrollLeft||p.scrollLeft||0;break}if("relative"===c&&!n.offsetLeft){c=d.DomUtil.getStyle(n,"width");var q=d.DomUtil.getStyle(n,"max-width"),s=n.getBoundingClientRect();"none"===c&&"none"===q||(g+=s.left+n.clientLeft);e+=s.top+(m.scrollTop||p.scrollTop||0);break}n=n.offsetParent}while(n);n=a;do{if(n===m)break;e-=n.scrollTop||0;g-=n.scrollLeft||0;n=n.parentNode}while(n);return new d.Point(g,e)},documentIsLtr:function(){return d.DomUtil._docIsLtrCached||
(d.DomUtil._docIsLtrCached=!0,d.DomUtil._docIsLtr="ltr"===d.DomUtil.getStyle(b.body,"direction")),d.DomUtil._docIsLtr},create:function(a,c,d){a=b.createElement(a);return a.className=c,d&&d.appendChild(a),a},hasClass:function(a,b){if(a.classList!==c)return a.classList.contains(b);var e=d.DomUtil._getClass(a);return 0<e.length&&RegExp("(^|\\s)"+b+"(\\s|$)").test(e)},addClass:function(a,b){if(a.classList!==c)for(var e=d.Util.splitWords(b),g=0,n=e.length;n>g;g++)a.classList.add(e[g]);else d.DomUtil.hasClass(a,
b)||(e=d.DomUtil._getClass(a),d.DomUtil._setClass(a,(e?e+" ":"")+b))},removeClass:function(a,b){a.classList!==c?a.classList.remove(b):d.DomUtil._setClass(a,d.Util.trim((" "+d.DomUtil._getClass(a)+" ").replace(" "+b+" "," ")))},_setClass:function(a,b){a.className.baseVal===c?a.className=b:a.className.baseVal=b},_getClass:function(a){return a.className.baseVal===c?a.className:a.className.baseVal},setOpacity:function(a,b){if("opacity"in a.style)a.style.opacity=b;else if("filter"in a.style){var c=!1;
try{c=a.filters.item("DXImageTransform.Microsoft.Alpha")}catch(d){if(1===b)return}b=Math.round(100*b);c?(c.Enabled=100!==b,c.Opacity=b):a.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(opacity="+b+")"}},testProp:function(a){for(var c=b.documentElement.style,d=0;d<a.length;d++)if(a[d]in c)return a[d];return!1},getTranslateString:function(a){var b=d.Browser.webkit3d;return"translate"+(b?"3d":"")+"("+a.x+"px,"+a.y+"px"+((b?",0":"")+")")},getScaleString:function(a,b){return d.DomUtil.getTranslateString(b.add(b.multiplyBy(-1*
a)))+(" scale("+a+") ")},setPosition:function(a,b,c){a._leaflet_pos=b;!c&&d.Browser.any3d?a.style[d.DomUtil.TRANSFORM]=d.DomUtil.getTranslateString(b):(a.style.left=b.x+"px",a.style.top=b.y+"px")},getPosition:function(a){return a._leaflet_pos}};d.DomUtil.TRANSFORM=d.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]);d.DomUtil.TRANSITION=d.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);d.DomUtil.TRANSITION_END=
"webkitTransition"===d.DomUtil.TRANSITION||"OTransition"===d.DomUtil.TRANSITION?d.DomUtil.TRANSITION+"End":"transitionend";(function(){if("onselectstart"in b)d.extend(d.DomUtil,{disableTextSelection:function(){d.DomEvent.on(a,"selectstart",d.DomEvent.preventDefault)},enableTextSelection:function(){d.DomEvent.off(a,"selectstart",d.DomEvent.preventDefault)}});else{var f=d.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);d.extend(d.DomUtil,{disableTextSelection:function(){if(f){var a=
b.documentElement.style;this._userSelect=a[f];a[f]="none"}},enableTextSelection:function(){f&&(b.documentElement.style[f]=this._userSelect,delete this._userSelect)}})}d.extend(d.DomUtil,{disableImageDrag:function(){d.DomEvent.on(a,"dragstart",d.DomEvent.preventDefault)},enableImageDrag:function(){d.DomEvent.off(a,"dragstart",d.DomEvent.preventDefault)}})})();d.LatLng=function(a,b,d){if(a=parseFloat(a),b=parseFloat(b),isNaN(a)||isNaN(b))throw Error("Invalid LatLng object: ("+a+", "+b+")");this.lat=
a;this.lng=b;d!==c&&(this.alt=parseFloat(d))};d.extend(d.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1E-9});d.LatLng.prototype={equals:function(a){if(!a)return!1;a=d.latLng(a);return Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng))<=d.LatLng.MAX_MARGIN},toString:function(a){return"LatLng("+d.Util.formatNum(this.lat,a)+", "+d.Util.formatNum(this.lng,a)+")"},distanceTo:function(a){a=d.latLng(a);var b=d.LatLng.DEG_TO_RAD,c=(a.lng-this.lng)*b,e=this.lat*b,g=a.lat*b;a=Math.sin((a.lat-
this.lat)*b/2);c=Math.sin(c/2);e=a*a+c*c*Math.cos(e)*Math.cos(g);return 12756274*Math.atan2(Math.sqrt(e),Math.sqrt(1-e))},wrap:function(a,b){var c=this.lng;return a=a||-180,b=b||180,c=(c+b)%(b-a)+(a>c||c===b?b:a),new d.LatLng(this.lat,c)}};d.latLng=function(a,b){return a instanceof d.LatLng?a:d.Util.isArray(a)?"number"==typeof a[0]||"string"==typeof a[0]?new d.LatLng(a[0],a[1],a[2]):null:a===c||null===a?a:"object"==typeof a&&"lat"in a?new d.LatLng(a.lat,"lng"in a?a.lng:a.lon):b===c?null:new d.LatLng(a,
b)};d.LatLngBounds=function(a,b){if(a)for(var c=b?[a,b]:a,d=0,e=c.length;e>d;d++)this.extend(c[d])};d.LatLngBounds.prototype={extend:function(a){if(!a)return this;var b=d.latLng(a);return a=null!==b?b:d.latLngBounds(a),a instanceof d.LatLng?this._southWest||this._northEast?(this._southWest.lat=Math.min(a.lat,this._southWest.lat),this._southWest.lng=Math.min(a.lng,this._southWest.lng),this._northEast.lat=Math.max(a.lat,this._northEast.lat),this._northEast.lng=Math.max(a.lng,this._northEast.lng)):(this._southWest=
new d.LatLng(a.lat,a.lng),this._northEast=new d.LatLng(a.lat,a.lng)):a instanceof d.LatLngBounds&&(this.extend(a._southWest),this.extend(a._northEast)),this},pad:function(a){var b=this._southWest,c=this._northEast,e=Math.abs(b.lat-c.lat)*a;a*=Math.abs(b.lng-c.lng);return new d.LatLngBounds(new d.LatLng(b.lat-e,b.lng-a),new d.LatLng(c.lat+e,c.lng+a))},getCenter:function(){return new d.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},
getNorthEast:function(){return this._northEast},getNorthWest:function(){return new d.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new d.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){a="number"==typeof a[0]||a instanceof d.LatLng?d.latLng(a):d.latLngBounds(a);var b,c,e=this._southWest,
g=this._northEast;return a instanceof d.LatLngBounds?(b=a.getSouthWest(),c=a.getNorthEast()):b=c=a,b.lat>=e.lat&&c.lat<=g.lat&&b.lng>=e.lng&&c.lng<=g.lng},intersects:function(a){a=d.latLngBounds(a);var b=this._southWest,c=this._northEast,e=a.getSouthWest();a=a.getNorthEast();var g=a.lng>=b.lng&&e.lng<=c.lng;return a.lat>=b.lat&&e.lat<=c.lat&&g},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join()},equals:function(a){return a?(a=d.latLngBounds(a),this._southWest.equals(a.getSouthWest())&&
this._northEast.equals(a.getNorthEast())):!1},isValid:function(){return!(!this._southWest||!this._northEast)}};d.latLngBounds=function(a,b){return!a||a instanceof d.LatLngBounds?a:new d.LatLngBounds(a,b)};d.Projection={};d.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(a){var b=d.LatLng.DEG_TO_RAD,c=this.MAX_LATITUDE,c=Math.max(Math.min(c,a.lat),-c);a=a.lng*b;b*=c;return b=Math.log(Math.tan(Math.PI/4+b/2)),new d.Point(a,b)},unproject:function(a){var b=d.LatLng.RAD_TO_DEG,
c=a.x*b;a=(2*Math.atan(Math.exp(a.y))-Math.PI/2)*b;return new d.LatLng(a,c)}};d.Projection.LonLat={project:function(a){return new d.Point(a.lng,a.lat)},unproject:function(a){return new d.LatLng(a.y,a.x)}};d.CRS={latLngToPoint:function(a,b){var c=this.projection.project(a),d=this.scale(b);return this.transformation._transform(c,d)},pointToLatLng:function(a,b){var c=this.scale(b),c=this.transformation.untransform(a,c);return this.projection.unproject(c)},project:function(a){return this.projection.project(a)},
scale:function(a){return 256*Math.pow(2,a)},getSize:function(a){a=this.scale(a);return d.point(a,a)}};d.CRS.Simple=d.extend({},d.CRS,{projection:d.Projection.LonLat,transformation:new d.Transformation(1,0,-1,0),scale:function(a){return Math.pow(2,a)}});d.CRS.EPSG3857=d.extend({},d.CRS,{code:"EPSG:3857",projection:d.Projection.SphericalMercator,transformation:new d.Transformation(0.5/Math.PI,0.5,-0.5/Math.PI,0.5),project:function(a){return this.projection.project(a).multiplyBy(6378137)}});d.CRS.EPSG900913=
d.extend({},d.CRS.EPSG3857,{code:"EPSG:900913"});d.CRS.EPSG4326=d.extend({},d.CRS,{code:"EPSG:4326",projection:d.Projection.LonLat,transformation:new d.Transformation(1/360,0.5,-1/360,0.5)});d.Map=d.Class.extend({includes:d.Mixin.Events,options:{crs:d.CRS.EPSG3857,fadeAnimation:d.DomUtil.TRANSITION&&!d.Browser.android23,trackResize:!0,markerZoomAnimation:d.DomUtil.TRANSITION&&d.Browser.any3d},initialize:function(a,b){b=d.setOptions(this,b);this._initContainer(a);this._initLayout();this._onResize=
d.bind(this._onResize,this);this._initEvents();b.maxBounds&&this.setMaxBounds(b.maxBounds);b.center&&b.zoom!==c&&this.setView(d.latLng(b.center),b.zoom,{reset:!0});this._handlers=[];this._layers={};this._zoomBoundLayers={};this._tileLayersNum=0;this.callInitHooks();this._addLayers(b.layers)},setView:function(a,b){return b=b===c?this.getZoom():b,this._resetView(d.latLng(a),this._limitZoom(b)),this},setZoom:function(a,b){return this._loaded?this.setView(this.getCenter(),a,{zoom:b}):(this._zoom=this._limitZoom(a),
this)},zoomIn:function(a,b){return this.setZoom(this._zoom+(a||1),b)},zoomOut:function(a,b){return this.setZoom(this._zoom-(a||1),b)},setZoomAround:function(a,b,c){var e=this.getZoomScale(b),g=this.getSize().divideBy(2);a=(a instanceof d.Point?a:this.latLngToContainerPoint(a)).subtract(g).multiplyBy(1-1/e);g=this.containerPointToLatLng(g.add(a));return this.setView(g,b,{zoom:c})},fitBounds:function(a,b){b=b||{};a=a.getBounds?a.getBounds():d.latLngBounds(a);var c=d.point(b.paddingTopLeft||b.padding||
[0,0]),e=d.point(b.paddingBottomRight||b.padding||[0,0]),g=this.getBoundsZoom(a,!1,c.add(e)),c=e.subtract(c).divideBy(2),e=this.project(a.getSouthWest(),g),m=this.project(a.getNorthEast(),g),c=this.unproject(e.add(m).divideBy(2).add(c),g);return g=b&&b.maxZoom?Math.min(b.maxZoom,g):g,this.setView(c,g,b)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,b){return this.setView(a,this._zoom,{pan:b})},panBy:function(a){return this.fire("movestart"),this._rawPanBy(d.point(a)),
this.fire("move"),this.fire("moveend")},setMaxBounds:function(a){return a=d.latLngBounds(a),this.options.maxBounds=a,a?(this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds,this)):this.off("moveend",this._panInsideMaxBounds,this)},panInsideBounds:function(a,b){var c=this.getCenter(),d=this._limitCenter(c,this._zoom,a);return c.equals(d)?this:this.panTo(d,b)},addLayer:function(a){var b=d.stamp(a);return this._layers[b]?this:(this._layers[b]=a,!a.options||isNaN(a.options.maxZoom)&&
isNaN(a.options.minZoom)||(this._zoomBoundLayers[b]=a,this._updateZoomLevels()),this.options.zoomAnimation&&d.TileLayer&&a instanceof d.TileLayer&&(this._tileLayersNum++,this._tileLayersToLoad++,a.on("load",this._onTileLayerLoad,this)),this._loaded&&this._layerAdd(a),this)},removeLayer:function(a){var b=d.stamp(a);return this._layers[b]?(this._loaded&&a.onRemove(this),delete this._layers[b],this._loaded&&this.fire("layerremove",{layer:a}),this._zoomBoundLayers[b]&&(delete this._zoomBoundLayers[b],
this._updateZoomLevels()),this.options.zoomAnimation&&d.TileLayer&&a instanceof d.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,a.off("load",this._onTileLayerLoad,this)),this):this},hasLayer:function(a){return a?d.stamp(a)in this._layers:!1},eachLayer:function(a,b){for(var c in this._layers)a.call(b,this._layers[c]);return this},invalidateSize:function(a){if(!this._loaded)return this;a=d.extend({animate:!1,pan:!0},!0===a?{animate:!0}:a);var b=this.getSize();this._sizeChanged=!0;this._initialCenter=
null;var c=this.getSize(),e=b.divideBy(2).round(),g=c.divideBy(2).round(),e=e.subtract(g);return e.x||e.y?(a.animate&&a.pan?this.panBy(e):(a.pan&&this._rawPanBy(e),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(d.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:b,newSize:c})):this},addHandler:function(a,b){if(!b)return this;var c=this[a]=new b(this);return this._handlers.push(c),this.options[a]&&c.enable(),this},
remove:function(){this._loaded&&this.fire("unload");this._initEvents("off");try{delete this._container._leaflet}catch(a){this._container._leaflet=c}return this._clearPanes(),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this},getCenter:function(){return this._checkIfLoaded(),this._initialCenter&&!this._moved()?this._initialCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),b=this.unproject(a.getBottomLeft()),
a=this.unproject(a.getTopRight());return new d.LatLngBounds(b,a)},getMinZoom:function(){return this.options.minZoom===c?this._layersMinZoom===c?0:this._layersMinZoom:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===c?this._layersMaxZoom===c?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,b,c){a=d.latLngBounds(a);var e,g=this.getMinZoom()-(b?1:0),m=this.getMaxZoom(),p=this.getSize(),q=a.getNorthWest();a=a.getSouthEast();e=!0;c=d.point(c||[0,0]);do g++,
e=this.project(a,g).subtract(this.project(q,g)).add(c),e=b?e.x<p.x||e.y<p.y:p.contains(e);while(e&&m>=g);return e&&b?null:b?g:g-1},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new d.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(){var a=this._getTopLeftPoint();return new d.Bounds(a,a.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._initialTopLeftPoint},getPanes:function(){return this._panes},
getContainer:function(){return this._container},getZoomScale:function(a){var b=this.options.crs;return b.scale(a)/b.scale(this._zoom)},getScaleZoom:function(a){return this._zoom+Math.log(a)/Math.LN2},project:function(a,b){return b=b===c?this._zoom:b,this.options.crs.latLngToPoint(d.latLng(a),b)},unproject:function(a,b){return b=b===c?this._zoom:b,this.options.crs.pointToLatLng(d.point(a),b)},layerPointToLatLng:function(a){a=d.point(a).add(this.getPixelOrigin());return this.unproject(a)},latLngToLayerPoint:function(a){return this.project(d.latLng(a))._round()._subtract(this.getPixelOrigin())},
containerPointToLayerPoint:function(a){return d.point(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return d.point(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){a=this.containerPointToLayerPoint(d.point(a));return this.layerPointToLatLng(a)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(d.latLng(a)))},mouseEventToContainerPoint:function(a){return d.DomEvent.getMousePosition(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},
mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){a=this._container=d.DomUtil.get(a);if(!a)throw Error("Map container not found.");if(a._leaflet)throw Error("Map container is already initialized.");a._leaflet=!0},_initLayout:function(){var a=this._container;d.DomUtil.addClass(a,"leaflet-container"+(d.Browser.touch?" leaflet-touch":"")+(d.Browser.retina?" leaflet-retina":"")+(d.Browser.ielt9?" leaflet-oldie":"")+(this.options.fadeAnimation?
" leaflet-fade-anim":""));var b=d.DomUtil.getStyle(a,"position");"absolute"!==b&&"relative"!==b&&"fixed"!==b&&(a.style.position="relative");this._initPanes();this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._mapPane=a.mapPane=this._createPane("leaflet-map-pane",this._container);this._tilePane=a.tilePane=this._createPane("leaflet-tile-pane",this._mapPane);a.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane);a.shadowPane=this._createPane("leaflet-shadow-pane");
a.overlayPane=this._createPane("leaflet-overlay-pane");a.markerPane=this._createPane("leaflet-marker-pane");a.popupPane=this._createPane("leaflet-popup-pane");this.options.markerZoomAnimation||(d.DomUtil.addClass(a.markerPane," leaflet-zoom-hide"),d.DomUtil.addClass(a.shadowPane," leaflet-zoom-hide"),d.DomUtil.addClass(a.popupPane," leaflet-zoom-hide"))},_createPane:function(a,b){return d.DomUtil.create("div",a,b||this._panes.objectsPane)},_clearPanes:function(){this._container.removeChild(this._mapPane)},
_addLayers:function(a){a=a?d.Util.isArray(a)?a:[a]:[];for(var b=0,c=a.length;c>b;b++)this.addLayer(a[b])},_resetView:function(a,b,c,e){var g=this._zoom!==b;e||(this.fire("movestart"),g&&this.fire("zoomstart"));this._zoom=b;this._initialCenter=a;this._initialTopLeftPoint=this._getNewTopLeftPoint(a);c?this._initialTopLeftPoint._add(this._getMapPanePos()):d.DomUtil.setPosition(this._mapPane,new d.Point(0,0));this._tileLayersToLoad=this._tileLayersNum;a=!this._loaded;this._loaded=!0;a&&(this.fire("load"),
this.eachLayer(this._layerAdd,this));this.fire("viewreset",{hard:!c});this.fire("move");(g||e)&&this.fire("zoomend");this.fire("moveend",{hard:!c})},_rawPanBy:function(a){d.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_updateZoomLevels:function(){var a,b=1/0,d=-1/0,e=this._getZoomSpan();for(a in this._zoomBoundLayers){var g=this._zoomBoundLayers[a];isNaN(g.options.minZoom)||(b=Math.min(b,g.options.minZoom));
isNaN(g.options.maxZoom)||(d=Math.max(d,g.options.maxZoom))}a===c?this._layersMaxZoom=this._layersMinZoom=c:(this._layersMaxZoom=d,this._layersMinZoom=b);e!==this._getZoomSpan()&&this.fire("zoomlevelschange")},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw Error("Set map center and zoom first.");},_initEvents:function(b){if(d.DomEvent){b=b||"on";d.DomEvent[b](this._container,"click",this._onMouseClick,this);var c,e,g="dblclick mousedown mouseup mouseenter mouseleave mousemove contextmenu".split(" ");
c=0;for(e=g.length;e>c;c++)d.DomEvent[b](this._container,g[c],this._fireMouseEvent,this);this.options.trackResize&&d.DomEvent[b](a,"resize",this._onResize,this)}},_onResize:function(){d.Util.cancelAnimFrame(this._resizeRequest);this._resizeRequest=d.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this,!1,this._container)},_onMouseClick:function(a){!this._loaded||!a._simulated&&(this.dragging&&this.dragging.moved()||this.boxZoom&&this.boxZoom.moved())||d.DomEvent._skipped(a)||
(this.fire("preclick"),this._fireMouseEvent(a))},_fireMouseEvent:function(a){if(this._loaded&&!d.DomEvent._skipped(a)){var b=a.type;if(b="mouseenter"===b?"mouseover":"mouseleave"===b?"mouseout":b,this.hasEventListeners(b)){"contextmenu"===b&&d.DomEvent.preventDefault(a);var c=this.mouseEventToContainerPoint(a),e=this.containerPointToLayerPoint(c),g=this.layerPointToLatLng(e);this.fire(b,{latlng:g,layerPoint:e,containerPoint:c,originalEvent:a})}}},_onTileLayerLoad:function(){this._tileLayersToLoad--;
this._tileLayersNum&&!this._tileLayersToLoad&&this.fire("tilelayersload")},_clearHandlers:function(){for(var a=0,b=this._handlers.length;b>a;a++)this._handlers[a].disable()},whenReady:function(a,b){return this._loaded?a.call(b||this,this):this.on("load",a,b),this},_layerAdd:function(a){a.onAdd(this);this.fire("layeradd",{layer:a})},_getMapPanePos:function(){return d.DomUtil.getPosition(this._mapPane)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(){return this.getPixelOrigin().subtract(this._getMapPanePos())},
_getNewTopLeftPoint:function(a,b){var c=this.getSize()._divideBy(2);return this.project(a,b)._subtract(c)._round()},_latLngToNewLayerPoint:function(a,b,c){c=this._getNewTopLeftPoint(c,b).add(this._getMapPanePos());return this.project(a,b)._subtract(c)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,b,c){if(!c)return a;a=
this.project(a,b);var e=this.getSize().divideBy(2),e=new d.Bounds(a.subtract(e),a.add(e));c=this._getBoundsOffset(e,c,b);return this.unproject(a.add(c),b)},_limitOffset:function(a,b){if(!b)return a;var c=this.getPixelBounds(),c=new d.Bounds(c.min.add(a),c.max.add(a));return a.add(this._getBoundsOffset(c,b))},_getBoundsOffset:function(a,b,c){var e=this.project(b.getNorthWest(),c).subtract(a.min);b=this.project(b.getSouthEast(),c).subtract(a.max);a=this._rebound(e.x,-b.x);e=this._rebound(e.y,-b.y);
return new d.Point(a,e)},_rebound:function(a,b){return 0<a+b?Math.round(a-b)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(b))},_limitZoom:function(a){var b=this.getMinZoom(),c=this.getMaxZoom();return Math.max(b,Math.min(c,a))}});d.map=function(a,b){return new d.Map(a,b)};d.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.314245179,R_MAJOR:6378137,project:function(a){var b=d.LatLng.DEG_TO_RAD,c=this.MAX_LATITUDE,e=Math.max(Math.min(c,a.lat),-c),c=this.R_MAJOR;a=a.lng*b*c;var b=
e*b,e=this.R_MINOR/c,e=Math.sqrt(1-e*e),g=e*Math.sin(b),g=Math.pow((1-g)/(1+g),0.5*e),e=Math.tan(0.5*(0.5*Math.PI-b))/g;return b=-c*Math.log(e),new d.Point(a,b)},unproject:function(a){var b,c=d.LatLng.RAD_TO_DEG,e=this.R_MAJOR,g=a.x*c/e,m=this.R_MINOR/e,m=Math.sqrt(1-m*m);a=Math.exp(-a.y/e);var e=Math.PI/2-2*Math.atan(a),p=15;for(b=0.1;1E-7<Math.abs(b)&&0<--p;)b=m*Math.sin(e),b=Math.PI/2-2*Math.atan(a*Math.pow((1-b)/(1+b),0.5*m))-e,e+=b;return new d.LatLng(e*c,g)}};d.CRS.EPSG3395=d.extend({},d.CRS,
{code:"EPSG:3395",projection:d.Projection.Mercator,transformation:function(){var a=0.5/(Math.PI*d.Projection.Mercator.R_MAJOR);return new d.Transformation(a,0.5,-a,0.5)}()});d.TileLayer=d.Class.extend({includes:d.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:d.Browser.mobile,updateWhenIdle:d.Browser.mobile},initialize:function(a,b){b=d.setOptions(this,b);b.detectRetina&&d.Browser.retina&&0<b.maxZoom&&
(b.tileSize=Math.floor(b.tileSize/2),b.zoomOffset++,0<b.minZoom&&b.minZoom--,this.options.maxZoom--);b.bounds&&(b.bounds=d.latLngBounds(b.bounds));this._url=a;var c=this.options.subdomains;"string"==typeof c&&(this.options.subdomains=c.split(""))},onAdd:function(a){this._map=a;this._animated=a._zoomAnimated;this._initContainer();a.on({viewreset:this._reset,moveend:this._update},this);this._animated&&a.on({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this);this.options.updateWhenIdle||(this._limitedUpdate=
d.Util.limitExecByInterval(this._update,150,this),a.on("move",this._limitedUpdate,this));this._reset();this._update()},addTo:function(a){return a.addLayer(this),this},onRemove:function(a){this._container.parentNode.removeChild(this._container);a.off({viewreset:this._reset,moveend:this._update},this);this._animated&&a.off({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this);this.options.updateWhenIdle||a.off("move",this._limitedUpdate,this);this._map=this._container=null},bringToFront:function(){var a=
this._map._panes.tilePane;return this._container&&(a.appendChild(this._container),this._setAutoZIndex(a,Math.max)),this},bringToBack:function(){var a=this._map._panes.tilePane;return this._container&&(a.insertBefore(this._container,a.firstChild),this._setAutoZIndex(a,Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=
a,this._updateZIndex(),this},setUrl:function(a,b){return this._url=a,b||this.redraw(),this},redraw:function(){return this._map&&(this._reset({hard:!0}),this._update()),this},_updateZIndex:function(){this._container&&this.options.zIndex!==c&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a,b){var c,d,e,g=a.children,p=-b(1/0,-1/0);d=0;for(e=g.length;e>d;d++)g[d]!==this._container&&(c=parseInt(g[d].style.zIndex,10),isNaN(c)||(p=b(p,c)));this.options.zIndex=this._container.style.zIndex=
(isFinite(p)?p:0)+b(1,-1)},_updateOpacity:function(){var a,b=this._tiles;if(d.Browser.ielt9)for(a in b)d.DomUtil.setOpacity(b[a],this.options.opacity);else d.DomUtil.setOpacity(this._container,this.options.opacity)},_initContainer:function(){var a=this._map._panes.tilePane;this._container||((this._container=d.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),this._animated)?(this._bgBuffer=d.DomUtil.create("div","leaflet-tile-container",this._container),this._tileContainer=d.DomUtil.create("div",
"leaflet-tile-container",this._container)):this._tileContainer=this._container,a.appendChild(this._container),1>this.options.opacity&&this._updateOpacity())},_reset:function(a){for(var b in this._tiles)this.fire("tileunload",{tile:this._tiles[b]});this._tiles={};this._tilesToLoad=0;this.options.reuseTiles&&(this._unusedTiles=[]);this._tileContainer.innerHTML="";this._animated&&a&&a.hard&&this._clearBgBuffer();this._initContainer()},_getTileSize:function(){var a=this._map,b=a.getZoom()+this.options.zoomOffset,
c=this.options.maxNativeZoom,d=this.options.tileSize;return c&&b>c&&(d=Math.round(a.getZoomScale(b)/a.getZoomScale(c)*d)),d},_update:function(){if(this._map){var a=this._map,b=a.getPixelBounds(),a=a.getZoom(),c=this._getTileSize();a>this.options.maxZoom||a<this.options.minZoom||(b=d.bounds(b.min.divideBy(c)._floor(),b.max.divideBy(c)._floor()),this._addTilesFromCenterOut(b),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(b))}},_addTilesFromCenterOut:function(a){var c,
e,g,n=[],m=a.getCenter();for(c=a.min.y;c<=a.max.y;c++)for(e=a.min.x;e<=a.max.x;e++)g=new d.Point(e,c),this._tileShouldBeLoaded(g)&&n.push(g);a=n.length;if(0!==a){n.sort(function(a,b){return a.distanceTo(m)-b.distanceTo(m)});c=b.createDocumentFragment();this._tilesToLoad||this.fire("loading");this._tilesToLoad+=a;for(e=0;a>e;e++)this._addTile(n[e],c);this._tileContainer.appendChild(c)}},_tileShouldBeLoaded:function(a){if(a.x+":"+a.y in this._tiles)return!1;var b=this.options;if(!b.continuousWorld){var c=
this._getWrapTileNum();if(b.noWrap&&(0>a.x||a.x>=c.x)||0>a.y||a.y>=c.y)return!1}return b.bounds&&(c=b.tileSize,a=a.multiplyBy(c),c=a.add([c,c]),a=this._map.unproject(a),c=this._map.unproject(c),b.continuousWorld||b.noWrap||(a=a.wrap(),c=c.wrap()),!b.bounds.intersects([a,c]))?!1:!0},_removeOtherTiles:function(a){var b,c,d;for(d in this._tiles)b=d.split(":"),c=parseInt(b[0],10),b=parseInt(b[1],10),(c<a.min.x||c>a.max.x||b<a.min.y||b>a.max.y)&&this._removeTile(d)},_removeTile:function(a){var b=this._tiles[a];
this.fire("tileunload",{tile:b,url:b.src});this.options.reuseTiles?(d.DomUtil.removeClass(b,"leaflet-tile-loaded"),this._unusedTiles.push(b)):b.parentNode===this._tileContainer&&this._tileContainer.removeChild(b);d.Browser.android||(b.onload=null,b.src=d.Util.emptyImageUrl);delete this._tiles[a]},_addTile:function(a,b){var c=this._getTilePos(a),e=this._getTile();d.DomUtil.setPosition(e,c,d.Browser.chrome);this._tiles[a.x+":"+a.y]=e;this._loadTile(e,a);e.parentNode!==this._tileContainer&&b.appendChild(e)},
_getZoomForUrl:function(){var a=this.options,b=this._map.getZoom();return a.zoomReverse&&(b=a.maxZoom-b),b+=a.zoomOffset,a.maxNativeZoom?Math.min(b,a.maxNativeZoom):b},_getTilePos:function(a){var b=this._map.getPixelOrigin(),c=this._getTileSize();return a.multiplyBy(c).subtract(b)},getTileUrl:function(a){return d.Util.template(this._url,d.extend({s:this._getSubdomain(a),z:a.z,x:a.x,y:a.y},this.options))},_getWrapTileNum:function(){return this._map.options.crs.getSize(this._map.getZoom()).divideBy(this._getTileSize())._floor()},
_adjustTilePoint:function(a){var b=this._getWrapTileNum();this.options.continuousWorld||this.options.noWrap||(a.x=(a.x%b.x+b.x)%b.x);this.options.tms&&(a.y=b.y-a.y-1);a.z=this._getZoomForUrl()},_getSubdomain:function(a){a=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[a]},_getTile:function(){if(this.options.reuseTiles&&0<this._unusedTiles.length){var a=this._unusedTiles.pop();return this._resetTile(a),a}return this._createTile()},_resetTile:function(){},_createTile:function(){var a=
d.DomUtil.create("img","leaflet-tile");return a.style.width=a.style.height=this._getTileSize()+"px",a.galleryimg="no",a.onselectstart=a.onmousemove=d.Util.falseFn,d.Browser.ielt9&&this.options.opacity!==c&&d.DomUtil.setOpacity(a,this.options.opacity),d.Browser.mobileWebkit3d&&(a.style.WebkitBackfaceVisibility="hidden"),a},_loadTile:function(a,b){a._layer=this;a.onload=this._tileOnLoad;a.onerror=this._tileOnError;this._adjustTilePoint(b);a.src=this.getTileUrl(b);this.fire("tileloadstart",{tile:a,url:a.src})},
_tileLoaded:function(){this._tilesToLoad--;this._animated&&d.DomUtil.addClass(this._tileContainer,"leaflet-zoom-animated");this._tilesToLoad||(this.fire("load"),this._animated&&(clearTimeout(this._clearBgBufferTimer),this._clearBgBufferTimer=setTimeout(d.bind(this._clearBgBuffer,this),500)))},_tileOnLoad:function(){var a=this._layer;this.src!==d.Util.emptyImageUrl&&(d.DomUtil.addClass(this,"leaflet-tile-loaded"),a.fire("tileload",{tile:this,url:this.src}));a._tileLoaded()},_tileOnError:function(){var a=
this._layer;a.fire("tileerror",{tile:this,url:this.src});var b=a.options.errorTileUrl;b&&(this.src=b);a._tileLoaded()}});d.tileLayer=function(a,b){return new d.TileLayer(a,b)};d.TileLayer.WMS=d.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(a,b){this._url=a;var c=d.extend({},this.defaultWmsParams),e=b.tileSize||this.options.tileSize;c.width=c.height=b.detectRetina&&d.Browser.retina?2*e:
e;for(var g in b)this.options.hasOwnProperty(g)||"crs"===g||(c[g]=b[g]);this.wmsParams=c;d.setOptions(this,b)},onAdd:function(a){this._crs=this.options.crs||a.options.crs;this._wmsVersion=parseFloat(this.wmsParams.version);this.wmsParams[1.3<=this._wmsVersion?"crs":"srs"]=this._crs.code;d.TileLayer.prototype.onAdd.call(this,a)},getTileUrl:function(a){var b=this._map,c=this.options.tileSize,e=a.multiplyBy(c),c=e.add([c,c]),e=this._crs.project(b.unproject(e,a.z)),b=this._crs.project(b.unproject(c,a.z)),
b=1.3<=this._wmsVersion&&this._crs===d.CRS.EPSG4326?[b.y,e.x,e.y,b.x].join():[e.x,b.y,b.x,e.y].join();a=d.Util.template(this._url,{s:this._getSubdomain(a)});return a+d.Util.getParamString(this.wmsParams,a,!0)+"&BBOX="+b},setParams:function(a,b){return d.extend(this.wmsParams,a),b||this.redraw(),this}});d.tileLayer.wms=function(a,b){return new d.TileLayer.WMS(a,b)};d.TileLayer.Canvas=d.TileLayer.extend({options:{async:!1},initialize:function(a){d.setOptions(this,a)},redraw:function(){this._map&&(this._reset({hard:!0}),
this._update());for(var a in this._tiles)this._redrawTile(this._tiles[a]);return this},_redrawTile:function(a){this.drawTile(a,a._tilePoint,this._map._zoom)},_createTile:function(){var a=d.DomUtil.create("canvas","leaflet-tile");return a.width=a.height=this.options.tileSize,a.onselectstart=a.onmousemove=d.Util.falseFn,a},_loadTile:function(a,b){a._layer=this;a._tilePoint=b;this._redrawTile(a);this.options.async||this.tileDrawn(a)},drawTile:function(){},tileDrawn:function(a){this._tileOnLoad.call(a)}});
d.tileLayer.canvas=function(a){return new d.TileLayer.Canvas(a)};d.ImageOverlay=d.Class.extend({includes:d.Mixin.Events,options:{opacity:1},initialize:function(a,b,c){this._url=a;this._bounds=d.latLngBounds(b);d.setOptions(this,c)},onAdd:function(a){this._map=a;this._image||this._initImage();a._panes.overlayPane.appendChild(this._image);a.on("viewreset",this._reset,this);a.options.zoomAnimation&&d.Browser.any3d&&a.on("zoomanim",this._animateZoom,this);this._reset()},onRemove:function(a){a.getPanes().overlayPane.removeChild(this._image);
a.off("viewreset",this._reset,this);a.options.zoomAnimation&&a.off("zoomanim",this._animateZoom,this)},addTo:function(a){return a.addLayer(this),this},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},bringToFront:function(){return this._image&&this._map._panes.overlayPane.appendChild(this._image),this},bringToBack:function(){var a=this._map._panes.overlayPane;return this._image&&a.insertBefore(this._image,a.firstChild),this},setUrl:function(a){this._url=a;this._image.src=
this._url},getAttribution:function(){return this.options.attribution},_initImage:function(){this._image=d.DomUtil.create("img","leaflet-image-layer");this._map.options.zoomAnimation&&d.Browser.any3d?d.DomUtil.addClass(this._image,"leaflet-zoom-animated"):d.DomUtil.addClass(this._image,"leaflet-zoom-hide");this._updateOpacity();d.extend(this._image,{galleryimg:"no",onselectstart:d.Util.falseFn,onmousemove:d.Util.falseFn,onload:d.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(a){var b=
this._map,c=this._image,e=b.getZoomScale(a.zoom),g=this._bounds.getNorthWest(),m=this._bounds.getSouthEast(),g=b._latLngToNewLayerPoint(g,a.zoom,a.center);a=b._latLngToNewLayerPoint(m,a.zoom,a.center)._subtract(g);a=g._add(a._multiplyBy(0.5*(1-1/e)));c.style[d.DomUtil.TRANSFORM]=d.DomUtil.getTranslateString(a)+" scale("+e+") "},_reset:function(){var a=this._image,b=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),c=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(b);d.DomUtil.setPosition(a,
b);a.style.width=c.x+"px";a.style.height=c.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){d.DomUtil.setOpacity(this._image,this.options.opacity)}});d.imageOverlay=function(a,b,c){return new d.ImageOverlay(a,b,c)};d.Icon=d.Class.extend({options:{className:""},initialize:function(a){d.setOptions(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,b){var c=this._getIconUrl(a);
if(!c){if("icon"===a)throw Error("iconUrl not set in Icon options (see the docs).");return null}var d;return d=b&&"IMG"===b.tagName?this._createImg(c,b):this._createImg(c),this._setIconStyles(d,a),d},_setIconStyles:function(a,b){var c,e=this.options,g=d.point(e[b+"Size"]);c=d.point("shadow"===b?e.shadowAnchor||e.iconAnchor:e.iconAnchor);!c&&g&&(c=g.divideBy(2,!0));a.className="leaflet-marker-"+b+" "+e.className;c&&(a.style.marginLeft=-c.x+"px",a.style.marginTop=-c.y+"px");g&&(a.style.width=g.x+"px",
a.style.height=g.y+"px")},_createImg:function(a,c){return c=c||b.createElement("img"),c.src=a,c},_getIconUrl:function(a){return d.Browser.retina&&this.options[a+"RetinaUrl"]?this.options[a+"RetinaUrl"]:this.options[a+"Url"]}});d.icon=function(a){return new d.Icon(a)};d.Icon.Default=d.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(a){var b=a+"Url";if(this.options[b])return this.options[b];d.Browser.retina&&"icon"===a&&(a+="-2x");
b=d.Icon.Default.imagePath;if(!b)throw Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return b+"/marker-"+a+".png"}});d.Icon.Default.imagePath=function(){var a,c,d,e,g=b.getElementsByTagName("script"),m=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;a=0;for(c=g.length;c>a;a++)if(d=g[a].src,d.match(m))return e=d.split(m)[0],(e?e+"/":"")+"images"}();d.Marker=d.Class.extend({includes:d.Mixin.Events,options:{icon:new d.Icon.Default,title:"",alt:"",clickable:!0,draggable:!1,keyboard:!0,
zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250},initialize:function(a,b){d.setOptions(this,b);this._latlng=d.latLng(a)},onAdd:function(a){this._map=a;a.on("viewreset",this.update,this);this._initIcon();this.update();this.fire("add");a.options.zoomAnimation&&a.options.markerZoomAnimation&&a.on("zoomanim",this._animateZoom,this)},addTo:function(a){return a.addLayer(this),this},onRemove:function(a){this.dragging&&this.dragging.disable();this._removeIcon();this._removeShadow();this.fire("remove");
a.off({viewreset:this.update,zoomanim:this._animateZoom},this);this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=d.latLng(a),this.update(),this.fire("move",{latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update(),this},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup),this},update:function(){if(this._icon){var a=this._map.latLngToLayerPoint(this._latlng).round();
this._setPos(a)}return this},_initIcon:function(){var a=this.options,b=this._map,c=b.options.zoomAnimation&&b.options.markerZoomAnimation?"leaflet-zoom-animated":"leaflet-zoom-hide",e=a.icon.createIcon(this._icon),b=!1;e!==this._icon&&(this._icon&&this._removeIcon(),b=!0,a.title&&(e.title=a.title),a.alt&&(e.alt=a.alt));d.DomUtil.addClass(e,c);a.keyboard&&(e.tabIndex="0");this._icon=e;this._initInteraction();a.riseOnHover&&d.DomEvent.on(e,"mouseover",this._bringToFront,this).on(e,"mouseout",this._resetZIndex,
this);var e=a.icon.createShadow(this._shadow),g=!1;e!==this._shadow&&(this._removeShadow(),g=!0);e&&d.DomUtil.addClass(e,c);this._shadow=e;1>a.opacity&&this._updateOpacity();a=this._map._panes;b&&a.markerPane.appendChild(this._icon);e&&g&&a.shadowPane.appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&d.DomEvent.off(this._icon,"mouseover",this._bringToFront).off(this._icon,"mouseout",this._resetZIndex);this._map._panes.markerPane.removeChild(this._icon);this._icon=null},_removeShadow:function(){this._shadow&&
this._map._panes.shadowPane.removeChild(this._shadow);this._shadow=null},_setPos:function(a){d.DomUtil.setPosition(this._icon,a);this._shadow&&d.DomUtil.setPosition(this._shadow,a);this._zIndex=a.y+this.options.zIndexOffset;this._resetZIndex()},_updateZIndex:function(a){this._icon.style.zIndex=this._zIndex+a},_animateZoom:function(a){a=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(a)},_initInteraction:function(){if(this.options.clickable){var a=this._icon,b=["dblclick",
"mousedown","mouseover","mouseout","contextmenu"];d.DomUtil.addClass(a,"leaflet-clickable");d.DomEvent.on(a,"click",this._onMouseClick,this);d.DomEvent.on(a,"keypress",this._onKeyPress,this);for(var c=0;c<b.length;c++)d.DomEvent.on(a,b[c],this._fireMouseEvent,this);d.Handler.MarkerDrag&&(this.dragging=new d.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_onMouseClick:function(a){var b=this.dragging&&this.dragging.moved();(this.hasEventListeners(a.type)||b)&&d.DomEvent.stopPropagation(a);
b||(this.dragging&&this.dragging._enabled||!this._map.dragging||!this._map.dragging.moved())&&this.fire(a.type,{originalEvent:a,latlng:this._latlng})},_onKeyPress:function(a){13===a.keyCode&&this.fire("click",{originalEvent:a,latlng:this._latlng})},_fireMouseEvent:function(a){this.fire(a.type,{originalEvent:a,latlng:this._latlng});"contextmenu"===a.type&&this.hasEventListeners(a.type)&&d.DomEvent.preventDefault(a);"mousedown"!==a.type?d.DomEvent.stopPropagation(a):d.DomEvent.preventDefault(a)},setOpacity:function(a){return this.options.opacity=
a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){d.DomUtil.setOpacity(this._icon,this.options.opacity);this._shadow&&d.DomUtil.setOpacity(this._shadow,this.options.opacity)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}});d.marker=function(a,b){return new d.Marker(a,b)};d.DivIcon=d.Icon.extend({options:{iconSize:[12,12],className:"leaflet-div-icon",html:!1},createIcon:function(a){a=a&&"DIV"===a.tagName?a:b.createElement("div");
var c=this.options;return a.innerHTML=!1!==c.html?c.html:"",c.bgPos&&(a.style.backgroundPosition=-c.bgPos.x+"px "+-c.bgPos.y+"px"),this._setIconStyles(a,"icon"),a},createShadow:function(){return null}});d.divIcon=function(a){return new d.DivIcon(a)};d.Map.mergeOptions({closePopupOnClick:!0});d.Popup=d.Class.extend({includes:d.Mixin.Events,options:{minWidth:50,maxWidth:300,autoPan:!0,closeButton:!0,offset:[0,7],autoPanPadding:[5,5],keepInView:!1,className:"",zoomAnimation:!0},initialize:function(a,
b){d.setOptions(this,a);this._source=b;this._animated=d.Browser.any3d&&this.options.zoomAnimation;this._isOpen=!1},onAdd:function(a){this._map=a;this._container||this._initLayout();var b=a.options.fadeAnimation;b&&d.DomUtil.setOpacity(this._container,0);a._panes.popupPane.appendChild(this._container);a.on(this._getEvents(),this);this.update();b&&d.DomUtil.setOpacity(this._container,1);this.fire("open");a.fire("popupopen",{popup:this});this._source&&this._source.fire("popupopen",{popup:this})},addTo:function(a){return a.addLayer(this),
this},openOn:function(a){return a.openPopup(this),this},onRemove:function(a){a._panes.popupPane.removeChild(this._container);d.Util.falseFn(this._container.offsetWidth);a.off(this._getEvents(),this);a.options.fadeAnimation&&d.DomUtil.setOpacity(this._container,0);this._map=null;this.fire("close");a.fire("popupclose",{popup:this});this._source&&this._source.fire("popupclose",{popup:this})},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=d.latLng(a),this._map&&(this._updatePosition(),
this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_getEvents:function(){var a={viewreset:this._updatePosition};return this._animated&&(a.zoomanim=this._zoomAnimation),("closeOnClick"in this.options?this.options.closeOnClick:
this._map.options.closePopupOnClick)&&(a.preclick=this._close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var a,b=this._container=d.DomUtil.create("div","leaflet-popup "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"));this.options.closeButton&&(a=this._closeButton=d.DomUtil.create("a","leaflet-popup-close-button",b),a.href="#close",a.innerHTML="&#215;",d.DomEvent.disableClickPropagation(a),
d.DomEvent.on(a,"click",this._onCloseButtonClick,this));a=this._wrapper=d.DomUtil.create("div","leaflet-popup-content-wrapper",b);d.DomEvent.disableClickPropagation(a);this._contentNode=d.DomUtil.create("div","leaflet-popup-content",a);d.DomEvent.disableScrollPropagation(this._contentNode);d.DomEvent.on(a,"contextmenu",d.DomEvent.stopPropagation);this._tipContainer=d.DomUtil.create("div","leaflet-popup-tip-container",b);this._tip=d.DomUtil.create("div","leaflet-popup-tip",this._tipContainer)},_updateContent:function(){if(this._content){if("string"==
typeof this._content)this._contentNode.innerHTML=this._content;else{for(;this._contentNode.hasChildNodes();)this._contentNode.removeChild(this._contentNode.firstChild);this._contentNode.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var a=this._contentNode,b=a.style;b.width="";b.whiteSpace="nowrap";var c=a.offsetWidth,c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth);b.width=c+1+"px";b.whiteSpace="";b.height="";var c=a.offsetHeight,e=this.options.maxHeight;
e&&c>e?(b.height=e+"px",d.DomUtil.addClass(a,"leaflet-popup-scrolled")):d.DomUtil.removeClass(a,"leaflet-popup-scrolled");this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),b=this._animated,c=d.point(this.options.offset);b&&d.DomUtil.setPosition(this._container,a);this._containerBottom=-c.y-(b?0:a.y);this._containerLeft=-Math.round(this._containerWidth/2)+c.x+(b?0:a.x);this._container.style.bottom=this._containerBottom+
"px";this._container.style.left=this._containerLeft+"px"}},_zoomAnimation:function(a){a=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);d.DomUtil.setPosition(this._container,a)},_adjustPan:function(){if(this.options.autoPan){var a=this._map,b=this._container.offsetHeight,c=this._containerWidth,e=new d.Point(this._containerLeft,-b-this._containerBottom);this._animated&&e._add(d.DomUtil.getPosition(this._container));var e=a.layerPointToContainerPoint(e),g=d.point(this.options.autoPanPadding),
m=d.point(this.options.autoPanPaddingTopLeft||g),g=d.point(this.options.autoPanPaddingBottomRight||g),p=a.getSize(),q=0,s=0;e.x+c+g.x>p.x&&(q=e.x+c-p.x+g.x);0>e.x-q-m.x&&(q=e.x-m.x);e.y+b+g.y>p.y&&(s=e.y+b-p.y+g.y);0>e.y-s-m.y&&(s=e.y-m.y);(q||s)&&a.fire("autopanstart").panBy([q,s])}},_onCloseButtonClick:function(a){this._close();d.DomEvent.stop(a)}});d.popup=function(a,b){return new d.Popup(a,b)};d.Map.include({openPopup:function(a,b,c){(this.closePopup(),a instanceof d.Popup)||(a=(new d.Popup(c)).setLatLng(b).setContent(a));
return a._isOpen=!0,this._popup=a,this.addLayer(a)},closePopup:function(a){return a&&a!==this._popup||(a=this._popup,this._popup=null),a&&(this.removeLayer(a),a._isOpen=!1),this}});d.Marker.include({openPopup:function(){return this._popup&&this._map&&!this._map.hasLayer(this._popup)&&(this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(){return this._popup&&(this._popup._isOpen?this.closePopup():
this.openPopup()),this},bindPopup:function(a,b){var c=d.point(this.options.icon.options.popupAnchor||[0,0]);return c=c.add(d.Popup.prototype.options.offset),b&&b.offset&&(c=c.add(b.offset)),b=d.extend({offset:c},b),this._popupHandlersAdded||(this.on("click",this.togglePopup,this).on("remove",this.closePopup,this).on("move",this._movePopup,this),this._popupHandlersAdded=!0),a instanceof d.Popup?(d.setOptions(a,b),this._popup=a):this._popup=(new d.Popup(b,this)).setContent(a),this},setPopupContent:function(a){return this._popup&&
this._popup.setContent(a),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this.togglePopup,this).off("remove",this.closePopup,this).off("move",this._movePopup,this),this._popupHandlersAdded=!1),this},getPopup:function(){return this._popup},_movePopup:function(a){this._popup.setLatLng(a.latlng)}});d.LayerGroup=d.Class.extend({initialize:function(a){this._layers={};var b,c;if(a)for(b=0,c=a.length;c>b;b++)this.addLayer(a[b])},addLayer:function(a){var b=this.getLayerId(a);
return this._layers[b]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){a=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]),delete this._layers[a],this},hasLayer:function(a){return a?a in this._layers||this.getLayerId(a)in this._layers:!1},clearLayers:function(){return this.eachLayer(this.removeLayer,this),this},invoke:function(a){var b,c,d=Array.prototype.slice.call(arguments,1);for(b in this._layers)c=this._layers[b],
c[a]&&c[a].apply(c,d);return this},onAdd:function(a){this._map=a;this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a);this._map=null},addTo:function(a){return a.addLayer(this),this},eachLayer:function(a,b){for(var c in this._layers)a.call(b,this._layers[c]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[],b;for(b in this._layers)a.push(this._layers[b]);return a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return d.stamp(a)}});
d.layerGroup=function(a){return new d.LayerGroup(a)};d.FeatureGroup=d.LayerGroup.extend({includes:d.Mixin.Events,statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose"},addLayer:function(a){return this.hasLayer(a)?this:("on"in a&&a.on(d.FeatureGroup.EVENTS,this._propagateEvent,this),d.LayerGroup.prototype.addLayer.call(this,a),this._popupContent&&a.bindPopup&&a.bindPopup(this._popupContent,this._popupOptions),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?
(a in this._layers&&(a=this._layers[a]),a.off(d.FeatureGroup.EVENTS,this._propagateEvent,this),d.LayerGroup.prototype.removeLayer.call(this,a),this._popupContent&&this.invoke("unbindPopup"),this.fire("layerremove",{layer:a})):this},bindPopup:function(a,b){return this._popupContent=a,this._popupOptions=b,this.invoke("bindPopup",a,b)},openPopup:function(a){for(var b in this._layers){this._layers[b].openPopup(a);break}return this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},
bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new d.LatLngBounds;return this.eachLayer(function(b){a.extend(b instanceof d.Marker?b.getLatLng():b.getBounds())}),a},_propagateEvent:function(a){a=d.extend({layer:a.target,target:this},a);this.fire(a.type,a)}});d.featureGroup=function(a){return new d.FeatureGroup(a)};d.Path=d.Class.extend({includes:[d.Mixin.Events],statics:{CLIP_PADDING:function(){var b=((d.Browser.mobile?1280:2E3)/Math.max(a.outerWidth,a.outerHeight)-
1)/2;return Math.max(0,Math.min(0.5,b))}()},options:{stroke:!0,color:"#0033ff",dashArray:null,lineCap:null,lineJoin:null,weight:5,opacity:0.5,fill:!1,fillColor:null,fillOpacity:0.2,clickable:!0},initialize:function(a){d.setOptions(this,a)},onAdd:function(a){this._map=a;this._container||(this._initElements(),this._initEvents());this.projectLatlngs();this._updatePath();this._container&&this._map._pathRoot.appendChild(this._container);this.fire("add");a.on({viewreset:this.projectLatlngs,moveend:this._updatePath},
this)},addTo:function(a){return a.addLayer(this),this},onRemove:function(a){a._pathRoot.removeChild(this._container);this.fire("remove");this._map=null;d.Browser.vml&&(this._container=null,this._stroke=null,this._fill=null);a.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(a){return d.setOptions(this,a),this._container&&this._updateStyle(),this},redraw:function(){return this._map&&(this.projectLatlngs(),this._updatePath()),this}});
d.Map.include({_updatePathViewport:function(){var a=d.Path.CLIP_PADDING,b=this.getSize(),c=d.DomUtil.getPosition(this._mapPane).multiplyBy(-1)._subtract(b.multiplyBy(a)._round()),a=c.add(b.multiplyBy(1+2*a)._round());this._pathViewport=new d.Bounds(c,a)}});d.Path.SVG_NS="http://www.w3.org/2000/svg";d.Browser.svg=!(!b.createElementNS||!b.createElementNS(d.Path.SVG_NS,"svg").createSVGRect);d.Path=d.Path.extend({statics:{SVG:d.Browser.svg},bringToFront:function(){var a=this._map._pathRoot,b=this._container;
return b&&a.lastChild!==b&&a.appendChild(b),this},bringToBack:function(){var a=this._map._pathRoot,b=this._container,c=a.firstChild;return b&&c!==b&&a.insertBefore(b,c),this},getPathString:function(){},_createElement:function(a){return b.createElementNS(d.Path.SVG_NS,a)},_initElements:function(){this._map._initPathRoot();this._initPath();this._initStyle()},_initPath:function(){this._container=this._createElement("g");this._path=this._createElement("path");this.options.className&&d.DomUtil.addClass(this._path,
this.options.className);this._container.appendChild(this._path)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round"));this.options.fill&&this._path.setAttribute("fill-rule","evenodd");this.options.pointerEvents&&this._path.setAttribute("pointer-events",this.options.pointerEvents);this.options.clickable||this.options.pointerEvents||this._path.setAttribute("pointer-events","none");this._updateStyle()},_updateStyle:function(){this.options.stroke?
(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight),this.options.dashArray?this._path.setAttribute("stroke-dasharray",this.options.dashArray):this._path.removeAttribute("stroke-dasharray"),this.options.lineCap&&this._path.setAttribute("stroke-linecap",this.options.lineCap),this.options.lineJoin&&this._path.setAttribute("stroke-linejoin",this.options.lineJoin)):this._path.setAttribute("stroke",
"none");this.options.fill?(this._path.setAttribute("fill",this.options.fillColor||this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity)):this._path.setAttribute("fill","none")},_updatePath:function(){var a=this.getPathString();a||(a="M0 0");this._path.setAttribute("d",a)},_initEvents:function(){if(this.options.clickable){!d.Browser.svg&&d.Browser.vml||d.DomUtil.addClass(this._path,"leaflet-clickable");d.DomEvent.on(this._container,"click",this._onMouseClick,this);for(var a=
"dblclick mousedown mouseover mouseout mousemove contextmenu".split(" "),b=0;b<a.length;b++)d.DomEvent.on(this._container,a[b],this._fireMouseEvent,this)}},_onMouseClick:function(a){this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(a)},_fireMouseEvent:function(a){if(this.hasEventListeners(a.type)){var b=this._map,c=b.mouseEventToContainerPoint(a),e=b.containerPointToLayerPoint(c),b=b.layerPointToLatLng(e);this.fire(a.type,{latlng:b,layerPoint:e,containerPoint:c,originalEvent:a});
"contextmenu"===a.type&&d.DomEvent.preventDefault(a);"mousemove"!==a.type&&d.DomEvent.stopPropagation(a)}}});d.Map.include({_initPathRoot:function(){this._pathRoot||(this._pathRoot=d.Path.prototype._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.options.zoomAnimation&&d.Browser.any3d?(d.DomUtil.addClass(this._pathRoot,"leaflet-zoom-animated"),this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})):d.DomUtil.addClass(this._pathRoot,"leaflet-zoom-hide"),this.on("moveend",
this._updateSvgViewport),this._updateSvgViewport())},_animatePathZoom:function(a){var b=this.getZoomScale(a.zoom);a=this._getCenterOffset(a.center)._multiplyBy(-b)._add(this._pathViewport.min);this._pathRoot.style[d.DomUtil.TRANSFORM]=d.DomUtil.getTranslateString(a)+" scale("+b+") ";this._pathZooming=!0},_endPathZoom:function(){this._pathZooming=!1},_updateSvgViewport:function(){if(!this._pathZooming){this._updatePathViewport();var a=this._pathViewport,b=a.min,c=a.max,a=c.x-b.x,c=c.y-b.y,e=this._pathRoot,
g=this._panes.overlayPane;d.Browser.mobileWebkit&&g.removeChild(e);d.DomUtil.setPosition(e,b);e.setAttribute("width",a);e.setAttribute("height",c);e.setAttribute("viewBox",[b.x,b.y,a,c].join(" "));d.Browser.mobileWebkit&&g.appendChild(e)}}});d.Path.include({bindPopup:function(a,b){return a instanceof d.Popup?this._popup=a:((!this._popup||b)&&(this._popup=new d.Popup(b,this)),this._popup.setContent(a)),this._popupHandlersAdded||(this.on("click",this._openPopup,this).on("remove",this.closePopup,this),
this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this._openPopup).off("remove",this.closePopup),this._popupHandlersAdded=!1),this},openPopup:function(a){return this._popup&&(a=a||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)],this._openPopup({latlng:a})),this},closePopup:function(){return this._popup&&this._popup._close(),this},_openPopup:function(a){this._popup.setLatLng(a.latlng);this._map.openPopup(this._popup)}});
d.Browser.vml=!d.Browser.svg&&function(){try{var a=b.createElement("div");a.innerHTML='<v:shape adj="1"/>';var c=a.firstChild;return c.style.behavior="url(#default#VML)",c&&"object"==typeof c.adj}catch(d){return!1}}();d.Path=d.Browser.svg||!d.Browser.vml?d.Path:d.Path.extend({statics:{VML:!0,CLIP_PADDING:0.02},_createElement:function(){try{return b.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return b.createElement("<lvml:"+a+' class="lvml">')}}catch(a){return function(a){return b.createElement("<"+
a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),_initPath:function(){var a=this._container=this._createElement("shape");d.DomUtil.addClass(a,"leaflet-vml-shape"+(this.options.className?" "+this.options.className:""));this.options.clickable&&d.DomUtil.addClass(a,"leaflet-clickable");a.coordsize="1 1";this._path=this._createElement("path");a.appendChild(this._path);this._map._pathRoot.appendChild(a)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var a=this._stroke,
b=this._fill,c=this.options,e=this._container;e.stroked=c.stroke;e.filled=c.fill;c.stroke?(a||(a=this._stroke=this._createElement("stroke"),a.endcap="round",e.appendChild(a)),a.weight=c.weight+"px",a.color=c.color,a.opacity=c.opacity,a.dashStyle=c.dashArray?d.Util.isArray(c.dashArray)?c.dashArray.join(" "):c.dashArray.replace(/( *, *)/g," "):"",c.lineCap&&(a.endcap=c.lineCap.replace("butt","flat")),c.lineJoin&&(a.joinstyle=c.lineJoin)):a&&(e.removeChild(a),this._stroke=null);c.fill?(b||(b=this._fill=
this._createElement("fill"),e.appendChild(b)),b.color=c.fillColor||c.color,b.opacity=c.fillOpacity):b&&(e.removeChild(b),this._fill=null)},_updatePath:function(){var a=this._container.style;a.display="none";this._path.v=this.getPathString()+" ";a.display=""}});d.Map.include(d.Browser.svg||!d.Browser.vml?{}:{_initPathRoot:function(){if(!this._pathRoot){var a=this._pathRoot=b.createElement("div");a.className="leaflet-vml-container";this._panes.overlayPane.appendChild(a);this.on("moveend",this._updatePathViewport);
this._updatePathViewport()}}});d.Browser.canvas=!!b.createElement("canvas").getContext;d.Path=d.Path.SVG&&!a.L_PREFER_CANVAS||!d.Browser.canvas?d.Path:d.Path.extend({statics:{CANVAS:!0,SVG:!1},redraw:function(){return this._map&&(this.projectLatlngs(),this._requestUpdate()),this},setStyle:function(a){return d.setOptions(this,a),this._map&&(this._updateStyle(),this._requestUpdate()),this},onRemove:function(a){a.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this);this.options.clickable&&
(this._map.off("click",this._onClick,this),this._map.off("mousemove",this._onMouseMove,this));this._requestUpdate();this._map=null},_requestUpdate:function(){this._map&&!d.Path._updateRequest&&(d.Path._updateRequest=d.Util.requestAnimFrame(this._fireMapMoveEnd,this._map))},_fireMapMoveEnd:function(){d.Path._updateRequest=null;this.fire("moveend")},_initElements:function(){this._map._initPathRoot();this._ctx=this._map._canvasCtx},_updateStyle:function(){var a=this.options;a.stroke&&(this._ctx.lineWidth=
a.weight,this._ctx.strokeStyle=a.color);a.fill&&(this._ctx.fillStyle=a.fillColor||a.color)},_drawPath:function(){var a,b,c,e,g,m;this._ctx.beginPath();a=0;for(c=this._parts.length;c>a;a++){b=0;for(e=this._parts[a].length;e>b;b++)g=this._parts[a][b],m=(0===b?"move":"line")+"To",this._ctx[m](g.x,g.y);this instanceof d.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(!this._checkIfEmpty()){var a=this._ctx,b=this.options;this._drawPath();a.save();
this._updateStyle();b.fill&&(a.globalAlpha=b.fillOpacity,a.fill());b.stroke&&(a.globalAlpha=b.opacity,a.stroke());a.restore()}},_initEvents:function(){this.options.clickable&&(this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onClick,this))},_onClick:function(a){this._containsPoint(a.layerPoint)&&this.fire("click",a)},_onMouseMove:function(a){this._map&&!this._map._animatingZoom&&(this._containsPoint(a.layerPoint)?(this._ctx.canvas.style.cursor="pointer",this._mouseInside=
!0,this.fire("mouseover",a)):this._mouseInside&&(this._ctx.canvas.style.cursor="",this._mouseInside=!1,this.fire("mouseout",a)))}});d.Map.include(d.Path.SVG&&!a.L_PREFER_CANVAS||!d.Browser.canvas?{}:{_initPathRoot:function(){var a,c=this._pathRoot;c||(c=this._pathRoot=b.createElement("canvas"),c.style.position="absolute",a=this._canvasCtx=c.getContext("2d"),a.lineCap="round",a.lineJoin="round",this._panes.overlayPane.appendChild(c),this.options.zoomAnimation&&(this._pathRoot.className="leaflet-zoom-animated",
this.on("zoomanim",this._animatePathZoom),this.on("zoomend",this._endPathZoom)),this.on("moveend",this._updateCanvasViewport),this._updateCanvasViewport())},_updateCanvasViewport:function(){if(!this._pathZooming){this._updatePathViewport();var a=this._pathViewport,b=a.min,a=a.max.subtract(b),c=this._pathRoot;d.DomUtil.setPosition(c,b);c.width=a.x;c.height=a.y;c.getContext("2d").translate(-b.x,-b.y)}}});d.LineUtil={simplify:function(a,b){if(!b||!a.length)return a.slice();var c=b*b;return a=this._reducePoints(a,
c),this._simplifyDP(a,c)},pointToSegmentDistance:function(a,b,c){return Math.sqrt(this._sqClosestPointOnSegment(a,b,c,!0))},closestPointOnSegment:function(a,b,c){return this._sqClosestPointOnSegment(a,b,c)},_simplifyDP:function(a,b){var d=a.length,e=new (typeof Uint8Array!=c+""?Uint8Array:Array)(d);e[0]=e[d-1]=1;this._simplifyDPStep(a,e,b,0,d-1);var g,m=[];for(g=0;d>g;g++)e[g]&&m.push(a[g]);return m},_simplifyDPStep:function(a,b,c,d,e){var g,p,q,s=0;for(p=d+1;e-1>=p;p++)q=this._sqClosestPointOnSegment(a[p],
a[d],a[e],!0),q>s&&(g=p,s=q);s>c&&(b[g]=1,this._simplifyDPStep(a,b,c,d,g),this._simplifyDPStep(a,b,c,g,e))},_reducePoints:function(a,b){for(var c=[a[0]],d=1,e=0,g=a.length;g>d;d++)this._sqDist(a[d],a[e])>b&&(c.push(a[d]),e=d);return g-1>e&&c.push(a[g-1]),c},clipSegment:function(a,b,c,d){var e,g,p=d?this._lastCode:this._getBitCode(a,c),q=this._getBitCode(b,c);for(this._lastCode=q;;){if(!(p|q))return[a,b];if(p&q)return!1;d=p||q;e=this._getEdgeIntersection(a,b,d,c);g=this._getBitCode(e,c);d===p?(a=e,
p=g):(b=e,q=g)}},_getEdgeIntersection:function(a,b,c,e){var g=b.x-a.x;b=b.y-a.y;var m=e.min;e=e.max;return 8&c?new d.Point(a.x+g*(e.y-a.y)/b,e.y):4&c?new d.Point(a.x+g*(m.y-a.y)/b,m.y):2&c?new d.Point(e.x,a.y+b*(e.x-a.x)/g):1&c?new d.Point(m.x,a.y+b*(m.x-a.x)/g):void 0},_getBitCode:function(a,b){var c=0;return a.x<b.min.x?c|=1:a.x>b.max.x&&(c|=2),a.y<b.min.y?c|=4:a.y>b.max.y&&(c|=8),c},_sqDist:function(a,b){var c=b.x-a.x,d=b.y-a.y;return c*c+d*d},_sqClosestPointOnSegment:function(a,b,c,e){var g,m=
b.x;b=b.y;var p=c.x-m,q=c.y-b,s=p*p+q*q;return 0<s&&(g=((a.x-m)*p+(a.y-b)*q)/s,1<g?(m=c.x,b=c.y):0<g&&(m+=p*g,b+=q*g)),p=a.x-m,q=a.y-b,e?p*p+q*q:new d.Point(m,b)}};d.Polyline=d.Path.extend({initialize:function(a,b){d.Path.prototype.initialize.call(this,b);this._latlngs=this._convertLatLngs(a)},options:{smoothFactor:1,noClip:!1},projectLatlngs:function(){this._originalPoints=[];for(var a=0,b=this._latlngs.length;b>a;a++)this._originalPoints[a]=this._map.latLngToLayerPoint(this._latlngs[a])},getPathString:function(){for(var a=
0,b=this._parts.length,c="";b>a;a++)c+=this._getPathPartStr(this._parts[a]);return c},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._latlngs=this._convertLatLngs(a),this.redraw()},addLatLng:function(a){return this._latlngs.push(d.latLng(a)),this.redraw()},spliceLatLngs:function(){var a=[].splice.apply(this._latlngs,arguments);return this._convertLatLngs(this._latlngs,!0),this.redraw(),a},closestLayerPoint:function(a){for(var b,c,e=1/0,g=this._parts,m=null,p=0,q=g.length;q>
p;p++)for(var s=g[p],r=1,u=s.length;u>r;r++){b=s[r-1];c=s[r];var w=d.LineUtil._sqClosestPointOnSegment(a,b,c,!0);e>w&&(e=w,m=d.LineUtil._sqClosestPointOnSegment(a,b,c))}return m&&(m.distance=Math.sqrt(e)),m},getBounds:function(){return new d.LatLngBounds(this.getLatLngs())},_convertLatLngs:function(a,b){var c,e,g=b?a:[];c=0;for(e=a.length;e>c;c++){if(d.Util.isArray(a[c])&&"number"!=typeof a[c][0])return;g[c]=d.latLng(a[c])}return g},_initEvents:function(){d.Path.prototype._initEvents.call(this)},
_getPathPartStr:function(a){for(var b,c=d.Path.VML,e=0,g=a.length,m="";g>e;e++)b=a[e],c&&b._round(),m+=(e?"L":"M")+b.x+" "+b.y;return m},_clipPoints:function(){var a,b,c,e=this._originalPoints,g=e.length;if(this.options.noClip)return void(this._parts=[e]);var m=this._parts=[],p=this._map._pathViewport,q=d.LineUtil;for(b=a=0;g-1>a;a++)(c=q.clipSegment(e[a],e[a+1],p,a))&&(m[b]=m[b]||[],m[b].push(c[0]),(c[1]!==e[a+1]||a===g-2)&&(m[b].push(c[1]),b++))},_simplifyPoints:function(){for(var a=this._parts,
b=d.LineUtil,c=0,e=a.length;e>c;c++)a[c]=b.simplify(a[c],this.options.smoothFactor)},_updatePath:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),d.Path.prototype._updatePath.call(this))}});d.polyline=function(a,b){return new d.Polyline(a,b)};d.PolyUtil={};d.PolyUtil.clipPolygon=function(a,b){var c,e,g,m,p,q,s,r,u=[1,4,2,8],w=d.LineUtil;e=0;for(q=a.length;q>e;e++)a[e]._code=w._getBitCode(a[e],b);for(m=0;4>m;m++){s=u[m];c=[];e=0;q=a.length;for(g=q-1;q>e;g=e++)p=a[e],g=a[g],p._code&
s?g._code&s||(r=w._getEdgeIntersection(g,p,s,b),r._code=w._getBitCode(r,b),c.push(r)):(g._code&s&&(r=w._getEdgeIntersection(g,p,s,b),r._code=w._getBitCode(r,b),c.push(r)),c.push(p));a=c}return a};d.Polygon=d.Polyline.extend({options:{fill:!0},initialize:function(a,b){d.Polyline.prototype.initialize.call(this,a,b);this._initWithHoles(a)},_initWithHoles:function(a){var b,c;if(a&&d.Util.isArray(a[0])&&"number"!=typeof a[0][0])for(this._latlngs=this._convertLatLngs(a[0]),this._holes=a.slice(1),a=0,b=
this._holes.length;b>a;a++)c=this._holes[a]=this._convertLatLngs(this._holes[a]),c[0].equals(c[c.length-1])&&c.pop();a=this._latlngs;2<=a.length&&a[0].equals(a[a.length-1])&&a.pop()},projectLatlngs:function(){if(d.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[],this._holes){var a,b,c,e;a=0;for(c=this._holes.length;c>a;a++)for(this._holePoints[a]=[],b=0,e=this._holes[a].length;e>b;b++)this._holePoints[a][b]=this._map.latLngToLayerPoint(this._holes[a][b])}},setLatLngs:function(a){return a&&
d.Util.isArray(a[0])&&"number"!=typeof a[0][0]?(this._initWithHoles(a),this.redraw()):d.Polyline.prototype.setLatLngs.call(this,a)},_clipPoints:function(){var a=[];if(this._parts=[this._originalPoints].concat(this._holePoints),!this.options.noClip){for(var b=0,c=this._parts.length;c>b;b++){var e=d.PolyUtil.clipPolygon(this._parts[b],this._map._pathViewport);e.length&&a.push(e)}this._parts=a}},_getPathPartStr:function(a){return d.Polyline.prototype._getPathPartStr.call(this,a)+(d.Browser.svg?"z":"x")}});
d.polygon=function(a,b){return new d.Polygon(a,b)};(function(){function a(b){return d.FeatureGroup.extend({initialize:function(a,b){this._layers={};this._options=b;this.setLatLngs(a)},setLatLngs:function(a){var c=0,d=a.length;for(this.eachLayer(function(b){d>c?b.setLatLngs(a[c++]):this.removeLayer(b)},this);d>c;)this.addLayer(new b(a[c++],this._options));return this},getLatLngs:function(){var a=[];return this.eachLayer(function(b){a.push(b.getLatLngs())}),a}})}d.MultiPolyline=a(d.Polyline);d.MultiPolygon=
a(d.Polygon);d.multiPolyline=function(a,b){return new d.MultiPolyline(a,b)};d.multiPolygon=function(a,b){return new d.MultiPolygon(a,b)}})();d.Rectangle=d.Polygon.extend({initialize:function(a,b){d.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(a),b)},setBounds:function(a){this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=d.latLngBounds(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});d.rectangle=function(a,b){return new d.Rectangle(a,
b)};d.Circle=d.Path.extend({initialize:function(a,b,c){d.Path.prototype.initialize.call(this,c);this._latlng=d.latLng(a);this._mRadius=b},options:{fill:!0},setLatLng:function(a){return this._latlng=d.latLng(a),this.redraw()},setRadius:function(a){return this._mRadius=a,this.redraw()},projectLatlngs:function(){var a=this._getLngRadius(),b=this._latlng,a=this._map.latLngToLayerPoint([b.lat,b.lng-a]);this._point=this._map.latLngToLayerPoint(b);this._radius=Math.max(this._point.x-a.x,1)},getBounds:function(){var a=
this._getLngRadius(),b=this._mRadius/40075017*360,c=this._latlng;return new d.LatLngBounds([c.lat-b,c.lng-a],[c.lat+b,c.lng+a])},getLatLng:function(){return this._latlng},getPathString:function(){var a=this._point,b=this._radius;return this._checkIfEmpty()?"":d.Browser.svg?"M"+a.x+","+(a.y-b)+"A"+b+","+b+",0,1,1,"+(a.x-0.1)+","+(a.y-b)+" z":(a._round(),b=Math.round(b),"AL "+a.x+","+a.y+" "+b+","+b+" 0,23592600")},getRadius:function(){return this._mRadius},_getLatRadius:function(){return this._mRadius/
40075017*360},_getLngRadius:function(){return this._getLatRadius()/Math.cos(d.LatLng.DEG_TO_RAD*this._latlng.lat)},_checkIfEmpty:function(){if(!this._map)return!1;var a=this._map._pathViewport,b=this._radius,c=this._point;return c.x-b>a.max.x||c.y-b>a.max.y||c.x+b<a.min.x||c.y+b<a.min.y}});d.circle=function(a,b,c){return new d.Circle(a,b,c)};d.CircleMarker=d.Circle.extend({options:{radius:10,weight:2},initialize:function(a,b){d.Circle.prototype.initialize.call(this,a,null,b);this._radius=this.options.radius},
projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStyle:function(){d.Circle.prototype._updateStyle.call(this);this.setRadius(this.options.radius)},setLatLng:function(a){return d.Circle.prototype.setLatLng.call(this,a),this._popup&&this._popup._isOpen&&this._popup.setLatLng(a),this},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius}});d.circleMarker=function(a,b){return new d.CircleMarker(a,
b)};d.Polyline.include(d.Path.CANVAS?{_containsPoint:function(a,b){var c,e,g,m,p,q,s,r=this.options.weight/2;d.Browser.touch&&(r+=10);c=0;for(m=this._parts.length;m>c;c++)for(s=this._parts[c],e=0,p=s.length,g=p-1;p>e;g=e++)if((b||0!==e)&&(q=d.LineUtil.pointToSegmentDistance(a,s[g],s[e]),r>=q))return!0;return!1}}:{});d.Polygon.include(d.Path.CANVAS?{_containsPoint:function(a){var b,c,e,g,m,p,q,s=!1;if(d.Polyline.prototype._containsPoint.call(this,a,!0))return!0;g=0;for(p=this._parts.length;p>g;g++)for(b=
this._parts[g],m=0,q=b.length,e=q-1;q>m;e=m++)c=b[m],e=b[e],c.y>a.y!=e.y>a.y&&a.x<(e.x-c.x)*(a.y-c.y)/(e.y-c.y)+c.x&&(s=!s);return s}}:{});d.Circle.include(d.Path.CANVAS?{_drawPath:function(){var a=this._point;this._ctx.beginPath();this._ctx.arc(a.x,a.y,this._radius,0,2*Math.PI,!1)},_containsPoint:function(a){var b=this.options.stroke?this.options.weight/2:0;return a.distanceTo(this._point)<=this._radius+b}}:{});d.CircleMarker.include(d.Path.CANVAS?{_updateStyle:function(){d.Path.prototype._updateStyle.call(this)}}:
{});d.GeoJSON=d.FeatureGroup.extend({initialize:function(a,b){d.setOptions(this,b);this._layers={};a&&this.addData(a)},addData:function(a){var b,c,e=d.Util.isArray(a)?a:a.features;if(e){a=0;for(b=e.length;b>a;a++)c=e[a],(c.geometries||c.geometry||c.features||c.coordinates)&&this.addData(e[a]);return this}e=this.options;if(!e.filter||e.filter(a))return b=d.GeoJSON.geometryToLayer(a,e.pointToLayer,e.coordsToLatLng,e),b.feature=d.GeoJSON.asFeature(a),b.defaultOptions=b.options,this.resetStyle(b),e.onEachFeature&&
e.onEachFeature(a,b),this.addLayer(b)},resetStyle:function(a){var b=this.options.style;b&&(d.Util.extend(a.options,a.defaultOptions),this._setLayerStyle(a,b))},setStyle:function(a){this.eachLayer(function(b){this._setLayerStyle(b,a)},this)},_setLayerStyle:function(a,b){"function"==typeof b&&(b=b(a.feature));a.setStyle&&a.setStyle(b)}});d.extend(d.GeoJSON,{geometryToLayer:function(a,b,c,e){var g,m,p,q="Feature"===a.type?a.geometry:a,s=q.coordinates,r=[];switch(c=c||this.coordsToLatLng,q.type){case "Point":return g=
c(s),b?b(a,g):new d.Marker(g);case "MultiPoint":m=0;for(p=s.length;p>m;m++)g=c(s[m]),r.push(b?b(a,g):new d.Marker(g));return new d.FeatureGroup(r);case "LineString":return m=this.coordsToLatLngs(s,0,c),new d.Polyline(m,e);case "Polygon":if(2===s.length&&!s[1].length)throw Error("Invalid GeoJSON object.");return m=this.coordsToLatLngs(s,1,c),new d.Polygon(m,e);case "MultiLineString":return m=this.coordsToLatLngs(s,1,c),new d.MultiPolyline(m,e);case "MultiPolygon":return m=this.coordsToLatLngs(s,2,
c),new d.MultiPolygon(m,e);case "GeometryCollection":m=0;for(p=q.geometries.length;p>m;m++)r.push(this.geometryToLayer({geometry:q.geometries[m],type:"Feature",properties:a.properties},b,c,e));return new d.FeatureGroup(r);default:throw Error("Invalid GeoJSON object.");}},coordsToLatLng:function(a){return new d.LatLng(a[1],a[0],a[2])},coordsToLatLngs:function(a,b,c){var d,e,g,p=[];e=0;for(g=a.length;g>e;e++)d=b?this.coordsToLatLngs(a[e],b-1,c):(c||this.coordsToLatLng)(a[e]),p.push(d);return p},latLngToCoords:function(a){var b=
[a.lng,a.lat];return a.alt!==c&&b.push(a.alt),b},latLngsToCoords:function(a){for(var b=[],c=0,e=a.length;e>c;c++)b.push(d.GeoJSON.latLngToCoords(a[c]));return b},getFeature:function(a,b){return a.feature?d.extend({},a.feature,{geometry:b}):d.GeoJSON.asFeature(b)},asFeature:function(a){return"Feature"===a.type?a:{type:"Feature",properties:{},geometry:a}}});var g={toGeoJSON:function(){return d.GeoJSON.getFeature(this,{type:"Point",coordinates:d.GeoJSON.latLngToCoords(this.getLatLng())})}};d.Marker.include(g);
d.Circle.include(g);d.CircleMarker.include(g);d.Polyline.include({toGeoJSON:function(){return d.GeoJSON.getFeature(this,{type:"LineString",coordinates:d.GeoJSON.latLngsToCoords(this.getLatLngs())})}});d.Polygon.include({toGeoJSON:function(){var a,b,c,e=[d.GeoJSON.latLngsToCoords(this.getLatLngs())];if(e[0].push(e[0][0]),this._holes)for(a=0,b=this._holes.length;b>a;a++)c=d.GeoJSON.latLngsToCoords(this._holes[a]),c.push(c[0]),e.push(c);return d.GeoJSON.getFeature(this,{type:"Polygon",coordinates:e})}});
(function(){function a(b){return function(){var a=[];return this.eachLayer(function(b){a.push(b.toGeoJSON().geometry.coordinates)}),d.GeoJSON.getFeature(this,{type:b,coordinates:a})}}d.MultiPolyline.include({toGeoJSON:a("MultiLineString")});d.MultiPolygon.include({toGeoJSON:a("MultiPolygon")});d.LayerGroup.include({toGeoJSON:function(){var b,c=this.feature&&this.feature.geometry,e=[];if(c&&"MultiPoint"===c.type)return a("MultiPoint").call(this);var g=c&&"GeometryCollection"===c.type;return this.eachLayer(function(a){a.toGeoJSON&&
(b=a.toGeoJSON(),e.push(g?b.geometry:d.GeoJSON.asFeature(b)))}),g?d.GeoJSON.getFeature(this,{geometries:e,type:"GeometryCollection"}):{type:"FeatureCollection",features:e}}})})();d.geoJson=function(a,b){return new d.GeoJSON(a,b)};d.DomEvent={addListener:function(a,b,c,e){var g,m,p,q=d.stamp(c),s="_leaflet_"+b+q;return a[s]?this:(g=function(b){return c.call(e||a,b||d.DomEvent._getEvent())},d.Browser.pointer&&0===b.indexOf("touch")?this.addPointerListener(a,b,g,q):(d.Browser.touch&&"dblclick"===b&&
this.addDoubleTapListener&&this.addDoubleTapListener(a,g,q),"addEventListener"in a?"mousewheel"===b?(a.addEventListener("DOMMouseScroll",g,!1),a.addEventListener(b,g,!1)):"mouseenter"===b||"mouseleave"===b?(m=g,p="mouseenter"===b?"mouseover":"mouseout",g=function(b){return d.DomEvent._checkMouse(a,b)?m(b):void 0},a.addEventListener(p,g,!1)):"click"===b&&d.Browser.android?(m=g,g=function(a){return d.DomEvent._filterClick(a,m)},a.addEventListener(b,g,!1)):a.addEventListener(b,g,!1):"attachEvent"in a&&
a.attachEvent("on"+b,g),a[s]=g,this))},removeListener:function(a,b,c){c=d.stamp(c);var e="_leaflet_"+b+c,g=a[e];return g?(d.Browser.pointer&&0===b.indexOf("touch")?this.removePointerListener(a,b,c):d.Browser.touch&&"dblclick"===b&&this.removeDoubleTapListener?this.removeDoubleTapListener(a,c):"removeEventListener"in a?"mousewheel"===b?(a.removeEventListener("DOMMouseScroll",g,!1),a.removeEventListener(b,g,!1)):"mouseenter"===b||"mouseleave"===b?a.removeEventListener("mouseenter"===b?"mouseover":"mouseout",
g,!1):a.removeEventListener(b,g,!1):"detachEvent"in a&&a.detachEvent("on"+b,g),a[e]=null,this):this},stopPropagation:function(a){return a.stopPropagation?a.stopPropagation():a.cancelBubble=!0,d.DomEvent._skipped(a),this},disableScrollPropagation:function(a){var b=d.DomEvent.stopPropagation;return d.DomEvent.on(a,"mousewheel",b).on(a,"MozMousePixelScroll",b)},disableClickPropagation:function(a){for(var b=d.DomEvent.stopPropagation,c=d.Draggable.START.length-1;0<=c;c--)d.DomEvent.on(a,d.Draggable.START[c],
b);return d.DomEvent.on(a,"click",d.DomEvent._fakeStop).on(a,"dblclick",b)},preventDefault:function(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this},stop:function(a){return d.DomEvent.preventDefault(a).stopPropagation(a)},getMousePosition:function(a,b){if(!b)return new d.Point(a.clientX,a.clientY);var c=b.getBoundingClientRect();return new d.Point(a.clientX-c.left-b.clientLeft,a.clientY-c.top-b.clientTop)},getWheelDelta:function(a){var b=0;return a.wheelDelta&&(b=a.wheelDelta/
120),a.detail&&(b=-a.detail/3),b},_skipEvents:{},_fakeStop:function(a){d.DomEvent._skipEvents[a.type]=!0},_skipped:function(a){var b=this._skipEvents[a.type];return this._skipEvents[a.type]=!1,b},_checkMouse:function(a,b){var c=b.relatedTarget;if(!c)return!0;try{for(;c&&c!==a;)c=c.parentNode}catch(d){return!1}return c!==a},_getEvent:function(){var b=a.event;if(!b)for(var c=arguments.callee.caller;c&&(b=c.arguments[0],!b||a.Event!==b.constructor);)c=c.caller;return b},_filterClick:function(a,b){var c=
a.timeStamp||a.originalEvent.timeStamp,e=d.DomEvent._lastClick&&c-d.DomEvent._lastClick;return e&&100<e&&1E3>e||a.target._simulatedClick&&!a._simulated?void d.DomEvent.stop(a):(d.DomEvent._lastClick=c,b(a))}};d.DomEvent.on=d.DomEvent.addListener;d.DomEvent.off=d.DomEvent.removeListener;d.Draggable=d.Class.extend({includes:d.Mixin.Events,statics:{START:d.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},
MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(a,b){this._element=a;this._dragStartTarget=b||a},enable:function(){if(!this._enabled){for(var a=d.Draggable.START.length-1;0<=a;a--)d.DomEvent.on(this._dragStartTarget,d.Draggable.START[a],this._onDown,this);this._enabled=!0}},disable:function(){if(this._enabled){for(var a=d.Draggable.START.length-1;0<=a;a--)d.DomEvent.off(this._dragStartTarget,d.Draggable.START[a],this._onDown,
this);this._moved=this._enabled=!1}},_onDown:function(a){if(this._moved=!1,!(a.shiftKey||1!==a.which&&1!==a.button&&!a.touches||(d.DomEvent.stopPropagation(a),d.Draggable._disabled||(d.DomUtil.disableImageDrag(),d.DomUtil.disableTextSelection(),this._moving)))){var c=a.touches?a.touches[0]:a;this._startPoint=new d.Point(c.clientX,c.clientY);this._startPos=this._newPos=d.DomUtil.getPosition(this._element);d.DomEvent.on(b,d.Draggable.MOVE[a.type],this._onMove,this).on(b,d.Draggable.END[a.type],this._onUp,
this)}},_onMove:function(a){if(a.touches&&1<a.touches.length)return void(this._moved=!0);var c=a.touches&&1===a.touches.length?a.touches[0]:a,c=(new d.Point(c.clientX,c.clientY)).subtract(this._startPoint);(c.x||c.y)&&(d.DomEvent.preventDefault(a),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=d.DomUtil.getPosition(this._element).subtract(c),d.DomUtil.addClass(b.body,"leaflet-dragging"),d.DomUtil.addClass(a.target||a.srcElement,"leaflet-drag-target")),this._newPos=this._startPos.add(c),
this._moving=!0,d.Util.cancelAnimFrame(this._animRequest),this._animRequest=d.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget))},_updatePosition:function(){this.fire("predrag");d.DomUtil.setPosition(this._element,this._newPos);this.fire("drag")},_onUp:function(a){d.DomUtil.removeClass(b.body,"leaflet-dragging");d.DomUtil.removeClass(a.target||a.srcElement,"leaflet-drag-target");for(var c in d.Draggable.MOVE)d.DomEvent.off(b,d.Draggable.MOVE[c],this._onMove).off(b,d.Draggable.END[c],
this._onUp);d.DomUtil.enableImageDrag();d.DomUtil.enableTextSelection();this._moved&&this._moving&&(d.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)}));this._moving=!1}});d.Handler=d.Class.extend({initialize:function(a){this._map=a},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}});d.Map.mergeOptions({dragging:!0,
inertia:!d.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,inertiaThreshold:d.Browser.touch?32:18,easeLinearity:0.25,worldCopyJump:!1});d.Map.Drag=d.Handler.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new d.Draggable(a._mapPane,a._container);this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this);a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),a.on("viewreset",this._onViewReset,
this),a.whenReady(this._onViewReset,this))}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var a=this._map;a._panAnim&&a._panAnim.stop();a.fire("movestart").fire("dragstart");a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var a=this._lastTime=+new Date,b=this._lastPos=this._draggable._newPos;this._positions.push(b);this._times.push(a);
200<a-this._times[0]&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var a=this._map.getSize()._divideBy(2);this._initialWorldOffset=this._map.latLngToLayerPoint([0,0]).subtract(a).x;this._worldWidth=this._map.project([0,180]).x},_onPreDrag:function(){var a=this._worldWidth,b=Math.round(a/2),c=this._initialWorldOffset,d=this._draggable._newPos.x,e=(d-b+c)%a+b-c,a=(d+b+c)%a-b-c,c=Math.abs(e+c)<Math.abs(a+c)?e:a;this._draggable._newPos.x=c},
_onDragEnd:function(a){var b=this._map,c=b.options,e=+new Date-this._lastTime,g=!c.inertia||e>c.inertiaThreshold||!this._positions[0];if(b.fire("dragend",a),g)b.fire("moveend");else{a=this._lastPos.subtract(this._positions[0]);var m=c.easeLinearity;a=a.multiplyBy(m/((this._lastTime+e-this._times[0])/1E3));g=a.distanceTo([0,0]);e=Math.min(c.inertiaMaxSpeed,g);a=a.multiplyBy(e/g);var p=e/(c.inertiaDeceleration*m),q=a.multiplyBy(-p/2).round();q.x&&q.y?(q=b._limitOffset(q,b.options.maxBounds),d.Util.requestAnimFrame(function(){b.panBy(q,
{duration:p,easeLinearity:m,noMoveStart:!0})})):b.fire("moveend")}}});d.Map.addInitHook("addHandler","dragging",d.Map.Drag);d.Map.mergeOptions({doubleClickZoom:!0});d.Map.DoubleClickZoom=d.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var b=this._map,c=b.getZoom()+(a.originalEvent.shiftKey?-1:1);"center"===b.options.doubleClickZoom?b.setZoom(c):b.setZoomAround(a.containerPoint,
c)}});d.Map.addInitHook("addHandler","doubleClickZoom",d.Map.DoubleClickZoom);d.Map.mergeOptions({scrollWheelZoom:!0});d.Map.ScrollWheelZoom=d.Handler.extend({addHooks:function(){d.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this);d.DomEvent.on(this._map._container,"MozMousePixelScroll",d.DomEvent.preventDefault);this._delta=0},removeHooks:function(){d.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll);d.DomEvent.off(this._map._container,"MozMousePixelScroll",
d.DomEvent.preventDefault)},_onWheelScroll:function(a){var b=d.DomEvent.getWheelDelta(a);this._delta+=b;this._lastMousePos=this._map.mouseEventToContainerPoint(a);this._startTime||(this._startTime=+new Date);b=Math.max(40-(+new Date-this._startTime),0);clearTimeout(this._timer);this._timer=setTimeout(d.bind(this._performZoom,this),b);d.DomEvent.preventDefault(a);d.DomEvent.stopPropagation(a)},_performZoom:function(){var a=this._map,b=this._delta,c=a.getZoom(),b=0<b?Math.ceil(b):Math.floor(b),b=Math.max(Math.min(b,
4),-4),b=a._limitZoom(c+b)-c;this._delta=0;this._startTime=null;b&&("center"===a.options.scrollWheelZoom?a.setZoom(c+b):a.setZoomAround(this._lastMousePos,c+b))}});d.Map.addInitHook("addHandler","scrollWheelZoom",d.Map.ScrollWheelZoom);d.extend(d.DomEvent,{_touchstart:d.Browser.msPointer?"MSPointerDown":d.Browser.pointer?"pointerdown":"touchstart",_touchend:d.Browser.msPointer?"MSPointerUp":d.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(a,c,e){function g(a){var b;if(d.Browser.pointer?
(w.push(a.pointerId),b=w.length):b=a.touches.length,!(1<b)){b=Date.now();var c=b-(m||b);p=a.touches?a.touches[0]:a;q=0<c&&s>=c;m=b}}function n(a){if(d.Browser.pointer){a=w.indexOf(a.pointerId);if(-1===a)return;w.splice(a,1)}if(q){if(d.Browser.pointer){var b={},e;for(e in p)a=p[e],b[e]="function"==typeof a?a.bind(p):a;p=b}p.type="dblclick";c(p);m=null}}var m,p,q=!1,s=250,r=this._touchstart,u=this._touchend,w=[];a["_leaflet_"+r+e]=g;a["_leaflet_"+u+e]=n;e=d.Browser.pointer?b.documentElement:a;return a.addEventListener(r,
g,!1),e.addEventListener(u,n,!1),d.Browser.pointer&&e.addEventListener(d.DomEvent.POINTER_CANCEL,n,!1),this},removeDoubleTapListener:function(a,c){return a.removeEventListener(this._touchstart,a["_leaflet_"+this._touchstart+c],!1),(d.Browser.pointer?b.documentElement:a).removeEventListener(this._touchend,a["_leaflet_"+this._touchend+c],!1),d.Browser.pointer&&b.documentElement.removeEventListener(d.DomEvent.POINTER_CANCEL,a["_leaflet_"+this._touchend+c],!1),this}});d.extend(d.DomEvent,{POINTER_DOWN:d.Browser.msPointer?
"MSPointerDown":"pointerdown",POINTER_MOVE:d.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:d.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:d.Browser.msPointer?"MSPointerCancel":"pointercancel",_pointers:[],_pointerDocumentListener:!1,addPointerListener:function(a,b,c,d){switch(b){case "touchstart":return this.addPointerListenerStart(a,b,c,d);case "touchend":return this.addPointerListenerEnd(a,b,c,d);case "touchmove":return this.addPointerListenerMove(a,b,c,d);default:throw"Unknown touch event type";
}},addPointerListenerStart:function(a,c,e,g){var n=this._pointers;c=function(a){d.DomEvent.preventDefault(a);for(var b=!1,c=0;c<n.length;c++)if(n[c].pointerId===a.pointerId){b=!0;break}b||n.push(a);a.touches=n.slice();a.changedTouches=[a];e(a)};(a["_leaflet_touchstart"+g]=c,a.addEventListener(this.POINTER_DOWN,c,!1),this._pointerDocumentListener)||(a=function(a){for(var b=0;b<n.length;b++)if(n[b].pointerId===a.pointerId){n.splice(b,1);break}},b.documentElement.addEventListener(this.POINTER_UP,a,!1),
b.documentElement.addEventListener(this.POINTER_CANCEL,a,!1),this._pointerDocumentListener=!0);return this},addPointerListenerMove:function(a,b,c,d){function e(a){if(a.pointerType!==a.MSPOINTER_TYPE_MOUSE&&"mouse"!==a.pointerType||0!==a.buttons){for(var b=0;b<g.length;b++)if(g[b].pointerId===a.pointerId){g[b]=a;break}a.touches=g.slice();a.changedTouches=[a];c(a)}}var g=this._pointers;return a["_leaflet_touchmove"+d]=e,a.addEventListener(this.POINTER_MOVE,e,!1),this},addPointerListenerEnd:function(a,
b,c,d){var e=this._pointers;b=function(a){for(var b=0;b<e.length;b++)if(e[b].pointerId===a.pointerId){e.splice(b,1);break}a.touches=e.slice();a.changedTouches=[a];c(a)};return a["_leaflet_touchend"+d]=b,a.addEventListener(this.POINTER_UP,b,!1),a.addEventListener(this.POINTER_CANCEL,b,!1),this},removePointerListener:function(a,b,c){c=a["_leaflet_"+b+c];switch(b){case "touchstart":a.removeEventListener(this.POINTER_DOWN,c,!1);break;case "touchmove":a.removeEventListener(this.POINTER_MOVE,c,!1);break;
case "touchend":a.removeEventListener(this.POINTER_UP,c,!1),a.removeEventListener(this.POINTER_CANCEL,c,!1)}return this}});d.Map.mergeOptions({touchZoom:d.Browser.touch&&!d.Browser.android23,bounceAtZoomLimits:!0});d.Map.TouchZoom=d.Handler.extend({addHooks:function(){d.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){d.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var c=this._map;if(a.touches&&2===
a.touches.length&&!c._animatingZoom&&!this._zooming){var e=c.mouseEventToLayerPoint(a.touches[0]),g=c.mouseEventToLayerPoint(a.touches[1]),n=c._getCenterLayerPoint();this._startCenter=e.add(g)._divideBy(2);this._startDist=e.distanceTo(g);this._moved=!1;this._zooming=!0;this._centerOffset=n.subtract(this._startCenter);c._panAnim&&c._panAnim.stop();d.DomEvent.on(b,"touchmove",this._onTouchMove,this).on(b,"touchend",this._onTouchEnd,this);d.DomEvent.preventDefault(a)}},_onTouchMove:function(a){var b=
this._map;if(a.touches&&2===a.touches.length&&this._zooming){var c=b.mouseEventToLayerPoint(a.touches[0]),e=b.mouseEventToLayerPoint(a.touches[1]);this._scale=c.distanceTo(e)/this._startDist;this._delta=c._add(e)._divideBy(2)._subtract(this._startCenter);1===this._scale||!b.options.bounceAtZoomLimits&&(b.getZoom()===b.getMinZoom()&&1>this._scale||b.getZoom()===b.getMaxZoom()&&1<this._scale)||(this._moved||(d.DomUtil.addClass(b._mapPane,"leaflet-touching"),b.fire("movestart").fire("zoomstart"),this._moved=
!0),d.Util.cancelAnimFrame(this._animRequest),this._animRequest=d.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),d.DomEvent.preventDefault(a))}},_updateOnMove:function(){var a=this._map,b=this._getScaleOrigin(),b=a.layerPointToLatLng(b),c=a.getScaleZoom(this._scale);a._animateZoom(b,c,this._startCenter,this._scale,this._delta)},_onTouchEnd:function(){if(!this._moved||!this._zooming)return void(this._zooming=!1);var a=this._map;this._zooming=!1;d.DomUtil.removeClass(a._mapPane,
"leaflet-touching");d.Util.cancelAnimFrame(this._animRequest);d.DomEvent.off(b,"touchmove",this._onTouchMove).off(b,"touchend",this._onTouchEnd);var c=this._getScaleOrigin(),e=a.layerPointToLatLng(c),g=a.getZoom(),n=a.getScaleZoom(this._scale)-g,n=0<n?Math.ceil(n):Math.floor(n),g=a._limitZoom(g+n),n=a.getZoomScale(g)/this._scale;a._animateZoom(e,g,c,n)},_getScaleOrigin:function(){var a=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(a)}});d.Map.addInitHook("addHandler",
"touchZoom",d.Map.TouchZoom);d.Map.mergeOptions({tap:!0,tapTolerance:15});d.Map.Tap=d.Handler.extend({addHooks:function(){d.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){d.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(a.touches){if(d.DomEvent.preventDefault(a),this._fireClick=!0,1<a.touches.length)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var c=a.touches[0];a=c.target;this._startPos=this._newPos=
new d.Point(c.clientX,c.clientY);a.tagName&&"a"===a.tagName.toLowerCase()&&d.DomUtil.addClass(a,"leaflet-active");this._holdTimeout=setTimeout(d.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",c))},this),1E3);d.DomEvent.on(b,"touchmove",this._onMove,this).on(b,"touchend",this._onUp,this)}},_onUp:function(a){if(clearTimeout(this._holdTimeout),d.DomEvent.off(b,"touchmove",this._onMove,this).off(b,"touchend",this._onUp,this),this._fireClick&&a&&
a.changedTouches){a=a.changedTouches[0];var c=a.target;c&&c.tagName&&"a"===c.tagName.toLowerCase()&&d.DomUtil.removeClass(c,"leaflet-active");this._isTapValid()&&this._simulateEvent("click",a)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(a){a=a.touches[0];this._newPos=new d.Point(a.clientX,a.clientY)},_simulateEvent:function(c,d){var e=b.createEvent("MouseEvents");e._simulated=!0;d.target._simulatedClick=!0;e.initMouseEvent(c,
!0,!0,a,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null);d.target.dispatchEvent(e)}});d.Browser.touch&&!d.Browser.pointer&&d.Map.addInitHook("addHandler","tap",d.Map.Tap);d.Map.mergeOptions({boxZoom:!0});d.Map.BoxZoom=d.Handler.extend({initialize:function(a){this._map=a;this._container=a._container;this._pane=a._panes.overlayPane;this._moved=!1},addHooks:function(){d.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){d.DomEvent.off(this._container,
"mousedown",this._onMouseDown);this._moved=!1},moved:function(){return this._moved},_onMouseDown:function(a){return this._moved=!1,!a.shiftKey||1!==a.which&&1!==a.button?!1:(d.DomUtil.disableTextSelection(),d.DomUtil.disableImageDrag(),this._startLayerPoint=this._map.mouseEventToLayerPoint(a),void d.DomEvent.on(b,"mousemove",this._onMouseMove,this).on(b,"mouseup",this._onMouseUp,this).on(b,"keydown",this._onKeyDown,this))},_onMouseMove:function(a){this._moved||(this._box=d.DomUtil.create("div","leaflet-zoom-box",
this._pane),d.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor="crosshair",this._map.fire("boxzoomstart"));var b=this._startLayerPoint,c=this._box,e=this._map.mouseEventToLayerPoint(a);a=e.subtract(b);b=new d.Point(Math.min(e.x,b.x),Math.min(e.y,b.y));d.DomUtil.setPosition(c,b);this._moved=!0;c.style.width=Math.max(0,Math.abs(a.x)-4)+"px";c.style.height=Math.max(0,Math.abs(a.y)-4)+"px"},_finish:function(){this._moved&&(this._pane.removeChild(this._box),this._container.style.cursor=
"");d.DomUtil.enableTextSelection();d.DomUtil.enableImageDrag();d.DomEvent.off(b,"mousemove",this._onMouseMove).off(b,"mouseup",this._onMouseUp).off(b,"keydown",this._onKeyDown)},_onMouseUp:function(a){this._finish();var b=this._map;a=b.mouseEventToLayerPoint(a);this._startLayerPoint.equals(a)||(a=new d.LatLngBounds(b.layerPointToLatLng(this._startLayerPoint),b.layerPointToLatLng(a)),b.fitBounds(a),b.fire("boxzoomend",{boxZoomBounds:a}))},_onKeyDown:function(a){27===a.keyCode&&this._finish()}});d.Map.addInitHook("addHandler",
"boxZoom",d.Map.BoxZoom);d.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1});d.Map.Keyboard=d.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,173]},initialize:function(a){this._map=a;this._setPanOffset(a.options.keyboardPanOffset);this._setZoomOffset(a.options.keyboardZoomOffset)},addHooks:function(){var a=this._map._container;-1===a.tabIndex&&(a.tabIndex="0");d.DomEvent.on(a,"focus",this._onFocus,this).on(a,"blur",
this._onBlur,this).on(a,"mousedown",this._onMouseDown,this);this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var a=this._map._container;d.DomEvent.off(a,"focus",this._onFocus,this).off(a,"blur",this._onBlur,this).off(a,"mousedown",this._onMouseDown,this);this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){if(!this._focused){var c=b.body,d=b.documentElement,e=c.scrollTop||d.scrollTop,
c=c.scrollLeft||d.scrollLeft;this._map._container.focus();a.scrollTo(c,e)}},_onFocus:function(){this._focused=!0;this._map.fire("focus")},_onBlur:function(){this._focused=!1;this._map.fire("blur")},_setPanOffset:function(a){var b,c,d=this._panKeys={},e=this.keyCodes;b=0;for(c=e.left.length;c>b;b++)d[e.left[b]]=[-1*a,0];b=0;for(c=e.right.length;c>b;b++)d[e.right[b]]=[a,0];b=0;for(c=e.down.length;c>b;b++)d[e.down[b]]=[0,a];b=0;for(c=e.up.length;c>b;b++)d[e.up[b]]=[0,-1*a]},_setZoomOffset:function(a){var b,
c,d=this._zoomKeys={},e=this.keyCodes;b=0;for(c=e.zoomIn.length;c>b;b++)d[e.zoomIn[b]]=a;b=0;for(c=e.zoomOut.length;c>b;b++)d[e.zoomOut[b]]=-a},_addHooks:function(){d.DomEvent.on(b,"keydown",this._onKeyDown,this)},_removeHooks:function(){d.DomEvent.off(b,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){var b=a.keyCode,c=this._map;if(b in this._panKeys){if(c._panAnim&&c._panAnim._inProgress)return;c.panBy(this._panKeys[b]);c.options.maxBounds&&c.panInsideBounds(c.options.maxBounds)}else{if(!(b in
this._zoomKeys))return;c.setZoom(c.getZoom()+this._zoomKeys[b])}d.DomEvent.stop(a)}});d.Map.addInitHook("addHandler","keyboard",d.Map.Keyboard);d.Handler.MarkerDrag=d.Handler.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new d.Draggable(a,a));this._draggable.on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this);this._draggable.enable();d.DomUtil.addClass(this._marker._icon,
"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off("dragstart",this._onDragStart,this).off("drag",this._onDrag,this).off("dragend",this._onDragEnd,this);this._draggable.disable();d.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var a=this._marker,b=a._shadow,c=d.DomUtil.getPosition(a._icon),
e=a._map.layerPointToLatLng(c);b&&d.DomUtil.setPosition(b,c);a._latlng=e;a.fire("move",{latlng:e}).fire("drag")},_onDragEnd:function(a){this._marker.fire("moveend").fire("dragend",a)}});d.Control=d.Class.extend({options:{position:"topright"},initialize:function(a){d.setOptions(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var b=this._map;return b&&b.removeControl(this),this.options.position=a,b&&b.addControl(this),this},getContainer:function(){return this._container},
addTo:function(a){this._map=a;var b=this._container=this.onAdd(a),c=this.getPosition();a=a._controlCorners[c];return d.DomUtil.addClass(b,"leaflet-control"),-1!==c.indexOf("bottom")?a.insertBefore(b,a.firstChild):a.appendChild(b),this},removeFrom:function(a){var b=this.getPosition();return a._controlCorners[b].removeChild(this._container),this._map=null,this.onRemove&&this.onRemove(a),this},_refocusOnMap:function(){this._map&&this._map.getContainer().focus()}});d.control=function(a){return new d.Control(a)};
d.Map.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.removeFrom(this),this},_initControlPos:function(){function a(f,g){b[f+g]=d.DomUtil.create("div",c+f+" "+c+g,e)}var b=this._controlCorners={},c="leaflet-",e=this._controlContainer=d.DomUtil.create("div",c+"control-container",this._container);a("top","left");a("top","right");a("bottom","left");a("bottom","right")},_clearControlPos:function(){this._container.removeChild(this._controlContainer)}});d.Control.Zoom=
d.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(a){var b=d.DomUtil.create("div","leaflet-control-zoom leaflet-bar");return this._map=a,this._zoomInButton=this._createButton(this.options.zoomInText,this.options.zoomInTitle,"leaflet-control-zoom-in",b,this._zoomIn,this),this._zoomOutButton=this._createButton(this.options.zoomOutText,this.options.zoomOutTitle,"leaflet-control-zoom-out",b,this._zoomOut,this),this._updateDisabled(),
a.on("zoomend zoomlevelschange",this._updateDisabled,this),b},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},_zoomIn:function(a){this._map.zoomIn(a.shiftKey?3:1)},_zoomOut:function(a){this._map.zoomOut(a.shiftKey?3:1)},_createButton:function(a,b,c,e,g,m){c=d.DomUtil.create("a",c,e);c.innerHTML=a;c.href="#";c.title=b;a=d.DomEvent.stopPropagation;return d.DomEvent.on(c,"click",a).on(c,"mousedown",a).on(c,"dblclick",a).on(c,"click",d.DomEvent.preventDefault).on(c,"click",
g,m).on(c,"click",this._refocusOnMap,m),c},_updateDisabled:function(){var a=this._map;d.DomUtil.removeClass(this._zoomInButton,"leaflet-disabled");d.DomUtil.removeClass(this._zoomOutButton,"leaflet-disabled");a._zoom===a.getMinZoom()&&d.DomUtil.addClass(this._zoomOutButton,"leaflet-disabled");a._zoom===a.getMaxZoom()&&d.DomUtil.addClass(this._zoomInButton,"leaflet-disabled")}});d.Map.mergeOptions({zoomControl:!0});d.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new d.Control.Zoom,
this.addControl(this.zoomControl))});d.control.zoom=function(a){return new d.Control.Zoom(a)};d.Control.Attribution=d.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(a){d.setOptions(this,a);this._attributions={}},onAdd:function(a){this._container=d.DomUtil.create("div","leaflet-control-attribution");d.DomEvent.disableClickPropagation(this._container);for(var b in a._layers)a._layers[b].getAttribution&&
this.addAttribution(a._layers[b].getAttribution());return a.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(a){a.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):void 0},removeAttribution:function(a){return a?
(this._attributions[a]&&(this._attributions[a]--,this._update()),this):void 0},_update:function(){if(this._map){var a=[],b;for(b in this._attributions)this._attributions[b]&&a.push(b);b=[];this.options.prefix&&b.push(this.options.prefix);a.length&&b.push(a.join(", "));this._container.innerHTML=b.join(" | ")}},_onLayerAdd:function(a){a.layer.getAttribution&&this.addAttribution(a.layer.getAttribution())},_onLayerRemove:function(a){a.layer.getAttribution&&this.removeAttribution(a.layer.getAttribution())}});
d.Map.mergeOptions({attributionControl:!0});d.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new d.Control.Attribution).addTo(this))});d.control.attribution=function(a){return new d.Control.Attribution(a)};d.Control.Scale=d.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(a){this._map=a;var b=d.DomUtil.create("div","leaflet-control-scale"),c=this.options;return this._addScales(c,"leaflet-control-scale",
b),a.on(c.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),b},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,b,c){a.metric&&(this._mScale=d.DomUtil.create("div",b+"-line",c));a.imperial&&(this._iScale=d.DomUtil.create("div",b+"-line",c))},_update:function(){var a=this._map.getBounds(),b=a.getCenter().lat,a=6378137*Math.PI*Math.cos(b*Math.PI/180)*(a.getNorthEast().lng-a.getSouthWest().lng)/180,b=this._map.getSize(),
c=this.options,d=0;0<b.x&&(d=c.maxWidth/b.x*a);this._updateScales(c,d)},_updateScales:function(a,b){a.metric&&b&&this._updateMetric(b);a.imperial&&b&&this._updateImperial(b)},_updateMetric:function(a){var b=this._getRoundNum(a);this._mScale.style.width=this._getScaleWidth(b/a)+"px";this._mScale.innerHTML=1E3>b?b+" m":b/1E3+" km"},_updateImperial:function(a){var b,c,d;a*=3.2808399;var e=this._iScale;5280<a?(b=a/5280,c=this._getRoundNum(b),e.style.width=this._getScaleWidth(c/b)+"px",e.innerHTML=c+" mi"):
(d=this._getRoundNum(a),e.style.width=this._getScaleWidth(d/a)+"px",e.innerHTML=d+" ft")},_getScaleWidth:function(a){return Math.round(this.options.maxWidth*a)-10},_getRoundNum:function(a){var b=Math.pow(10,(Math.floor(a)+"").length-1);a/=b;return a=10<=a?10:5<=a?5:3<=a?3:2<=a?2:1,b*a}});d.control.scale=function(a){return new d.Control.Scale(a)};d.Control.Layers=d.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(a,b,c){d.setOptions(this,c);this._layers=
{};this._lastZIndex=0;this._handlingClick=!1;for(var e in a)this._addLayer(a[e],e);for(e in b)this._addLayer(b[e],e,!0)},onAdd:function(a){return this._initLayout(),this._update(),a.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this),this._container},onRemove:function(a){a.off("layeradd",this._onLayerChange).off("layerremove",this._onLayerChange)},addBaseLayer:function(a,b){return this._addLayer(a,b),this._update(),this},addOverlay:function(a,b){return this._addLayer(a,
b,!0),this._update(),this},removeLayer:function(a){a=d.stamp(a);return delete this._layers[a],this._update(),this},_initLayout:function(){var a=this._container=d.DomUtil.create("div","leaflet-control-layers");a.setAttribute("aria-haspopup",!0);d.Browser.touch?d.DomEvent.on(a,"click",d.DomEvent.stopPropagation):d.DomEvent.disableClickPropagation(a).disableScrollPropagation(a);var b=this._form=d.DomUtil.create("form","leaflet-control-layers-list");if(this.options.collapsed){d.Browser.android||d.DomEvent.on(a,
"mouseover",this._expand,this).on(a,"mouseout",this._collapse,this);var c=this._layersLink=d.DomUtil.create("a","leaflet-control-layers-toggle",a);c.href="#";c.title="Layers";d.Browser.touch?d.DomEvent.on(c,"click",d.DomEvent.stop).on(c,"click",this._expand,this):d.DomEvent.on(c,"focus",this._expand,this);d.DomEvent.on(b,"click",function(){setTimeout(d.bind(this._onInputClick,this),0)},this);this._map.on("click",this._collapse,this)}else this._expand();this._baseLayersList=d.DomUtil.create("div",
"leaflet-control-layers-base",b);this._separator=d.DomUtil.create("div","leaflet-control-layers-separator",b);this._overlaysList=d.DomUtil.create("div","leaflet-control-layers-overlays",b);a.appendChild(b)},_addLayer:function(a,b,c){var e=d.stamp(a);this._layers[e]={layer:a,name:b,overlay:c};this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="";this._overlaysList.innerHTML="";var a,b,c=!1,
d=!1;for(a in this._layers)b=this._layers[a],this._addItem(b),d=d||b.overlay,c=c||!b.overlay;this._separator.style.display=d&&c?"":"none"}},_onLayerChange:function(a){var b=this._layers[d.stamp(a.layer)];b&&(this._handlingClick||this._update(),(a=b.overlay?"layeradd"===a.type?"overlayadd":"overlayremove":"layeradd"===a.type?"baselayerchange":null)&&this._map.fire(a,b))},_createRadioElement:function(a,c){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"';c&&(d+=' checked="checked"');
var d=d+"/>",e=b.createElement("div");return e.innerHTML=d,e.firstChild},_addItem:function(a){var c,e=b.createElement("label"),g=this._map.hasLayer(a.layer);a.overlay?(c=b.createElement("input"),c.type="checkbox",c.className="leaflet-control-layers-selector",c.defaultChecked=g):c=this._createRadioElement("leaflet-base-layers",g);c.layerId=d.stamp(a.layer);d.DomEvent.on(c,"click",this._onInputClick,this);g=b.createElement("span");g.innerHTML=" "+a.name;e.appendChild(c);e.appendChild(g);return(a.overlay?
this._overlaysList:this._baseLayersList).appendChild(e),e},_onInputClick:function(){var a,b,c,d=this._form.getElementsByTagName("input"),e=d.length;this._handlingClick=!0;for(a=0;e>a;a++)b=d[a],c=this._layers[b.layerId],b.checked&&!this._map.hasLayer(c.layer)?this._map.addLayer(c.layer):!b.checked&&this._map.hasLayer(c.layer)&&this._map.removeLayer(c.layer);this._handlingClick=!1;this._refocusOnMap()},_expand:function(){d.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=
this._container.className.replace(" leaflet-control-layers-expanded","")}});d.control.layers=function(a,b,c){return new d.Control.Layers(a,b,c)};d.PosAnimation=d.Class.extend({includes:d.Mixin.Events,run:function(a,b,c,e){this.stop();this._el=a;this._inProgress=!0;this._newPos=b;this.fire("start");a.style[d.DomUtil.TRANSITION]="all "+(c||0.25)+"s cubic-bezier(0,0,"+(e||0.5)+",1)";d.DomEvent.on(a,d.DomUtil.TRANSITION_END,this._onTransitionEnd,this);d.DomUtil.setPosition(a,b);d.Util.falseFn(a.offsetWidth);
this._stepTimer=setInterval(d.bind(this._onStep,this),50)},stop:function(){this._inProgress&&(d.DomUtil.setPosition(this._el,this._getPos()),this._onTransitionEnd(),d.Util.falseFn(this._el.offsetWidth))},_onStep:function(){var a=this._getPos();return a?(this._el._leaflet_pos=a,void this.fire("step")):void this._onTransitionEnd()},_transformRe:/([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,_getPos:function(){var b,c,e=a.getComputedStyle(this._el);if(d.Browser.any3d){if(c=e[d.DomUtil.TRANSFORM].match(this._transformRe),
!c)return;b=parseFloat(c[1]);c=parseFloat(c[2])}else b=parseFloat(e.left),c=parseFloat(e.top);return new d.Point(b,c,!0)},_onTransitionEnd:function(){d.DomEvent.off(this._el,d.DomUtil.TRANSITION_END,this._onTransitionEnd,this);this._inProgress&&(this._inProgress=!1,this._el.style[d.DomUtil.TRANSITION]="",this._el._leaflet_pos=this._newPos,clearInterval(this._stepTimer),this.fire("step").fire("end"))}});d.Map.include({setView:function(a,b,e){if(b=b===c?this._zoom:this._limitZoom(b),a=this._limitCenter(d.latLng(a),
b,this.options.maxBounds),e=e||{},this._panAnim&&this._panAnim.stop(),this._loaded&&!e.reset&&!0!==e)if(e.animate!==c&&(e.zoom=d.extend({animate:e.animate},e.zoom),e.pan=d.extend({animate:e.animate},e.pan)),this._zoom!==b?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,b,e.zoom):this._tryAnimatedPan(a,e.pan))return clearTimeout(this._sizeTimer),this;return this._resetView(a,b),this},panBy:function(a,b){if(a=d.point(a).round(),b=b||{},!a.x&&!a.y)return this;if(this._panAnim||(this._panAnim=new d.PosAnimation,
this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),b.noMoveStart||this.fire("movestart"),!1!==b.animate){d.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(a);this._panAnim.run(this._mapPane,c,b.duration||0.25,b.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){d.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim");
this.fire("moveend")},_tryAnimatedPan:function(a,b){var c=this._getCenterOffset(a)._floor();return!0===(b&&b.animate)||this.getSize().contains(c)?(this.panBy(c,b),!0):!1}});d.PosAnimation=d.DomUtil.TRANSITION?d.PosAnimation:d.PosAnimation.extend({run:function(a,b,c,e){this.stop();this._el=a;this._inProgress=!0;this._duration=c||0.25;this._easeOutPower=1/Math.max(e||0.5,0.2);this._startPos=d.DomUtil.getPosition(a);this._offset=b.subtract(this._startPos);this._startTime=+new Date;this.fire("start");
this._animate()},stop:function(){this._inProgress&&(this._step(),this._complete())},_animate:function(){this._animId=d.Util.requestAnimFrame(this._animate,this);this._step()},_step:function(){var a=+new Date-this._startTime,b=1E3*this._duration;b>a?this._runFrame(this._easeOut(a/b)):(this._runFrame(1),this._complete())},_runFrame:function(a){a=this._startPos.add(this._offset.multiplyBy(a));d.DomUtil.setPosition(this._el,a);this.fire("step")},_complete:function(){d.Util.cancelAnimFrame(this._animId);
this._inProgress=!1;this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}});d.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4});d.DomUtil.TRANSITION&&d.Map.addInitHook(function(){(this._zoomAnimated=this.options.zoomAnimation&&d.DomUtil.TRANSITION&&d.Browser.any3d&&!d.Browser.android23&&!d.Browser.mobileOpera)&&d.DomEvent.on(this._mapPane,d.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)});d.Map.include(d.DomUtil.TRANSITION?{_catchTransitionEnd:function(a){this._animatingZoom&&
0<=a.propertyName.indexOf("transform")&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,b,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||!1===c.animate||this._nothingToAnimate()||Math.abs(b-this._zoom)>this.options.zoomAnimationThreshold)return!1;var d=this.getZoomScale(b),e=this._getCenterOffset(a)._divideBy(1-1/d),g=this._getCenterLayerPoint()._add(e);return!0===
c.animate||this.getSize().contains(e)?(this.fire("movestart").fire("zoomstart"),this._animateZoom(a,b,g,d,null,!0),!0):!1},_animateZoom:function(a,b,c,e,g,m){this._animatingZoom=!0;d.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim");this._animateToCenter=a;this._animateToZoom=b;d.Draggable&&(d.Draggable._disabled=!0);this.fire("zoomanim",{center:a,zoom:b,origin:c,scale:e,delta:g,backwards:m})},_onZoomTransitionEnd:function(){this._animatingZoom=!1;d.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim");
this._resetView(this._animateToCenter,this._animateToZoom,!0,!0);d.Draggable&&(d.Draggable._disabled=!1)}}:{});d.TileLayer.include({_animateZoom:function(a){this._animating||(this._animating=!0,this._prepareBgBuffer());var b=this._bgBuffer,c=d.DomUtil.TRANSFORM,e=a.delta?d.DomUtil.getTranslateString(a.delta):b.style[c],g=d.DomUtil.getScaleString(a.scale,a.origin);b.style[c]=a.backwards?g+" "+e:e+" "+g},_endZoomAnim:function(){var a=this._tileContainer,b=this._bgBuffer;a.style.visibility="";a.parentNode.appendChild(a);
d.Util.falseFn(b.offsetWidth);this._animating=!1},_clearBgBuffer:function(){var a=this._map;!a||a._animatingZoom||a.touchZoom._zooming||(this._bgBuffer.innerHTML="",this._bgBuffer.style[d.DomUtil.TRANSFORM]="")},_prepareBgBuffer:function(){var a=this._tileContainer,b=this._bgBuffer,c=this._getLoadedTilesPercentage(b),e=this._getLoadedTilesPercentage(a);return b&&0.5<c&&0.5>e?(a.style.visibility="hidden",void this._stopLoadingImages(a)):(b.style.visibility="hidden",b.style[d.DomUtil.TRANSFORM]="",
this._tileContainer=b,b=this._bgBuffer=a,this._stopLoadingImages(b),void clearTimeout(this._clearBgBufferTimer))},_getLoadedTilesPercentage:function(a){var b,c=a.getElementsByTagName("img"),d=0;a=0;for(b=c.length;b>a;a++)c[a].complete&&d++;return d/b},_stopLoadingImages:function(a){var b,c,e=Array.prototype.slice.call(a.getElementsByTagName("img"));a=0;for(b=e.length;b>a;a++)c=e[a],c.complete||(c.onload=d.Util.falseFn,c.onerror=d.Util.falseFn,c.src=d.Util.emptyImageUrl,c.parentNode.removeChild(c))}});
d.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:1/0,timeout:1E4,maximumAge:0,enableHighAccuracy:!1},locate:function(a){if(a=this._locateOptions=d.extend(this._defaultLocateOptions,a),!navigator.geolocation)return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var b=d.bind(this._handleGeolocationResponse,this),c=d.bind(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(b,c,a):navigator.geolocation.getCurrentPosition(b,
c,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){var b=a.code;a=a.message||(1===b?"permission denied":2===b?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld();this.fire("locationerror",{code:b,message:"Geolocation error: "+a+"."})},_handleGeolocationResponse:function(a){var b=a.coords.latitude,
c=a.coords.longitude,e=new d.LatLng(b,c),g=180*a.coords.accuracy/40075017,m=g/Math.cos(d.LatLng.DEG_TO_RAD*b),b=d.latLngBounds([b-g,c-m],[b+g,c+m]),c=this._locateOptions;c.setView&&(c=Math.min(this.getBoundsZoom(b),c.maxZoom),this.setView(e,c));var e={latlng:e,bounds:b,timestamp:a.timestamp},p;for(p in a.coords)"number"==typeof a.coords[p]&&(e[p]=a.coords[p]);this.fire("locationfound",e)}})}(window,document);
function InputStream(a){this.buffer=a;this.offset=0;this.byteLength=a.length;this.convBuf=new ArrayBuffer(8);this.convUint8=new Uint8Array(this.convBuf);this.convUint16=new Uint16Array(this.convBuf);this.convInt32=new Int32Array(this.convBuf);this.convUint32=new Uint32Array(this.convBuf);this.convFloat32=new Float32Array(this.convBuf);this.convFloat64=new Float64Array(this.convBuf)}InputStream.prototype.seek=function(a){this.offset=a};
InputStream.prototype.getBytes=function(a){var b=new Uint8Array(this.buffer.buffer,this.offset,a);this.offset+=a;return b};InputStream.prototype.getVarints=function(){var a,b=0,c=0;do a=this.buffer[this.offset++],b|=(a&127)<<c,c+=7;while(a&128);return b};InputStream.prototype.getUint8=function(){return this.buffer[this.offset++]};InputStream.prototype.getUint16=function(){this.convUint8[0]=this.buffer[this.offset++];this.convUint8[1]=this.buffer[this.offset++];return this.convUint16[0]};
InputStream.prototype.getInt16=function(){var a=this.getUint16();32767<a&&(a|=4294901760);return a};InputStream.prototype.getInt32=function(){var a=this.buffer,b=this.convUint8,c=this.offset;b[0]=a[c];b[1]=a[c+1];b[2]=a[c+2];b[3]=a[c+3];this.offset+=4;return this.convInt32[0]};InputStream.prototype.getUint32=function(){var a=this.buffer,b=this.convUint8,c=this.offset;b[0]=a[c];b[1]=a[c+1];b[2]=a[c+2];b[3]=a[c+3];this.offset+=4;return this.convUint32[0]};
InputStream.prototype.getFloat32=function(){var a=this.buffer,b=this.convUint8,c=this.offset;b[0]=a[c];b[1]=a[c+1];b[2]=a[c+2];b[3]=a[c+3];this.offset+=4;return this.convFloat32[0]};InputStream.prototype.getFloat64=function(){for(var a=this.buffer,b=this.convUint8,c=this.offset,e=0;8>e;e++)b[e]=a[c+e];this.offset+=8;return this.convFloat64[0]};InputStream.prototype.getString=function(a){for(var b=this.buffer,c="",e=this.offset,d=this.offset+a;e<d;e++)c+=String.fromCharCode(b[e]);this.offset+=a;return decodeURIComponent(escape(c))};
InputStream.prototype.reset=function(a){this.buffer=a;this.offset=0;this.byteLength=a.length};
VBUtils={deduceUVRepetition:function(a){for(var b in a.vblayout)if(0==b.indexOf("uv"))for(var c=a.vbstride,e=a.vb,d=a.vb.length/c,g=0,f=a.vblayout[b].offset;g<d;g++,f+=c){var h=e[f],k=e[f+1];if(2<h||0>h||2<k||0>k){a.vblayout[b].isPattern=!0;break}}},computeBounds3D:function(a){var b=Infinity,c=Infinity,e=Infinity,d=-Infinity,g=-Infinity,f=-Infinity,h,k,l,n,m,p=a.vbstride,q=a.vblayout.position.offset,s=a.vb,r=a.vb.length/p;h=0;for(k=q;h<r;h++,k+=p)l=s[k],n=s[k+1],m=s[k+2],b>l&&(b=l),c>n&&(c=n),e>m&&
(e=m),d<l&&(d=l),g<n&&(g=n),f<m&&(f=m);h=a.boundingBox=new THREE.Box3;h.min.set(b,c,e);h.max.set(d,g,f);b=0.5*(b+d);c=0.5*(c+g);e=0.5*(e+f);a=a.boundingSphere=new THREE.Sphere;a.center.set(b,c,e);h=f=0;for(k=q;h<r;h++,k+=p)l=s[k],n=s[k+1],m=s[k+2],q=l-b,n-=c,m-=e,m=q*q+n*n+m*m,m>f&&(f=m);a.radius=Math.sqrt(f)}};
var VBB_LINE_SEGMENT=16,VBB_ARC_CIRCULAR=32,VBB_ARC_ELLIPTICAL=48,VBB_TEX_QUAD=64,VBB_ONE_TRIANGLE=80,VBB_INSTANCED_FLAG=0,VBB_SEG_START_RIGHT=1,VBB_SEG_START_LEFT=2,VBB_SEG_END_RIGHT=3,VBB_SEG_END_LEFT=4,TAU=2*Math.PI,VBB_COLOR_OFFSET=6,VBB_DBID_OFFSET=7,VBB_FLAGS_OFFSET=8;
function VertexBufferBuilder(a){this.useInstancing=a;this.stride=9;this.vb=new ArrayBuffer(4*this.stride*(this.useInstancing?16384:65536));this.vbf=new Float32Array(this.vb);this.vbi=new Int32Array(this.vb);this.vcount=0;this.ib=this.useInstancing?null:new Uint16Array(65536);this.icount=0;this.minx=this.miny=Infinity;this.maxx=this.maxy=-Infinity;this.dbIds={};this.numTriangleGeoms=this.numCirculars=this.numEllipticals=0}
VertexBufferBuilder.prototype.expandStride=function(){var a=this.stride;if(!(12<=a)){for(var b=this.stride+3,c=new ArrayBuffer(this.vb.byteLength/a*b),e=new Uint8Array(this.vb),d=new Uint8Array(c),g=0,f=this.vcount;g<f;g++)for(var h=g*a*4,k=g*b*4,l=0;l<4*a;l++)d[k+l]=e[h+l];this.vb=c;this.vbf=new Float32Array(c);this.vbi=new Int32Array(c);this.stride=b}};
VertexBufferBuilder.prototype.addToBounds=function(a,b){a<this.minx&&(this.minx=a);a>this.maxx&&(this.maxx=a);b<this.miny&&(this.miny=b);b>this.maxy&&(this.maxy=b)};VertexBufferBuilder.prototype.setVertexFlag=function(a,b,c,e){this.vbi[a*this.stride+VBB_FLAGS_OFFSET]=e|c|b<<16};
VertexBufferBuilder.prototype.addVertexTriangleGeom=function(a,b,c,e,d,g,f,h){for(var k=this.vcount,l=this.useInstancing?1:4,n=0;n<l;n++){var m=(k+n)*this.stride,p=this.vbf;p[m]=a;p[m+1]=b;p[m+2]=c;p[m+3]=e;p[m+4]=d;p[m+5]=g;this.vbi[m+VBB_COLOR_OFFSET]=f;this.vbi[m+VBB_DBID_OFFSET]=h;this.vcount++;this.dbIds[h]=1}return k};
VertexBufferBuilder.prototype.addVertexLine=function(a,b,c,e,d,g,f){for(var h=this.vcount,k=this.useInstancing?1:4,l=0;l<k;l++){var n=(h+l)*this.stride,m=this.vbf;m[n]=a;m[n+1]=b;m[n+2]=c;m[n+3]=e;m[n+4]=d;m[n+5]=0;this.vbi[n+VBB_COLOR_OFFSET]=g;this.vbi[n+VBB_DBID_OFFSET]=f;this.dbIds[f]=1;this.vcount++}return h};
VertexBufferBuilder.prototype.addVertexArc=function(a,b,c,e,d,g,f,h,k,l){for(var n=this.vcount,m=this.useInstancing?1:4,p=0;p<m;p++){var q=(n+p)*this.stride,s=this.vbf;s[q]=a;s[q+1]=b;s[q+2]=c;s[q+3]=e;s[q+4]=h;s[q+5]=d;this.vbi[q+VBB_COLOR_OFFSET]=k;this.vbi[q+VBB_DBID_OFFSET]=l;d!=g&&(s[q+9]=g,s[q+10]=f);this.dbIds[l]=1;this.vcount++}return n};
VertexBufferBuilder.prototype.addVertex=function(a,b,c,e,d,g,f,h){if(!this.useInstancing){var k=this.vcount,l=k*this.stride,n=this.vbf;n[l]=a;n[l+1]=b;n[l+2]=c;n[l+3]=e;n[l+4]=d;n[l+5]=0;this.vbi[l+VBB_COLOR_OFFSET]=g;this.vbi[l+VBB_DBID_OFFSET]=f;this.setVertexFlag(k,h,0,0);this.vcount++;this.dbIds[f]=1;return k}};VertexBufferBuilder.prototype.addVertexPolytriangle=function(a,b,c,e,d,g,f,h){this.useInstancing||(this.addVertex(a,b,c,e,d,g,f,h),this.addToBounds(a,b))};
VertexBufferBuilder.prototype.setVertexColor=function(a,b){this.useInstancing||(this.vbi[a*this.stride+VBB_COLOR_OFFSET]=b)};VertexBufferBuilder.prototype.addTriangle=function(a,b,c){if(!this.useInstancing){var e=this.ib,d=this.icount;if(d+3>=e.length){for(var g=new Uint16Array(2*e.length),f=0;f<d;f++)g[f]=e[f];this.ib=e=g}e[d]=a;e[d+1]=b;e[d+2]=c;this.icount+=3}};
VertexBufferBuilder.prototype.finalizeQuad=function(a,b,c){this.useInstancing?this.setVertexFlag(a,c,VBB_INSTANCED_FLAG,b):(this.addTriangle(a,a+1,a+2),this.addTriangle(a,a+2,a+3),this.setVertexFlag(a,c,VBB_SEG_START_RIGHT,b),this.setVertexFlag(a+1,c,VBB_SEG_END_RIGHT,b),this.setVertexFlag(a+2,c,VBB_SEG_END_LEFT,b),this.setVertexFlag(a+3,c,VBB_SEG_START_LEFT,b))};
VertexBufferBuilder.prototype.addSegment=function(a,b,c,e,d,g,f,h){var k=c-a,l=e-b,n=0;if(k||l)n=Math.atan2(l,k);k=Math.sqrt(k*k+l*l);d=this.addVertexLine(a,b,n,k,0.5*d,g,f);this.finalizeQuad(d,VBB_LINE_SEGMENT,h);this.addToBounds(a,b);this.addToBounds(c,e)};
VertexBufferBuilder.prototype.addTriangleGeom=function(a,b,c,e,d,g,f,h,k){this.numTriangleGeoms++;f=this.addVertexTriangleGeom(a,b,c,e,d,g,f,h,k);this.finalizeQuad(f,VBB_ONE_TRIANGLE,k);this.addToBounds(a,b);this.addToBounds(c,e);this.addToBounds(d,g)};
VertexBufferBuilder.prototype.addCircularArc=function(a,b,c,e,d,g,f,h,k){this.numCirculars++;var l=Math.abs(c-e);if(1E-4<l&&1E-4<Math.abs(l-TAU)){var l=a+d*Math.cos(c),n=b+d*Math.sin(c);this.addSegment(l,n,l,n,g,f,h,k);l=a+d*Math.cos(e);n=b+d*Math.sin(e);this.addSegment(l,n,l,n,g,f,h,k)}else this.addToBounds(a-d,b-d),this.addToBounds(a+d,b+d);a=this.addVertexArc(a,b,c,e,d,d,0,0.5*g,f,h);this.finalizeQuad(a,VBB_ARC_CIRCULAR,k)};
VertexBufferBuilder.prototype.addEllipticalArc=function(a,b,c,e,d,g,f,h,k,l,n){this.expandStride();this.numEllipticals++;var m=Math.abs(c-e);if(1E-4<Math.abs(m-TAU)){var m=a+d*Math.cos(c),p=b+g*Math.sin(c);this.addSegment(m,p,m,p,h,k,l,n);m=a+d*Math.cos(e);p=b+g*Math.sin(e);this.addSegment(m,p,m,p,h,k,l,n)}else this.addToBounds(a-d,b-g),this.addToBounds(a+d,b+g);a=this.addVertexArc(a,b,c,e,d,g,f,0.5*h,k,l);this.finalizeQuad(a,VBB_ARC_ELLIPTICAL,n)};
VertexBufferBuilder.prototype.addTexturedQuad=function(a,b,c,e,d,g){var f=0.5*e;d=this.addVertexLine(a,b+f,0,c,f,4278255615,d);this.finalizeQuad(d,VBB_TEX_QUAD,g);this.addToBounds(a,b);this.addToBounds(a+c,b+e)};VertexBufferBuilder.prototype.isFull=function(a){a||(a=3);return this.useInstancing?32767<4*this.vcount+a:32767<this.vcount+a};
VertexBufferBuilder.prototype.toMesh=function(){var a={};a.vb=new Float32Array(this.vb.slice(0,this.vcount*this.stride*4));a.vbstride=this.stride;var b=this.useInstancing?1:0;a.vblayout={fields1:{offset:0,itemSize:3,bytesPerItem:4,divisor:b},fields2:{offset:3,itemSize:3,bytesPerItem:4,divisor:b},color4b:{offset:VBB_COLOR_OFFSET,itemSize:4,bytesPerItem:1,divisor:b,normalize:!0},dbId4b:{offset:VBB_DBID_OFFSET,itemSize:4,bytesPerItem:1,divisor:b,normalize:!0},flags4b:{offset:VBB_FLAGS_OFFSET,itemSize:4,
bytesPerItem:1,divisor:b,normalize:!1}};9<this.stride&&(a.vblayout.extraParams={offset:9,itemSize:3,bytesPerItem:4,divisor:b,normalize:!1});if(this.useInstancing){for(var c in a.vblayout)a.vblayout[c].divisor=1;a.numInstances=this.vcount;b=new Int32Array(4);b[0]=VBB_SEG_START_RIGHT;b[1]=VBB_SEG_END_RIGHT;b[2]=VBB_SEG_END_LEFT;b[3]=VBB_SEG_START_LEFT;a.vblayout.instFlags4b={offset:0,itemSize:4,bytesPerItem:1,normalize:!1,divisor:0};a.vblayout.instFlags4b.array=b.buffer;b=a.indices=new Uint16Array(6);
b[0]=0;b[1]=1;b[2]=2;b[3]=0;b[4]=2;b[5]=3}else a.indices=new Uint16Array(this.ib.buffer.slice(0,2*this.icount));a.dbIds=this.dbIds;b=a.boundingBox=new THREE.Box3;c=Math.max(this.maxx-this.minx,this.maxy-this.miny);b.min.set(this.minx,this.miny,0.001*-c);b.max.set(this.maxx,this.maxy,0.001*c);b=a.boundingSphere=new THREE.Sphere;b.center.copy(a.boundingBox.center());b.radius=0.5*a.boundingBox.size().length();return a};
function readOpenCTM_RAW(a,b){var c=a.getString(4);if("INDX"!=c)return null;for(var e=b.vertexCount,d=b.triangleCount,g=b.indices=new Uint16Array(3*d),c=0,d=3*d;c<d;c++)g[c]=a.getInt32();c=a.getString(4);if("VERT"!=c)return null;for(var g=b.vbstride,d=b.vb,c=0,f=b.vblayout.position.offset;c<e;c++,f+=g)d[f]=a.getFloat32(),d[f+1]=a.getFloat32(),d[f+2]=a.getFloat32();if(b.flags&1){c=a.getString(4);if("NORM"!=c)return null;c=0;for(f=b.vblayout.normal.offset;c<e;c++,f+=g)d[f]=a.getFloat32(),d[f+1]=a.getFloat32(),
d[f+2]=a.getFloat32()}for(var h=0;h<b.texMapCount;h++){c=a.getString(4);if("TEXC"!=c)return null;c={name:a.getString(a.getInt32()),file:a.getString(a.getInt32())};b.uvs.push(c);f="uv";h&&(f+=(h+1).toString());c=0;for(f=b.vblayout[f].offset;c<e;c++,f+=g)d[f]=a.getFloat32(),d[f+1]=a.getFloat32()}for(h=0;h<b.attribMapCount;h++){c=a.getString(4);if("ATTR"!=c)return null;c={name:a.getString(a.getInt32())};if(-1!=c.name.indexOf("Color"))for(c=0,f=b.vblayout.color.offset;c<e;c++,f+=g)d[f]=a.getFloat32(),
d[f+1]=a.getFloat32(),d[f+2]=a.getFloat32(),a.getFloat32();else b.attrs.push(c),a.getBytes(16*e)}}
var readOpenCTM=function(a){if("OCTM"!=a.getString(4)||5!=a.getInt32())return null;var b=a.getString(3);a.getUint8();var c={stream:null,vertices:null,indices:null,normals:null,colors:null,uvs:[],attrs:[]};c.vertexCount=a.getInt32();c.triangleCount=a.getInt32();c.texMapCount=a.getInt32();c.attribMapCount=a.getInt32();c.flags=a.getInt32();c.comment=a.getString(a.getInt32());c.vbstride=3;c.flags&1&&(c.vbstride+=3);c.vbstride+=2*(c.texMapCount||0);0<c.attribMapCount&&(c.vbstride+=3);c.vblayout={};var e=
0;c.vblayout.position={offset:e,itemSize:3};e+=3;c.flags&1&&(c.vblayout.normal={offset:e,itemSize:3},e+=3);if(c.texMapCount)for(var d=0;d<c.texMapCount;d++){var g="uv";d&&(g+=(d+1).toString());c.vblayout[g]={offset:e,itemSize:2};e+=2}c.attribMapCount&&(c.vblayout.color={offset:e,itemSize:3});c.vb=new Float32Array(c.vertexCount*c.vbstride);return"RAW"==b?(readOpenCTM_RAW(a,c),VBUtils.deduceUVRepetition(c),VBUtils.computeBounds3D(c),c):"MG2"==b?(readOpenCTM_MG2(a,c),VBUtils.deduceUVRepetition(c),VBUtils.computeBounds3D(c),
c):null},readLines=function(a,b){var c={isLines:!0,vertices:null,indices:null,colors:null,normals:null,uvs:[],attrs:[]},e,d;1<b.version?(c.vertexCount=a.readU16(),e=a.readU16(),d=a.readU16()):(c.vertexCount=a.readU32V(),e=a.readU32V(),d=a.readU32V());var g=0!=a.stream.getUint8();c.vbstride=3;g&&(c.vbstride+=3);c.vblayout={};var f=0;c.vblayout.position={offset:f,itemSize:3};g&&(c.vblayout.color={offset:f+3,itemSize:3});c.vb=new Float32Array(c.vertexCount*c.vbstride);for(var h=c.vb,k=c.vbstride,l=a.stream,
n=0,f=c.vblayout.position.offset,m=c.vertexCount;n<m;n++,f+=k)h[f]=l.getFloat32(),h[f+1]=l.getFloat32(),h[f+2]=l.getFloat32();if(g)for(n=0,f=c.vblayout.color.offset,g=c.vertexCount;n<g;n++,f+=k)h[f]=l.getFloat32(),h[f+1]=l.getFloat32(),h[f+2]=l.getFloat32(),l.getFloat32();n=function(a){return a.buffer.slice(a.byteOffset,a.byteOffset+a.length)};1<b.version?(e=new Uint16Array(n(l.getBytes(2*e))),l=new Uint16Array(n(l.getBytes(2*d)))):(e=new Int32Array(n(l.getBytes(4*e))),l=new Int32Array(n(l.getBytes(4*
d))));c.indices=new Uint16Array(2*(l[d-1]-d+1));for(n=f=0;n+1<d;n++)for(h=l[n];h+1<l[n+1];h++)c.indices[f++]=e[h],c.indices[f++]=e[h+1];VBUtils.computeBounds3D(c);return c};function readGeometry(a,b,c){return(b=a.seekToEntry(b))?"Autodesk.CloudPlatform.OpenCTM"==b.entryType?readOpenCTM(a.stream):"Autodesk.CloudPlatform.Lines"==b.entryType?readLines(a,b):null:null}
function convertMaterials(a){var b=function(a,b){var c=new THREE.Color;if(!a||!a.colors)return c.setRGB(1,0,0);var d=a.colors[b];if(!d)return c.setRGB(0,0,0);d=d.values;if(!d||!d.length)return c.setRGB(1,0,0);d=d[0];return c.setRGB(d.r,d.g,d.b)},c=function(a,b){if(!a||!a.scalars)return 0;var c=a.scalars[b];return c?c.values[0]:void 0},e=function(a,b){if(!a||!a.booleans)return 0;var c=a.booleans;return c?c[b]:void 0},d=a.materials.materials;a.simplemats={};for(var g in d){var f=d[g],h=f.materials,
k=h[f.userassets[0]];if(k&&"SimplePhong"==k.definition){var f=k.properties,l={};l.tag=k.tag;l.proteinType=k.proteinType;void 0===l.proteinType&&(l.proteinType=null);l.ambient=b(f,"generic_ambient");l.color=b(f,"generic_diffuse");l.specular=b(f,"generic_specular");l.emissive=b(f,"generic_emissive");var n=c(f,"generic_glossiness");n||(n=30);l.shininess=n;(n=c(f,"generic_transparency"))||(n=0);l.opacity=1-n;(n=c(f,"generic_reflectivity_at_0deg"))||(n=0);l.reflectivity=n;n=e(f,"generic_is_metal");void 0!==
n&&(l.metal=n);n=e(f,"generic_backface_cull");void 0!==n&&(l.doubleSided=!n);l.transparent=k.transparent;var k=k.textures,m;for(m in k){var n=h[k[m].connections[0]].properties,p=n.uris.unifiedbitmap_Bitmap.values[0],q=null;if(p)if("generic_diffuse"==m){if(q="map",!l.color||0==l.color.r&&0==l.color.g&&0==l.color.b)l.color=new THREE.Color(1,1,1)}else"generic_bump"==m?(q=e(f,"generic_bump_is_normal")?"normalMap":"bumpMap",l.bumpScale=c(f,"generic_bump_amount")):"generic_specular"==m?q="specularMap":
"generic_reflection"!=m&&"generic_alpha"==m&&(q="alphaMap");q&&(l["uri_"+q]=p,(p=c(n,"texture_UScale"))&&(l["uscale_"+q]=p),(p=c(n,"texture_VScale"))&&(l["vscale_"+q]=p))}a.simplemats[g]=l}}}function readLightDefinition(a,b){var c=a.seekToEntry(b);if(!c||1<c.version)return null;c=a.stream;return{position:a.readVector3f(),dir:a.readVector3f(),r:c.getFloat32(),g:c.getFloat32(),b:c.getFloat32(),intensity:c.getFloat32(),spotAngle:c.getFloat32(),size:c.getFloat32(),type:c.getUint8()}}
function readCameraDefinition(a,b){var c=a.seekToEntry(b.definition);if(!c||2<c.version)return null;var e=a.stream,d={isPerspective:!e.getUint8(),position:a.readVector3f(),target:a.readVector3f(),up:a.readVector3f(),aspect:e.getFloat32(),fov:THREE.Math.radToDeg(e.getFloat32())};2>c.version&&(e.getFloat32(),e.getFloat32());d.orthoScale=e.getFloat32();return d}
function FragList(){this.numLoaded=this.length=0;this.mesh2frag=this.fragId2dbId=this.entityIndexes=this.packIds=this.materials=this.transforms=this.boxes=null}
function readGeometryMetadata(a,b){var c=a.getEntryCounts(),e=a.stream;b.length=c;for(var d=b.fragTypes=new Uint8Array(c),g=b.primCounts=new Uint16Array(c),f=b.packIds=new Int32Array(c),h=b.entityIndexes=new Int32Array(c),k=0;k<c&&a.seekToEntry(k);k++)d[k]=e.getUint8(),e.seek(e.offset+24),g[k]=e.getUint16(),f[k]=parseInt(a.readString()),h[k]=a.readU32V()}
function readFragments(a,b){function c(a){a*=6;for(var b=0;6>b;b++)f[a++]=g.getFloat32()}function e(a,b,c){a*=6;for(var d=0;6>d;d++)f[a++]=g.getFloat32()+b[c+d%3]}var d=a.getEntryCounts(),g=a.stream;b.length=d;b.numLoaded=0;for(var f=b.boxes=new Float32Array(6*d),h=b.transforms=new Float32Array(16*d),k=b.materials=new Int32Array(d),l=b.packIds=new Int32Array(d),n=b.entityIndexes=new Int32Array(d),m=b.geomDataIndexes=new Int32Array(d),d=b.fragId2dbId=new Int32Array(d),p=0,q=b.length;p<q;p++){var s=
a.seekToEntry(p);if(!s)break;if(5<s.version)break;4<s.version&&a.readU8();k[p]=a.readU32V();2<s.version?m[p]=a.readU32V():(l[p]=parseInt(a.readString()),n[p]=a.readU32V());a.readTransform(p,h,16*p);3<s.version?e(p,h,16*p+12):c(p);1<s.version&&(d[p]=a.readU32V())}}
function filterFragments(a,b){a.length=b.length;a.numLoaded=0;for(var c=a.length,e=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],d=new Float32Array(6*c),g=new Float32Array(16*c),f=new Int32Array(c),h=new Int32Array(c),c=new Int32Array(c),k={},l=0;l<b.length;++l){for(var n=b[l],m=6*n,p=6*l,q=0;6>q;++q)d[p++]=a.boxes[m++];m=16*n;p=16*l;for(q=0;16>q;++q)g[p++]=a.transforms[m++];f[l]=a.materials[n];h[l]=a.packIds[n];c[l]=a.entityIndexes[n];q=a.packIds[n]+":"+a.entityIndexes[n];n=k[q];void 0==
n?k[q]=l:Array.isArray(n)?n.push(l):k[q]=[n,l];n=6*l;for(q=0;3>q;++q)d[n+q]<e[q]&&(e[q]=d[n+q]);for(q=3;6>q;++q)d[n+q]>e[q]&&(e[q]=d[n+q])}a.boxes=d;a.transforms=g;a.materials=f;a.packIds=h;a.entityIndexes=c;a.mesh2frag=k;return e}function readInstance(a,b){var c=a.seekToEntry(b);if(!c||2<c.version)return null;1<c.version&&a.readU8();return{definition:a.stream.getUint32(),transform:a.readTransform(),instanceNodePath:a.readPathID()}}
function Package(){this.fragments=this.metadata=this.simplemats=this.materials=this.manifest=null;this.geompacks=[];this.instances=[];this.cameras=[];this.lights=[];this.propertydb={attrs:[],avs:[],ids:[],values:[],offsets:[]};this.animations=this.bbox=null;this.pendingRequests=0}
Package.prototype.loadAsyncResource=function(a,b,c,e){function d(b){g.pendingRequests--;this.response&&(b=new Uint8Array(this.response),31==b[0]&&139==b[1]&&(b=(new Zlib.Gunzip(b)).decompress()),e(b));0==g.pendingRequests&&g.postLoad(a)}if(c)e(c);else{var g=this;this.pendingRequests++;(new Xhr(a.errorHandler,a.auth,a.viewing_url)).get(a.basePath+b,a.headers,"arraybuffer",d,"",a.queryParams)}};
Package.prototype.load=function(a,b){var c=this,e=new Zlib.Unzip(b),d=e.decompress("manifest.json");if(!d)return!1;var g=new InputStream(d),f=JSON.parse(g.getString(d.byteLength)),d=e.decompress("metadata.json"),g=new InputStream(d);3<d.byteLength&&0!==d[3]&&(this.metadata=JSON.parse(g.getString(d.byteLength)).metadata)&&(g=this.metadata["world bounding box"],this.bbox=new THREE.Box3({x:g.minXYZ[0],y:g.minXYZ[1],z:g.minXYZ[2]},{x:g.maxXYZ[0],y:g.maxXYZ[1],z:g.maxXYZ[2]}),this.metadata.hasOwnProperty("double sided geometry")&&
this.metadata["double sided geometry"].value&&(this.doubleSided=!0));this.manifest=f;for(var h=f.typesets,g={},d=0;d<h.length;d++){var k=h[d];g[k.id]=k.types}f=f.assets;for(d=0;d<f.length;d++){k=f[d];h=k.type;0==h.indexOf("Autodesk.CloudPlatform.")&&(h=h.substr(23));var l=k.URI,n=k.typeset?g[k.typeset]:null;0!=l.indexOf("embed:/")&&("PackFile"==h?"Autodesk.CloudPlatform.Geometry"==(n?n[0]["class"]:null)&&this.geompacks.push({id:k.id,uri:l}):"PropertyAttributes"==h?this.propertydb.attrs.push(l):"PropertyAVs"==
h?this.propertydb.avs.push(l):"PropertyIDs"==h?this.propertydb.ids.push(l):"PropertyOffsets"==h?this.propertydb.offsets.push(l):"PropertyValues"==h&&this.propertydb.values.push(l));var k=k.URI,m;0==k.indexOf("embed:/")&&(k=k.substr(7),m=e.decompress(k));"ProteinMaterials"==h?-1==k.indexOf("Protein")?this.loadAsyncResource(a,k,m,function(a){var b=new InputStream(a);a=a.byteLength;0<a?(c.materials=JSON.parse(b.getString(a)),convertMaterials(c)):c.materials=null}):this.loadAsyncResource(a,k,m,function(a){var b=
new InputStream(a);a=a.byteLength;c.proteinMaterials=0<a?JSON.parse(b.getString(a)):null}):"FragmentList"==h?this.loadAsyncResource(a,k,m,function(a){a=new PackFileReader(a);var b=c.fragments=new FragList;readFragments(a,b)}):"GeometryMetadataList"==h?this.loadAsyncResource(a,k,m,function(a){a=new PackFileReader(a);c.geomMetadata={};readGeometryMetadata(a,c.geomMetadata)}):"PackFile"==h?-1!=k.indexOf("CameraDefinitions.bin")?this.loadAsyncResource(a,k,m,function(a){c.camDefPack=new PackFileReader(a)}):
-1!=k.indexOf("CameraList.bin")?this.loadAsyncResource(a,k,m,function(a){c.camInstPack=new PackFileReader(a)}):-1!=k.indexOf("LightDefinitions.bin")?this.loadAsyncResource(a,k,m,function(a){c.lightDefPack=new PackFileReader(a)}):-1!=k.indexOf("LightList.bin")&&this.loadAsyncResource(a,k,m,function(a){c.lightInstPack=new PackFileReader(a)}):"Animations"==h&&this.loadAsyncResource(a,k,m,function(a){var b=new InputStream(a);a=a.byteLength;c.animations=0<a?JSON.parse(b.getString(a)):null})}0==this.pendingRequests&&
this.postLoad(a)};
Package.prototype.postLoad=function(a){if(this.camDefPack&&this.camInstPack){for(var b=0,c=this.camInstPack.getEntryCounts();b<c;b++){var e=readInstance(this.camInstPack,b),d=readCameraDefinition(this.camDefPack,e);e.transform&&(e=(new THREE.Matrix4).copy(e.transform),d.position.applyMatrix4(e),d.target.applyMatrix4(e),d.up.transformDirection(e));this.cameras.push(d)}delete this.camDefPack;delete this.camInstPack}if(this.lightDefPack&&this.lightInstPack){b=0;for(c=this.lightInstPack.getEntryCounts();b<c;b++)e=
readInstance(this.lightInstPack,b),this.lights.push(readLightDefinition(this.lightDefPack,e.definition));delete this.lightInstPack;delete this.lightDefPack}d=this.fragments;if(this.geomMetadata){c=this.geomMetadata;b=0;for(e=d.length;b<e;b++){var g=d.geomDataIndexes[b];d.entityIndexes[b]=c.entityIndexes[g];d.packIds[b]=c.packIds[g]}delete this.geomMetadata}for(var g=d.mesh2frag={},c=d.packIds,f=d.entityIndexes,b=0,e=d.length;b<e;b++){var h=c[b]+":"+f[b],k=g[h];void 0===k?g[h]=b:Array.isArray(k)?k.push(b):
g[h]=[k,b]}if(!this.bbox){c=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity];e=d.boxes;g=0;for(d=d.length;g<d;g++){f=6*g;for(b=0;3>b;b++)e[f+b]<c[b]&&(c[b]=e[f+b]);for(b=3;6>b;b++)e[f+b]>c[b]&&(c[b]=e[f+b])}this.bbox=new THREE.Box3(new THREE.Vector3(c[0],c[1],c[2]),new THREE.Vector3(c[3],c[4],c[5]))}g=a.objectIds;if(null!=g){c=[];d=[];for(b=0;b<g.length;++b)for(e=0;e<this.fragments.length;++e)this.fragments.fragId2dbId[e]==g[b]&&(c.push(this.fragments.packIds[e]),d.push(e));e=1;g=c.length;
for(b=1;b<g;){for(;b<g&&c[b]==c[b-1];)++b;if(g==b)break;c[e++]=c[b++]}c.splice(e-1,g-e);g=[];for(b=0;b<this.geompacks.length;++b)for(e=0;e<c.length;++e)parseInt(this.geompacks[b].id)==c[e]&&g.push(this.geompacks[b]);this.geompacks=g;b=filterFragments(this.fragments,d);this.bbox=new THREE.Box3(new THREE.Vector3(b[0],b[1],b[2]),new THREE.Vector3(b[3],b[4],b[5]))}a.loadDoneCB(!0)};
function PackFileReader(a){31==a[0]&&139==a[1]&&(a=(new Zlib.Gunzip(a)).decompress());this.tempQuat=new THREE.Quaternion;this.tempTrans=new THREE.Vector3;this.tempScale=new THREE.Vector3;this.tempMat=new THREE.Matrix4;a=this.stream=new InputStream(a);var b=a.getInt32();this.type=a.getString(b);this.version=a.getInt32();this.types=null;this.entryOffsets=[];a.seek(a.byteLength-8);var c=a.getUint32();this.typesOffset=a.getUint32();a.seek(this.typesOffset);var e=this.readU32V();this.types=[];for(b=0;b<
e;++b)this.types.push({entryClass:this.readString(),entryType:this.readString(),version:this.readU32V()});a.seek(c);c=this.readU32V();e=this.entryOffsets;for(b=0;b<c;++b)e.push(a.getUint32());a.seek(0)}PackFileReader.prototype.readVarint=function(){var a,b=0,c=0;do a=this.stream.getUint8(),b|=(a&127)<<c,c+=7;while(a&128);return b};PackFileReader.prototype.readU32V=PackFileReader.prototype.readVarint;PackFileReader.prototype.readU16=function(){return this.stream.getUint16()};
PackFileReader.prototype.readU8=function(){return this.stream.getUint8()};PackFileReader.prototype.readString=function(){return this.stream.getString(this.readU32V())};PackFileReader.prototype.readVector3f=function(){var a=this.stream;return new THREE.Vector3(a.getFloat32(),a.getFloat32(),a.getFloat32())};
PackFileReader.prototype.readTransform=function(a,b,c){function e(a){a.set(f.getFloat32(),f.getFloat32(),f.getFloat32(),f.getFloat32())}function d(a){a.set(f.getFloat64(),f.getFloat64(),f.getFloat64())}function g(){n.identity();for(var a=0;3>a;++a)for(var b=0;3>b;++b)n.elements[4*a+b]=f.getFloat32()}var f=this.stream,h=this.tempTrans,k=this.tempQuat,l=this.tempScale,n=this.tempMat;switch(f.getUint8()){case 4:n.identity();break;case 0:d(h);n.makeTranslation(h.x,h.y,h.z);break;case 1:e(k);d(h);n.compose(h,
k,l.set(1,1,1));break;case 2:var m=f.getFloat32();e(k);d(h);n.compose(h,k,l.set(m,m,m));break;case 3:g(),d(h),n.setPosition(h)}if(void 0!==a)for(a=n.elements,h=0;16>h;h++)b[c++]=a[h];else return(new THREE.Matrix4).copy(n)};PackFileReader.prototype.getEntryCounts=function(){return this.entryOffsets.length};
PackFileReader.prototype.seekToEntry=function(a){var b=this.getEntryCounts();if(a>=b)return null;this.stream.seek(this.entryOffsets[a]);a=this.stream.getUint32();return a>=this.types.length?null:this.types[a]};
PackFileReader.prototype.readPathID=function(){var a=this.stream;if(2>this.version){var b=a.getUint16();if(!b)return null;a.getUint16();if(1==b)return"";for(var c=a.getUint16(),e=2;e<b;++e)c+="/"+a.getUint16()}else{b=this.readU32V();if(!b)return null;this.readU32V();if(1==b)return"";c=this.readU32V();for(e=2;e<b;++e)c+="/"+this.readU32V()}return c};
function PropertyDatabase(a){function b(a){for(var b="",c=0;c<a.length;c++)b+=String.fromCharCode(a[c]);a=decodeURIComponent(escape(b));return JSON.parse(a)}function c(a,b){for(var c=b,d="";c<a.length-1;){var e=a[c];if(44==e&&(10==a[c+1]||13==a[c+1]))break;if(10==e||13==e)break;d+=String.fromCharCode(e);c++}c=decodeURIComponent(escape(d));return JSON.parse(c)}function e(a,b){for(var c=0,d=0,e=a.length;d<e;d++)44==a[d]&&c++;c++;for(var e=new Uint32Array(c+(b?1:0)),d=0,f=a.length;91!=a[d]&&d<f;)d++;
if(d==a.length)return null;d++;for(var g=!1,h=c=0;d<f;){var k=a[d];48<=k&&57>=k?(h=10*h+(k-48),g=!0):44==k||93==k?g&&(e[c++]=h,g=!1,h=0):(g=!1,h=0);d++}return e}function d(a){for(var b=0,c=a.length-1,d=0;d<c;d++)44!=a[d]||10!=a[d+1]&&13!=a[d+1]||b++;if(!b)return null;b++;for(var e=new Uint32Array(b),b=d=0;91!=a[d]&&d<c;)d++;d++;e[b++]=d;for(var f=!1;d<c;)10==a[d]||13==a[d]?f=!0:f&&(f=!1,e[b++]=d),d++;return e}function g(a){var b=0<=a?Math.floor(a):Math.ceil(a);return{intPart:b,fracPart:a-b}}function f(a,
b,c){var d="";0===a&&(a=0);c&&0===a&&(d+="-");0===g(a).fracPart?d+=a:0<b?(a=a.toFixed(b),b=/^\-?([0-9]+)\.0+$/.exec(a),d=null!==b?d+b[1]:d+a):d+=a.toFixed(0);return d}var h,k,l,n,m,p,q,s,r,u,w,A,v;for(v in a.attrs){h=b(a.attrs[v]);for(var B=0;B<h.length;B++){var C=h[B][1];"__parent__"==C?r=B:"__child__"==C?s=B:"__name__"==C?u=B:"__instanceof__"==C?w=B:"__viewable_in__"==C&&(A=B)}break}for(v in a.avs){l=e(a.avs[v],0);delete a.avs;break}for(v in a.offsets){k=e(a.offsets[v],1);k[k.length-1]=l.length/
2;delete a.offsets;break}for(v in a.values){n=a.values[v];m=d(n);break}for(v in a.ids){p=a.ids[v];q=d(p);break}this.getObjectCount=function(){return k.length-1};this.getValueAt=function(a){return c(n,m[a])};this.getIntValueAt=function(a){var b=0;a=m[a];for(34==n[a]&&a++;a<n.length-1;){var c=n[a];if(44==c&&(10==n[a+1]||13==n[a+1]))break;if(10==c||13==c||34==c)break;48<=c&&57>=c&&(b+=10*b+(c-48));a++}return b};this.getIdAt=function(a){return c(p,q[a])};this.getObjectProperties=function(a){var b={dbId:a,
name:"",properties:[]},c=null,d=2*k[a+1];for(a=2*k[a];a<d;a+=2){var e=l[a];if(e==u)e=this.getValueAt(l[a+1]),b.name=e;else if(e==w)(e=this.getObjectProperties(this.getValueAt(l[a+1])))&&e.properties&&(c=e);else if(e!=r&&e!=s&&e!=A){var f=h[e],g=f[6]?f[6]:0,m=f[5]?f[5]:f[0],e=this.getValueAt(l[a+1]);b.properties.push({displayName:m,displayValue:this.formatValueWithUnits(e,f[3],f[2]),displayCategory:f[1],hidden:g&1})}}if(c){d={};e=b.properties;for(a=0;a<e.length;a++)d[e[a].displayName]=1;b.name||(b.name=
c.name);c=c.properties;for(a=0;a<c.length;a++)d.hasOwnProperty(c[a].displayName)||e.push(c[a])}return b};this.findRootNodes=function(){for(var a=[],b=1,c=k.length;b<c;b++){for(var d=!1,e=!1,f=!1,g=2*k[b+1],h=2*k[b];h<g;h+=2){var m=l[h];m==r?this.getIntValueAt(l[h+1])&&(e=!0):m==s?d=!0:m==u&&(f=!0)}d&&f&&!e&&a.push(b)}return a};this.getNodeNameAndChildren=function(a,b){for(var c=a.dbId,d=2*k[c+1],e,c=2*k[c];c<d;c+=2){var f=l[c];f!=r&&(f!=s||b?f==u?(f=this.getValueAt(l[c+1]),a.name=f):f==w&&(f={dbId:this.getValueAt(l[c+
1]),name:null},this.getNodeNameAndChildren(f,!0),f&&f.name&&!a.name&&(a.name=f.name)):(f=this.getValueAt(l[c+1]),f={dbId:f,parent:a},e?e.push(f):e=[f]))}return e};this.buildObjectTree=function(a,b,c,d){c>d[0]&&(d[0]=c);var e=this.getNodeNameAndChildren(a);if(e){for(var f=0;f<e.length;f++)this.buildObjectTree(e[f],b,c+1,d);for(f=0;f<e.length;f++)if(e[f].children||void 0!==e[f].fragIds)a.children?a.children.push(e[f]):a.children=[e[f]]}else b=b[a.dbId],void 0!==b&&(a.fragIds=b)};this.bruteForceSearch=
function(a){a=a.toLowerCase();for(var b=[],c=[],d=0,e=m.length;d<e;d++){var f=this.getValueAt(d);"string"==typeof f?-1!=f.toLowerCase().indexOf(a)&&c.push(d):-1!=f.toString().toLowerCase().indexOf(a)&&c.push(d)}a=1;for(e=k.length;a<e;a++)for(f=2*k[a+1],d=2*k[a];d<f;d+=2)if(-1!=c.indexOf(l[d+1])){b.push(a);break}return b};this.formatValueWithUnits=function(a,b,c){1==c?a=a?"Yes":"No":"ft"===b||"feet"===b||"foot"===b?a=this.formatFeet(12*a):"in"===b||"inch"===b?a=this.formatFeet(a):3===c&&b?(b=b.replace("^2",
String.fromCharCode(178)),b=b.replace("^3",String.fromCharCode(179)),a=f(a,2)+" "+b):a=b?a+" "+b:3==c?f(a,3):a;return a};this.formatFeet=function(a){if(isNaN(a))return"NaN";var b="",c=16,d=0>a;a=0<a?a+0.5/c:a-0.5/c;var e=g(a/12).intPart,b=b+(f(e,0,d)+"' "),d=a-12*e;0>d&&(d=-d);a=g(d).intPart;d=g((d-a)*c).intPart;if(0===d||0!==a)b+=f(a,0);if(0!==d){for(0>a&&0>d&&(d=-d);0===d%2;)d/=2,c/=2;0!==a&&(b+="-");b+=f(d,0)+"/"+f(c,0)}return b+'"'}}
function F2D(a,b,c,e){function d(a){a=a.children;if(void 0!==a){for(var b=0;b<a.length;++b)d(a[b]);a.sort(function(a,b){var c=a.isLayer,d=b.isLayer;return c&&!d?-1:!c&&d?1:a.name.localeCompare(b.name,void 0,{sensitivity:"base",numeric:!0})})}}function g(a){var b=0;if(a.isLayer)b=1;else{for(var c=a.children,d=0;d<c.length;++d)b+=g(c[d]);a.childCount=b}return b}this.metadata=a;this.scaleY=this.scaleX=1;this.bbox=new THREE.Box3;this.is2d=!0;this.layersMap={};this.layersRoot={name:"root",id:"root",children:[],
isLayer:!1,childCount:0};this.fontDefs={};this.fontId=this.fontCount=0;this.manifestAvailable=!1;this.objectMemberQueue=[];this.propertydb={attrs:[],avs:[],ids:[],values:[],offsets:[],rcv_offsets:[],rcvs:[],viewables:[]};if(a){var f=a.page_dimensions;this.paperWidth=f.page_width;this.paperHeight=f.page_height;this.scaleX=this.paperWidth/f.plot_width;this.scaleY=this.paperHeight/f.plot_height;this.hidePaper=f.hide_paper;this.bbox.min.set(0,0,0);this.bbox.max.set(this.paperWidth,this.paperHeight,0);
var h=this.layersRoot,k=0,l=0,f=function(a,b,c){var d=h,e=a.length;if(1<e)for(var f=0;f<e-1;++f){var g=a[f],m;a:{m=d.children;for(var n=0;n<m.length;++n){var p=m[n];if(p.name===g){m=p;break a}}m=null}m||(m={name:g,id:"group-"+k++,children:[],isLayer:!1,childCount:0},d.children.push(m));d=m}d.children.push({name:b,index:c,id:l++,isLayer:!0})},n=0;this.layersMap[0]=n++;for(var m in a.layers){var p=parseInt(m),q=a.layers[m];(q="string"===typeof q?q:q.name)||(q=m);f(q.split("|"),q,p);this.layersMap[p]=
n++}this.layerCount=n}this.hidePaper=this.hidePaper||e&&e.modelSpace;d(this.layersRoot);g(this.layersRoot);this.opCount=0;this.fontFaces=[];this.fontFamilies=[];this.clip=null;this.maxObjectNumber=this.imageNumber=this.objectNumber=0;this.objectStack=[];this.objectNameStack=[];this.parseObjState={polyTriangle:{},clip:{},raster:{},text:{},fontDef:{},uknown:{}};this.layer=0;this.bgColor=e.bgColor?e.bgColor:4294967295;this.contrastColor=this.color=this.fillColor=4278190080;this.currentVbb=new VertexBufferBuilder(!1);
this.meshes=[];this.numPolytriangles=this.numTriangles=this.numCircles=this.numEllipses=this.numPolylines=this.numLineSegs=0;this.error=!1;this.offsetY=this.offsetX=0;if(b){this.manifestAvailable=!0;this.imageId2URI={};a=b.assets;b=0;for(e=a.length;b<e;++b)m=a[b],-1!=m.mime.indexOf("image/")&&(f=m.id,f=f.substr(0,f.indexOf(".")),this.imageId2URI[f]=c+m.URI),"Autodesk.CloudPlatform.PropertyAttributes"==m.type&&this.propertydb.attrs.push(m.URI),"Autodesk.CloudPlatform.PropertyValues"==m.type&&this.propertydb.values.push(m.URI),
"Autodesk.CloudPlatform.PropertyIDs"==m.type&&this.propertydb.ids.push(m.URI),"Autodesk.CloudPlatform.PropertyViewables"==m.type&&this.propertydb.viewables.push(m.URI),"Autodesk.CloudPlatform.PropertyOffsets"==m.type&&(-1!=m.id.indexOf("rcv")?this.propertydb.rcv_offsets.push(m.URI):this.propertydb.offsets.push(m.URI)),"Autodesk.CloudPlatform.PropertyAVs"==m.type&&this.propertydb.avs.push(m.URI),"Autodesk.CloudPlatform.PropertyRCVs"==m.type&&this.propertydb.rcvs.push(m.URI);debug(JSON.stringify(this.propertydb))}}
F2D.prototype.load=function(a,b){31==b[0]&&139==b[1]&&(b=(new Zlib.Gunzip(b)).decompress());this.data=b;this.parse();a.loadDoneCB(!0)};F2D.prototype.loadFrames=function(a){a.data?this.data=new Uint8Array(a.data):a.finalFrame&&(this.data=null);this.parseFrames(a.finalFrame);a.loadDoneCB(!0)};
var F2dDataType={dt_object:0,dt_void:1,dt_byte:2,dt_int:3,dt_float:4,dt_double:5,dt_varint:6,dt_point_varint:7,dt_byte_array:32,dt_int_array:33,dt_float_array:34,dt_double_drray:35,dt_varint_array:36,dt_point_varint_array:37,dt_arc:38,dt_circle:39,dt_circular_arc:40,dt_string:63,dt_last_data_type:127},F2dSemanticType={st_object_member:0,st_fill:1,st_fill_off:2,st_clip_off:3,st_layer:4,st_link:5,st_line_weight:6,st_miter_angle:7,st_miter_length:8,st_line_pattern_ref:9,st_back_color:10,st_color:11,
st_markup:12,st_object_id:13,st_markup_id:14,st_reset_rel_offset:15,st_font_ref:16,st_begin_object:32,st_clip:33,st_line_caps:34,st_line_join:35,st_line_pattern_def:36,st_font_def:37,st_sheet:42,st_arc:43,st_polyline:44,st_raster:45,st_text:46,st_polytriangle:47,st_dot:48,st_end_object:63,st_last_semantic_type:127};
F2D.prototype.flushBuffer=function(a,b){if(this.currentVbb.vcount){var c;if(c=b||this.currentVbb.isFull(a))c=this.currentVbb.toMesh(),this.bbox.union(c.boundingBox),this.meshes.push(c),c.material={skipEllipticals:!this.currentVbb.numEllipses,skipCircles:!this.currentVbb.numCirculars,skipTriangleGeoms:!this.currentVbb.numTriangleGeoms},this.currentImage&&(c.material.image=this.currentImage,c.material.image.name=this.imageNumber++,this.currentImage=null),this.currentVbb=new VertexBufferBuilder}};
F2D.prototype.tx=function(a){return this.sx(a)};F2D.prototype.ty=function(a){return this.sy(a)};F2D.prototype.sx=function(a){return a*this.scaleX};F2D.prototype.sy=function(a){return a*this.scaleY};F2D.prototype.invertColor=function(a){var b,c,e;b=255-(a>>16&255);c=255-(a>>8&255);e=255-(a&255);return(a>>24&255)<<24|b<<16|c<<8|e};F2D.prototype.mapColor=function(a){return a};F2D.prototype.restoreSignBitFromLSB=function(a){return a&1?-(a>>>1):a>>>1};
F2D.prototype.parsePointPositions=function(){var a=this.stream.getVarints(),b=this.stream.getVarints(),a=this.restoreSignBitFromLSB(a),b=this.restoreSignBitFromLSB(b),a=a+this.offsetX,b=b+this.offsetY;this.offsetX=a;this.offsetY=b;return[this.tx(a),this.ty(b)]};F2D.prototype.parserAssert=function(a,b,c){return a!=b?(debug("Expect "+b+"; actual type is "+a+"; in function "+c),this.error=!0):!1};F2D.prototype.unhandledTypeWarning=function(a,b){debug("Unhandled semantic type : "+b+" in function "+a)};
F2D.prototype.parseObject=function(){var a=this.stream.getVarints();this.objectStack.push(a);switch(a){case F2dSemanticType.st_sheet:this.objectNameStack.push("sheet");this.objectMemberQueue.unshift("paperColor");break;case F2dSemanticType.st_clip:this.objectNameStack.push("clip");this.objectMemberQueue.unshift("contourCounts","points");break;case F2dSemanticType.st_polytriangle:this.objectNameStack.push("polyTriangle");this.objectMemberQueue.unshift("points","indices","colors");break;case F2dSemanticType.st_raster:this.objectNameStack.push("raster");
this.objectMemberQueue.unshift("position","width","height","imageId");break;case F2dSemanticType.st_text:this.objectNameStack.push("text");this.objectMemberQueue.unshift("string","position","height","widthScale","rotation","oblique","charWidths");break;case F2dSemanticType.st_font_def:this.objectNameStack.push("fontDef");this.objectMemberQueue.unshift("name","fullName","flags","spacing","panose");break;case F2dSemanticType.st_end_object:this.objectStack.pop();if(this.objectStack.length){switch(this.objectStack.pop()){case F2dSemanticType.st_polytriangle:this.actOnPolyTriangle();
break;case F2dSemanticType.st_clip:this.actOnClip();break;case F2dSemanticType.st_raster:this.actOnRaster();break;case F2dSemanticType.st_text:this.actOnText();break;case F2dSemanticType.st_font_def:this.actOnFontDef()}var a=this.objectNameStack.pop(),a=this.parseObjState[a],b;for(b in a)a[b]=null}else this.parserAssert(0,1,"parseEndObject (Stack Empty)");this.objectMemberQueue.length=0;break;default:this.objectNameStack.push("unknown"),this.error=!0,this.unhandledTypeWarning("parseObject",a)}};
F2D.prototype.initSheet=function(a){this.bgColor=a;if(!this.hidePaper&&this.metadata){var b=this.paperWidth,c=this.paperHeight,e=this.currentVbb,d=0.0075*b;this.addPolyTriangle([0,0,b,0,b,c,0,c,d,-d,b+d,-d,b+d,0,d,0,b,0,b+d,0,b+d,c-d,b,c-d],[a,a,a,a,4283782485,4283782485,4283782485,4283782485,4283782485,4283782485,4283782485,4283782485],[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11],4294967295,0,0,!1);e.addSegment(0,0,b,0,1E-6,4278190080,0,0);e.addSegment(b,0,b,c,1E-6,4278190080,0,0);e.addSegment(b,c,0,
c,1E-6,4278190080,0,0);e.addSegment(0,c,0,0,1E-6,4278190080,0,0)}};F2D.prototype.setObjectMember=function(a){if(!this.objectMemberQueue.length)return debug("Unexpected object member. "+a),!1;var b=this.objectMemberQueue.shift(),c=this.objectNameStack[this.objectNameStack.length-1];return"sheet"==c&&"paperColor"==b?(this.initSheet(a),!0):c?(this.parseObjState[c][b]=a,!0):!1};
F2D.prototype.parseString=function(){var a=this.stream,b=a.getVarints(),c=a.getVarints(),a=a.getString(c);switch(b){case F2dSemanticType.st_object_member:if(this.setObjectMember(a))return;break;default:debug("Unexpected opcode semantic type for string.")}return a};F2D.prototype.actOnFontDef=function(){var a=this.parseObjState.fontDef;this.fontDefs[++this.fontCount]=a;this.fontId=this.fontCount};
F2D.prototype.parsePoint=function(){var a=this.stream.getVarints(),b=this.parsePointPositions();switch(a){case F2dSemanticType.st_object_member:if(this.setObjectMember(b))return;break;default:debug("Unexpected opcode semantic type for point.")}return b};
F2D.prototype.parsePointsArray=function(){var a=this.stream,b=a.getVarints();if(a=a.getVarints()){for(var a=a/2,c=[],e,d=0;d<a;++d)e=this.parsePointPositions(),c.push(e[0]),c.push(e[1]);switch(b){case F2dSemanticType.st_polyline:this.actOnPolylinePointsArray(c);return;case F2dSemanticType.st_dot:this.actOnDot(c);return;case F2dSemanticType.st_object_member:if(this.setObjectMember(c))return;break;default:debug("Unexpected opcode semantic type for points array.")}return c}};
F2D.prototype.parseIntArray=function(){for(var a=this.stream,b=a.getVarints(),c=a.getVarints(),e=[],d=0;d<c;++d)e.push(a.getUint32());switch(b){case F2dSemanticType.st_object_member:if(this.setObjectMember(e))return;break;default:this.unhandledTypeWarning("parseIntArray",b)}return e};
F2D.prototype.parseByteArray=function(){for(var a=this.stream,b=a.getVarints(),c=a.getVarints(),e=[],d=0;d<c;++d)e.push(a.getUint8());switch(b){case F2dSemanticType.st_object_member:if(this.setObjectMember(e))return;break;default:this.unhandledTypeWarning("parseByteArray",b)}return e};
F2D.prototype.parseVarintArray=function(){for(var a=this.stream,b=a.getVarints(),c=[],e=a.getVarints(),d=0;d<e;++d)c.push(a.getVarints());switch(b){case F2dSemanticType.st_object_member:if(this.setObjectMember(c))return;break;default:this.unhandledTypeWarning("parseVarIntArray",b)}return c};
F2D.prototype.parseInt=function(){var a=this.stream,b=a.getVarints(),a=a.getUint32();switch(b){case F2dSemanticType.st_color:this.color=a;break;case F2dSemanticType.st_fill:this.fill=!0;this.fillColor=a;break;case F2dSemanticType.st_object_member:if(this.setObjectMember(a))return;default:this.unhandledTypeWarning("parseInt",b)}return a};
F2D.prototype.parseVoid=function(){var a=this.stream.getVarints();switch(a){case F2dSemanticType.st_fill_off:this.fill=!1;break;default:this.unhandledTypeWarning("parseVoid",a)}};
F2D.prototype.parseVarint=function(){var a=this.stream,b=a.getVarints(),a=a.getVarints();switch(b){case F2dSemanticType.st_line_weight:this.lineWeight=this.tx(a);break;case F2dSemanticType.st_object_id:case F2dSemanticType.st_markup_id:this.objectNumber=a;this.maxObjectNumber=Math.max(this.maxObjectNumber,a);break;case F2dSemanticType.st_layer:this.layer=this.layersMap[a];break;case F2dSemanticType.st_font_ref:this.fontId=a;break;case F2dSemanticType.st_object_member:if(this.setObjectMember(a))return}return a};
F2D.prototype.parseFloat=function(){var a=this.stream,b=a.getVarints(),a=a.getFloat32();switch(b){case F2dSemanticType.st_object_member:if(this.setObjectMember(a))return}return a};F2D.prototype.parseCircularArc=function(){var a=this.stream,b=a.getVarints();if(!this.parserAssert(b,F2dSemanticType.st_arc,"parseCircularArc")){var b=this.parsePointPositions(),c=a.getVarints(),e=a.getFloat32(),a=a.getFloat32();this.actOnCircularArc(b[0],b[1],e,a,this.sx(c))}};
F2D.prototype.parseCircle=function(){var a=this.stream,b=a.getVarints();this.parserAssert(b,F2dSemanticType.st_arc,"parseCircle")||(b=this.parsePointPositions(),a=a.getVarints(),this.actOnCompleteCircle(b[0],b[1],this.sx(a)))};
F2D.prototype.parseArc=function(){var a=this.stream,b=a.getVarints();if(!this.parserAssert(b,F2dSemanticType.st_arc,"parseArc")){var b=this.parsePointPositions(),c=a.getVarints(),e=a.getVarints(),d=a.getFloat32(),g=a.getFloat32(),a=a.getFloat32();this.actOnArc(b[0],b[1],g,a,this.sx(c),this.sy(e),d)}};
F2D.prototype.parseDataType=function(){var a=this.stream.getVarints();switch(a){case F2dDataType.dt_void:this.parseVoid();break;case F2dDataType.dt_int:this.parseInt();break;case F2dDataType.dt_object:this.parseObject();break;case F2dDataType.dt_varint:this.parseVarint();break;case F2dDataType.dt_point_varint:this.parsePoint();break;case F2dDataType.dt_float:this.parseFloat();break;case F2dDataType.dt_point_varint_array:this.parsePointsArray();break;case F2dDataType.dt_circular_arc:this.parseCircularArc();
break;case F2dDataType.dt_circle:this.parseCircle();break;case F2dDataType.dt_arc:this.parseArc();break;case F2dDataType.dt_int_array:this.parseIntArray();break;case F2dDataType.dt_varint_array:this.parseVarintArray();break;case F2dDataType.dt_byte_array:this.parseByteArray();break;case F2dDataType.dt_string:this.parseString();break;default:this.error=!0,debug("Data type not supported yet: "+a)}};
F2D.prototype.parse=function(){var a=this.stream=new InputStream(this.data),b=a.getString(3);if("F2D"!=b)debug("Invalid F2D header : "+b);else if(b=a.getString(2),"01"!=b)debug("Only support f2d major version 1; actual version is : "+b);else if("."!=a.getString(1))debug("Invalid version delimiter.");else{for(a.getString(2);a.offset<a.byteLength;){this.parseDataType();if(this.error)break;this.opCount++}this.flushBuffer(0,!0);this.data=this.stream=this.currentVbb=null;debug("F2d parse: data types count : "+
this.opCount)}};F2D.prototype.parseFrames=function(a){if(this.data)for(var b=this.stream=new InputStream(this.data);b.offset<b.byteLength;){this.parseDataType();if(this.error)break;this.opCount++}else a||debug("Unexpected F2D parse state: If there is no data, we only expect a flush command, but flush was false.");a&&this.flushBuffer(0,!0);this.data=this.stream=null};
F2D.prototype.actOnPolylinePointsArray=function(a){this.flushBuffer();this.numPolylines++;for(var b=a.length/2,c=a[0],e=a[1],d=1;d<b;++d){var g=a[2*d],f=a[2*d+1];this.currentVbb.addSegment(c,e,g,f,this.lineWeight,this.color,this.objectNumber,this.layer);c=g;e=f}this.numLineSegs+=b-1};F2D.prototype.actOnDot=function(a){this.actOnCompleteCircle(a[0],a[1],this.sx(1))};
F2D.prototype.actOnCompleteCircle=function(a,b,c){this.flushBuffer();this.numCircles++;this.fill?this.currentVbb.addSegment(a,b,a,b,2*c,this.color,this.objectNumber,this.layer,!0,!1,!0):this.currentVbb.addCircularArc(a,b,0,2*Math.PI,c,this.lineWeight,this.color,this.objectNumber,this.layer)};F2D.prototype.actOnCircularArc=function(a,b,c,e,d){this.numCircles++;this.flushBuffer();this.currentVbb.addCircularArc(a,b,c,e,d,this.lineWeight,this.color,this.objectNumber,this.layer)};
F2D.prototype.actOnArc=function(a,b,c,e,d,g,f){this.numEllipses++;this.flushBuffer();this.currentVbb.addEllipticalArc(a,b,c,e,d,g,f,this.lineWeight,this.color,this.objectNumber,this.layer)};
F2D.prototype.actOnRaster=function(){if(this.manifestAvailable){this.flushBuffer(4,!0);var a=this.parseObjState.raster,b=a.position,c=a.height,e=a.imageId,d=b[0],b=b[1],a=this.sx(a.width),c=this.sy(c),e={dataURI:this.imageId2URI[e],width:a,height:c};this.currentVbb.addTexturedQuad(d,b-c,a,c,this.objectNumber,this.layer);this.currentImage=e;this.flushBuffer(0,!0)}};F2D.prototype.actOnClip=function(){};F2D.prototype.actOnText=function(){};
F2D.prototype.addPolyTriangle=function(a,b,c,e,d,g,f){function h(a,b){if(a>b){var c=a;a=b;b=c}if(m[a]){var c=m[a],d=c.lastIndexOf(b);-1==d?c.push(b):c[d]=-1}else m[a]=[b]}function k(){for(var c=0,d=m.length;c<d;c++){var e=m[c];if(e)for(var f=0;f<e.length;f++){var g=e[f];-1!=g&&(n.flushBuffer(4),n.currentVbb.addSegment(a[2*c],a[2*c+1],a[2*g],a[2*g+1],p,b?b[c]:n.color,n.objectNumber,n.layer),b&&b[c]!=b[g]&&debug("Gouraud triangle encountered. Will have incorrect antialiasing."))}}}function l(c,d){if(c>
d){var e=c;c=d;d=e}(e=m[c])&&-1!=e.indexOf(d)&&(n.flushBuffer(4),n.currentVbb.addSegment(a[2*c],a[2*c+1],a[2*d],a[2*d+1],p,b?b[c]:n.color,n.objectNumber,n.layer),b&&b[c]!=b[d]&&debug("Gouraud triangle encountered. Will have incorrect antialiasing."))}var n=this,m=null,p=-1;this.objectStack[this.objectStack.length-1]==F2dSemanticType.st_text&&(p=-0.5);if(f)for(m=Array(a.length/2),e=0,d=c.length;e<d;e+=3){g=c[e];var q=c[e+1],s=c[e+2];h(g,q);h(q,s);h(s,g)}if(this.currentVbb.useInstancing)for(d=c.length,
e=0;e<d;e+=3)g=c[e],q=c[e+1],s=c[e+2],this.flushBuffer(4),this.currentVbb.addTriangleGeom(a[2*g],a[2*g+1],a[2*q],a[2*q+1],a[2*s],a[2*s+1],b?b[g]:this.color,this.objectNumber,this.layer),f&&(l(g,q),l(q,s),l(s,g));else{d=a.length/2;this.flushBuffer(d);g=this.currentVbb;q=g.vcount;for(e=0;e<d;++e)g.addVertexPolytriangle(a[2*e],a[2*e+1],0,0,0,b?b[e]:this.color,this.objectNumber,this.layer);d=c.length;for(e=0;e<d;e+=3)g.addTriangle(q+c[e],q+c[e+1],q+c[e+2]);f&&k()}};
F2D.prototype.actOnPolyTriangle=function(){var a=this.parseObjState.polyTriangle;this.parseObjState.polyTriangle={};var b=a.points,c=a.indices,a=a.colors;b&&c?(this.numPolytriangles++,this.numTriangles+=c.length/3,this.addPolyTriangle(b,a,c,this.color,this.layer,this.objectNumber,!0)):debug("Malformed polytriangle.")};function F2DProbe(){this.data=null;this.frameEnd=this.frameStart=0;this.stream=null;this.opCount=0;this.marker={frameStart:this.frameStart,frameEnd:this.frameEnd}}
F2DProbe.prototype.load=function(a){this.data=a;this.frameStart=0;this.stream?(this.stream.reset(this.data),this.stream.seek(0),this.frameEnd=0):(this.stream=new CheckedInputStream(this.data),this.stream.seek(8),this.frameEnd=this.frameStart=8);this.probe();this.marker.frameStart=this.frameStart;this.marker.frameEnd=this.frameEnd;return this.marker};
var F2dProbeDataType={dt_object:0,dt_void:1,dt_byte:2,dt_int:3,dt_float:4,dt_double:5,dt_varint:6,dt_point_varint:7,dt_byte_array:32,dt_int_array:33,dt_float_array:34,dt_double_drray:35,dt_varint_array:36,dt_point_varint_array:37,dt_arc:38,dt_circle:39,dt_circular_arc:40,dt_string:63,dt_last_data_type:127},F2dProbeSemanticType={st_object_member:0,st_fill:1,st_fill_off:2,st_clip_off:3,st_layer:4,st_link:5,st_line_weight:6,st_miter_angle:7,st_miter_length:8,st_line_pattern_ref:9,st_back_color:10,st_color:11,
st_markup:12,st_object_id:13,st_markup_id:14,st_reset_rel_offset:15,st_font_ref:16,st_begin_object:32,st_clip:33,st_line_caps:34,st_line_join:35,st_line_pattern_def:36,st_font_def:37,st_sheet:42,st_arc:43,st_polyline:44,st_raster:45,st_text:46,st_polytriangle:47,st_dot:48,st_end_object:63,st_last_semantic_type:127};F2DProbe.prototype.readColor=function(){var a=this.stream;a.getVarints();a.getVarints();a.skipUint32()};F2DProbe.prototype.parsePointPositions=function(){this.stream.getVarints();this.stream.getVarints()};
F2DProbe.prototype.unhandledTypeWarning=function(a,b){debug("Unhandled semantic type when probing F2d : "+b+" in function "+a)};F2DProbe.prototype.parseObject=function(){this.stream.getVarints()};F2DProbe.prototype.parseString=function(){var a=this.stream;a.getVarints();var b=a.getVarints();a.skipBytes(b)};F2DProbe.prototype.parsePoint=function(){this.stream.getVarints();this.parsePointPositions()};
F2DProbe.prototype.parseVarintArray=function(){var a=this.stream;a.getVarints();for(var b=a.getVarints(),c=0;c<b;++c)a.getVarints()};F2DProbe.prototype.parseByteArray=function(){var a=this.stream;a.getVarints();var b=a.getVarints();a.skipBytes(b)};F2DProbe.prototype.parseEndOfObject=function(){var a=this.stream;a.getVarints();a.getVarints()};F2DProbe.prototype.parsePointsArray=function(a){a=this.stream;a.getVarints();if(a=a.getVarints()){a/=2;for(var b=0;b<a;++b)this.parsePointPositions()}};
F2DProbe.prototype.parsePoint=function(a){this.stream.getVarints();this.parsePointPositions()};F2DProbe.prototype.parseInt=function(){var a=this.stream,b=a.getVarints();switch(b){case F2dProbeSemanticType.st_color:a.skipUint32();break;case F2dProbeSemanticType.st_fill:a.skipUint32();break;default:a.skipUint32(),this.unhandledTypeWarning("parseInt",b)}};
F2DProbe.prototype.parseVoid=function(){var a=this.stream.getVarints();switch(a){case F2dProbeSemanticType.st_fill_off:break;default:this.unhandledTypeWarning("parseVoid",a)}};F2DProbe.prototype.parseVarint=function(){this.stream.getVarints();this.stream.getVarints()};F2DProbe.prototype.parseIntArray=function(){var a=this.stream;a.getVarints();for(var b=a.getVarints(),c=0;c<b;++c)a.skipUint32()};F2DProbe.prototype.parseFloat=function(){var a=this.stream;a.getVarints();a.getFloat32()};
F2DProbe.prototype.parseCircularArc=function(){var a=this.stream;a.getVarints();this.parsePointPositions();a.getVarints();a.getFloat32();a.getFloat32()};F2DProbe.prototype.parseCircle=function(){var a=this.stream;a.getVarints();this.parsePointPositions();a.getVarints()};F2DProbe.prototype.parseArc=function(){var a=this.stream;a.getVarints();this.parsePointPositions();a.getVarints();a.getVarints();a.getFloat32();a.getFloat32();a.getFloat32()};
F2DProbe.prototype.parseDataType=function(){var a=this.stream.getVarints();switch(a){case F2dProbeDataType.dt_void:this.parseVoid();break;case F2dProbeDataType.dt_int:this.parseInt();break;case F2dProbeDataType.dt_object:this.parseObject();break;case F2dProbeDataType.dt_varint:this.parseVarint();break;case F2dProbeDataType.dt_float:this.parseFloat();break;case F2dProbeDataType.dt_point_varint:this.parsePoint();break;case F2dProbeDataType.dt_point_varint_array:this.parsePointsArray();break;case F2dProbeDataType.dt_circular_arc:this.parseCircularArc();
break;case F2dProbeDataType.dt_circle:this.parseCircle();break;case F2dProbeDataType.dt_arc:this.parseArc();break;case F2dProbeDataType.dt_varint_array:this.parseVarintArray();break;case F2dProbeDataType.dt_int_array:this.parseIntArray();break;case F2dProbeDataType.dt_byte_array:this.parseByteArray();break;case F2dProbeDataType.dt_string:this.parseString();break;default:this.error=!0,debug("Bad op code encountered : "+a+" , bail out.")}this.error||(this.frameEnd=this.stream.offset)};
F2DProbe.prototype.probe=function(){var a=this.stream;try{for(;a.offset<a.byteLength;){this.parseDataType();if(this.error)break;this.opCount++}}catch(b){}};function CheckedInputStream(a){this.buffer=a;this.offset=0;this.byteLength=a.length;this.convBuf=new ArrayBuffer(8);this.convUint8=new Uint8Array(this.convBuf);this.convUint16=new Uint16Array(this.convBuf);this.convInt32=new Int32Array(this.convBuf);this.convUint32=new Uint32Array(this.convBuf)}
function OutOfBoundsBufferAccessException(a){this.offset=a;this.message="try to access an offset that is out of bounds: "+this.offset;this.toString=function(){return this.message}}CheckedInputStream.prototype.boundsCheck=function(a){if(a>=this.byteLength)throw new OutOfBoundsBufferAccessException(a);};CheckedInputStream.prototype.seek=function(a){this.boundsCheck(a);this.offset=a};
CheckedInputStream.prototype.getBytes=function(a){this.boundsCheck(this.offset+a);var b=new Uint8Array(this.buffer.buffer,this.offset,a);this.offset+=a;return b};CheckedInputStream.prototype.skipBytes=function(a){this.boundsCheck(this.offset+a);this.offset+=a};CheckedInputStream.prototype.getVarints=function(){var a,b=0,c=0;do this.boundsCheck(this.offset),a=this.buffer[this.offset++],b|=(a&127)<<c,c+=7;while(a&128);return b};
CheckedInputStream.prototype.getUint8=function(){this.boundsCheck(this.offset+1);return this.buffer[this.offset++]};CheckedInputStream.prototype.getUint16=function(){this.boundsCheck(this.offset+2);this.convUint8[0]=this.buffer[this.offset++];this.convUint8[1]=this.buffer[this.offset++];return this.convUint16[0]};CheckedInputStream.prototype.getInt16=function(){var a=this.getUint16();32767<a&&(a|=4294901760);return a};
CheckedInputStream.prototype.getInt32=function(){this.boundsCheck(this.offset+4);var a=this.buffer,b=this.convUint8,c=this.offset;b[0]=a[c];b[1]=a[c+1];b[2]=a[c+2];b[3]=a[c+3];this.offset+=4;return this.convInt32[0]};CheckedInputStream.prototype.getUint32=function(){this.boundsCheck(this.offset+4);var a=this.buffer,b=this.convUint8,c=this.offset;b[0]=a[c];b[1]=a[c+1];b[2]=a[c+2];b[3]=a[c+3];this.offset+=4;return this.convUint32[0]};
CheckedInputStream.prototype.skipUint32=function(){this.boundsCheck(this.offset+4);this.offset+=4};CheckedInputStream.prototype.getFloat32=function(){this.boundsCheck(this.offset+4);this.offset+=4;return 0};CheckedInputStream.prototype.getFloat64=function(){this.boundsCheck(this.offset+8);this.offset+=8;return 0};CheckedInputStream.prototype.reset=function(a){this.buffer=a;this.offset=0;this.byteLength=a.length};AutodeskNamespace("Autodesk.Viewing.Private");var VIEWER2D_NAVIGATION_MODE={PAN:1,ZOOM:2};
Autodesk.Viewing.Private.Viewer2DImpl=function(a,b){this.api=a;this.config=b;this.parent=b.domElement;this.navigationMode=null};Autodesk.Viewing.Private.Viewer2DImpl.prototype.constructor=Autodesk.Viewing.Private.Viewer2DImpl;
Autodesk.Viewing.Private.Viewer2DImpl.prototype.initialize=function(){var a=document.createElement("canvas");a.width=1;a.height=1;this.selCtx=a.getContext("2d");this.selCtx.globalCompositeOperation="copy";this.selCtx.imageSmoothingEnabled=!1;this.container=document.createElement("div");this.container.style.width="100%";this.container.style.height="100%";this.parent.appendChild(this.container);return 0};
Autodesk.Viewing.Private.Viewer2DImpl.prototype.load=function(a){var b=this.config.tileSize?this.config.tileSize:1024,c=this.config.maxZoom?this.config.maxZoom:5,e=a.indexOf("urn:");-1!=e&&(a=a.substr(0,e)+encodeURIComponent(a.substr(e)));var e=[a],d=[];for(a=0;a<e.length;a++){var g=L.tileLayer(e[a]+"/{z}/{x}/c{y}.png",{maxZoom:c,noWrap:!0,continuousWorld:!1,detectRetina:!0,tileSize:b});d.push(g)}var f=this.map=L.map(this.container,{center:new L.LatLng(0,0),zoom:0,zoomControl:!1,attributionControl:!1,
layers:[d[0]]});f.options.crs.scale=function(a){return b*Math.pow(2,a)};c={};for(a=0;a<e.length;a++)c[e[a]]=d[3*a];L.control.layers(c,void 0).addTo(f);c=document.getElementsByClassName("leaflet-control-layers");for(a=0;a<c.length;a++)c[a].style.visibility="hidden";f.on("baselayerchange",function(a){console.log(a);var b=[],c;for(c in f._layers){var d=f._layers[c];d!=a.layer&&b.push(d)}for(c=0;c<b.length;c++)f.removeLayer(b[c]);a.layer.idTileLayer&&(f.addLayer(a.layer.idTileLayer),f.addLayer(a.layer.canvasLayer))});
var h=this,k=!1,l,n,m,p,q;this.mousemove=function(a){if(k&&h.navigationMode===VIEWER2D_NAVIGATION_MODE.ZOOM){var b=a.clientX-l,c=a.clientY-n,c=-c;if(2<Math.abs(b)||2<Math.abs(c))b=Math.abs(b)>Math.abs(c)?b:c,b=Math.round(m+b/q),b=Math.max(f.getMinZoom(),Math.min(b,f.getMaxZoom())),f.setZoomAround(p,b,{animate:!0}),a.preventDefault(),a.stopPropagation()}};f.on("mousedown",function(a){k=!0;if(h.navigationMode===VIEWER2D_NAVIGATION_MODE.ZOOM){l=a.originalEvent.clientX;n=a.originalEvent.clientY;m=f.getZoom();
p=f.getCenter();var b=f.getSize(),b=b.x<b.y?b.x:b.y,c=f.getMaxZoom()-f.getMinZoom();q=b/(2*c);f.scrollWheelZoom.disable();window.addEventListener("mousemove",h.mousemove,!1);a.originalEvent.preventDefault();a.originalEvent.stopPropagation()}});f.on("mouseup",function(a){k=!1;h.navigationMode===VIEWER2D_NAVIGATION_MODE.ZOOM&&(f.scrollWheelZoom.enable(),window.removeEventListener("mousemove",h.mousemove,!1),a.originalEvent.preventDefault(),a.originalEvent.stopPropagation())});this.setNavigationMode(VIEWER2D_NAVIGATION_MODE.PAN);
this.keyup=function(a){var b=document.activeElement.nodeName;if("INPUT"!==b&&"TEXTAREA"!==b){b=!1;if(27===a.keyCode)h.api.fireEvent({type:Autodesk.Viewing.ESCAPE_EVENT}),b=!0;else if(36===a.keyCode||70===a.keyCode||72===a.keyCode)h.goHome(),b=!0;b&&(a.preventDefault(),a.stopPropagation())}};window.addEventListener("keyup",this.keyup,!1);f.fitWorld();return!0};
Autodesk.Viewing.Private.Viewer2DImpl.prototype.uninitialize=function(){window.removeEventListener("mousemove",this.mousemove,!1);window.removeEventListener("keyup",this.keyup,!1);this.map.remove()};Autodesk.Viewing.Private.Viewer2DImpl.prototype.resize=function(){this.map.invalidateSize(!1)};
Autodesk.Viewing.Private.Viewer2DImpl.prototype.setNavigationMode=function(a){var b=!1;this.navigationMode!==a&&(this.navigationMode=a,this.map&&(a===VIEWER2D_NAVIGATION_MODE.PAN?(this.map.dragging.enable(),window.removeEventListener("mousemove",this.mousemove,!1)):a===VIEWER2D_NAVIGATION_MODE.ZOOM&&this.map.dragging.disable()),this.api.fireEvent({type:Autodesk.Viewing.NAVIGATION_MODE_CHANGED_EVENT,value:a}),b=!0);return b};
Autodesk.Viewing.Private.Viewer2DImpl.prototype.goHome=function(){this.map.setView([0,0],0,{reset:!0})};AutodeskNamespace("Autodesk.Viewing.Private");Autodesk.Viewing.Private.inWorkerThread="undefined"!==typeof self&&"undefined"===typeof window;Autodesk.Viewing.Private.RefreshTokenHandler=function(){};Autodesk.Viewing.Private.RefreshTokenHandler.prototype.shouldRefreshToken=function(a,b,c){return 401===a};Autodesk.Viewing.Private.RefreshTokenHandler.prototype.refreshToken=function(a,b){};
Autodesk.Viewing.Private.ViewingServiceRefreshTokenHandler=function(){Autodesk.Viewing.Private.RefreshTokenHandler.call(this)};Autodesk.Viewing.Private.ViewingServiceRefreshTokenHandler.prototype=Object.create(Autodesk.Viewing.Private.RefreshTokenHandler.prototype);Autodesk.Viewing.Private.ViewingServiceRefreshTokenHandler.prototype.constructor=Autodesk.Viewing.Private.ViewingServiceRefreshTokenHandler;
Autodesk.Viewing.Private.ViewingServiceRefreshTokenHandler.prototype.shouldRefreshToken=function(a,b,c){b=!1;401===a?(a="string"===typeof c&&""!==c?JSON.parse(c):c,b=""===c||a.hasOwnProperty("errorCode")&&"AUTH-006"===a.errorCode):b=403===a;return b};
Autodesk.Viewing.Private.ViewingServiceRefreshTokenHandler.prototype.refreshToken=function(a,b){var c=null;Autodesk.Viewing.Private.refreshToken&&(c=Autodesk.Viewing.Private.refreshToken());c?0===Autodesk.Viewing.Private.env.indexOf("Autodesk")?Autodesk.Viewing.Private.setApigeeTokenInCookie(c,a,b):Autodesk.Viewing.Private.setAuthTokenInCookie(c,a,b):b&&b(null)};Autodesk.Viewing.Private.WorkerViewingServiceRefreshTokenHandler=function(){Autodesk.Viewing.Private.ViewingServiceRefreshTokenHandler.call(this)};
Autodesk.Viewing.Private.WorkerViewingServiceRefreshTokenHandler.prototype=Object.create(Autodesk.Viewing.Private.ViewingServiceRefreshTokenHandler.prototype);Autodesk.Viewing.Private.WorkerViewingServiceRefreshTokenHandler.prototype.constructor=Autodesk.Viewing.Private.WorkerViewingServiceRefreshTokenHandler;
Autodesk.Viewing.Private.WorkerViewingServiceRefreshTokenHandler.prototype.refreshToken=function(a,b){Autodesk.Viewing.Private.inWorkerThread?(self.addEventListener("message",function(c){c.data&&c.data.tokenRefreshed?a(c):b(c)}),self.postMessage({refreshToken:!0})):Autodesk.Viewing.Private.ViewingServiceRefreshTokenHandler.prototype.refreshToken.call(this,a,b)};Autodesk.Viewing.Private.Xhr=function(a,b){this.request=new XMLHttpRequest;this.withCredentials=a;this.refreshTokenHandler=b};
Autodesk.Viewing.Private.Xhr.prototype.generateUrl=function(a,b){var c=this.getDefaultQueryParameters();b&&(c+="&"+b);c&&(a=a+"?"+c);return a};Autodesk.Viewing.Private.Xhr.prototype.getDefaultHeaders=function(){return{}};Autodesk.Viewing.Private.Xhr.prototype.getDefaultQueryParameters=function(){return""};Autodesk.Viewing.Private.Xhr.prototype.addHeaders=function(a){var b=this.getDefaultHeaders();a&&0<a.length&&b.push.apply(b,a);for(var c in b)this.request.setRequestHeader(c,b[c])};
Autodesk.Viewing.Private.Xhr.prototype.get=function(a,b,c,e){var d=this;e=e?e:{};a=d.generateUrl(a,e?e.queryParams:null);try{var g=e.hasOwnProperty("asynchronous")?e.asynchronous:!0;d.request.open("GET",a,g);e.hasOwnProperty("responseType")&&(d.request.responseType=e.responseType);d.request.withCredentials=d.withCredentials;d.addHeaders(e.hasOwnProperty("headers")?e.headers:[]);var f=function(f){(e.hasOwnProperty("retryOnAuthenticationFail")?e.retryOnAuthenticationFail:1)&&d.refreshTokenHandler&&
d.refreshTokenHandler.shouldRefreshToken(d.request.status,d.request.statusText,"text"===d.request.responseType||""===d.request.responseType?d.request.responseText:"")?d.refreshTokenHandler.refreshToken(function(f){d.request=new XMLHttpRequest;e.retryOnAuthenticationFail=!1;d.get(a,b,c,e)},function(b){c(d.request.status,d.request.statusText,{url:a})}):c(d.request.status,d.request.statusText,{url:a})},h=function(a){200===d.request.status?b(d.request.response?d.request.response:d.request.responseText):
f(a)};g&&(d.request.onload=h,d.request.onerror=f,d.request.ontimeout=f);d.request.send();g||h(null)}catch(k){c(d.request.status,d.request.statusText,{url:a,exception:k})}};
Autodesk.Viewing.Private.ViewingServiceXhr=function(a,b,c){var e=c&&c.hasOwnProperty("refreshTokenHandler")?c.refreshTokenHandler:new Autodesk.Viewing.Private.WorkerViewingServiceRefreshTokenHandler,d=!0;c&&c.hasOwnProperty("withCredentials")&&(d=c.withCredentials);Autodesk.Viewing.Private.Xhr.call(this,d,e);this.api=b;this.baseUrl=a;this.options=c};Autodesk.Viewing.Private.ViewingServiceXhr.prototype=Object.create(Autodesk.Viewing.Private.Xhr.prototype);
Autodesk.Viewing.Private.ViewingServiceXhr.prototype.constructor=Autodesk.Viewing.Private.ViewingServiceXhr;
Autodesk.Viewing.Private.ViewingServiceXhr.prototype.generateUrl=function(a,b){if(0===a.indexOf("urn:")){"items"!==this.api&&(a=a.substr(4));var c=this.options&&this.options.hasOwnProperty("encodeUrn")?this.options.encodeUrn:!0;a="bubbles"===this.api&&0==Autodesk.Viewing.Private.env.indexOf("Autodesk")?this.baseUrl+"/"+(c?encodeURIComponent(a):a):this.baseUrl+"/"+this.api+"/"+(c?encodeURIComponent(a):a)}return Autodesk.Viewing.Private.Xhr.prototype.generateUrl.call(this,a,b)};
Autodesk.Viewing.Private.ViewingServiceXhr.prototype.getDefaultHeaders=function(){return{}};Autodesk.Viewing.Private.ViewingServiceXhr.prototype.getDefaultQueryParameters=function(){return"domain="+(Autodesk.Viewing.Private.inWorkerThread?self.location.hostname:window.location.hostname)};
var Xhr=function(){var a=function(a,c,e){this.xhr=new XMLHttpRequest;this.errorHandler=a;this.success=!1;this.viewing_url=e;this.auth=c};a.prototype.generateUrl=function(a,c,e){var d=a.indexOf("urn:");0===d&&this.viewing_url&&((e=e&&e.feature?e.feature:null)?"render"==e?(a=a.substr(4),a=this.viewing_url+"/"+e+"/"+encodeURIComponent(a)):"bubbles"==e?(a=a.substr(4),a=this.viewing_url+"/"+e+"/"+encodeURIComponent(a)):"comments"==e?(a=a.substr(4),a=this.viewing_url+"/"+e+"/file/"+encodeURIComponent(a)):
a=this.viewing_url+"/"+e+"/"+encodeURIComponent(a.substr(d)):a=this.viewing_url+"/items/"+encodeURIComponent(a.substr(d)));c&&(a=a+"?"+c);return a};a.prototype.addHeaders=function(a){for(var c in a)this.xhr.setRequestHeader(c,a[c])};a.prototype.get=function(a,c,e,d,g,f){a=this.generateUrl(a,f,{feature:g});try{this.xhr.open("GET",a,!!d),this.xhr.responseType=e,this.success=!1,this.auth&&(this.xhr.withCredentials=!0),d&&(this.xhr.onload=d),this.addHeaders(c),this.xhr.send()}catch(h){return this.errorHandler&&
this.errorHandler.networkFailure(a,h),null}this.errorCheck(a,200);return this.xhr.response};a.prototype.post=function(a,c,e,d,g,f){a=this.generateUrl(a,null,{feature:f});c["Content-Type"]||(c["Content-Type"]="application/json");try{this.xhr.open("POST",a,!!g),this.xhr.responseType=d,this.success=!1,this.auth&&(this.xhr.withCredentials=!0),g&&(this.xhr.onload=g),this.addHeaders(c),this.xhr.send(e)}catch(h){return this.errorHandler&&this.errorHandler.networkFailure(a,h),null}this.errorCheck(a,200,201);
return this.xhr.response};a.prototype.getRange=function(a,c,e,d,g,f){a=this.generateUrl(path);c.Range="bytes="+d+"-"+g;try{this.xhr.open("GET",a,!!f),this.xhr.responseType=e,this.success=!1,this.auth&&(this.xhr.withCredentials=!0),f&&(this.xhr.onload=f),this.addHeaders(c),this.xhr.send()}catch(h){return this.errorHandler&&this.errorHandler.networkFailure(a,h),null}this.errorCheck(a,206);return this.xhr.response};a.prototype.head=function(a){a=this.generateUrl(path);try{this.xhr.open("GET",a,!1),this.success=
!1,this.auth&&(this.xhr.withCredentials=!0),this.addHeaders([]),this.xhr.send()}catch(c){return this.errorHandler&&this.errorHandler.networkFailure(a,c),null}this.errorCheck(a,200);a=[];a["Accept-Ranges"]=this.xhr.getResponseHeader("Accept-Ranges");a["Content-Length"]=this.xhr.getResponseHeader("Content-Length");return a};a.prototype.errorCheck=function(a,c){if(4===this.xhr.readyState&&this.xhr.status){var e;for(e=1;e<arguments.length&&this.xhr.status!==arguments[e];e++);e===arguments.length&&this.errorHandler?
this.errorHandler.unsuccessfulResponse(a,this.xhr.status,this.xhr.statusText):this.success=!0}else this.success=!0};return a}(),XhrErrorHandler=function(){var a=function(a){this.host=a;this.ignoreFileNotFound=!1};a.prototype.networkFailure=function(a,c){this.host.raiseError(Autodesk.Viewing.ErrorCodes.NETWORK_FAILURE,"Network failure",{url:a,exception:c.toString(),stack:c.stack})};a.prototype.unsuccessfulResponse=function(a,c,e){403==c?this.host.raiseError(Autodesk.Viewing.ErrorCodes.NETWORK_ACCESS_DENIED,
"Access denied to remote resource",{url:a,httpStatus:c,httpStatusText:e}):404==c?this.ignoreFileNotFound||this.host.raiseError(Autodesk.Viewing.ErrorCodes.NETWORK_FILE_NOT_FOUND,"Remote resource not found",{url:a,httpStatus:c,httpStatusText:e}):500<=c&&600>c?this.host.raiseError(Autodesk.Viewing.ErrorCodes.NETWORK_SERVER_ERROR,"Server error when accessing resource",{url:a,httpStatus:c,httpStatusText:e}):this.host.raiseError(Autodesk.Viewing.ErrorCodes.NETWORK_UNHANDLED_RESPONSE_CODE,"Unhandled response code from server",
{url:a,httpStatus:c,httpStatusText:e})};return a}();AutodeskNamespace("Autodesk.Viewing.Private");Autodesk.Viewing.Private.Logger=function(a){this.queue=[];this.console=a.console;this.viewingservice=a.viewingservice;this.webstorage=a.webstorage;this.endpoint=a.endpoint+"/logs/";this.flushThreshold=a.flushThreshold;this.viewingservice&&(this.xhr=new XMLHttpRequest);this.lastFlushTime=Date.now()};Autodesk.Viewing.Private.Logger.prototype.bindURN=function(a){this.urn=a};
Autodesk.Viewing.Private.Logger.prototype.flush=function(){if(this.queue.length){var a=JSON.stringify(this.queue);if(this.viewingservice)try{var b=this.xhr;b.open("POST",this.endpoint+encodeURIComponent(this.urn),!0);b.setRequestHeader("Access-Control-Allow-Credentials","true");b.setRequestHeader("Access-Control-Allow-Origin","*");b.setRequestHeader("Content-Type","application/json;charset=utf-8");b.withCredentials=!0;b.send(a)}catch(c){}this.queue=[];this.lastFlushTime=Date.now()}};
Autodesk.Viewing.Private.Logger.prototype.log=function(a,b){this.queue.push(a);(this.queue.length>this.flushThreshold||b)&&this.flush()};var propdb=null,propdbFailed=!1;
function loadPropertyPacks(a,b,c){function e(b){if(!b){if(f){propdbFailed=!0;c(null);return}f=!0;b=[];b.push({filename:"objects_attrs.json",storage:d.attrs});b.push({filename:"objects_vals.json",storage:d.values});b.push({filename:"objects_avs.json",storage:d.avs});b.push({filename:"objects_offs.json",storage:d.offsets});g=b}0===g.length?(propdb=new PropertyDatabase(d),c(propdb),propdbFailed=!1):(b=g.shift(),requestFile(b.filename,a,e,b.storage))}if(propdb)c(propdb);else if(propdbFailed)c(null);else if(b=
a.propertydb){var d={ids:{},attrs:{},offsets:{},values:{},avs:{}},g=[];g.push({filename:b.attrs.length?b.attrs[0]:"objects_attrs.json.gz",storage:d.attrs});g.push({filename:b.values.length?b.values[0]:"objects_vals.json.gz",storage:d.values});g.push({filename:b.avs.length?b.avs[0]:"objects_avs.json.gz",storage:d.avs});g.push({filename:b.offsets.length?b.offsets[0]:"objects_offs.json.gz",storage:d.offsets});var f=!1;b=g.shift();requestFile(b.filename,a,e,b.storage)}else propdbFailed=!0,c(null)}
function doPropertyGet(a,b){var c=b.dbId;loadPropertyPacks(b,c,function(b){b&&(b=b.getObjectProperties(c),a.postMessage({result:b,dbId:c}))})}
function computeTreeBBoxes(a,b,c){var e=6*a.dbId;b[e]=b[e+1]=b[e+2]=Infinity;b[e+3]=b[e+4]=b[e+5]=-Infinity;var d=a.children;if(d)for(var g=0,f=d.length;g<f;g++){computeTreeBBoxes(d[g],b,c);for(var h=6*(d[g].dbId|0),k=0;3>k;k++)b[e+k]>b[h+k]&&(b[e+k]=b[h+k]),b[e+k+3]<b[h+k+3]&&(b[e+k+3]=b[h+k+3])}if(void 0!==a.fragIds)if(!Array.isArray(a.fragIds))for(d=6*(a.fragIds|0),k=0;3>k;k++)b[e+k]>c[d+k]&&(b[e+k]=c[d+k]),b[e+k+3]<c[d+k+3]&&(b[e+k+3]=c[d+k+3]);else if(a.fragIds.length)for(g=0;g<a.fragIds.length;g++)for(d=
6*(a.fragIds[g]|0),k=0;3>k;k++)b[e+k]>c[d+k]&&(b[e+k]=c[d+k]),b[e+k+3]<c[d+k+3]&&(b[e+k+3]=c[d+k+3])}function buildDbIdToFragMap(a){for(var b={},c=0,e=a.length;c<e;c++){var d=a[c],g=b[d];void 0===g?b[d]=c:Array.isArray(g)?g.push(c):b[d]=[g,c]}return b}
function doObjectTreeParse(a,b){loadPropertyPacks(b,null,function(c){if(c){var e;b.fragToDbId&&(e=buildDbIdToFragMap(b.fragToDbId));var d=c.findRootNodes(),g,f=[0],h=c.getObjectCount();if(d&&d.length)if(1==d.length)g={dbId:d[0]},c.buildObjectTree(g,e,0,f);else{g={dbId:0,children:[]};for(var k=0;k<d.length;k++){var l={dbId:d[k]};g.children.push(l);c.buildObjectTree(l,e,0,f)}}a.postMessage({instanceTree:g,maxTreeDepth:f[0],objectCount:h});b.fragBoxes&&(c=new Float32Array(6*c.getObjectCount()),computeTreeBBoxes(g,
c,b.fragBoxes),a.postMessage({instanceBoxes:c}))}else a.postMessage({instanceTree:null,maxTreeDepth:0})})}
function requestFile(a,b,c,e){var d=b.url+a,g=null,g=-1!==d.indexOf(".gz",d.length-3)?function(b){try{var g=new Uint8Array(b);31==g[0]&&139==g[1]&&(g=(new Zlib.Gunzip(g)).decompress());e[a]=g;c(g)}catch(k){self.raiseError(Autodesk.Viewing.ErrorCodes.BAD_DATA,"Malformed data received when requesting file",{url:d,exception:k.toString(),stack:k.stack}),c(null)}}:function(b){e[a]=rawbuf;c(new Uint8Array(b))};(new Autodesk.Viewing.Private.ViewingServiceXhr(b.viewing_url,"items",{withCredentials:!!b.auth})).get(d,
g,function(a,d,e){if(404!==a)b.onFailureCallback(a,d,e);c(null)},{responseType:"arraybuffer",asynchronous:!1,headers:b.headers,queryParams:b.queryParams})}function doPropertySearch(a,b){loadPropertyPacks(b,null,function(c){c&&(c=c.bruteForceSearch(b.searchText),a.postMessage(c))})}function doCommentsPost(a,b){var c=new Xhr(b.errorHandler,b.auth,b.viewing_url);b.headers["Content-Type"]="text/plain";c=c.post(b.url,b.headers,"{}","text",null,"comments");debug("Receive comment : "+c)}
function doCommentsGet(a,b){}
function doGeomLoad(a,b){(new Autodesk.Viewing.Private.ViewingServiceXhr(b.viewing_url,"items",{withCredentials:!!b.auth})).get(b.url,function(c){a.postMessage({url:b.url,workerId:b.workerId,progress:0.5});try{var e=new PackFileReader(new Uint8Array(c))}catch(d){a.raiseError(Autodesk.Viewing.ErrorCodes.BAD_DATA,"Unhandled exception while reading pack file",{url:b.url,exception:d.toString(),stack:d.stack});a.postMessage(null);return}for(var g=c=!1,f={packId:b.packId,meshIndex:0,mesh:null,workerId:b.workerId,
progress:0},h=0,k=e.getEntryCounts();h<k;h++){try{var l=readGeometry(e,h,null)}catch(n){g||(a.raiseError(Autodesk.Viewing.ErrorCodes.BAD_DATA,"Unhandled exception while reading geometry",{url:b.url,exception:n.toString(),stack:n.stack}),c=g=!0),l=null}f.meshIndex=h;f.mesh=l;f.progress=0.5+(h+1)/k*0.5;if(l){var m=[];m.push(l.vb.buffer);a.postMessage(f,m)}else c||(a.raiseError(Autodesk.Viewing.ErrorCodes.BAD_DATA,"Unable to load geometry",{url:b.url}),c=!0),a.postMessage(f)}},b.onFailureCallback,{responseType:"arraybuffer",
asynchronous:!1,headers:b.headers,queryParams:b.queryParams})}
function doLoadSvf(a,b){(new Autodesk.Viewing.Private.ViewingServiceXhr(b.viewing_url,"items",{withCredentials:!!b.auth})).get(b.url,function(c){a.postMessage({progress:0.5});var e=new Package;b.loadDoneCB=function(c){c?a.postMessage({svf:e}):(a.raiseError(Autodesk.Viewing.ErrorCodes.BAD_DATA,"Failure while loading SVF",{url:b.url}),a.postMessage(null))};try{e.load(b,new Uint8Array(c))}catch(d){a.raiseError(Autodesk.Viewing.ErrorCodes.BAD_DATA,"Unhandled exception while loading SVF",{url:b.url,exception:d.toString(),
stack:d.stack}),a.postMessage(null)}},b.onFailureCallback,{responseType:"arraybuffer",asynchronous:!1,headers:b.headers,queryParams:b.queryParams})}var ENABLE_OCTM_MG2=!1,IS_WORKER="undefined"!==typeof self&&"undefined"===typeof window;
if(IS_WORKER){var f2d=null;IS_CONCAT_BUILD||(importScripts("../AutodeskNamespace.js"),importScripts("../compatibility.js"),importScripts("../render/adsk_three.js"),importScripts("../zlib/gunzip.min.js"),importScripts("../zlib/unzip.min.js"),ENABLE_OCTM_MG2&&(importScripts("../zlib/inflate.min.js"),importScripts("../lmvtk/octm_mg2.js")),importScripts("../lmvtk/InputStream.js"),importScripts("../lmvtk/VbUtils.js"),importScripts("../lmvtk/VertexBufferBuilder.js"),importScripts("../lmvtk/PackReader.js"),
importScripts("../lmvtk/Geoms.js"),importScripts("../lmvtk/Materials.js"),importScripts("../lmvtk/Lights.js"),importScripts("../lmvtk/Cameras.js"),importScripts("../lmvtk/Fragments.js"),importScripts("../lmvtk/Instances.js"),importScripts("../lmvtk/Package.js"),importScripts("../lmvtk/PackReader.js"),importScripts("../lmvtk/Propdb.js"),importScripts("../lmvtk/F2d.js"),importScripts("../lmvtk/F2dProbe.js"),importScripts("../lmvtk/CheckedInputStream.js"),importScripts("../net/Xhr.js"),importScripts("GeomWorker.js"),
importScripts("SvfWorker.js"),importScripts("PropWorker.js"),importScripts("F2dParseWorker.js"),importScripts("F2dStreamWorker.js"),importScripts("CloudRenderingWorker.js"),importScripts("../../api/Viewer.js"),importScripts("../../api/ErrorCodes.js"));self.addEventListener("message",function(a){var b=a.data;if(b.hasOwnProperty("operation")){b.basePath="";if(b.url){var c=b.url.lastIndexOf("/");-1!=c&&(b.basePath=b.url.substr(0,c+1))}b.onFailureCallback=function(a,b,c){403==a?self.raiseError(Autodesk.Viewing.ErrorCodes.NETWORK_ACCESS_DENIED,
"Access denied to remote resource",{url:c.url,httpStatus:a,httpStatusText:b}):404==a?self.raiseError(Autodesk.Viewing.ErrorCodes.NETWORK_FILE_NOT_FOUND,"Remote resource not found",{url:c.url,httpStatus:a,httpStatusText:b}):500<=a&&600>a?self.raiseError(Autodesk.Viewing.ErrorCodes.NETWORK_SERVER_ERROR,"Server error when accessing resource",{url:c.url,httpStatus:a,httpStatusText:b}):c.exception?self.raiseError(Autodesk.Viewing.ErrorCodes.NETWORK_FAILURE,"Network failure",{url:c.url,exception:c.exception.toString(),
stack:c.exception.stack}):self.raiseError(Autodesk.Viewing.ErrorCodes.NETWORK_UNHANDLED_RESPONSE_CODE,"Unhandled response code from server",{url:c.url,httpStatus:a,httpStatusText:b})};b.errorHandler=new XhrErrorHandler(self);a=a.data.operation;"LOAD_GEOMETRY"==a?doGeomLoad(self,b):"LOAD_SVF"==a?doLoadSvf(self,b):"GET_PROPERTIES"==a?doPropertyGet(self,b):"SEARCH_PROPERTIES"==a?doPropertySearch(self,b):"GET_OBJECT_TREE"==a?doObjectTreeParse(self,b):"PARSE_F2D"==a?doParseF2D(self,b):"PARSE_F2D_FRAME"==
a?doParseF2DFrame(self,b):"STREAM_F2D"==a?doStreamF2D(self,b):"CLOUD_RENDERING"==a?doCloudRendering(self,b):"SVF_TO_SPD"==a?doSvfToSpd(self,b):"POST_COMMENTS"==a?doCommentsPost(self,b):"GET_COMMENTS"==a&&doCommentsGet(self,b)}},!1);self.raiseError=function(a,b,c){self.postMessage({error:{code:a,msg:b,args:c}})};var debug=function(a){self.postMessage({debug:1,message:a})}}
function doParseF2D(a,b){if(b.data){a.postMessage({progress:0.5});var c=new F2D(b.metadata,b.manifest,b.basePath,b.f2dLoadOptions);b.loadDoneCB=function(b){b?a.postMessage({f2d:c}):(a.raiseError(Autodesk.Viewing.ErrorCodes.BAD_DATA,"",{}),a.postMessage(null))};try{c.load(b,new Uint8Array(b.data))}catch(e){a.raiseError(Autodesk.Viewing.ErrorCodes.BAD_DATA,"",{exception:e.toString(),stack:e.stack}),a.postMessage(null)}}else a.postMessage(null)}
function doParseF2DFrame(a,b){f2d||(a.postMessage({progress:0.5}),f2d=new F2D(b.metadata,b.manifest,b.basePath,b.f2dLoadOptions),f2d.F2D_MESH_COUNT_OLD=0,a.postMessage({f2dframe:f2d}));b.loadDoneCB=function(c){if(c){if(f2d.meshes.length){c={f2dframe:!0,meshes:f2d.meshes,baseIndex:f2d.F2D_MESH_COUNT_OLD,maxObjectNumber:f2d.maxObjectNumber,bbox:f2d.bbox};b.finalFrame&&(c.finalFrame=!0);for(var d=[],g=0,f=f2d.meshes.length;g<f;++g)d.push(f2d.meshes[g].vb.buffer),d.push(f2d.meshes[g].indices.buffer);
a.postMessage(c,d);f2d.F2D_MESH_COUNT_OLD+=f2d.meshes.length;f2d.meshes=[]}}else a.raiseError(Autodesk.Viewing.ErrorCodes.BAD_DATA,"",{}),a.postMessage(null)};try{f2d.loadFrames(b)}catch(c){a.raiseError(Autodesk.Viewing.ErrorCodes.BAD_DATA,"",{exception:c.toString(),stack:c.stack}),a.postMessage(null)}}var ENABLE_F2D_STREAMING_MODE=!0;
function requestFileF2D(a,b){b.errorHandler.ignoreFileNotFound=!0;var c=new Xhr(b.errorHandler,b.auth,b.viewing_url);if(-1!==a.indexOf(".gz",a.length-3)){var e=c.get(a,b.headers,"arraybuffer");if(c.success)try{var d=new Uint8Array(e);31==d[0]&&139==d[1]&&(d=(new Zlib.Gunzip(d)).decompress());return d}catch(g){return self.raiseError(Autodesk.Viewing.ErrorCodes.BAD_DATA,"Malformed data received when requesting file",{url:a,exception:g.toString(),stack:g.stack}),null}else return null}else return e=c.get(a,
b.headers,"arraybuffer"),c.success?new Uint8Array(e):null}
function doStreamF2D(a,b){function c(a){for(var b="",c=0;c<a.length;c++)b+=String.fromCharCode(a[c]);a=decodeURIComponent(escape(b));return JSON.parse(a)}function e(a,b){for(var c=a.length-b,d=new ArrayBuffer(c),e=new Uint8Array(d,0),f=0,g=b;f<c;f++,g++)e[f]=a.charCodeAt(g)&255;return d}var d=b.url,g=requestFileF2D(b.basePath+"metadata.json.gz",b),f=requestFileF2D(b.basePath+"manifest.json.gz",b);g&&(g=c(g));f&&(f=c(f));g||self.raiseError(Autodesk.Viewing.ErrorCodes.BAD_DATA,"");var h;if(f&&f.assets)for(var k=
f.assets,l=0;l<k.length;l++)if(-1!=d.indexOf(k[l].URI)){h=k[l].usize||0;break}var n=new XMLHttpRequest;n.withCredentials=!!b.auth;var m=new F2DProbe,p=0,q=0,s=!1;n.onreadystatechange=function(){try{if(4==n.readyState){if(ENABLE_F2D_STREAMING_MODE&&0<q){var c=n.responseText,d={type:"F2DSTREAM",finalFrame:!0,finished:!0,progress:1},k=[];s||(d.manifest=f,d.metadata=g,d.basePath=b.basePath,s=!0);if(c.length>q){var l=e(c,q),r=new Uint8Array(l),C=m.load(r),N=l.slice(C.frameStart,C.frameEnd);C.frameEnd>
C.frameStart&&(k.push(N),d.frames=N)}debug("Total text bytes count : "+n.responseText.length);a.postMessage(d,k);return}c=n.responseText;l=e(c,0);d={type:"F2DBLOB",metadata:g,manifest:f,basePath:b.basePath,progress:1,buffer:l};k=[];k.push(l);a.postMessage(d,k)}if(2<n.readyState&&ENABLE_F2D_STREAMING_MODE&&(c=n.responseText,!(q+65536>c.length))){l=e(c,q);if(!p){++p;var G=new Uint8Array(l);if(31==G[0]&&139==G[1]){ENABLE_F2D_STREAMING_MODE=!1;return}}r=new Uint8Array(l);C=m.load(r);C.frameEnd>C.frameStart&&
(N=l.slice(C.frameStart,C.frameEnd),q+=C.frameEnd,k=[],k.push(N),d={type:"F2DSTREAM",frames:N,finalFrame:!1},h&&(d.progress=q/h),s||(d.manifest=f,d.metadata=g,d.basePath=b.basePath,s=!0),a.postMessage(d,k))}}catch(I){debug(I.message)}};try{n.open("GET",d,!0),n.overrideMimeType("text/plain; charset=x-user-defined"),n.send()}catch(r){debug(r.message)}}
var defaultCloudRenderConfig={ConsumerServiceKey:"Viewing",ProductVersion:"2014",UserInfo:{UserID:"",EmailFlag:"true"},Scenes:[{SceneInfo:{SourceFileInfo:{Type:"S3",AccessLevel:"Private"},FileUri:"",SceneId:"FireflyJSDefaultSceneId"},Renderings:[{ImageInfo:{Actions:["Render","ToneMap"],ProductionVersion:"SparkViewer",ImageParams:{RenderResolutionY:1500,RenderResolutionX:2E3,RenderImageFormat:"PNG"},Render:{RenderQuality:"standard",RenderCameraName:"",RenderingType:"image",ExposureType:"Customized"},
ToneMap:{BaseExposure:-9.5,OffsetExposure:0,ExposureValue:14,Shadows:0.2,Midtones:1,Highlights:0.25,WhitePoint:6500,Saturation:1,Type:"Cameraresponse"},EnvironmentOverridePreset:"studio_01",CameraOverride:{Units:"MILLIMETER",FocalDistance:0,Aperture:0,View:{Eye:[-4026.55,2722.32,-527.835],At:[0.834734,-0.454954,-0.310218],Up:[0.233914,-0.0868021,0.968375]},Projection:{isOrthographic:!1,Extent:1,ImageShift:[0,0],NativeAspect:1}}}}]}]};
function doCloudRendering(a,b){var c=new Xhr(b.errorHandler,b.auth,b.viewing_url),e=defaultCloudRenderConfig,d=b.camera,g=b.canvas,f=b.imageNo,h=b.exposureBias,k=b.currentLightPreset,l=new THREE.Vector3;l.x=d.target.x-d.position.x;l.y=d.target.y-d.position.y;l.z=d.target.z-d.position.z;l.normalize();var n=new THREE.Vector3;n.crossVectors(l,d.up);n.normalize();debug("Transform: "+n.x+" "+n.y+" "+n.z+" 0 "+d.up.x+" "+d.up.y+" "+d.up.z+" 0 "+l.x+" "+l.y+" "+l.z+" 0 "+d.position.x+" "+d.position.y+" "+
d.position.z+" 1");var m;1===b.upVector[0]?(n=[d.position.z,d.position.y,d.position.x],l=[l.z,l.y,l.x],m=[d.up.z,d.up.y,d.up.x]):1===b.upVector[1]?(n=[d.position.x,-d.position.z,d.position.y],l=[l.x,-l.z,l.y],m=[d.up.x,-d.up.z,d.up.y]):-1===b.upVector[0]?(n=[d.position.z,-d.position.y,-d.position.x],l=[l.z,-l.y,-l.x],m=[d.up.z,-d.up.y,-d.up.x]):-1===b.upVector[1]?(n=[-d.position.x,-d.position.z,-d.position.y],l=[-l.x,-l.z,-l.y],m=[-d.up.x,-d.up.z,-d.up.y]):-1===b.upVector[2]?(n=[-d.position.x,d.position.y,
-d.position.z],l=[-l.x,l.y,-l.z],m=[-d.up.x,d.up.y,-d.up.z]):(n=[d.position.x,d.position.y,d.position.z],l=[l.x,l.y,l.z],m=[d.up.x,d.up.y,d.up.z]);e.Scenes[0].Renderings[0].ImageInfo.CameraOverride.View.Eye=n;e.Scenes[0].Renderings[0].ImageInfo.CameraOverride.View.At=l;e.Scenes[0].Renderings[0].ImageInfo.CameraOverride.View.Up=m;e.Scenes[0].Renderings[0].ImageInfo.ImageParams.RenderResolutionX=g.width;e.Scenes[0].Renderings[0].ImageInfo.ImageParams.RenderResolutionY=g.height;e.Scenes[0].Renderings[0].ImageInfo.ToneMap.BaseExposure=
h;debug("currentLightPreset = "+k);var p;1===k?p="studio_01":3===k?p="grey_room":4===k?p="photobooth":8===k?p="riverbank":10===k?p="mi360_Plaza":11===k?p="field":12===k?p="crossroads":13===k?p="seaport":14===k?p="mi360_Snow":15===k&&(p="boardwalk");e.Scenes[0].Renderings[0].ImageInfo.EnvironmentOverridePreset=p;debug("Render config is : "+JSON.stringify(e));d=THREE.Math.degToRad(d.fov);0>=d&&(d=1E-4);e.Scenes[0].Renderings[0].ImageInfo.CameraOverride.Projection.Extent=d;debug("fov in radius = "+d);
debug("CameraOverrides: "+JSON.stringify(e.Scenes[0].Renderings[0].ImageInfo.CameraOverride));b.headers["x-ads-mode"]="verbatim";e=c.post(b.url,b.headers,JSON.stringify(e),"text",null,"render");debug(e);var q=JSON.parse(e)[0].JobId;debug("rendering job kicked off with render job id: "+q);a.postMessage({progress:"progress"});var s=setInterval(function(){var d=c.get(b.url,b.headers,"text",null,"render",b.queryParams?b.queryParams+"&jobid="+q:"jobid="+q);debug("from rendering worker : "+d);var d=JSON.parse(d).renderings[0],
e=d.JobInfo.JobStatus;"Complete"==e?(debug("rendering job :"+q+" finished."),d={renderings:{thumbnail:d.Storage.Output.Thumbnail,preview:d.Storage.Output.Preview,image:d.Storage.Output.Image,renderResolutionX:d.ImageParams.RenderResolutionX,renderResolutionY:d.ImageParams.RenderResolutionY,imageNo:f}},a.postMessage(d),clearInterval(s)):"Error"==e&&(d={error:{imageNo:f}},a.postMessage(d),clearInterval(s))},1E4)}
function doSvfToSpd(a,b){var c=new Xhr(b.errorHandler,b.auth,b.viewing_url),e={urn:"dXJuOmFkc2suczM6ZGVyaXZlZC5maWxlOlZpZXdpbmdTZXJ2aWNlVGVzdEFwcC91c2Vycy9NaWNoYWVsX0hhbmAvQVZFTlRBRE9SIExQNzAwLmYzZA",registerType:{rendering:{}}};e.urn=b.svfUrn;debug("svf to spd config : "+JSON.stringify(e));var d=c.post(b.url,b.headers,JSON.stringify(e),"text",null,"bubbles");debug(d);a.postMessage({translationProgress:"progress"});var g,f=setInterval(function(){var d=c.get(b.url+e.urn,b.headers,"text",null,"bubbles",
null);debug("from Svf to Spd worker : "+d);var d=JSON.parse(d),d=getValues(d,"urn"),k;for(k in d)if(-1!=d[k].indexOf(".spd")){g=d[k];break}void 0!=g&&(a.postMessage({translation:{spdUrn:g,camera:b.camera,imageNo:b.imageNo}}),clearInterval(f))},1E3);setTimeout(function(){void 0===g&&(a.postMessage({translationError:{imageNo:b.imageNo}}),clearInterval(f))},3E4)}
function getValues(a,b){var c=[],e;for(e in a)a.hasOwnProperty(e)&&("object"==typeof a[e]?c=c.concat(getValues(a[e],b)):e==b&&c.push(a[e]));return c}
var Autocam=Autocam||function(a,b,c,e,d){function g(b){r=!0;a.target.copy(m.center);a.pivot.copy(m.pivot);a.worldup?a.worldup.copy(m.sceneUpDirection):a.up.copy(m.sceneUpDirection);e&&e(b);r=!1}function f(a,b){var c=new THREE.Vector2(0,0);c.x=a/window.innerWidth;c.y=b/window.innerHeight;return c}function h(a,b,c){var d,e,f,g=0,h=null,k=null,l=m.snapOrbitDeadZone,n=m.orbitMultiplier;"h"==a?(a=m.snapOrbitThresholdH,d=m.snapOrbitAccelerationAX,e=m.snapOrbitAccelerationBX,f=1-m.snapOrbitAccelerationPointX,
k=m.lockDeltaX,h=m.lockedX):(a=m.snapOrbitThresholdV,d=m.snapOrbitAccelerationAY,e=m.snapOrbitAccelerationBY,f=1-m.snapOrbitAccelerationPointY,k=m.lockDeltaY,h=m.lockedY);h?(k+=c,k<-l?g=(k+l)*n*1/e:k>l&&(g=(k-l)*n*1/e)):(g=Math.abs(b)>a?c*n:Math.abs(b)>f*a?0<c*b?c*n*d:c*n*1/d:0<c*b?c*n*e:c*n*1/e,0<g*b&&Math.abs(g)>Math.abs(b)&&(this.lockDeltaX=this.lockDeltaY=0,g=b));return g}function k(a,b){var c=!1,d=window.innerWidth,e=a.x%d,f=window.innerHeight,g=a.y%f,f=0<g?g-b.y:f+g-b.y;30>Math.abs(0<e?e-b.x:
d+e-b.x)&&30>Math.abs(f)&&(c=!0);return c}function l(a,b,c){if(!S||!a){if(a){var d=new THREE.Vector2;d.x=(b.x-c.x)/window.innerWidth;b.x=c.x+(b.x-c.x)%window.innerWidth;d.y=(b.y-c.y)/window.innerHeight;b.y=c.y+(b.y-c.y)%window.innerHeight}S=a}}function n(a){var b=m.sceneFrontDirection.clone().cross(m.sceneUpDirection),c=Math.abs(Math.abs(a.dot(m.sceneUpDirection))-1),d=Math.abs(Math.abs(a.dot(m.sceneFrontDirection))-1);a=Math.abs(Math.abs(a.dot(b))-1);return 1E-5>c||1E-5>d||1E-5>a}var m=this,p=null,
q=null,s=null,r=!1;this.camera=a;this.renderer="WEBGL";this.startState={};this.navApi=b;this.orthographicFaces=!1;var u=Date.now(),w,A=!1;this.showPivot=function(a){d&&d(a)};this.setViewCubeContainer=function(a){s=a};this.setWorldUpVector=function(a){!r&&a&&0<a.lengthSq()&&!a.normalize().equals(this.sceneUpDirection)&&(this.sceneUpDirection.copy(a),this.sceneFrontDirection.copy(this.getWorldFrontVector()),this.cubeFront.copy(this.sceneFrontDirection).cross(this.sceneUpDirection).normalize(),p&&requestAnimationFrame(p.render))};
this.getWorldUpVector=function(){return this.sceneUpDirection.clone()};this.getWorldRightVector=function(){var a=this.sceneUpDirection.clone();Math.abs(a.z)<=Math.abs(a.y)?a.set(a.y,-a.x,0):0<=a.z?a.set(a.z,0,-a.x):a.set(-a.z,0,a.x);return a.normalize()};this.getWorldFrontVector=function(){return this.getWorldUpVector().cross(this.getWorldRightVector()).normalize()};this.goToView=function(a){this.navApi.getIsLocked()||(a={position:a.position.clone(),up:a.up.clone(),center:a.center.clone(),pivot:a.pivot.clone(),
fov:a.fov,worldUp:a.worldUp.clone(),isOrtho:a.isOrtho},m.elapsedTime=0,this.animateTransition(a))};this.getCurrentView=function(){return{position:a.position.clone(),up:a.up.clone(),center:this.center.clone(),pivot:this.pivot.clone(),fov:a.fov,worldUp:this.sceneUpDirection.clone(),isOrtho:!1===a.isPerspective}};this.setCurrentViewAsHome=function(a){a?(this.navApi.setRequestFitToView(!0),A=!0):this.homeVector=this.getCurrentView()};this.setHomeViewFrom=function(a){var b=a.pivot?a.pivot:this.center,
c=a.target?a.target:this.pivot,d=a.worldup?a.worldup:this.sceneUpDirection;this.homeVector={position:a.position.clone(),up:a.up.clone(),center:c.clone(),pivot:b.clone(),fov:a.fov,worldUp:d.clone(),isOrtho:!1===a.isPerspective};this.originalHomeVector={position:a.position.clone(),up:a.up.clone(),center:c.clone(),pivot:b.clone(),fov:a.fov,worldUp:d.clone(),worldFront:this.sceneFrontDirection.clone(),isOrtho:!1===a.isPerspective}};this.toPerspective=function(){a.isPerspective||(a.toPerspective(),g(!1))};
this.toOrthographic=function(){a.isPerspective&&(a.toOrthographic(),g(!1))};this.setOrthographicFaces=function(a){this.orthographicFaces=a};this.goHome=function(){this.navApi.getIsLocked()||(this.navApi.setPivotSetFlag(!1),this.goToView(this.homeVector))};this.resetHome=function(){this.homeVector.position.copy(this.originalHomeVector.position);this.homeVector.up.copy(this.originalHomeVector.up);this.homeVector.center.copy(this.originalHomeVector.center);this.homeVector.pivot.copy(this.originalHomeVector.pivot);
this.homeVector.fov=this.originalHomeVector.fov;this.homeVector.worldUp.copy(this.originalHomeVector.worldUp);this.homeVector.isOrtho=this.originalHomeVector.isOrtho;this.goHome()};this.getView=function(){return this.center.clone().sub(a.position)};this.setCameraUp=function(b){var c=this.dir.clone(),d=c.cross(b).normalize();0===d.lengthSq()&&(c.copy(this.dir),b.z>b.y?c.y+=1E-4:c.z+=1E-4,d=c.cross(b).normalize());a.up.copy(d).cross(this.dir).normalize()};(function V(){requestAnimationFrame(V);var a=
Date.now();w=a-u;u=a})();this.ortho=!1;this.center=a.target?a.target.clone():new THREE.Vector3(0,0,0);this.pivot=a.pivot?a.pivot.clone():this.center.clone();this.sceneUpDirection=a.up.clone();this.sceneFrontDirection=this.getWorldFrontVector();this.dir=this.getView();this.setCameraUp(a.up);this.saveCenter=this.center.clone();this.savePivot=this.pivot.clone();this.saveEye=a.position.clone();this.saveUp=a.up.clone();var v,B,C,N;this.cubeFront=this.sceneFrontDirection.clone().cross(this.sceneUpDirection).normalize();
this.setHomeViewFrom(a);var G=new THREE.Quaternion,I=new THREE.Quaternion,H=new THREE.Quaternion,F=new THREE.Quaternion,P,z;this.userPanSpeed=0.5;this.userLookSpeed=2;this.userHeightSpeed=5;this.walkMultiplier=1;this.userZoomSpeed=1.015;this.orbitMultiplier=5;this.currentlyAnimating=!1;this.alignOrbitUpDirection=this.preserveOrbitUpDirection=a.keepSceneUpright=!0;this.doCustomOrbit=this.constrainOrbitVertical=this.constrainOrbitHorizontal=!1;this.snapOrbitDeadZone=0.045;this.snapOrbitThresholdH=this.snapOrbitThresholdV=
THREE.Math.degToRad(15);this.snapOrbitAccelerationAX=this.snapOrbitAccelerationAY=1.5;this.snapOrbitAccelerationBX=this.snapOrbitAccelerationBY=2;this.snapOrbitAccelerationPointX=this.snapOrbitAccelerationPointY=0.5;this.alignDirTable=Array(26);this.alignDirTable[0]=new THREE.Vector3(-1,0,0);this.alignDirTable[1]=new THREE.Vector3(1,0,0);this.alignDirTable[2]=new THREE.Vector3(0,-1,0);this.alignDirTable[3]=new THREE.Vector3(0,1,0);this.alignDirTable[4]=new THREE.Vector3(0,0,-1);this.alignDirTable[5]=
new THREE.Vector3(0,0,1);this.alignDirTable[6]=new THREE.Vector3(-1,-1,0);this.alignDirTable[7]=new THREE.Vector3(-1,1,0);this.alignDirTable[8]=new THREE.Vector3(1,-1,0);this.alignDirTable[9]=new THREE.Vector3(1,1,0);this.alignDirTable[10]=new THREE.Vector3(0,-1,-1);this.alignDirTable[11]=new THREE.Vector3(0,-1,1);this.alignDirTable[12]=new THREE.Vector3(0,1,-1);this.alignDirTable[13]=new THREE.Vector3(0,1,1);this.alignDirTable[14]=new THREE.Vector3(-1,0,-1);this.alignDirTable[15]=new THREE.Vector3(1,
0,-1);this.alignDirTable[16]=new THREE.Vector3(-1,0,1);this.alignDirTable[17]=new THREE.Vector3(1,0,1);this.alignDirTable[18]=new THREE.Vector3(-1,-1,-1);this.alignDirTable[19]=new THREE.Vector3(-1,-1,1);this.alignDirTable[20]=new THREE.Vector3(-1,1,-1);this.alignDirTable[21]=new THREE.Vector3(-1,1,1);this.alignDirTable[22]=new THREE.Vector3(1,-1,-1);this.alignDirTable[23]=new THREE.Vector3(1,-1,1);this.alignDirTable[24]=new THREE.Vector3(1,1,-1);this.alignDirTable[25]=new THREE.Vector3(1,1,1);this.useSnap=
this.combined=!1;this.lockDeltaX=0;this.lockedX=!1;this.lockDeltaY=this.lastSnapRotateX=0;this.lockedY=!1;this.lastSnapRotateY=0;this.lastSnapDir=new THREE.Vector3(0,0,0);this.bottomLimit=this.topLimit=!1;this.maxSceneBound=this.minSceneBound=0;var K,E;this.zoomDelta=new THREE.Vector2;var S,D=new THREE.Vector3,U=new THREE.Vector3;this.rewindParams={history:[],startTime:void 0,thumbnailSize:56,thumbnailGapSize:12,maxHistorySize:25,snappingEnabled:!0,timelineIndex:0,timelineIndexSlide:0,open:!1,openLocation:new THREE.Vector2(0,
0),openBracket:new THREE.Vector2(0,0),openBracketA:new THREE.Vector2(0,0),openBracketB:new THREE.Vector2(0,0),openLocationOrigin:new THREE.Vector2(0,0),locationOffset:new THREE.Vector2(0,0),snapOffset:new THREE.Vector2(0,0),slideOffset:new THREE.Vector2(0,0),snapped:!0,resetWeights:!1,recordEnabled:!1,elementIsRecording:!1};this.viewCubeMenuOpen=!1;this.menuSize=new THREE.Vector2(0,0);this.menuOrigin=new THREE.Vector2(0,0);a.lookAt(this.center);this.setCube=function(a){p=a};this.loadObject=function(a,
b,c){loader=new THREE.JSONLoader;loader.load(a,function(a,d){var e=new THREE.MeshPhongMaterial(d);mesh=new THREE.Mesh(a,e);mesh.scale=b;mesh.position=c;mesh.geometry.computeBoundingBox();e=mesh.geometry.boundingBox.clone();U.set(e.max.x,e.max.y,e.max.z);D.set(e.min.x,e.min.y,e.min.z);U.multiply(b);D.multiply(b);scene.add(mesh);objects.push(mesh)})};this.sync=function(b){b.isPerspective!==a.isPerspective&&(b.isPerspective?a.toPerspective():(a.toOrthographic(),b.saveFov&&(a.saveFov=b.saveFov)));a.fov=
b.fov;a.position.copy(b.position);b.target&&(this.center.copy(b.target),a.target.copy(b.target));b.pivot&&(this.pivot.copy(b.pivot),a.pivot.copy(b.pivot));this.dir.copy(this.center).sub(a.position);this.setCameraUp(b.up);b=b.worldup?b.worldup:b.up;1E-4<b.distanceToSquared(this.sceneUpDirection)&&this.setWorldUpVector(b);A&&!this.navApi.getTransitionActive()&&(A=!1,this.setCurrentViewAsHome(!1));p&&requestAnimationFrame(p.render)};this.refresh=function(){p&&p.refreshCube()};THREE.Box2.prototype.setCenter=
function(a){var b=new THREE.Vector2(Math.abs(this.max.x-this.min.x)/2,Math.abs(this.max.y-this.min.y)/2);this.min.copy(a).sub(b);this.max.copy(a).add(b);return this};THREE.Box2.prototype.getIcon2DCoords=function(a,b){var c=this.center;b.set((a.x-c.x)/(this.size().x/2),(a.y-c.y)/(this.size().y/2))};THREE.Matrix3.prototype.makeRotationFromQuaternion=function(a){var b=this.elements,c=a.x,d=a.y,e=a.z,f=a.w,g=c+c,h=d+d,k=e+e;a=c*g;var l=c*h,c=c*k,m=d*h,d=d*k,e=e*k,g=f*g,h=f*h,f=f*k;b[0]=1-(m+e);b[3]=l-
f;b[6]=c+h;b[1]=l+f;b[4]=1-(a+e);b[7]=d-g;b[2]=c-h;b[5]=d+g;b[8]=1-(a+m);return this};THREE.Quaternion.prototype.setFromRotationMatrix3=function(a){var b=a.elements,c=b[0];a=b[3];var d=b[6],e=b[1],f=b[4],g=b[7],h=b[2],k=b[5],b=b[8],l=c+f+b;0<l?(c=0.5/Math.sqrt(l+1),this.w=0.25/c,this.x=(k-g)*c,this.y=(d-h)*c,this.z=(e-a)*c):c>f&&c>b?(c=2*Math.sqrt(1+c-f-b),this.w=(k-g)/c,this.x=0.25*c,this.y=(a+e)/c,this.z=(d+h)/c):f>b?(c=2*Math.sqrt(1+f-c-b),this.w=(d-h)/c,this.x=(a+e)/c,this.y=0.25*c,this.z=(g+
k)/c):(c=2*Math.sqrt(1+b-c-f),this.w=(e-a)/c,this.x=(d+h)/c,this.y=(g+k)/c,this.z=0.25*c);return this};THREE.Quaternion.prototype.rotate=function(a){var b=(new THREE.Matrix4).makeRotationFromQuaternion(this).elements,b=(new THREE.Matrix3).set(b[0],b[1],b[2],b[4],b[5],b[6],b[8],b[9],b[10]);return a.applyMatrix3(b)};THREE.Vector3.prototype.findAngleWith=function(a,b){var c=0,d=this.clone().normalize().clone().dot(a.clone().normalize()),c=this.clone().cross(a).clone().normalize();if(c.clone().length()<
Number.MIN_VALUE)c=0<d?0:180;else{b=0<c.clone().dot(b.clone().normalize())?c:-c;var e=(new THREE.Quaternion).setFromAxisAngle(b,90*THREE.Math.degToRad),e=e.clone().rotate(a).clone().normalize().clone().dot(this),c=Math.acos(d)*THREE.Math.radToDeg;Math.abs(c-90)<Number.MIN_VALUE&&(c=90);if(90>c&&0<d*e||90<c&&0>d*e||90==c&&0<e)c*=-1}return c=THREE.Math.degToRad(c)};"contains"in String.prototype||(String.prototype.contains=function(a,b){return-1!==String.prototype.indexOf.call(this,a,b)});Math.linearClamp=
function(a,b,c){return a<=b?0:a>=c?1:(a-b)/(c-b)};Math.easeClamp=function(a,b,c){return a<=b?0:a>=c?1:0.5*(Math.sin(((a-b)/(c-b)-0.5)*Math.PI)+1)};Math.linearInterp=function(a,b,c){return b*(1-a)+c*a};Math.equalityClamp=function(a,b,c){return a<=b?b:a>=c?c:a};Math.round2=function(a){return Math.round(100*a)/100};Math.round1=function(a){return Math.round(10*a)/10};this.animateTransition=function(b){if(b){var c=!1,d=0;this.setCameraOrtho(b.isOrtho);if(1<=m.elapsedTime)d=1,m.center.copy(b.center),m.pivot.copy(b.pivot),
a.position.copy(b.position),a.up.copy(b.up),b.isOrtho||(a.fov=b.fov),(c=!b.worldUp.equals(this.sceneUpDirection))&&this.setWorldUpVector(b.worldUp),this.currentlyAnimating=!1,g(c),this.showPivot(!1),p&&requestAnimationFrame(p.render),this.addHistoryElement(),this.navApi.setTransitionActive(!1);else{this.currentlyAnimating=!0;this.showPivot(!0);this.navApi.setTransitionActive(!0);d=Math.easeClamp(m.elapsedTime/1,0,1);oneMinusTime=1-d;m.elapsedTime+=w/500;var c=m.center.clone().multiplyScalar(oneMinusTime).add(b.center.clone().multiplyScalar(d)),
e=a.position.clone().multiplyScalar(oneMinusTime).add(b.position.clone().multiplyScalar(d)),f=a.up.clone().multiplyScalar(oneMinusTime).add(b.up.clone().multiplyScalar(d)),h=a.pivot.clone().multiplyScalar(oneMinusTime).add(b.pivot.clone().multiplyScalar(d)),k=this.sceneUpDirection.clone().multiplyScalar(oneMinusTime).add(b.worldUp.clone().multiplyScalar(d)),d=a.fov*oneMinusTime+b.fov*d;m.center.copy(c);m.pivot.copy(h);a.position.copy(e);a.up.copy(f);b.isOrtho||(a.fov=d);(c=1E-4<k.distanceToSquared(this.sceneUpDirection))&&
this.setWorldUpVector(k);a.lookAt(m.center);g(c);p&&requestAnimationFrame(p.render);requestAnimationFrame(function(){m.animateTransition(b)})}}};this.sphericallyInterpolateTransition=function(b){var c,d,e;c=0;this.currentlyAnimating=!0;this.navApi.setTransitionActive(!0);1<=m.elapsedTime?(c=1,this.currentlyAnimating=!1):(c=Math.easeClamp(m.elapsedTime/1,0,1),m.elapsedTime+=w/500);1===c?(d=E.position,c=E.center,e=E.up):(e=new THREE.Matrix3,d=G.clone(),d.slerp(I,c),e.makeRotationFromQuaternion(d),d=
Math.linearInterp(c,P,z),e=e.elements,c=K.center.clone().multiplyScalar(1-c).add(E.center.clone().multiplyScalar(c)),d=c.clone().sub((new THREE.Vector3(e[0],e[1],e[2])).multiplyScalar(d)),e=new THREE.Vector3(e[3],e[4],e[5]));m.center.copy(c);a.position.copy(d);a.up.copy(e);m.navApi.getUsePivotAlways()||m.pivot.copy(c);a.lookAt(m.center);!0===this.currentlyAnimating?(this.showPivot(!0),requestAnimationFrame(function(){m.sphericallyInterpolateTransition(b)})):(this.navApi.setTransitionActive(!1),this.showPivot(!1),
this.addHistoryElement(),this.orthographicFaces&&this.isFaceView()&&this.setCameraOrtho(!0),b&&b());g(!1);p&&requestAnimationFrame(p.render)};this.getOrientation=function(){if(p){var b=Math.round1(a.up.x),c=Math.round1(a.up.y),d=Math.round1(a.up.z),e=this.sceneFrontDirection.clone(),f=this.sceneUpDirection.clone(),g=this.sceneFrontDirection.clone().cross(this.sceneUpDirection).normalize();e.x=Math.round1(e.x);e.y=Math.round1(e.y);e.z=Math.round1(e.z);f.x=Math.round1(f.x);f.y=Math.round1(f.y);f.z=
Math.round1(f.z);g.x=Math.round1(g.x);g.y=Math.round1(g.y);g.z=Math.round1(g.z);var h=g.clone().multiplyScalar(-1),k=f.clone().multiplyScalar(-1),l=e.clone().multiplyScalar(-1);switch(p.currentFace){case "front":if(f.x==b&&f.y==c&&f.z==d)return"up";if(k.x==b&&k.y==c&&k.z==d)return"down";if(g.x==b&&g.y==c&&g.z==d)return"right";if(h.x==b&&h.y==c&&h.z==d)return"left";break;case "right":if(f.x==b&&f.y==c&&f.z==d)return"up";if(k.x==b&&k.y==c&&k.z==d)return"down";if(l.x==b&&l.y==c&&l.z==d)return"left";
if(e.x==b&&e.y==c&&e.z==d)return"right";break;case "left":if(f.x==b&&f.y==c&&f.z==d)return"up";if(k.x==b&&k.y==c&&k.z==d)return"down";if(e.x==b&&e.y==c&&e.z==d)return"left";if(l.x==b&&l.y==c&&l.z==d)return"right";break;case "back":if(f.x==b&&f.y==c&&f.z==d)return"up";if(k.x==b&&k.y==c&&k.z==d)return"down";if(h.x==b&&h.y==c&&h.z==d)return"right";if(g.x==b&&g.y==c&&g.z==d)return"left";break;case "top":if(l.x==b&&l.y==c&&l.z==d)return"down";if(e.x==b&&e.y==c&&e.z==d)return"up";if(g.x==b&&g.y==c&&g.z==
d)return"right";if(h.x==b&&h.y==c&&h.z==d)return"left";break;case "bottom":if(e.x==b&&e.y==c&&e.z==d)return"down";if(l.x==b&&l.y==c&&l.z==d)return"up";if(g.x==b&&g.y==c&&g.z==d)return"right";if(h.x==b&&h.y==c&&h.z==d)return"left"}}};this.setCameraOrtho=function(b){b&&a.isPerspective&&a.toOrthographic();b||a.isPerspective||a.toPerspective()};this.resetOrientation=function(){this.setCameraOrtho(this.originalHomeVector.isOrtho);this.sceneUpDirection.copy(this.originalHomeVector.worldUp);this.sceneFrontDirection.copy(this.originalHomeVector.worldFront);
this.cubeFront.copy(this.sceneFrontDirection).cross(this.sceneUpDirection).normalize();this.setCameraUp(this.sceneUpDirection);g(!0)};this.setCurrentViewAsFront=function(){p&&(p.currentFace="front");this.sceneUpDirection.copy(a.up.clone());this.sceneFrontDirection.copy(this.getView()).normalize();this.cubeFront.copy(this.sceneFrontDirection).cross(this.sceneUpDirection).normalize();this.orthographicFaces&&this.setCameraOrtho(!0);g(!0)};this.setCurrentViewAsTop=function(){p&&(p.currentFace="top");
this.sceneUpDirection.copy(this.getView()).multiplyScalar(-1).normalize();this.sceneFrontDirection.copy(a.up);this.cubeFront.copy(this.sceneFrontDirection).cross(this.sceneUpDirection).normalize();g(!0)};this.calculateCubeTransform=function(b){var c=this.sceneUpDirection.clone(),d=this.sceneFrontDirection.clone(),e=this.sceneFrontDirection.clone().cross(this.sceneUpDirection).normalize();K=a.clone();K.center=m.center.clone();K.pivot=m.pivot.clone();E=a.clone();E.center=m.center.clone();E.pivot=m.pivot.clone();
var f=new THREE.Vector3(0,0,0);b.contains("back")&&(f=f.add(d));b.contains("front")&&(f=f.sub(d));b.contains("top")&&(f=f.add(c));b.contains("bottom")&&(f=f.sub(c));b.contains("right")&&(f=f.add(e));b.contains("left")&&(f=f.sub(e));b=c;var g=f.clone().normalize();if(1-Math.abs(g.dot(c))<Number.MIN_VALUE)for(var h=this.getView().normalize(),d=[d.clone(),d.clone().multiplyScalar(-1),e.clone(),e.clone().multiplyScalar(-1)],c=0<g.dot(c)?1:-1,h=h.clone().add(a.up.clone().multiplyScalar(c)).normalize(),
e=-2,g=0;4>g;g++){var k=h.dot(d[g]);k>e&&(e=k,b=d[g].multiplyScalar(c))}z=P=this.getView().length();E.position=E.center.clone().add(f.normalize().multiplyScalar(z));E.up=b;f=K.center.clone().sub(K.position).normalize();b=f.clone().cross(K.up).normalize();d=b.clone().cross(f).normalize();c=new THREE.Matrix3(f.x,d.x,b.x,f.y,d.y,b.y,f.z,d.z,b.z);G.setFromRotationMatrix3(c);f=E.center.clone().sub(E.position).normalize();b=f.clone().cross(E.up).normalize();d=b.clone().cross(f).normalize();c.set(f.x,d.x,
b.x,f.y,d.y,b.y,f.z,d.z,b.z);H.setFromAxisAngle(f,0);F.setFromAxisAngle(d,0);I.setFromRotationMatrix3(c);I.multiply(H).multiply(F).normalize()};this.centerShot=function(b){if(!K||b)m.elapsedTime=0,K=E=a.clone(),K.center=m.center;b=m.pivot.clone();var c=b.clone().sub(K.position),d=K.center.clone().sub(K.position).normalize(),e=K.up.clone(),f=d.clone().cross(e).normalize(),e=f.clone().cross(d).normalize(),d=f.clone().multiplyScalar(f.dot(c)),c=e.clone().multiplyScalar(e.dot(c)),c=d.clone().add(c);E.position=
K.position.clone().add(c);E.center=b;E.pivot=b;b=0;1<=m.elapsedTime?b=1:(b=Math.easeClamp(m.elapsedTime/1,0,1),m.elapsedTime+=w/2E3);c=a.position.clone().multiplyScalar(1-b).add(E.position.clone().multiplyScalar(b));e=m.center.clone().multiplyScalar(1-b).add(E.center.clone().multiplyScalar(b));d=m.pivot.clone().multiplyScalar(1-b).add(E.pivot.clone().multiplyScalar(b));a.position.copy(c);m.center.copy(e);m.pivot.copy(d);a.lookAt(m.center);g(!1);1===b?this.addHistoryElement():requestAnimationFrame(function(){m.centerShot(!1)})};
this.levelShot=function(){var b=this.getView(),c=b.length(),d=this.sceneUpDirection.clone(),e=a.up.clone().normalize(),b=b.normalize(),f=b.dot(d);1-Math.abs(f)>Number.MIN_VALUE?(e=b.clone().cross(d),b=d.clone().cross(e),b.normalize()):b=e.clone();b.multiplyScalar(c);c={center:b.add(a.position),up:d,position:a.position,pivot:m.center.clone().add(b),fov:a.fov,worldUp:d};m.elapsedTime=0;m.animateTransition(c)};this.fitToWindow=function(){var b=this.getView(),c=a.up.clone();b.normalize();c.normalize();
E=a.clone();E.center=m.center;var d=c,c=d.clone();if(!(Math.abs(c.clone().dot(b))<Number.MIN_VALUE)&&(b.normalize(),c=d.clone().dot(b),c=b.clone().multiplyScalar(c),c=d.clone().sub(c),c.length()<Number.MIN_VALUE)){for(var d=new THREE.Vector3(0,0,0),c=[new THREE.Vector3(0,1,0),new THREE.Vector3(1,0,0),new THREE.Vector3(0,0,1),new THREE.Vector3(0,1,1),new THREE.Vector3(1,0,1),new THREE.Vector3(1,1,0),new THREE.Vector3(1,1,1)],e=0;7>e;e++)if(Math.abs(c[e].dot(b))<Number.MIN_VALUE){d=c[e];break}c=d}c.normalize();
c.normalize();E.up=c;e=b.clone().cross(c);e.normalize();var f=D.clone(),g=U.clone(),h=[f,g],d=new THREE.Vector3(g.x-f.x,g.y-f.y,g.z-f.z);h[2]=new THREE.Vector3(g.x,f.y,g.z);h[3]=new THREE.Vector3(g.x,f.y,f.z);h[4]=new THREE.Vector3(g.x,g.y,f.z);h[5]=new THREE.Vector3(f.x,g.y,g.z);h[6]=new THREE.Vector3(f.x,g.y,f.z);h[7]=new THREE.Vector3(f.x,f.y,g.z);for(f=0;8>f;f++)g=h[f].clone().sub(a.position),h[f].setX(g.clone().dot(e)),h[f].setY(g.clone().dot(c)),h[f].setZ(g.clone().dot(b));var f=THREE.Math.degToRad(a.topFov),
g=THREE.Math.degToRad(a.bottomFov),k=THREE.Math.degToRad(a.leftFov),l=THREE.Math.degToRad(a.rightFov),n,p,z,q;n=0<=k?Number.MAX_VALUE:Number.MIN_VALUE;p=0<=l?Number.MAX_VALUE:Number.MIN_VALUE;z=0<=f?Number.MAX_VALUE:Number.MIN_VALUE;q=0<=g?Number.MAX_VALUE:Number.MIN_VALUE;for(var s=1/Math.tan(l),S=-1/Math.tan(k),r=1/Math.tan(f),v=-1/Math.tan(g),u=0;8>u;u++){var K=h[u].clone(),A=K.z-S*K.x;n=0<=k?Math.min(n,A):Math.max(n,A);A=K.z-s*K.x;p=0<=l?Math.min(p,A):Math.max(p,A);A=K.z-r*K.y;z=0<=f?Math.min(z,
A):Math.max(z,A);A=K.z-v*K.y;q=0<=g?Math.min(q,A):Math.max(q,A)}h=(p-n)/(S-s);n=S*h+n;q=(q-z)/(r-v);z=r*q+z;r=0;n<=z?(f=(f-g)/2,Math.abs(f)>Number.MIN_VALUE&&(f=1/Math.tan(f),q=q-z/f+n/f),r=n):(f=(l-k)/2,Math.abs(f)>Number.MIN_VALUE&&(f=1/Math.tan(f),h=h-n/f+z/f),r=z);f=new THREE.Vector3(h,q,r);e=e.clone().multiplyScalar(f.x);c=c.clone().multiplyScalar(f.y);f=b.clone().multiplyScalar(f.z);f=e.clone().add(c.clone().add(f));E.position.add(f);c=d.clone().sub(E.position).dot(b);E.center=E.position.clone().add(b.multiplyScalar(c));
E.pivot=d.clone();b={center:E.center,up:E.up,position:E.position,pivot:E.pivot,fov:a.fov,worldUp:m.sceneUpDirection.clone()};m.elapsedTime=0;m.animateTransition(b)};this.updatePivotPosition=function(b){var c;c=new THREE.Projector;var d=new THREE.Vector3(b.x/window.innerWidth*2-1,2*-(b.y/window.innerHeight)+1,0.5);c.unprojectVector(d,a);c=(new THREE.Raycaster(a.position,d.sub(a.position).normalize())).intersectObjects(objects);if("zoom"==m.mode)if(void 0!==c[0])b=c[0].point,m.pivot=b;else{b.y=Math.abs(b.y-
window.innerHeight);var e=a.position;c=m.center.clone().sub(e);var d=a.up,f=c.clone().cross(d),g=c.clone().length(),h=g*Math.tan(THREE.Math.degToRad(a.leftFov)),k=g*Math.tan(THREE.Math.degToRad(a.rightFov)),l=g*Math.tan(THREE.Math.degToRad(a.topFov)),g=g*Math.tan(THREE.Math.degToRad(a.bottomFov)),h=b.x*(h+k)/window.innerWidth-h;b=b.y*(l+g)/window.innerHeight-g;d=d.clone().normalize().clone().multiplyScalar(b);f=f.clone().normalize().clone().multiplyScalar(h);m.ortho?b=e.clone().add(f).clone().add(d):
(b=e,c=c.clone().add(d).clone().add(f));m.pivot=b.clone().add(c)}else void 0!==c[0]?(wheel.cursorImage("pivot"),b=c[0].point,m.isMouseDown||(m.pivot=b)):wheel.cursorImage("SWInvalidArea")};this.onDrawHeight=function(b,c,d,e,f){b=new THREE.Vector3(0,1,0);b=a.position.clone().dot(b);b=Math.linearClamp(b,m.minSceneBound,m.maxSceneBound)-0.5;s&&(s.find("img#updownImageA").remove(),s.prepend('<img src="'+f+'SWheighthandleA.png" id="updownImageA" style="position:fixed; z-index:9999; top:'+(d-86*b)+"px; left:"+
c+'px;"/>'),e||s.prepend('<img src="'+f+'SWheighthandleI.png" id="updownImageI" style="position:fixed; z-index:9998; top:'+(d-86*b)+"px; left:"+c+'px;"/>'))};this.drawDropdownMenu=function(a,b,d,e,f,g,h){var k=0;if(q)g.appendChild(q);else{q=document.createElement("div");q.className="dropDownMenu";q.style.top="100px";q.style.left="-400px";for(var l=0,m=0;m<a.length;m++){var n;if(null==a[m])n=document.createElement("li"),n.style.height="1px",l+=1,n.style.backgroundColor="#E0E0E0";else{var p=Autodesk.Viewing.i18n.translate(a[m]);
if(d[m]){n=document.createElement("div");var z=document.createElement("input"),D=document.createElement("label");z.type="checkbox";z.className="dropDownMenuCheck";D.innerHTML=p;D.className="dropDownMenuCheckText";n.appendChild(z);n.appendChild(D);n.className="dropDownMenuCheckbox"}else n=document.createElement("li"),n.textContent=p,n.className=b[m]?"dropDownMenuItem":"dropDownMenuItemDisabled";n.id="menuItem"+k;k++;l+=25;n.setAttribute("data-i18n",a[m])}q.appendChild(n)}g.appendChild(q);k=q.getBoundingClientRect().width;
this.menuSize.x=k;this.menuSize.y=l}for(m=k=0;m<a.length;m++)null!=a[m]&&(d[m]&&(l=document.getElementById("menuItem"+k))&&(l.children[0].checked=d[m]()),k++);a=f-15;d=e+1;f=c.getBoundingClientRect();d+this.menuSize.x>f.right&&(d=e-this.menuSize.x-1);a+this.menuSize.y>f.bottom&&(a=f.bottom-this.menuSize.y);a-=h.y;d-=h.x;q.style.top=a+"px";q.style.left=d+"px";this.menuOrigin.x=d;this.menuOrigin.y=a};this.removeDropdownMenu=function(a){a.removeChild(q)};this.isFaceView=function(){var b=this.center.clone().sub(a.position).normalize();
return n(b)&&n(a.up)};this.startInteraction=function(a,b){this.startCursor=new THREE.Vector2(a,b);this.startState={saveCenter:this.center.clone(),saveEye:this.camera.position.clone(),savePivot:this.pivot.clone(),saveUp:this.camera.up.clone()};this.lockDeltaX=0;this.lockedX=!1;this.lockDeltaY=this.lastSnapRotateX=0;this.lockedY=!1;this.lastSnapRotateY=0;this.lastSnapDir=new THREE.Vector3(0,0,0)};this.orbit=function(b,c,d,e){if(!this.navApi.getIsLocked()&&!0!==this.currentlyAnimating){var k="wheel";
m.orthographicFaces&&!a.isPerspective&&(a.toPerspective(),e&&e.saveEye.copy(this.camera.position));e&&(k="cube");"cube"==k?(this.saveCenter.copy(e.saveCenter),this.saveEye.copy(e.saveEye),this.savePivot.copy(e.savePivot),this.saveUp.copy(e.saveUp),this.doCustomOrbit=this.useSnap=!0):(this.saveCenter.copy(this.center),this.savePivot.copy(this.pivot),this.saveEye.copy(a.position),this.saveUp.copy(a.up),this.doCustomOrbit=this.useSnap=!1);m.combined&&void 0==B&&(B=this.saveCenter.clone(),v=this.saveEye.clone(),
N=this.savePivot.clone(),C=this.saveUp.clone());if(this.preserveOrbitUpDirection){var k=f(b.x-c.x,b.y-c.y),l=f(d.x,d.y);c=this.sceneUpDirection.clone();var n=this.sceneFrontDirection.clone(),p=this.sceneFrontDirection.clone().cross(this.sceneUpDirection).normalize();d=m.combined?N:this.savePivot;e=m.combined?v:this.saveEye;var z=m.combined?B:this.saveCenter,q=m.combined?C:this.saveUp,D=d.clone().sub(e).normalize(),s=z.clone().sub(e).normalize(),S=s.clone().cross(q);b=e.clone().sub(d).length();e=e.clone().sub(z).length();
D=D.clone().multiplyScalar(-1);s=s.clone().multiplyScalar(-1);q=q.clone();this.constrainOrbitHorizontal||(-0.009>c.dot(this.saveUp)&&(k.x=-k.x,l.x=-l.x),z=0,this.lastSnapRotateX=z=m.combined?l.x*this.orbitMultiplier:this.useSnap?this.lastSnapRotateX+h("h",0,-l.x):k.x*this.orbitMultiplier,z=(new THREE.Quaternion).setFromAxisAngle(c,-z),D.applyQuaternion(z),s.applyQuaternion(z),S.applyQuaternion(z),q.applyQuaternion(z));this.constrainOrbitVertical||(n=n.clone().multiplyScalar(n.dot(S)),p=p.clone().multiplyScalar(p.dot(S)),
p=n.clone().add(p),p.clone().normalize(),S=0,m.combined?S=l.y*this.orbitMultiplier:(l=h("v",0,l.y),S=this.useSnap?this.lastSnapRotateY+l:k.y*this.orbitMultiplier),k=(new THREE.Quaternion).setFromAxisAngle(p,-S),this.navApi.getOrbitPastWorldPoles()||(l=q.clone(),l.applyQuaternion(k).normalize(),0>c.dot(l)&&(l=s.clone(),l.applyQuaternion(k).normalize(),c=l.angleTo(c),Math.abs(c)>0.5*Math.PI&&(c-=0<c?Math.PI:-Math.PI),S-=c,k.setFromAxisAngle(p,-S))),D.applyQuaternion(k).normalize(),s.applyQuaternion(k).normalize(),
q.applyQuaternion(k).normalize(),this.lastSnapRotateY=S);d=D.multiplyScalar(b).add(d);a.position.copy(d);a.up.copy(q);this.center.copy(d);this.center.sub(s.multiplyScalar(e));m.combined&&(B.copy(this.center),v.copy(a.position),N.copy(this.pivot),C.copy(a.up))}a.lookAt(this.center);g(!1)}};this.endInteraction=function(){};this.look=function(b){if(!this.navApi.getIsLocked()){var c=f(b.x,b.y),d=this.userLookSpeed;b=this.getView();var e=a.up,h=b.clone().cross(e),c=c.clone().multiplyScalar(d),h=(new THREE.Quaternion).setFromAxisAngle(h.normalize(),
c.y);b=h.clone().rotate(b);e=h.clone().rotate(e);e.normalize();h=this.sceneUpDirection.clone();h=a.keepSceneUpright?h:e;c=(new THREE.Quaternion).setFromAxisAngle(h,-c.x);b=c.clone().rotate(b);e=c.clone().rotate(e);this.center=a.position.clone().add(b);a.up=e;a.lookAt(this.center);g(!1)}};this.pan=function(b){if(!this.navApi.getIsLocked()){b=f(b.x,b.y);var c=this.getView(),d=a.up.clone().cross(c),e=c.clone().cross(d);d.normalize();e.normalize();c.normalize();var h=this.pivot.clone().sub(a.position),
h=c.clone().dot(h),c=h*(Math.tan(THREE.Math.degToRad(a.leftFov))+Math.tan(THREE.Math.degToRad(a.rightFov))),h=h*(Math.tan(THREE.Math.degToRad(a.topFov))+Math.tan(THREE.Math.degToRad(a.bottomFov))),c=b.x*Math.abs(c);b=b.y*Math.abs(h);h=new THREE.Vector3;d=d.clone().multiplyScalar(c);e=e.clone().multiplyScalar(b);h=d.clone().add(e).clone().multiplyScalar(this.userPanSpeed);a.position.add(h);this.center.add(h);a.lookAt(this.center);g(!1)}};this.zoom=function(b){if(!this.navApi.getIsLocked()){var c=this.userZoomSpeed,
d=Number.MAX_VALUE;b=b.x+b.y;var e=Math.pow(c,b),f=this.pivot.clone().sub(this.pivot.clone().sub(this.saveEye).clone().multiplyScalar(e)),h=f.clone().add(m.D.clone().multiplyScalar(m.D.clone().dot(this.pivot.clone().sub(f).clone())));if(!(e>=d)){if(0<b){Math.pow(c,b-0);if(0>b)return;a.position=f;this.center=h;f.clone().sub(this.saveEye).dot(m.D)>d&&(a.position=this.saveEye.sub(m.D).clone().multiplyScalar(d))}else a.position=f,this.center=h;a.lookAt(this.center);g(!1)}}};this.walk=function(b,c,d,e,
h){if(!this.navApi.getIsLocked()){d=this.sceneUpDirection.clone();e=this.sceneFrontDirection.clone();h=this.sceneFrontDirection.clone().cross(this.sceneUpDirection);k(b,c)?(wheel.cursorImage("SWWalk"),l(!0,b,c),x=c.x,y=c.y):l(!1,b,c);x=b.x;y=b.y;var m=f(x-c.x,y-c.y),n=-m.x,p=-m.y,z=0>n?-1:1,m=0>p?-1:1,q=Math.abs(n),D=Math.abs(p),D=new THREE.Vector2(30,30),D=f(D.x,D.y),q=k(b,c)?0:Math.abs(n)-D.x,D=k(b,c)?0:Math.abs(p)-D.y,q=q/0.25,D=D/0.25,q=1>q?Math.easeClamp(q,0,1):Math.pow(q,1),D=1>D?Math.easeClamp(D,
0,1):Math.pow(D,1),n=0<q?q*z:0,m=0<D?D*m:0;b=this.getView();c=b.length();b.normalize();b.clone().cross(a.up).normalize();h=h.clone().multiplyScalar(h.clone().dot(b));h=e.clone().multiplyScalar(e.clone().dot(b)).clone().add(h);h=h.clone().length()>Number.MIN_VALUE?h.normalize():a.up;e=1*m*this.walkMultiplier;m=Math.cos(0.65);1!=m&&(d.clone().dot(a.up)<-Number.MIN_VALUE&&d.clone().dot(b)<-m||d.clone().dot(a.up)>Number.MIN_VALUE&&d.clone().dot(b)>m)&&(h=-h);n=-n*this.walkMultiplier*0.05;m=a.up;if(d.clone().dot(a.up)<
-Number.MIN_VALUE||Math.abs(d.clone().dot(a.up))<Number.MIN_VALUE&&d.clone().dot(b)>Number.MIN_VALUE)n=-n;m=d;n=(new THREE.Quaternion).setFromAxisAngle(m,n);n.normalize();b=n.clone().rotate(b);b.normalize();a.up=n.clone().rotate(a.up);a.up.normalize();a.position.add(h.clone().multiplyScalar(e));this.center=a.position.clone().add(b.clone().multiplyScalar(c));d.normalize();a.lookAt(this.center);g(!1)}};this.updown=function(b){if(!this.navApi.getIsLocked()){var c=Math.pow(b,2);0>b&&(c=-c);c=f(0,c);c.y=
0.01*c.y*(m.maxSceneBound-m.minSceneBound);c=m.userHeightSpeed*c.y;var d=m.m_amount;if(0==b)c=0;else{var e=m.saveEye.clone().sub(worldUp.clone().multiplyScalar(d+c)),d=m.saveEye.clone().sub(worldUp.clone().multiplyScalar(d)),h=0,h=(m.maxSceneBound-m.minSceneBound)/1E3;m.topLimit&&0<b?(h=m.maxSceneBound-h,m.topLimit=!1):m.bottomLimit&&0>b?(h=m.minSceneBound+h,m.bottomLimit=!1):h=e.dot(worldUp);b=d.dot(worldUp);h<m.minSceneBound?b<m.minSceneBound&&(m.bottomLimit=!0,c=0):h>m.maxSceneBound&&b>m.maxSceneBound&&
(m.topLimit=!0,c=0)}m.m_amount+=c;b=new THREE.Vector3(0,1,0);c=m.saveEye.clone().sub(b.clone().multiplyScalar(m.m_amount));e=c.clone().dot(b);a.position=c;e<m.minSceneBound&&a.position.add(b.clone().multiplyScalar(m.minSceneBound-e));e>m.maxSceneBound&&a.position.add(b.clone().multiplyScalar(m.maxSceneBound-e));this.center=a.position.clone().add(m.saveCenter.clone().sub(m.saveEye));a.lookAt(this.center);g(!1)}};this.addHistoryElement=function(){};this.addIntermediateHistoryElement=function(){this.rewindParams.history=
this.rewindParams.snapped?this.rewindParams.history.slice(0,this.rewindParams.timelineIndex):0<this.rewindParams.slideOffset.x?this.rewindParams.history.slice(0,this.rewindParams.timelineIndex):this.rewindParams.history.slice(0,this.rewindParams.timelineIndex+1);this.addHistoryElement()};this.clearHistory=function(){this.rewindParams.history.length=0;this.rewindParams.timelineIndex=0;this.rewindParams.timelineIndexSlide=0;this.rewindParams.resetWeights=!0};this.openTimeline=function(a){this.rewindParams.timelineIndexSlide=
this.rewindParams.timelineIndex;this.rewindParams.resetWeights&&(this.rewindParams.slideOffset.x=0,this.rewindParams.snapped=this.rewindParams.snappingEnabled);0==this.rewindParams.history.length&&this.addHistoryElement();for(var b=0;b<this.rewindParams.history.length;b++){var c=this.rewindParams.thumbnailGapSize+this.rewindParams.thumbnailSize;this.rewindParams.history[b].thumbnailBounds.setCenter((new THREE.Vector2(a.x+(b-this.rewindParams.timelineIndex)*c,a.y)).add(this.rewindParams.slideOffset));
this.rewindParams.resetWeights&&(this.rewindParams.history[b].weight=b==this.rewindParams.timelineIndex?1:0)}this.rewindParams.resetWeights&&(this.rewindParams.resetWeights=!1);c=2*(this.rewindParams.thumbnailGapSize+this.rewindParams.thumbnailSize);this.rewindParams.open=!0;this.rewindParams.openLocation=a.clone();this.rewindParams.openLocationOrigin=a.clone();this.rewindParams.openBracket=a.clone();this.rewindParams.openBracketA=new THREE.Vector2(c,a.y);this.rewindParams.openBracketB=new THREE.Vector2(window.innerWidth-
c,a.y);this.rewindParams.openBracketA.x>this.rewindParams.openBracketB.x&&(a=this.rewindParams.openBracketA.x,this.rewindParams.openBracketA.x=this.rewindParams.openBracketB.x,this.rewindParams.openBracketB.x=a);this.rewindParams.locationOffset=new THREE.Vector2(0,0);this.rewindParams.snapOffset=new THREE.Vector2(0,0)};this.slideTimeline=function(a){if(this.rewindParams.open&&0!=this.rewindParams.history.length){var b=a.clone().add(this.rewindParams.locationOffset),c=2*(this.rewindParams.thumbnailGapSize+
this.rewindParams.thumbnailSize);a=window.innerWidth-c;var d=this.rewindParams.history[0].thumbnailBounds.center().x,e=this.rewindParams.history[this.rewindParams.history.length-1].thumbnailBounds.center().x,f=0;b.x<this.rewindParams.openBracketA.x&&(f=b.x-this.rewindParams.openBracketA.x,d-=f,c<d&&(f=Math.min(f+(d-c),0)));b.x>this.rewindParams.openBracketB.x&&(f=b.x-this.rewindParams.openBracketB.x,c=e-f,a>c&&(f=Math.max(f+(c-a),0)));this.rewindParams.openLocation.x+=f;this.rewindParams.openBracketA.x+=
f;this.rewindParams.openBracketB.x+=f;this.rewindParams.openBracket.x=b.x-(this.rewindParams.openLocation.x-this.rewindParams.openLocationOrigin.x);a=new THREE.Vector2(-f,0);b=b.clone().sub(this.rewindParams.openLocation.clone().sub(this.rewindParams.openLocationOrigin));a.x+=this.rewindParams.snapOffset.x;this.rewindParams.snapOffset.x=0;c=!1;if(this.rewindParams.snappingEnabled)for(e=0;e<this.rewindParams.history.length;e++)if(d=this.rewindParams.history[e].thumbnailBounds.center().add(a),4>Math.abs(d.x-
b.x)||this.rewindParams.snapped&&16>Math.abs(d.x-b.x)){c=!0;0!=f?(this.rewindParams.snapOffset.x=d.x-b.x,a.x-=this.rewindParams.snapOffset.x):this.rewindParams.openBracket.x+=d.x-b.x;b.x=d.x;break}this.rewindParams.snapped=c;c=-1;for(e=f=0;e<this.rewindParams.history.length;e++){d=this.rewindParams.history[e].thumbnailBounds.clone();this.rewindParams.history[e].thumbnailBounds.setCenter(this.rewindParams.history[e].thumbnailBounds.center().add(a));if(this.rewindParams.history[e].thumbnail){var g=
this.rewindParams.history[e].thumbnailBounds.center().x-this.rewindParams.thumbnailSize/2;$("#rewindFrame"+e).css("left",g);$("#rewindBorder"+e).css("left",g-4)}g=new THREE.Vector2(2*(this.rewindParams.thumbnailGapSize+this.rewindParams.thumbnailSize),2*(this.rewindParams.thumbnailGapSize+this.rewindParams.thumbnailSize));d.setFromCenterAndSize(d.center(),g);g=new THREE.Vector2(0,0);d.getIcon2DCoords(b,g);g=1-Math.abs(Math.equalityClamp(g.x,-1,1));this.rewindParams.history[e].weight=g;0==e&&b.x<d.center().x&&
(this.rewindParams.history[e].weight=1);e==this.rewindParams.history.length-1&&b.x>d.center().x&&(this.rewindParams.history[e].weight=1);f+=this.rewindParams.history[e].weight;this.rewindParams.history[e].weight>c&&(c=this.rewindParams.history[e].weight,this.rewindParams.snappingEnabled&&1==this.rewindParams.history[e].weight?(this.rewindParams.slideOffset.x=0,this.rewindParams.snapped=!0):this.rewindParams.slideOffset.x=this.rewindParams.history[e].thumbnailBounds.center().x-b.x,this.rewindParams.timelineIndexSlide=
e)}for(a=0;a<this.rewindParams.history.length;a++)this.rewindParams.history[a].weight/=f;a=this.rewindParams.history[0].thumbnailBounds.center().x;b=this.rewindParams.history[this.rewindParams.history.length-1].thumbnailBounds.center().x;this.rewindParams.openBracket.x<a?(this.rewindParams.locationOffset.x+=a-this.rewindParams.openBracket.x,this.rewindParams.openBracket.x=a):this.rewindParams.openBracket.x>b&&(this.rewindParams.locationOffset.x+=b-this.rewindParams.openBracket.x,this.rewindParams.openBracket.x=
b)}};this.shiftBackOneElement=function(){0!=this.rewindParams.history.length&&(0<this.rewindParams.timelineIndex||0!=this.rewindParams.slideOffset.x)&&((this.rewindParams.snapped||0<this.rewindParams.slideOffset.x)&&this.rewindParams.timelineIndex--,this.rewindParams.timelineIndexSlide=this.rewindParams.timelineIndex,this.rewindParams.resetWeights=!0,m.elapsedTime=0,this.animateToRewindIndex())};this.animateToRewindIndex=function(){var b=this.rewindParams.timelineIndex,c=0;1<=m.elapsedTime?c=1:(c=
Math.easeClamp(m.elapsedTime/1,0,1),m.elapsedTime+=w/500);m.center=m.center.clone().multiplyScalar(1-c).clone().add(this.rewindParams.history[b].camera.center.clone().multiplyScalar(c));a.position=a.position.clone().multiplyScalar(1-c).clone().add(this.rewindParams.history[b].camera.position.clone().multiplyScalar(c));a.up=this.rewindParams.history[b].camera.up;m.pivot=m.center;a.lookAt(m.center);g(!1);p&&requestAnimationFrame(p.render);1!==c&&requestAnimationFrame(function(){m.animateToRewindIndex()})};
this.closeTimeline=function(){this.rewindParams.timelineIndex!=this.rewindParams.timelineIndexSlide&&(this.rewindParams.timelineIndex=this.rewindParams.timelineIndexSlide);this.rewindParams.open=!1};this.getInterpolatedCamera=function(){var b=new THREE.PerspectiveCamera(70,window.innerWidth/window.innerHeight,1,1E4);b.center=new THREE.Vector3(0,0,0);b.pivot=new THREE.Vector3(0,0,0);b.leftFov=0;b.rightFov=0;b.topFov=0;b.bottomFov=0;b.up.set(0,0,0);for(var c=0;c<this.rewindParams.history.length;c++){var d=
this.rewindParams.history[c].camera,e=this.rewindParams.history[c].weight;b.center.add(d.center.clone().multiplyScalar(e));b.position.add(d.position.clone().multiplyScalar(e));b.up.add(d.up.clone().multiplyScalar(e));b.rotation.add(d.rotation.clone().multiplyScalar(e));b.pivot.add(d.pivot.clone().multiplyScalar(e));b.leftFov+=d.leftFov*e;b.rightFov+=d.rightFov*e;b.topFov+=d.topFov*e;b.bottomFov+=d.bottomFov*e}a.position=b.position;a.up=b.up;a.rotation=b.rotation;a.leftFov=b.leftFov;a.rightFov=b.rightFov;
a.topFov=b.topFov;a.bottomFov=b.bottomFov;m.center=b.center;m.pivot=b.pivot;a.lookAt(m.center);a.up.normalize();g(!1)}};
Autocam.ViewCube=function(a,b,c,e){var d=this,g=b.camera;b.setCube(this);var f=RESOURCE_ROOT+"textures/",h=e?e:f;d.currentFace="front";var k="top,front;top right;top,left;top,back;bottom,front;bottom,right;bottom,left;bottom,back;left,front;front,right;right,back;back,left".split(";"),l="front,top,right back,top,right front,top,left back,top,left front,bottom,right back,bottom,right front,bottom,left back,bottom,left".split(" "),n=["Go Home",null,"Orthographic","Perspective","Perspective with Ortho Faces",
null,"Set current view as Home","Focus and set as Home","Reset Home",null,"Set current view as Front","Set current view as Top","Reset orientation"],m=[!0,null,!0,!0,!0,null,!0,!0,!0,null,!0,!0,!0],p=[null,null,function(){return!b.orthographicFaces&&!g.isPerspective},function(){return!b.orthographicFaces&&g.isPerspective},function(){return b.orthographicFaces},null,null,null,null,null,null,null,null],q,s,r,u,w,A,v;d.camera=new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,1,2E3);
d.camera.position.copy(g.position);d.center=new THREE.Vector3(0,0,0);d.camera.lookAt(d.center);var B,C,N,G,I,H,F=[],P,z=[],K=[],E=[],S=[],D=null,U=null,J=null,V,R,da,O,ba,M=0,aa,ca=0,ea=!0,xa=!1,na=!1,ja=-1!=navigator.userAgent.search("Chrome"),ka=-1!=navigator.platform.search("Win32"),X=!1,Z=!1,oa=[];this.height=this.width=0;this.animSpeed=500;this.animate=!0;this.compass=!1;this.viewScaleFactorCompass=1.5;this.viewScale=1;this.draggable=!0;this.wantHomeButton=!1;this.wantContextMenu=this.wantRollArrows=
!0;this.inactiveOpacity=0.5;var Da=function(a){a=a.getBoundingClientRect();return{x:a.left,y:a.top,w:a.width,h:a.height}},La=function(){b.navApi.getIsLocked()||(c.style.opacity="1.0",Z=!1);requestAnimationFrame(d.render)},Ka=function(a){if(Z||b.viewCubeMenuOpen||b.navApi.getIsLocked())b.navApi.getIsLocked()||(c.style.opacity=1);else{var e=Math.max(4*Math.abs((a.clientX-aa.x)/aa.w-0.5)-1,0);a=Math.max(4*Math.abs((a.clientY-aa.y)/aa.h-0.5)-1,0);e=Math.max(0,Math.min(Math.sqrt(e*e+a*a),1));c.style.opacity=
1-e*(1-d.inactiveOpacity)}},Ma=function(){b.viewCubeMenuOpen||(c.style.opacity=d.inactiveOpacity,Z=!0,requestAnimationFrame(d.render))},ya=function(a){var b=new Image;b.crossOrigin="anonymous";var c=new THREE.Texture(b);b.onload=function(){c.needsUpdate=!0;ca++;14<=ca&&requestAnimationFrame(d.render)};b.src=a;return c},Ea=function(a,b,c){var d=new THREE.Projector,e=new THREE.Vector3;e.copy(a);d.unprojectVector(e,b);return(new THREE.Raycaster(b.position,e.sub(b.position).normalize())).intersectObjects(c)},
za=function(a,b){var c=a.clientX-b.x,d=a.clientY-b.y,c=c/b.w*2-1,d=(b.h-d)/b.h*2-1;return new THREE.Vector3(c,d,0.5)},Ia=function(a){a.preventDefault();a.stopPropagation();if(!b.navApi.getIsLocked()&&!b.currentlyAnimating){aa=Da(c);c.removeEventListener("mousemove",Ga,!1);document.addEventListener("mouseup",pa,!1);b.navApi.getUsePivotAlways()||(b.pivot.copy(b.center),b.navApi.setPivotPoint(b.center),b.navApi.setPivotSetFlag(!1));b.startInteraction(a.pageX,a.pageY);var e;0==b.rewindParams.history.length&&
b.addHistoryElement();b.rewindParams.snapped&&b.rewindParams.timelineIndex+1==b.rewindParams.history.length||b.addIntermediateHistoryElement();a=a||window.event;e=b.navApi.getUseLeftHandedInput()?1:3;a.which!==e&&(0>=d.animSpeed?console.error("animSpeed cannot be 0 or less, use ViewCube.animate flag to turn on and off animation"):(e=za(a,aa),e=Ea(e,d.camera,S),0<e.length&&(la(),d.draggable&&(document.addEventListener("mousemove",fa,!1),d.prevX=a.screenX,d.prevY=a.screenY,xa&&(c.requestPointerLock(),
na=ja&&ka)))))}},fa=function(a){a.preventDefault();a.stopPropagation();if(0>=d.animSpeed)document.removeEventListener("mousemove",fa,!1),console.error("animSpeed cannot be 0 or less");else if(!b.currentlyAnimating){var c,e;xa?na?(na=!1,c=e=0):(c=a.movementX||a.mozMovementX||a.webkitMovementX||0,e=a.movementY||a.mozMovementY||a.webkitMovementY||0):(c=a.screenX-d.prevX,e=a.screenY-d.prevY,d.prevX=a.screenX,d.prevY=a.screenY);c===e&&0===c?b.currentlyAnimating=!1:(ea=!1,X=!0,b.showPivot(!0),b.currentCursor=
new THREE.Vector2(a.pageX,a.pageY),b.orbit(b.currentCursor,b.startCursor,new THREE.Vector3(-c,e,0),b.startState),d.camera.lookAt(d.center),requestAnimationFrame(d.render))}},ha=function(a){a||document.removeEventListener("mouseup",pa,!1);document.removeEventListener("mousemove",fa,!1);c.addEventListener("mousemove",Ga,!1)},pa=function(a){a.preventDefault();a.stopPropagation();var e,f,h;if(b.currentlyAnimating||X)b.endInteraction(),b.showPivot(!1),X=!1,ha(!1);else if(b.viewCubeMenuOpen){e=a.clientX-
aa.x;f=a.clientY-aa.y;if(b.menuOrigin.x<=e&&e<=b.menuOrigin.x+b.menuSize.x&&b.menuOrigin.y<=f&&f<=b.menuOrigin.y+b.menuSize.y)switch(Math.floor((f-5-b.menuOrigin.y)/25)){case 0:b.goHome();break;case 1:b.setOrthographicFaces(!1);b.toOrthographic();break;case 2:b.setOrthographicFaces(!1);b.toPerspective();break;case 3:b.setOrthographicFaces(!0);ea?b.toOrthographic():b.toPerspective();break;case 4:b.setCurrentViewAsHome(!1);break;case 5:b.setCurrentViewAsHome(!0);break;case 6:b.resetHome();break;case 7:b.setCurrentViewAsFront();
break;case 8:b.setCurrentViewAsTop();break;case 9:b.resetOrientation()}b.viewCubeMenuOpen=!1;b.removeDropdownMenu(c);(a.clientX<aa.x||a.clientX>aa.w+aa.x||a.clientY<aa.y||a.clientY>aa.h+aa.y)&&Ma();d.mouseMoveSave&&d.processMouseMove(d.mouseMoveSave);ha(!1)}else if(e=b.navApi.getUseLeftHandedInput()?1:3,a.which===e)b.viewCubeMenuOpen=!0,b.drawDropdownMenu(n,m,p,a.clientX,a.clientY,c,aa),ha(!0);else{h=za(a,aa);e=Ea(h,d.camera,S);f=Ea(h,v,z);h=Ea(h,v,E);if(0<f.length&&ea){var k=b.getOrientation();switch(d.currentFace){case "front":switch(k){case "up":f[0].object===
z[0]?(b.calculateCubeTransform("top"),d.currentFace="top"):f[0].object===z[1]?(b.calculateCubeTransform("bottom"),d.currentFace="bottom"):f[0].object===z[2]?(b.calculateCubeTransform("right"),d.currentFace="right"):f[0].object===z[3]&&(b.calculateCubeTransform("left"),d.currentFace="left");break;case "right":f[0].object===z[0]?(b.calculateCubeTransform("right"),d.currentFace="right"):f[0].object===z[1]?(b.calculateCubeTransform("left"),d.currentFace="left"):f[0].object===z[2]?(b.calculateCubeTransform("bottom"),
d.currentFace="bottom"):f[0].object===z[3]&&(b.calculateCubeTransform("top"),d.currentFace="top");break;case "down":f[0].object===z[0]?(b.calculateCubeTransform("bottom"),d.currentFace="bottom"):f[0].object===z[1]?(b.calculateCubeTransform("top"),d.currentFace="top"):f[0].object===z[2]?(b.calculateCubeTransform("left"),d.currentFace="left"):f[0].object===z[3]&&(b.calculateCubeTransform("right"),d.currentFace="right");break;case "left":f[0].object===z[0]?(b.calculateCubeTransform("left"),d.currentFace=
"left"):f[0].object===z[1]?(b.calculateCubeTransform("right"),d.currentFace="right"):f[0].object===z[2]?(b.calculateCubeTransform("top"),d.currentFace="top"):f[0].object===z[3]&&(b.calculateCubeTransform("bottom"),d.currentFace="bottom")}break;case "right":switch(k){case "up":f[0].object===z[0]?(b.calculateCubeTransform("top"),d.currentFace="top"):f[0].object===z[1]?(b.calculateCubeTransform("bottom"),d.currentFace="bottom"):f[0].object===z[2]?(b.calculateCubeTransform("back"),d.currentFace="back"):
f[0].object===z[3]&&(b.calculateCubeTransform("front"),d.currentFace="front");break;case "right":f[0].object===z[0]?(b.calculateCubeTransform("back"),d.currentFace="back"):f[0].object===z[1]?(b.calculateCubeTransform("front"),d.currentFace="front"):f[0].object===z[2]?(b.calculateCubeTransform("bottom"),d.currentFace="bottom"):f[0].object===z[3]&&(b.calculateCubeTransform("top"),d.currentFace="top");break;case "down":f[0].object===z[0]?(b.calculateCubeTransform("bottom"),d.currentFace="bottom"):f[0].object===
z[1]?(b.calculateCubeTransform("top"),d.currentFace="top"):f[0].object===z[2]?(b.calculateCubeTransform("front"),d.currentFace="front"):f[0].object===z[3]&&(b.calculateCubeTransform("back"),d.currentFace="back");break;case "left":f[0].object===z[0]?(b.calculateCubeTransform("front"),d.currentFace="front"):f[0].object===z[1]?(b.calculateCubeTransform("back"),d.currentFace="back"):f[0].object===z[2]?(b.calculateCubeTransform("top"),d.currentFace="top"):f[0].object===z[3]&&(b.calculateCubeTransform("bottom"),
d.currentFace="bottom")}break;case "left":switch(k){case "up":f[0].object===z[0]?(b.calculateCubeTransform("top"),d.currentFace="top"):f[0].object===z[1]?(b.calculateCubeTransform("bottom"),d.currentFace="bottom"):f[0].object===z[2]?(b.calculateCubeTransform("front"),d.currentFace="front"):f[0].object===z[3]&&(b.calculateCubeTransform("back"),d.currentFace="back");break;case "right":f[0].object===z[0]?(b.calculateCubeTransform("front"),d.currentFace="front"):f[0].object===z[1]?(b.calculateCubeTransform("bavk"),
d.currentFace="back"):f[0].object===z[2]?(b.calculateCubeTransform("bottom"),d.currentFace="bottom"):f[0].object===z[3]&&(b.calculateCubeTransform("top"),d.currentFace="top");break;case "down":f[0].object===z[0]?(b.calculateCubeTransform("bottom"),d.currentFace="bottom"):f[0].object===z[1]?(b.calculateCubeTransform("top"),d.currentFace="top"):f[0].object===z[2]?(b.calculateCubeTransform("back"),d.currentFace="back"):f[0].object===z[3]&&(b.calculateCubeTransform("front"),d.currentFace="front");break;
case "left":f[0].object===z[0]?(b.calculateCubeTransform("back"),d.currentFace="back"):f[0].object===z[1]?(b.calculateCubeTransform("front"),d.currentFace="front"):f[0].object===z[2]?(b.calculateCubeTransform("top"),d.currentFace="top"):f[0].object===z[3]&&(b.calculateCubeTransform("bottom"),d.currentFace="bottom")}break;case "back":switch(k){case "up":f[0].object===z[0]?(b.calculateCubeTransform("top"),d.currentFace="top"):f[0].object===z[1]?(b.calculateCubeTransform("bottom"),d.currentFace="bottom"):
f[0].object===z[2]?(b.calculateCubeTransform("left"),d.currentFace="left"):f[0].object===z[3]&&(b.calculateCubeTransform("right"),d.currentFace="right");break;case "right":f[0].object===z[0]?(b.calculateCubeTransform("left"),d.currentFace="left"):f[0].object===z[1]?(b.calculateCubeTransform("right"),d.currentFace="right"):f[0].object===z[2]?(b.calculateCubeTransform("bottom"),d.currentFace="bottom"):f[0].object===z[3]&&(b.calculateCubeTransform("top"),d.currentFace="top");break;case "down":f[0].object===
z[0]?(b.calculateCubeTransform("bottom"),d.currentFace="bottom"):f[0].object===z[1]?(b.calculateCubeTransform("top"),d.currentFace="top"):f[0].object===z[2]?(b.calculateCubeTransform("right"),d.currentFace="right"):f[0].object===z[3]&&(b.calculateCubeTransform("left"),d.currentFace="left");break;case "left":f[0].object===z[0]?(b.calculateCubeTransform("right"),d.currentFace="right"):f[0].object===z[1]?(b.calculateCubeTransform("left"),d.currentFace="left"):f[0].object===z[2]?(b.calculateCubeTransform("top"),
d.currentFace="top"):f[0].object===z[3]&&(b.calculateCubeTransform("bottom"),d.currentFace="bottom")}break;case "top":switch(k){case "up":f[0].object===z[0]?(b.calculateCubeTransform("back"),d.currentFace="back"):f[0].object===z[1]?(b.calculateCubeTransform("front"),d.currentFace="front"):f[0].object===z[2]?(b.calculateCubeTransform("right"),d.currentFace="right"):f[0].object===z[3]&&(b.calculateCubeTransform("left"),d.currentFace="left");break;case "right":f[0].object===z[0]?(b.calculateCubeTransform("right"),
d.currentFace="right"):f[0].object===z[1]?(b.calculateCubeTransform("left"),d.currentFace="left"):f[0].object===z[2]?(b.calculateCubeTransform("front"),d.currentFace="front"):f[0].object===z[3]&&(b.calculateCubeTransform("back"),d.currentFace="back");break;case "down":f[0].object===z[0]?(b.calculateCubeTransform("front"),d.currentFace="front"):f[0].object===z[1]?(b.calculateCubeTransform("back"),d.currentFace="back"):f[0].object===z[2]?(b.calculateCubeTransform("left"),d.currentFace="left"):f[0].object===
z[3]&&(b.calculateCubeTransform("right"),d.currentFace="right");break;case "left":f[0].object===z[0]?(b.calculateCubeTransform("left"),d.currentFace="left"):f[0].object===z[1]?(b.calculateCubeTransform("right"),d.currentFace="right"):f[0].object===z[2]?(b.calculateCubeTransform("back"),d.currentFace="back"):f[0].object===z[3]&&(b.calculateCubeTransform("front"),d.currentFace="front")}break;case "bottom":switch(k){case "up":f[0].object===z[0]?(b.calculateCubeTransform("front"),d.currentFace="front"):
f[0].object===z[1]?(b.calculateCubeTransform("back"),d.currentFace="back"):f[0].object===z[2]?(b.calculateCubeTransform("right"),d.currentFace="right"):f[0].object===z[3]&&(b.calculateCubeTransform("left"),d.currentFace="left");break;case "right":f[0].object===z[0]?(b.calculateCubeTransform("right"),d.currentFace="right"):f[0].object===z[1]?(b.calculateCubeTransform("left"),d.currentFace="left"):f[0].object===z[2]?(b.calculateCubeTransform("back"),d.currentFace="back"):f[0].object===z[3]&&(b.calculateCubeTransform("front"),
d.currentFace="front");break;case "down":f[0].object===z[0]?(b.calculateCubeTransform("back"),d.currentFace="back"):f[0].object===z[1]?(b.calculateCubeTransform("front"),d.currentFace="front"):f[0].object===z[2]?(b.calculateCubeTransform("left"),d.currentFace="left"):f[0].object===z[3]&&(b.calculateCubeTransform("right"),d.currentFace="right");break;case "left":f[0].object===z[0]?(b.calculateCubeTransform("left"),d.currentFace="left"):f[0].object===z[1]?(b.calculateCubeTransform("right"),d.currentFace=
"right"):f[0].object===z[2]?(b.calculateCubeTransform("front"),d.currentFace="front"):f[0].object===z[3]&&(b.calculateCubeTransform("back"),d.currentFace="back")}}b.elapsedTime=0;b.sphericallyInterpolateTransition()}if(0<h.length){b.elapsedTime=0;if(d.wantHomeButton&&h[0].object===E[O]){b.goHome();ha(!1);return}if(d.wantContextMenu&&h[0].object===E[ba]){b.viewCubeMenuOpen=!0;b.drawDropdownMenu(n,m,p,a.clientX,a.clientY,c,aa);ha(!0);return}d.wantRollArrows&&ea&&(h[0].object===E[V]||h[0].object===E[R])&&
(f=h[0].object===E[R],h={center:b.center.clone(),position:g.position.clone(),pivot:g.pivot.clone(),fov:g.fov,worldUp:b.sceneUpDirection.clone(),isOrtho:!1===g.isPerspective},k=b.center.clone().sub(g.position).normalize(),f?h.up=g.up.clone().cross(k):(h.up=g.up.clone().multiplyScalar(-1),h.up.cross(k)),h.up.normalize(),b.elapsedTime=0,b.animateTransition(h))}0<e.length&&(d.currentFace=e[0].object.name,b.orthographicFaces&&-1!==d.currentFace.indexOf(",")&&b.setCameraOrtho(!1),b.calculateCubeTransform(d.currentFace),
b.elapsedTime=0,d.mouseMoveSave=a,b.sphericallyInterpolateTransition(function(){d.mouseMoveSave&&d.processMouseMove(d.mouseMoveSave)}));ha(!1)}};this.processMouseMove=function(a){var c,e;if(b.viewCubeMenuOpen||b.currentlyAnimating)d.mouseMoveSave=a;else{d.mouseMoveSave=null;e=za(a,aa);a=Ea(e,d.camera,K);c=Ea(e,v,z);e=Ea(e,v,E);D&&!X&&(D.material.color.setHex(14540253),D=null,requestAnimationFrame(d.render));if(0<c.length&&!X){D=c[0].object;for(c=P.children.length;0<=--c;)if(D===z[c]){D=P.children[c];
D.material.color.setHex(45055);break}requestAnimationFrame(d.render)}U&&!X&&(U.material.opacity=0,U=null,requestAnimationFrame(d.render));0<a.length&&!X&&(U=a[0].object,U.material.opacity=0.3,requestAnimationFrame(d.render));0<e.length&&!X?J!==e[0].object&&(d.wantHomeButton&&e[0].object===E[O]?(J=e[0].object,E[O].material.map=oa[0]):d.wantRollArrows&&e[0].object===E[V]?(J=e[0].object,E[da].material.map=oa[1]):d.wantRollArrows&&e[0].object===E[R]?(J=e[0].object,E[da].material.map=oa[2]):d.wantContextMenu&&
e[0].object===E[ba]?(J=e[0].object,E[ba].material.map=oa[6]):d.wantHomeButton&&J===E[O]?(J=null,E[O].material.map=oa[3]):!d.wantRollArrows||J!==E[V]&&J!==E[R]&&J!==E[da]?d.wantContextMenu&&J===E[ba]&&(J=null,E[ba].material.map=oa[5]):(J=null,E[da].material.map=oa[4]),requestAnimationFrame(d.render)):null===J||X||(d.wantHomeButton&&J===E[O]?(J=null,E[O].material.map=oa[3]):!d.wantRollArrows||J!==E[V]&&J!==E[R]&&J!==E[da]?d.wantContextMenu&&J===E[ba]&&(J=null,E[ba].material.map=oa[5]):(J=null,E[da].material.map=
oa[4]),requestAnimationFrame(d.render))}};var Ga=function(a){b.navApi.getIsLocked()||d.processMouseMove(a)},sa=function(){aa=Da(c);d.width=c.offsetWidth;d.height=c.offsetHeight;d.camera.aspect=d.width/d.height;d.camera.updateProjectionMatrix();d.camera.topFov=d.camera.bottomFov=d.camera.fov/2;d.camera.leftFov=d.camera.rightFov=d.camera.aspect*d.camera.fov/2;A.setSize(d.width,d.height);requestAnimationFrame(d.render)},qa=function(a,b){var c,d=new THREE.Geometry;c=new THREE.Vector3(0,0,0);var e=new THREE.Vector3(60,
-60,105),f=new THREE.Vector3(60,60,105),g=new THREE.Vector3(-60,60,105),h=new THREE.Vector3(-60,-60,105);d.vertices.push(c);d.vertices.push(e);d.vertices.push(f);d.vertices.push(g);d.vertices.push(h);d.faces.push(new THREE.Face3(1,2,3));d.faces.push(new THREE.Face3(1,3,4));d.applyMatrix((new THREE.Matrix4).makeRotationX(a));d.applyMatrix((new THREE.Matrix4).makeRotationY(b));d.computeFaceNormals();d.computeVertexNormals();c=new THREE.MeshBasicMaterial({overdraw:!0,opacity:0,color:45055,transparent:!0});
return new THREE.Mesh(d,c)},ta=function(a,b,c){var d=new THREE.Geometry,e=new THREE.Vector3(60,105,105),f=new THREE.Vector3(-60,105,105),g=new THREE.Vector3(-60,60,105),h=new THREE.Vector3(60,60,105),k=new THREE.Vector3(60,105,60),l=new THREE.Vector3(-60,105,60),m=new THREE.Vector3(-60,105,105),n=new THREE.Vector3(60,105,105);d.vertices.push(e);d.vertices.push(f);d.vertices.push(g);d.vertices.push(h);d.vertices.push(k);d.vertices.push(l);d.vertices.push(m);d.vertices.push(n);d.faces.push(new THREE.Face3(0,
1,2));d.faces.push(new THREE.Face3(0,2,3));d.faces.push(new THREE.Face3(4,5,6));d.faces.push(new THREE.Face3(4,6,7));d.applyMatrix((new THREE.Matrix4).makeRotationX(a));d.applyMatrix((new THREE.Matrix4).makeRotationY(b));d.applyMatrix((new THREE.Matrix4).makeRotationZ(c));d.computeFaceNormals();d.computeVertexNormals();a=new THREE.MeshBasicMaterial({overdraw:!0,opacity:0,color:45055,transparent:!0});return new THREE.Mesh(d,a)},wa=function(a,b){var c,d=new THREE.Geometry;c=new THREE.Vector3(105,105,
105);var e=new THREE.Vector3(60,105,105),f=new THREE.Vector3(60,60,105),g=new THREE.Vector3(105,60,105),h=new THREE.Vector3(105,105,60),k=new THREE.Vector3(105,105,105),l=new THREE.Vector3(105,60,105),m=new THREE.Vector3(105,60,60),n=new THREE.Vector3(105,105,105),p=new THREE.Vector3(105,105,60),z=new THREE.Vector3(60,105,60),q=new THREE.Vector3(60,105,105);d.vertices.push(c);d.vertices.push(e);d.vertices.push(f);d.vertices.push(g);d.vertices.push(h);d.vertices.push(k);d.vertices.push(l);d.vertices.push(m);
d.vertices.push(n);d.vertices.push(p);d.vertices.push(z);d.vertices.push(q);d.faces.push(new THREE.Face3(0,1,2));d.faces.push(new THREE.Face3(0,2,3));d.faces.push(new THREE.Face3(4,5,6));d.faces.push(new THREE.Face3(4,6,7));d.faces.push(new THREE.Face3(8,9,10));d.faces.push(new THREE.Face3(8,10,11));d.applyMatrix((new THREE.Matrix4).makeRotationX(a));d.applyMatrix((new THREE.Matrix4).makeRotationY(b));d.computeFaceNormals();d.computeVertexNormals();c=new THREE.MeshBasicMaterial({overdraw:!0,opacity:0,
color:45055,transparent:!0});return new THREE.Mesh(d,c)},ua=function(a){var c=b.cubeFront.clone(),d=b.sceneUpDirection.clone(),e=c.clone().cross(d);d.copy(e).cross(c);c.normalize();d.normalize();e.normalize();var f=(new THREE.Vector3(c.x,d.x,e.x)).multiplyScalar(a.x);f.add((new THREE.Vector3(c.y,d.y,e.y)).multiplyScalar(a.y));f.add((new THREE.Vector3(c.z,d.z,e.z)).multiplyScalar(a.z));return f};this.render=function(){var a=d.compass?d.viewScaleFactorCompass*d.viewScale:d.viewScale,c=b.center.clone().sub(g.position).normalize(),
e=g.up.normalize(),c=ua(c),e=ua(e);d.camera.position=c.multiplyScalar(-1).normalize().multiplyScalar(a);d.camera.up=e.normalize();d.camera.lookAt(d.center);ea=b.isFaceView();!ea||Z||b.currentlyAnimating?la():(w.add(P),a=d.wantRollArrows?1:0,E[da].material.opacity=a,E[ba].material.opacity=a);H.material.opacity=Z?0:d.wantContextMenu?1:0;G.material.opacity=Z?0:d.wantHomeButton?1:0;A.clear();A.render(q,d.camera);A.render(s,d.camera);A.render(u,d.camera);A.render(r,d.camera);A.render(w,v)};var la=function(){w.remove(P);
E[da].material.opacity=0;E[ba].material.opacity=0};this.refreshCube=function(){sa()};this.setSize=function(a,b){d.width=a;d.height=b;if(1<c.children.length)for(var e=1;e<c.children.length;e++)c.children[e].style.bottom=(d.height/5).toString()+"px";sa()};this.useTransparency=function(a){(Z=a)?(c.onmouseover=La,c.onmousemove=Ka,c.onmouseout=Ma,Ma()):(c.onmouseover=null,c.onmouseout=null,c.onmousemove=null,c.style.opacity="1.0")};(function(){var a=c.getBoundingClientRect();d.width=a.width;d.height=a.height;
aa=Da(c);v=new THREE.PerspectiveCamera(70,d.height/d.width,1,1E4);v.position.set(0,0,500);q=new THREE.Scene;s=new THREE.Scene;r=new THREE.Scene;u=new THREE.Scene;w=new THREE.Scene;ea=!0;M=200;d.viewScale=3.5*M;var a=THREE.LinearFilter,e=THREE.ImageUtils.loadCompressedTextureCube(h+"VCcross.dds",new THREE.CubeReflectionMapping);e.minFilter=e.maxFilter=a;var g=THREE.ShaderLib.cube;g.uniforms.tCube.value=e;var g=new THREE.ShaderMaterial({fragmentShader:g.fragmentShader,vertexShader:g.vertexShader,uniforms:g.uniforms,
depthWrite:!1}),m=new THREE.BoxGeometry(M,M,M,5,5,5),e=new THREE.BoxGeometry(M+1,M+1,M+1,5,5,5);B=new THREE.Mesh(m,g);B.position.set(0,0,0);g=ya(f+"VCedge1.png");g.minFilter=g.maxFilter=a;C=new THREE.Mesh(e,new THREE.MeshBasicMaterial({map:g,overdraw:!1,transparent:!0,shading:THREE.SmoothShading}));C.position.set(0,0,0);N=new THREE.Object3D;N.add(B);s.add(N);u.add(C);var a=M,e=new THREE.Geometry,g=new THREE.Vector3(-30,0,0),m=new THREE.Vector3(30,0,0),n=new THREE.Vector3(0,-30,0);e.vertices.push(g);
e.vertices.push(m);e.vertices.push(n);e.faces.push(new THREE.Face3(1,0,2));e.computeFaceNormals();var n=new THREE.MeshBasicMaterial({overdraw:!0,color:14540253,transparent:!1,opacity:1,shading:THREE.FlatShading}),p=new THREE.MeshBasicMaterial({overdraw:!0,color:14540253,transparent:!1,opacity:1,shading:THREE.FlatShading}),D=new THREE.MeshBasicMaterial({overdraw:!0,color:14540253,transparent:!1,opacity:1,shading:THREE.FlatShading}),J=new THREE.MeshBasicMaterial({overdraw:!0,color:14540253,transparent:!1,
opacity:1,shading:THREE.FlatShading}),g=new THREE.PlaneGeometry(0.5*M,0.3*M,2,2),m=new THREE.MeshBasicMaterial({transparent:!0,opacity:0}),n=new THREE.Mesh(e,n),U=new THREE.Mesh(g,m);n.position.set(0,a,0);U.position.set(0,0.9*a,0.1);var p=new THREE.Mesh(e,p),ca=new THREE.Mesh(g,m);p.position.set(0,-a,0);ca.position.set(0,0.9*-a,0.1);p.rotation.z+=Math.PI;ca.rotation.z+=Math.PI;var D=new THREE.Mesh(e,D),Ea=new THREE.Mesh(g,m);D.position.set(a,0,0);Ea.position.set(0.9*a,0,0.1);D.rotation.z-=Math.PI/
2;Ea.rotation.z-=Math.PI/2;e=new THREE.Mesh(e,J);g=new THREE.Mesh(g,m);e.position.set(-a,0,0);g.position.set(0.9*-a,0,0.1);e.rotation.z+=Math.PI/2;g.rotation.z+=Math.PI/2;P=new THREE.Object3D;P.position.set(0,0,0);P.add(n);P.add(p);P.add(D);P.add(e);w.add(U);w.add(ca);w.add(Ea);w.add(g);w.add(P);z.push(U);z.push(ca);z.push(Ea);z.push(g);a=new THREE.PlaneGeometry(M/3,M/3,2,2);e=new THREE.MeshBasicMaterial({map:ya(f+"VChome.png"),transparent:!0,shading:THREE.FlatShading});G=new THREE.Mesh(a,e);G.position.set(-M,
M,0);O=E.length;w.add(G);E.push(G);a=new THREE.PlaneGeometry(1.5*M,1.5*M,2,2);e=new THREE.MeshBasicMaterial({map:ya(f+"VCarrows.png"),shading:THREE.FlatShading,transparent:!0});a=new THREE.Mesh(a,e);a.position.set(0.5*M+20,0.5*M+20,0);e=new THREE.PlaneGeometry(0.6*M,0.45*M,2,2);g=new THREE.MeshBasicMaterial({transparent:!0,opacity:0});e=new THREE.Mesh(e,g);e.position.set(0.5*M+20,M+20,0.1);g=new THREE.PlaneGeometry(0.45*M,0.6*M,2,2);m=new THREE.MeshBasicMaterial({transparent:!0,opacity:0});g=new THREE.Mesh(g,
m);g.position.set(M+20,0.5*M+20,0.1);w.add(a);w.add(e);w.add(g);V=E.length;E.push(e);R=E.length;E.push(g);da=E.length;E.push(a);a=new THREE.PlaneGeometry(M/2.3,M/2.3,2,2);e=new THREE.MeshBasicMaterial({map:ya(f+"VCcontext.png"),transparent:!0,shading:THREE.FlatShading});H=new THREE.Mesh(a,e);H.position.set(M,-M,0);ba=E.length;w.add(H);E.push(H);a=new THREE.Geometry;a.vertices.push(new THREE.Vector3(0,0,0));a.vertices.push(new THREE.Vector3(-M/2,-M/2-20,-M/2));a.vertices.push(new THREE.Vector3(M/2,
-M/2-20,-M/2));a.vertices.push(new THREE.Vector3(M/2,-M/2-20,M/2));a.vertices.push(new THREE.Vector3(-M/2,-M/2-20,M/2));a.faces.push(new THREE.Face3(4,3,2));a.faces.push(new THREE.Face3(4,2,1));e=new THREE.MeshBasicMaterial({color:0,transparent:!0,opacity:0.5});I=new THREE.Mesh(a,e);q.add(I);e=[];g=[];e[0]=wa(0,0);e[1]=wa(0,Math.PI/2);e[2]=wa(0,-Math.PI/2);e[3]=wa(0,Math.PI);e[4]=wa(Math.PI/2,0);e[5]=wa(Math.PI/2,Math.PI/2);e[6]=wa(Math.PI/2,-Math.PI/2);e[7]=wa(Math.PI/2,Math.PI);g[0]=ta(0,0,0);g[1]=
ta(0,Math.PI/2,0);g[2]=ta(0,-Math.PI/2,0);g[3]=ta(0,Math.PI,0);g[4]=ta(Math.PI/2,0,0);g[5]=ta(Math.PI/2,Math.PI/2,0);g[6]=ta(Math.PI/2,-Math.PI/2,0);g[7]=ta(Math.PI/2,Math.PI,0);g[8]=ta(0,0,Math.PI/2);g[9]=ta(0,0,-Math.PI/2);g[10]=ta(-Math.PI/2,0,-Math.PI/2);g[11]=ta(-Math.PI,0,-Math.PI/2);F.push(qa(0,0));F[0].name="front";K.push(F[0]);S.push(F[0]);r.add(F[0]);F.push(qa(0,Math.PI/2));F[1].name="right";K.push(F[1]);S.push(F[1]);r.add(F[1]);F.push(qa(0,Math.PI));F[2].name="back";K.push(F[2]);S.push(F[2]);
r.add(F[2]);F.push(qa(0,-Math.PI/2));F[3].name="left";K.push(F[3]);S.push(F[3]);r.add(F[3]);F.push(qa(Math.PI/2,0));F[4].name="bottom";K.push(F[4]);S.push(F[4]);r.add(F[4]);F.push(qa(-Math.PI/2,0));F[5].name="top";K.push(F[5]);S.push(F[5]);r.add(F[5]);a=F.length;for(m=0;m<e.length;m++)F.push(e[m]),F[a+m].name=l[m],r.add(F[a+m]),K.push(F[a+m]),S.push(F[a+m]);a=F.length;for(m=0;m<g.length;m++)F.push(g[m]),F[a+m].name=k[m],r.add(F[a+m]),K.push(F[a+m]),S.push(F[a+m]);"CANVAS"===b.renderer.toUpperCase()?
A=new THREE.CanvasRenderer:"WEBGL"===b.renderer.toUpperCase()?A=new FireflyWebGLRenderer({alpha:!0}):(console.log("Incorrect use of Autocam.renderer property"),A=new THREE.CanvasRenderer);d.useTransparency(!0);d.setSize(d.width,d.height);d.camera.topFov=d.camera.bottomFov=d.camera.fov/2;d.camera.leftFov=d.camera.rightFov=d.camera.aspect*d.camera.fov/2;A.autoClear=!1;A.setSize(d.width,d.height);A.sortObjects=!1;c.appendChild(A.domElement);c.addEventListener("mousedown",Ia,!1);c.addEventListener("mousemove",
Ga,!1);window.addEventListener("resize",sa,!1);xa=!1;oa.push(ya(f+"VChomeS.png"));oa.push(ya(f+"VCarrowsS0.png"));oa.push(ya(f+"VCarrowsS1.png"));oa.push(ya(f+"VChome.png"));oa.push(ya(f+"VCarrows.png"));oa.push(ya(f+"VCcontext.png"));oa.push(ya(f+"VCcontextS.png"))})()};AutodeskNamespace("Autodesk.Viewing");
Autodesk.Viewing.ToolController=function(a,b,c,e,d){function g(a){var b=Math.abs(a.endX-a.startX),c=Math.abs(a.endY-a.startY);a=a.endTime-a.startTime<=q;return b<=m&&c<=m&&a}function f(a,b){var c=b.startTime-a.endTime,d=Math.abs(b.endX-a.startX),e=Math.abs(b.endY-a.startY),c=c<=s;return d<=p&&e<=p&&c}function h(){null!==I&&(clearTimeout(I),I=null);for(;0<G.length;){var a=G.shift();if(g(a))if(0<G.length){var b=G.shift();g(b)?f(a,b)?E.handleDoubleTap(a,b):(E.handleSingleTap(a),G.unshift(b)):E.handleSingleTap(a)}else if(Date.now()-
a.endTime>=s)E.handleSingleTap(a);else{G.unshift(a);I=setTimeout(function(){I=null;h()},s);break}}}this.domElement=a.canvas;this.selector=a.selector;this.autocam=c;this.downY=this.downX=-1;this.inTouch=!1;var k=-1!=navigator.userAgent.search("Mac OS"),l=-1!=navigator.userAgent.search("Firefox"),n=2*Math.PI,m=8,p=32,q=300,s=300,r={},u=[],w=!1,A=[],v=[],B=-1,C=-1,N=-1,G=[],I=null,H=!1,F=null,P=!1,z=void 0,K={},E=this;this.__registerToolByName=function(a,b){r[b]=a;a.utilities=e;a.controller=this};this.registerTool=
function(a){var b=a.getNames();if(!b||0==b.length)return console.log("Cannot register tool with no name."),!1;for(var c=!1,d=0;d<b.length;++d)"default"!==b[d]&&(this.__registerToolByName(a,b[d]),c=!0);return c};this.deregisterTool=function(a){var b=a.getNames();if(!b||0==b.length)return!1;for(var c=b.length;0<=--c;)this.__deregisterToolName(b[c]);a.utilities=null;a.controller=null;return!0};this.__deregisterToolName=function(a){if(a in r){delete r[a];for(var b=u.length;0<=--b;)u[b]===a&&(r[a].deactivate(a),
u.splice(b,1))}};this.getTool=function(a){return r[a]};this.getActiveToolName=function(){var a=u.length;return 0<a?u[a-1]:"default"};this.activateTool=function(a){if(w)return!1;var b=r[a];if(b)return u.push(a),b.activate(a),!0;stderr("activateTool not found: "+a);return!1};this.deactivateTool=function(a){if(w)return!1;for(var b=u.length;0<=--b;)if(u[b]===a)return u.splice(b,1),r[a].deactivate(a),!0;stderr("deactivateTool not found: "+a);return!1};this.getToolNames=function(){return Object.keys(r)};
this.setDefaultTool=function(a){a&&this.__registerToolByName(a,"default")};this.getDefaultTool=function(){return r["default"]};this.setDefaultTool(d);this.setIsLocked=function(a){var b=w;w=!!a;return b};this.getIsLocked=function(){return w};this.__checkCursor=function(){for(var a=null,c=u.length;0<=--c;){var d=r[u[c]];if("getCursor"in d&&(a=d.getCursor()))break}a||(a="auto");F!=a&&(F=b.canvas.style.cursor=a)};this.update=function(){this.__checkCursor();var a=!1;e&&e.update()&&(a=!0);for(var c=u.length;0<=
--c;){var d=r[u[c]];"update"in d&&d.update()&&(a=!0)}b.navigation.getCamera().dirty&&(b.navigation.updateCamera(),a=!0);a?(b.navigation.updateCamera(),this.moveDelay=Date.now()+150):0!==this.moveDelay&&(0<this.moveDelay-Date.now()?a=!0:this.moveDelay=0);return a};this.__clientToCanvasCoords=function(a,b,c){var d=this.domElement.getBoundingClientRect(),e=d.width,f=d.height,g=a.clientX-d.left,d=a.clientY-d.top;a.canvasX=g;a.canvasY=d;a.normalizedX=g/e*2-1;a.normalizedY=(f-d)/f*2-1;b&&b.set(g/e,d/f,
0);c&&c.set(g,d)};this.__invokeStack=function(a,b,c){for(var d=u.length;0<=--d;){var e=r[u[d]];if(a in e&&e[a](b,c))return!0}d=this.getDefaultTool();return a in d?d[a](b,c):!1};this.handleResize=function(){b.navigation.setScreenViewport(b.container.getBoundingClientRect());for(var a=u.length;0<=--a;){var c=r[u[a]];"handleResize"in c&&c.handleResize()}};this.handleSingleClick=function(a){var b=this.applyButtonMappings(a);this.__invokeStack("handleSingleClick",a,b)&&(a.preventDefault(),a.stopPropagation())};
this.handleDoubleClick=function(a){var b=this.applyButtonMappings(a);this.__invokeStack("handleDoubleClick",a,b)&&(a.preventDefault(),a.stopPropagation())};this.handleSingleTap=function(a){this.__invokeStack("handleSingleTap",a)&&(event.preventDefault(),event.stopPropagation())};this.handleDoubleTap=function(a,b){this.__invokeStack("handleDoubleTap",a,b)&&(event.preventDefault(),event.stopPropagation())};this.handleWheelInput=function(a,b){this.__invokeStack("handleWheelInput",a)&&(b.preventDefault(),
b.stopPropagation())};this.applyButtonMappings=function(a){var c=a.button;"buttons"in a&&(a.firefoxSpoof?c=0:!H||a.buttons&1?2===c&&a.buttons&1&&(c=0,a.firefoxSpoof=H=!0):(a.firefoxSpoof=!0,H=!1,c=0));b.navigation.getUseLeftHandedInput()&&(c=0===c?2:2===c?0:c);return c};this.applyKeyMappings=function(a,b){switch(a.keyCode){case 91:case 93:case 224:return k&&a.metaKey&&a.shiftKey?null:17;case 16:return b&&k&&a.metaKey?null:16;case 61:return 187;case 173:case 109:return 189}return a.keyCode};this.handleKeyDown=
function(a){var b=this.applyKeyMappings(a,!0);b&&this.__invokeStack("handleKeyDown",a,b)&&(a.preventDefault(),a.stopPropagation())};this.handleKeyUp=function(a){var b=this.applyKeyMappings(a,!0);b&&this.__invokeStack("handleKeyUp",a,b)&&(a.preventDefault(),a.stopPropagation())};this.handleButtonDown=function(a,b){this.__invokeStack("handleButtonDown",a,b)&&(a.preventDefault(),a.stopPropagation())};this.handleButtonUp=function(a,b){this.__invokeStack("handleButtonUp",a,b)&&(a.preventDefault(),a.stopPropagation())};
this.handleMouseMove=function(a){this.__invokeStack("handleMouseMove",a)&&(a.preventDefault(),a.stopPropagation())};this.handleTouchStart=function(a){this.__invokeStack("handleTouchStart",a,v)&&(a.preventDefault(),a.stopPropagation())};this.handleTouchMove=function(a){this.__invokeStack("handleTouchMove",a,v)&&(a.preventDefault(),a.stopPropagation())};this.handleTouchChange=function(a){this.__invokeStack("handleTouchChange",a,v)&&(a.preventDefault(),a.stopPropagation())};this.handleTouchEnd=function(a){this.__invokeStack("handleTouchEnd",
a)&&(a.preventDefault(),a.stopPropagation())};this.handleBlur=function(a){this.__invokeStack("handleBlur",a)&&(a.preventDefault(),a.stopPropagation())};this.keydown=function(b){z===a.canvas&&(k&&b.metaKey&&91!=b.keyCode&&93!=b.keyCode||E.handleKeyDown(b))};this.keyup=function(a){k&&a.metaKey&&91!=a.keyCode&&93!=a.keyCode||E.handleKeyUp(a)};this.mousedown=function(a){function c(a){E.applyButtonMappings(a)===d&&(document.removeEventListener("mouseup",c),E.mouseup(a))}_isIE11&&inFullscreen()||document.activeElement.blur();
E.__clientToCanvasCoords(a);var d=E.applyButtonMappings(a);E.handleButtonDown(a,d);E.downX=a.canvasX;E.downY=a.canvasY;if(b.navigation.getUseLeftHandedInput()&&0===d||l&&1===d){var e=void 0!==K.time&&500>a.timeStamp-K.time,f=void 0!==K.x&&void 0!==K.y&&2>=Math.abs(K.x-a.canvasX)&&2>=Math.abs(K.y-a.canvasY);if(!e||!f||K.clickCount&&2<=K.clickCount)K.clickCount=0;K.clickCount?1===K.clickCount&&(K.clickCount=2):(K.clickCount=1,K.x=a.canvasX,K.y=a.canvasY,K.time=a.timeStamp)}document.addEventListener("mouseup",
c,!1)};this.mousemove=function(a){if(!E.inTouch){E.__clientToCanvasCoords(a);var b=E.downY-a.canvasY;if(2<Math.abs(E.downX-a.canvasX)||2<Math.abs(b))E.downX=-1,E.downY=-1;E.handleMouseMove(a)}};this.mouseup=function(a){E.__clientToCanvasCoords(a);var c=E.applyButtonMappings(a);E.handleButtonUp(a,c);var d=E.downX-a.canvasX,e=E.downY-a.canvasY;E.downX=-1;E.downY=-1;2>=Math.abs(d)&&2>=Math.abs(e)&&E.handleSingleClick(a);(b.navigation.getUseLeftHandedInput()&&0===c||l&&1===c)&&2===K.clickCount&&(E.handleDoubleClick(a),
K.clickCount=0,K.x=void 0,K.y=void 0,K.time=void 0)};this.doubleclick=function(a){E.__clientToCanvasCoords(a);E.downX=a.canvasX;E.downY=a.canvasY;E.handleDoubleClick(a)};this.mousewheel=function(a){if(!E.inTouch){var b=0;a.wheelDelta?b=a.wheelDelta/40:a.detail&&(b=-a.detail);E.handleWheelInput(b,a)}};this.redirectTouchEvent=function(a){var b;a:{b=a.changedTouches[0];var c;switch(a.type){case "touchstart":c="mousedown";break;case "touchmove":c="mousemove";break;case "touchend":c="mouseup";break;default:console.log("Unhandled touch event: "+
a.type);b=null;break a}var d=new MouseEvent(c);d.initMouseEvent(c,!0,!0,window,1,b.screenX,b.screenY,b.clientX,b.clientY,!1,!1,!1,!1,0,null);b=d}a.preventDefault();if(null!==b)E[b.type](b)};this.touchstart=function(a){function b(a){0<v.length&&v.length!==a.targetTouches.length&&E.handleTouchChange(a);A=[];v=[];for(var c=0;c<a.targetTouches.length;++c){var d=a.targetTouches[c];d.clientX=d.pageX;d.clientY=d.pageY;E.__clientToCanvasCoords(d);A.push({x:d.canvasX,y:d.canvasY});v.push({x:d.canvasX,y:d.canvasY})}}
function c(a){a.preventDefault();a.stopPropagation();0===a.targetTouches.length?(document.removeEventListener("touchend",c),P=!1,E.touchend(a)):b(a)}E.inTouch=!0;document.activeElement.blur();b(a);if(1===v.length){var d=v[0];B=d.x;C=d.y;N=Date.now()}else B=C=N=-1;P||(document.addEventListener("touchend",c,!1),P=!0);E.handleTouchStart(a)};this.touchmove=function(a){v=[];for(var b=0;b<a.targetTouches.length;++b){var c=a.targetTouches[b];c.clientX=c.pageX;c.clientY=c.pageY;E.__clientToCanvasCoords(c);
v.push({x:c.canvasX,y:c.canvasY})}2===v.length&&2===A.length&&(b=Math.atan2(v[1].y-v[0].y,v[1].x-v[0].x),0>b&&(b+=n),c=Math.atan2(A[1].y-A[0].y,A[1].x-A[0].x),0>c&&(c+=n),b=Math.abs(b-c),b>Math.PI&&(b=n-b),2.9<b&&(b=v[1],v[1]=v[0],v[0]=b));E.handleTouchMove(a)};this.touchend=function(a){E.inTouch=!1;if(-1!==N){var b=v[0],b={startX:B,startY:C,startTime:N,endX:b.x,endY:b.y,endTime:Date.now()};G.push(b)}this.handleTouchEnd(a);h();A=[];v=[]};this.blur=function(a){E.handleBlur(a)};this.domElement.addEventListener("mousedown",
this.mousedown,!1);window.addEventListener("mousemove",this.mousemove,!1);this.domElement.addEventListener("dblclick",this.doubleclick,!1);this.domElement.addEventListener("mousewheel",this.mousewheel,!1);this.domElement.addEventListener("DOMMouseScroll",this.mousewheel,!1);this.domElement.addEventListener("touchstart",function(a){E.redirectTouchEvent(a)},!1);this.domElement.addEventListener("touchmove",function(a){E.redirectTouchEvent(a)},!1);this.domElement.addEventListener("touchend",function(a){E.redirectTouchEvent(a)},
!1);window.addEventListener("keydown",this.keydown,!1);window.addEventListener("keyup",this.keyup,!1);this.mouseover=function(a){z=a.target};window.addEventListener("mouseover",this.mouseover,!1);window.addEventListener("blur",this.blur,!1);this.uninitialize=function(){window.removeEventListener("mousemove",this.mousemove,!1);window.removeEventListener("keydown",this.keydown,!1);window.removeEventListener("keyup",this.keyup,!1);window.removeEventListener("mouseover",this.mouseover,!1);window.removeEventListener("blur",
this.blur,!1)};this.setSelector=function(a){this.selector=a};this.set2DMode=function(a){};this.setAutocam=function(a){};this.syncCamera=function(){};this.recordHomeView=function(){var a=b.navigation.getCamera();c.sync(a);c.setHomeViewFrom(a)}};AutodeskNamespace("Autodesk.Viewing");
Autodesk.Viewing.ViewingUtilities=function(a,b,c){this.autocam=b;var e=c.getCamera(),d=null,g=!1,f=new function(a){var b=0,c=new THREE.SphereGeometry(1),d=new THREE.MeshPhongMaterial({color:32512,ambient:32512,opacity:0.6,transparent:!0}),e=new THREE.MeshPhongMaterial({color:32512,ambient:32512,opacity:0.6,transparent:!0}),f=new THREE.Mesh(c,e);a.createOverlayScene("pivot",d,e);f.visible=!1;this.shown=function(){return f.visible};this.show=function(c,g,l){f.scale.x=g;f.scale.y=g;f.scale.z=g;f.position.set(c.x,
c.y,c.z);e.opacity=0.6;d.opacity=0.6;f.visible=!0;a.addOverlay("pivot",f);b=l?Date.now()+500:0};this.hide=function(){f.visible&&(f.visible=!1,a.removeOverlay("pivot",f),b=0)};this.fade=function(){if(0<b){var a=b-Date.now();if(0>=a)return this.hide(),!0;a=a/500*0.6;d.opacity=a;e.opacity=a;return!0}return!1};this.fading=function(){return 0<b}}(a);this.transitionView=function(a,d,f,g,m,p){m=m||c.getWorldUpVector();if(p)if(g=m,p=d.clone().sub(a),0===p.lengthSq())g=p.copy(g);else{var q=p.clone().cross(g);
0===q.lengthSq()&&(g.z>g.y?p.y-=1E-4:p.z-=1E-4,q.crossVectors(p,g));g=q.cross(p).normalize()}g||(g=e.up);b.goToView({position:a,center:d,pivot:d,fov:f,up:g,worldUp:m,isOrtho:!1===e.isPerspective})};this.goHome=function(){b.goHome()};this.getHitPoint=function(b,c){c=2*(1-c)-1;var d=new THREE.Vector3(2*b-1,c,1);return(d=a.hitTestViewport(d,!1))?d.intersectPoint:null};this.activatePivot=function(a){var b=e.isPerspective?c.getPivotPlaneDistance():c.getEyeVector().length(),d=c.getVerticalFov(),b=2*b*Math.tan(THREE.Math.degToRad(0.5*
d)),d=c.getScreenViewport(),b=5*b/(d.height*(window.devicePixelRatio||1));f.show(c.getPivotPoint(),b,a)};this.pivotActive=function(a,b){a=a&&!c.getIs2D();b=b||!1;!a&&f.shown()?f.hide():a&&this.activatePivot(b)};this.pivotUpdate=function(){f.shown()&&f.fade()&&a.invalidate(!1,!1,!0)};this.setPivotPoint=function(a,b,d){c.getIs2D()||(c.setPivotPoint(a),b||c.setTarget(a),d&&c.setPivotSetFlag(!0),f.shown()&&this.activatePivot(f.fading()))};this.savePivot=function(){d=c.getPivotPoint();g=c.getPivotSetFlag()};
this.restorePivot=function(){null!==d&&(this.setPivotPoint(d,!0,g),g||c.setPivotSetFlag(!1),d=null)};this.getBoundingBox=function(b){return a.getFitBounds(b)};this.fitToView=function(b){b=c.fitBounds(b,a.getFitBounds(!1));this.activatePivot(!0);return b};this.update=function(){c.getRequestFitToView()&&!c.getTransitionActive()&&(c.setRequestFitToView(!1),this.fitToView());c.getRequestHomeView()&&!c.getTransitionActive()&&(c.setRequestHomeView(!1),this.goHome());var a=c.getRequestTransition();a&&!c.getTransitionActive()&&
(c.setRequestTransition(!1),this.transitionView(a.position,a.coi,a.fov,a.up,a.worldUp,a.reorient));return!1}};AutodeskNamespace("Autodesk.Viewing");
Autodesk.Viewing.DefaultHandler=function(a,b,c){this.clickConfig=null;this.getNames=function(){return["default"]};this.setClickBehavior=function(a){this.clickConfig=a};this.getClickBehavior=function(){return this.clickConfig};this.activate=function(a){};this.deactivate=function(a){};this.handleAction=function(b,d){for(var g=0;g<b.length;++g)switch(b[g]){case "selectOnly":a.selector&&d.node&&a.selector.setSelection([d.node]);break;case "deselectAll":a.selector&&a.selector.setSelection([]);break;case "selectToggle":a.selector&&
d.node&&a.selector.toggleSelection(d.node);break;case "isolate":d.node&&a.isolate(d.node);break;case "showAll":a.showAll();break;case "setCOI":d.intersectPoint&&(c.setPivotPoint(d.intersectPoint,!0,!0),c.pivotActive(!0,!0));break;case "hide":d.node&&a.hideMultiple([d.node]);break;case "show":d.node&&a.showMultiple([d.node]);break;case "toggleVisibility":d.node&&a.toggleVisibility(d.node);break;case "focus":a.selector&&(d.node?a.selector.setSelection([d.node]):a.selector.setSelection([]),c.fitToView())}};
this.handleSingleClick=function(b,d){var g=b.ctrlKey||b.metaKey,f=b.shiftKey,h=b.altKey;if(0===d){var k=a.hitTest(b.clientX,b.clientY,!1),l="click";g&&(l+="Ctrl");f&&(l+="Shift");h&&(l+="Alt");g=k.node?"onObject":"offObject";if(this.clickConfig&&this.clickConfig[l]&&this.clickConfig[l][g])return this.handleAction(this.clickConfig[l][g],k),!0}else if(1===d&&f&&!h&&!g&&(k=a.hitTest(b.clientX,b.clientY,!1),k.intersectPoint))return c.setPivotPoint(k.intersectPoint,!0,!0),c.pivotActive(!0,!0),!0;return!1};
this.handleDoubleClick=function(e,d){if(null!=a.selector&&0===d){var g=a.hitTest(e.clientX,e.clientY,!1);g.node?a.selector.setSelection([g.node]):a.selector.clearSelection();c.fitToView();return!0}return 1===d?(b.fitBounds(!1,c.getBoundingBox(!0)),b.setPivotSetFlag(!1),!0):!1};this.handleSingleTap=function(e){return!b.getIs2D()&&(e=a.hitTest((e.startX+e.endX)/2,(e.startY+e.endY)/2,!1),e.intersectPoint)?(c.setPivotPoint(e.intersectPoint,!0,!0),c.pivotActive(!0,!0),!0):!1};this.handleDoubleTap=function(b,
d){var g=(b.startX+b.endX+d.startX+d.endX)/4,f=(b.startY+b.endY+d.startY+d.endY)/4;return null!=a.selector?(g=a.hitTest(g,f,!1),g.node?a.selector.setSelection([g.node]):a.selector.clearSelection(),c.fitToView(),!0):!1};this.handleKeyDown=function(a,c){switch(c){case 72:case 36:b.setRequestHomeView(!0);break;case 70:b.setRequestFitToView(!0);break;case 27:break;default:return!1}return!0};this.handleKeyUp=function(b,c){switch(c){case 72:case 36:case 70:break;case 27:if(a.api.objectContextMenu&&a.api.objectContextMenu.hide())break;
a.api.fireEvent({type:Autodesk.Viewing.ESCAPE_EVENT});break;default:return!1}return!0}};AutodeskNamespace("Autodesk.Viewing");
Autodesk.Viewing.OrbitDollyPanTool=function(a,b){var c=this,e=-1!=navigator.userAgent.search("Mac OS"),d=b.navigation,g=d.getCamera(),f=["orbit","dolly","pan"],h=f[0],k=!1,l=null,n=!1,m,p,q=null,s=-5,r=new THREE.Vector3,u=new THREE.Vector3,w=new THREE.Vector2,A=new THREE.Vector2,v=new THREE.Vector2,B=new THREE.Vector3,C=[!1,!1,!1,!1,!1,!1],N=0,G=0,I=0,H=0,F=0,P=0,z=1,K=5,E=0.025;this.getNames=function(){return f};this.getName=function(){return f[0]};this.activate=function(a){h=a;switch(a){case "pan":F=
1;P=0;break;case "dolly":P=1,F=0}};this.deactivate=function(a){switch(a){case "pan":F=0;break;case "dolly":P=0}};this.adjustDollyLookSpeed=function(a){0===a?(E=0.025,K=5):(E*=0<a?1.1:0.9,K*=0<a?1.1:0.9,1E-6>E&&(E=1E-6),1E-6>K&&(K=1E-6))};this.getDollySpeed=function(){var a=d.getPivotPlaneDistance()*E;return 0.01>a?0.01:a};this.getLookSpeed=function(){return K};this.coiIsVisible=function(){var a=d.getPosition(),b=d.getPivotPoint(),c=d.getEyeVector();if(0>b.sub(a).dot(c))return!1;var a=d.getCameraRightVector(),
b=d.getCameraUpVector(),c=d.getPosition(),c=d.getPivotPoint().sub(c),a=Math.abs(a.dot(c)),b=Math.abs(b.dot(c)),c=d.getScreenViewport(),e=d.getPivotPlaneDistance()*Math.tan(THREE.Math.degToRad(0.5*g.fov));return a<c.width/c.height*e&&b<e};this.coiIsActive=function(){return d.getPivotSetFlag()&&this.coiIsVisible()};this.adjustSpeed=function(a){this.adjustDollyLookSpeed(a);this.utilities.autocam&&(this.utilities.autocam.orbitMultiplier=this.getLookSpeed())};this.initTracking=function(a,b){var c;if(g.isPerspective){c=
this.utilities.getHitPoint(a,b);var e=d.getPosition();c&&c.sub?(c=c.sub(e),e=d.getEyeVector().normalize(),c=Math.abs(e.dot(c))):c=d.getPivotPlaneDistance()}else c=d.getEyeVector().length();z=c};this.getCursor=function(){switch(h){case "orbit":return"url(data:image/x-icon;base64,AAACAAEAGBgAAAAAAACICQAAFgAAACgAAAAYAAAAMAAAAAEAIAAAAAAAYAkAABMLAAATCwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAsQAAAEgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABYRERH/sbGx/wAAALEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEQcHB/9/f3///////wAAAP8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAdCAgI/3p6ev///////////wAAAP8AAADWAAAAqAAAAHwAAABKAAAAEgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHQAAAHQEBAT/AAAABAAAABQUFBT/hoaG/////////////////+Hh4f/W1tb/qKio/3x8fP9KSkr/EhIS/wAAAHQAAAAdAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABEHR0d/3R0dP9nZ2f/AAAAdgAAABQUFBT/sbGx//////////////////z8/P//////////////////////x8fH/3R0dP8dHR3/AAAARAAAAAAAAAAAAAAAAAAAADQ0NDT/ra2t///////f39//VFRU/wQEBP8BAQH/MDAw/7q6uv///////////4iIiP9mZmb/g4OD/7W1tf/t7e3///////////+tra3/NDQ0/wAAADQAAAAAAAAAAAAAAJ2dnZ3//////+Li4v+Li4v/MTEx/wAAADEAAAABAAAAUScnJ/+5ubn//////wAAAP8AAABmAAAAgwAAALU4ODj/i4uL/+Li4v//////nZ2d/wAAAJ0AAAAAAAAAAAAAAO/v7+///////2JiYv8AAACLAAAAOAAAAAEAAAAJAAAAAAAAAFAsLCz/uLi4/wAAALgAAAAAAAAAAAAAAAAAAAA4AAAAi2JiYv//////7+/v/wAAAO8AAAAAAAAAAAAAAJ2dnZ3//////+Li4v+Li4v/ODg4/wEBAf8JCQn/AAAAVwAAADMAAABPCwsL/wAAAE8AAABXAAAAgwAAALU4ODj/i4uL/+Li4v//////nZ2d/wAAAJ0AAAAAAAAAAAAAADQ0NDT/ra2t////////////7e3t/7W1tf+Dg4P/V1dX/zMzM/8YGBj/FxcX/zMzM/9XV1f/g4OD/7W1tf/t7e3///////////+tra3/NDQ0/wAAADQAAAAAAAAAAAAAAAAAAABEHR0d/3R0dP/Hx8f/////////////////////////////////////////////////////////////////x8fH/3R0dP8dHR3/AAAARAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHQAAAHQSEhL/SkpK/3x8fP+oqKj/zMzM/+jo6P/5+fn/+fn5/+jo6P/MzMz/qKio/3x8fP9KSkr/EhIS/wAAAHQAAAAdAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASAAAASgAAAHwAAACoAAAAzAAAAOgAAAD5AAAA+QAAAOgAAADMAAAAqAAAAHwAAABKAAAAEgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACNAAAA9gAAAI0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD29vb2/0hISP8AAACQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///////n5+f9OTk7/AAAAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD////////////5+fn/Tk5O/wAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////+fn5/wAAAPkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACWAAAA/wAAAP8AAAD/AAAA+QAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8x////O////1D/8f9y/+H/Rv/B/3P9gA9k8AADXOAAAVzAAABnwAAAIMAhwGXAAAB4wAAAXOAAAWPwAANt/AAPVP///3Qf//87D///cAf//28D//9cA///XAP//2c=), wait";
case "dolly":return"url(data:image/x-icon;base64,AAACAAEAGBgAAAAAAACICQAAFgAAACgAAAAYAAAAMAAAAAEAIAAAAAAAYAkAABMLAAATCwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANQAAAJ4AAACeAAAANQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA5CQkJ/56env+enp7/CQkJ/wAAADkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD8JCQn/oqKi////////////oqKi/wkJCf8AAAA/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATQsLC/+oqKj//////////////////////6ioqP8LCwv/AAAATQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABYDg4O/7a2tv////////////////////////////////+2trb/Dg4O/wAAAFgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGQMDAz/wcHB////////////////////////////////////////////wcHB/wwMDP8AAABkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYxoaGv/Nzc3//////////////////////////////////////////////////////83Nzf8aGhr/AAAAYwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAoKCgo/8zMzP/////////////////////////////////////////////////////////////////MzMz/KCgo/wAAACgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA7Ozs7/2lpaf9qamr/gICA/76+vv////////////////////////////////++vr7/gICA/2pqav9paWn/Ozs7/wAAADsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOwAAAGkAAABqAAAAgE5OTv////////////////////////////////9OTk7/AAAAgAAAAGoAAABpAAAAOwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJCQkJP////////////////////////////////8kJCT/AAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgICAv/29vb///////////////////////b29v8CAgL/AAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMzMzMz//////////////////////8zMzP8AAADMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJ2dnZ3//////////////////////52dnf8AAACdAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGhoaGj//////////////////////2hoaP8AAABoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgAAADs7Ozv//////////////////////zs7O/8AAAA7AAAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGBgYG/wAAAGQAAAD7+/v7////////////+/v7/wAAAPsAAABkBgYG/wAAAAYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAQEBA/2RkZP9RUVH/8vLy////////////8vLy/1FRUf9kZGT/QEBA/wAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACNAAAA9gAAAI0AAAAAAAAAEQAAAAAAAAAmJiYm/6mpqf////////////////////////////////+pqan/JiYm/wAAACYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD29vb2/0hISP8AAACQAAAAAAAAABEAAAAAAAAAQAAAAKlZWVn/6enp////////////6enp/1lZWf8AAACpAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///////n5+f9OTk7/AAAAkAAAAAAAAAADAAAAAAAAAAAAAACAJycn/729vf+9vb3/Jycn/wAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD////////////5+fn/Tk5O/wAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAVAAAAL0AAAC9AAAAVAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////+fn5/wAAAPkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACWAAAA/wAAAP8AAAD/AAAA+QAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8x////O8A8A1CAGAFyAAAARgAAAHMPAPBkDwDwXA8A8FwPAPBnAAAAIAAAAGWAAAF4gAABXMAAA2PAAANt4AAHVOAAB3QQAA87CBgPcAQ8H28D//9cA///XAP//2c=), wait";
case "pan":return"url(data:image/x-icon;base64,AAACAAEAGBgAAAAAAACICQAAFgAAACgAAAAYAAAAMAAAAAEAIAAAAAAAYAkAABMLAAATCwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA0NDUsNDA2zMjEy31lZWfNQUFDrKysrwwkJCZAMDAxgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPDw8ZDQ0NoVxcXfbLy8v/4ODh//b29//y8fL/3Nzc/8nJyf98e3z/FRUWuQ0NDSYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkJCT0mJSbSlpaW//7+/v//////////////////////////////////////uLe4/zc2N+MNDQ00AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUFBQFCgoJcD4+P/HMzM3//////////////////////////////////////////////////////8/Pz/8kJCTCEREREwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8PD0oTExOPcXFy//Ly8v//////8/Pz//v7+/////////////////////////////////////////////////+AgID/BAQEQQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwcHLpNTU36+vr6/+fn5/99e33/Ly8v83d3eP3///////////////////////////////////////////////+bm5v/CQkJXQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABISElIbGxuaZGRk/zIyMusODg6GCQkJXVFRUvj8/Pz///////////////////////////////////////////+dnZ3/DAwMaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUFBQKBwcHPA8PDykAAAAADg4OUnBvcP7///////////////////////////////////////////////+BgYH/BAQEQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFhYWqcPDw////////////////////////////////////////////+Xl5f8tLS2+Dw8PDgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQEBA4Pz8/6/////+7u7z/1dXW///////4+Pj//////////////////////6Ojo/8HBwdwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABUVFQELCwuTsLCw//39/v+Dg4T/19fX/+Li4v+ZmJr//////9vb2/+6urv//////zMzM94SEhIUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwMDCc7Ozzx8fDx/8zMzf+SkZP//////5qam/+np6f//////5mYm//Hx8j/ubm5/xEREZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkJCWqSkpL//////5iXmf/P0ND/8/Pz/3h3ef/o6Oj/7e3u/3Fxc///////Tk5O+woKChwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADg4OBy0tLeri4eL/9/f3/29tcP//////qqqr/5qZmv//////mZma/8zMzf/Kysr/HR0engAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEBAQByMjI8+mpqb/mZiZ/8LCw//6+vr/fn6A/9LS0v/8/P3/a2pu//////92dnb4BAQEOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQUFBwHBweAGhoa5f/////Kysr/i4qM//////+vr7D/MC8x/3x8fP8mJiawERERCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFhYWok5OTvY0NDT1Pj4++aGhof86OjvNCQkJTAgICGATExMnAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACNAAAA9gAAAI0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFRUVCAoKCg8NDQ0KEBEQKxQUFH4SEhIpAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD29vb2/0hISP8AAACQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///////n5+f9OTk7/AAAAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD////////////5+fn/Tk5O/wAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////+fn5/wAAAPkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACWAAAA/wAAAP8AAAD/AAAA+QAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8x/+AfO/+AB1D/AANy/AABRvgAAXP4AAFk+AABXPxAAVz/wAFn/4ADIP8AA2X/AAd4/wAHXP4AD2P+AA9t/wAPVP/AH3QfwP87D///cAf//28D//9cA///XAP//2c=), wait"}return null};
this.getMotionDelta=function(a,b){var c=d&&d.getReverseZoomDirection()?-1.5:1.5;e&&(c*=-1);C[0]&&(u.x+=0.01,A.x+=20);C[1]&&(u.x-=0.01,A.x-=20);C[2]&&(u.y+=0.01,A.y+=20);C[3]&&(u.y-=0.01,A.y-=20);C[4]&&(u.z+=c);C[5]&&(u.z-=c);var c=u.x-r.x,f=u.y-r.y,g=u.z-r.z;0.001>Math.abs(c)&&(c=0);0.001>Math.abs(f)&&(f=0);0.001>Math.abs(g)&&(g=0);a.set(c,f,g);b&&b.set(A.x-w.x,A.y-w.y)};this.stepMotionDelta=function(a,b){b?(r.x+=0.6*a.x,r.y+=0.6*a.y,r.z+=0.6*a.z):r.copy(u);w.copy(A)};this.update=function(){var a=
!1,b=!1;this.getMotionDelta(B,v);var c=B.x,e=B.y,f=B.z;k||this.checkInteractionMode();(k=-1<s)&&this.controller.setIsLocked(!0);if(0!==c||0!==e||0!==f){switch(h){case "orbit":this.utilities.autocam&&this.utilities.autocam.startState&&(v.x=-v.x,l&&this.utilities.autocam.orbit(A,l,v,this.utilities.autocam.startState));break;case "dolly":f*=0.6;0<=s?(e=-e,f=Math.abs(c)>Math.abs(e)?c:e,f*=100,b=c=0.5):(c=d.getScreenViewport(),b=(m-c.left)/c.width,c=(p-c.top)/c.height);b=!d.getIs2D()&&d.getZoomTowardsPivot()?
this.coiIsActive()?d.getPivotPoint():d.getWorldPoint(0.5,0.5):d.getWorldPoint(b,c);d.dollyFromPoint(f*this.getDollySpeed(),b);break;case "pan":d.panRelative(-c,e,z)}b=!0}this.stepMotionDelta(B,"pan"!==h);-1===s&&1E-5>Math.abs(f)&&(this.interactionEnd(-1),b=a=!0);!n&&(a||-5<s)&&(-1<s&&r.copy(u),this.utilities.autocam.endInteraction(),s=-5,k&&this.controller.setIsLocked(!1),k=!1,l=null);b?this.utilities.pivotActive(d.getPivotSetFlag(),-1>=s):this.utilities.pivotUpdate();return g.dirty};this.checkInteractionMode=
function(){var a=2===s&&N&&!G&&!I||2===s&&G&&!N&&!I||1===s&&I&&!N&&!G||P&&!G||0!==B.z?1!==s?"dolly":"pan":2===s&&!N&&!G&&!I||1===s&&!N&&!I||1===s&&G&&!I||N&&!I&&!G&&1!==s||F&&!G||H?"pan":d.getIs2D()?h:"orbit";a!==h&&(h=a,"pan"===h&&-1<s&&this.initTracking(r.x,r.y))};this.interactionStart=function(a,b){if(b||a>s)s=a,n=!0,this.utilities.autocam&&(this.utilities.autocam.startInteraction(w.x,w.y),l=w.clone()),-1<a&&"pan"===h&&this.initTracking(r.x,r.y),this.utilities.pivotActive(d.getPivotSetFlag(),-1===
a)};this.interactionCheck=function(){(C[0]||C[1]||C[2]||C[3]||C[4]||C[5]||N||I||G||H)&&this.interactionStart(-4,!0)};this.interactionEnd=function(a){a===s&&(-1!==a&&this.utilities.pivotActive(!1),n=!1)};this.handleWheelInput=function(b){if(this.isDragging)return!1;if(d.getIs2D()){var c=a.intersectGround(m,p);this.utilities.setPivotPoint(c,!0,!0)}d.getReverseZoomDirection()&&(b*=-1);u.z+=b;c=Date.now();q||(q=c);0!=b&&this.interactionStart(-1);return!0};this.resetKeys=function(){this.autoMove(-1,!1);
H=G=I=N=0};this.autoMove=function(a,b){b&&this.isDragging||(0>a?C[0]=C[1]=C[2]=C[3]=C[4]=C[5]=b:C[a]=b,b||this.interactionEnd(-4),this.interactionCheck())};this.updateModifierState=function(a){I=e&&a.metaKey||a.ctrlKey?1:0;N=a.shiftKey?1:0;G=a.altKey?1:0};this.handleKeyDown=function(a,b){var c=!1,d=!1;switch(b){case 16:N=1;c=!0;break;case 17:I=1;c=!0;break;case 18:G=1;c=!0;break;case 32:H=1;c=d=!0;break;case 187:this.adjustSpeed(1);d=!0;break;case 189:this.adjustSpeed(-1);d=!0;break;case 48:this.adjustSpeed(0);
d=!0;break;case 37:this.autoMove(0,!0);d=!0;break;case 39:this.autoMove(1,!0);d=!0;break;case 33:this.autoMove(2,!0);d=!0;break;case 34:this.autoMove(3,!0);d=!0;break;case 38:this.autoMove(4,!0);d=!0;break;case 40:this.autoMove(5,!0);d=!0;break;default:return!1}c&&!this.isDragging&&this.interactionStart(-4);return d};this.handleKeyUp=function(a,b){var c=!1;switch(b){case 16:N=0;c=!0;break;case 17:I=0;c=!0;break;case 18:G=0;c=!0;break;case 32:H=0;c=!0;break;case 37:this.autoMove(0,!1);c=!0;break;case 39:this.autoMove(1,
!1);c=!0;break;case 33:this.autoMove(2,!1);c=!0;break;case 34:this.autoMove(3,!1);c=!0;break;case 38:this.autoMove(4,!1);c=!0;break;case 40:this.autoMove(5,!1);c=!0;break;default:return!1}c&&(this.interactionEnd(-4),n||this.interactionCheck());return c};this.handleButtonDown=function(a,b){this.updateModifierState(a);r.x=0.5*(a.normalizedX+1);r.y=1-0.5*(a.normalizedY+1);w.set(a.canvasX,a.canvasY);u.copy(r);A.copy(w);m=a.clientX;p=a.clientY;this.isDragging=!0;this.interactionStart(b);return!0};this.handleButtonUp=
function(a,b){this.updateModifierState(a);u.x=0.5*(a.normalizedX+1);u.y=1-0.5*(a.normalizedY+1);A.set(a.canvasX,a.canvasY);this.interactionEnd(b);this.isDragging=!1;return!0};this.handleMouseMove=function(b){this.updateModifierState(b);if(!this.isDragging)return r.x=0.5*(b.normalizedX+1),r.y=1-0.5*(b.normalizedY+1),w.set(b.canvasX,b.canvasY),u.x=r.x,u.y=r.y,A.copy(w),m=b.clientX,p=b.clientY,d.getIs2D()&&a.rolloverObject(m,p),!1;u.x=0.5*(b.normalizedX+1);u.y=1-0.5*(b.normalizedY+1);A.set(b.canvasX,
b.canvasY);return!0};this.handleBlur=function(a){this.resetKeys();this.interactionEnd(s)};b.addEventListener(Autodesk.Viewing.ESCAPE_EVENT,function(a){c.handleBlur(a)})};AutodeskNamespace("Autodesk.Viewing");
Autodesk.Viewing.HotKeysTool=function(a){navigator.userAgent.search("Mac OS");var b=a.navigation;b.getCamera();var c=["hotkeys"],e=0,d=0,g=0,f=-1,h=-1,k=Autodesk.Viewing.NAVIGATION_MODE.ROLL,l=Autodesk.Viewing.NAVIGATION_MODE.FOV;this.getNames=function(){return c};this.getName=function(){return c[0]};this.activate=function(a){};this.deactivate=function(a){};this.update=function(){if(this.controller.getIsLocked())return!1;var c=a.getNavigationMode(),m=d&&e,p=g&&e&&!b.getIs2D();if(m||p){m=m?k:l;if(c===
m)return;if(c===f)return a.setNavigationMode(m),f=m,!1;h=c;a.setNavigationMode(m);f=m}else 0<=f&&(a.setNavigationMode(h),h=f=-1);return!1};this.resetKeys=function(){d=g=e=0};this.updateModifierState=function(a){g=a.ctrlKey?1:0;e=a.shiftKey?1:0;d=a.altKey?1:0};this.handleKeyDown=function(a,b){this.updateModifierState(a);switch(b){case 16:e=1;break;case 17:g=1;break;case 18:d=1}return!1};this.handleKeyUp=function(a,b){this.updateModifierState(a);switch(b){case 16:e=0;break;case 17:g=0;break;case 18:d=
0}return!1};this.handleButtonDown=function(a,b){this.updateModifierState(a);return!1};this.handleButtonUp=function(a,b){this.updateModifierState(a);return!1};this.handleMouseMove=function(a){this.updateModifierState(a);return!1};this.handleBlur=function(a){this.resetKeys();return!1}};AutodeskNamespace("Autodesk.Viewing");
Autodesk.Viewing.FovTool=function(a){var b=a.navigation,c=b.getCamera(),e=["fov"],d=!1,g=0,f=null,h=null,k=!1,l=-5,n=new THREE.Vector3,m=new THREE.Vector3,p=new THREE.Vector3;this.getNames=function(){return e};this.getName=function(){return e[0]};this.activate=function(a){};this.deactivate=function(a){l=-5};this.getCursor=function(){return"url(data:image/x-icon;base64,AAACAAEAGBgAAAAAAACICQAAFgAAACgAAAAYAAAAMAAAAAEAIAAAAAAAYAkAABMLAAATCwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlgAAAP8AAAD/AAAAlgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAACEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////////////AAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAnAwMD/yEhIf8AAABmAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////////////AAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAGknJyf/goKC/8/Pz/8aGhr/AAAALQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////////////AAAA/wAAAAAAAAAAAAAAAAAAAAAAAABTFBQU/2lpaf/MzMz///////////+Wlpb/AAAAlgAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAAAAAAAAAAAAAAAAlgAAAP8AAAD/AAAAlgAAAAAAAAAAAAAAOAAAAKFTU1P/t7e3////////////8PDw////////////AQEB/wAAAAEAAAAAAAAAFAAAAH0KCgr/AAAAYwAAAAAAAAAAAAAAlgAAAP8AAAD/AAAAlgAAAAAAAAAjCwsL/6Ghof/t7e3///////Dw8P9MTEz/LS0t//Pz8///////Ghoa/wAAABoAAAANDQ0N/319ff+rq6v/Y2Nj/wAAAK8AAABGAAAA////////////AAAA/wAAAF0hISH/jIyM////////////sLCw/xEREf8AAACHAAAArKysrP//////V1dX/wAAAFcAAABSUlJS//f39///////8PDw/6+vr/86Ojr/LS0t////////////FRUV/1xcXP/Gxsb/+Pj4//Hx8f9MTEz/AAAAsAAAAEcAAAAAAAAAZ2dnZ///////pKSk/wAAAKQAAACtra2t///////////////////////m5ub/kZGR/wAAAP8AAAD/q6ur//Hx8f//////vb29/x0dHf8AAACIAAAAAAAAAAAAAAAAAAAAOjo6Ov//////5+fn/wAAAOcAAADd3d3d////////////////////////////+/v7/9bW1v/i4uL//v7+//Pz8/9hYWH/AAAAvQAAAFQAAAAAAAAAAAAAAAAAAAAAAAAAJycnJ//6+vr//////wMDA/8AAADv7+/v/////////////////////////////////////////////////7y8vP8ODg7/AAAAKwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJiYmJv/6+vr//////wkJCf8AAADv7+/v//////////////////////////////////f39//9/f3//////+np6f+UlJT/GBgY/wAAAH0AAAACAAAAAAAAAAAAAAAAAAAAKSkpKf///////v7+/w0NDf8AAADd3d3d////////////////////////////29vb/39/f/+Xl5f/5+fn////////////5ubm/1RUVP8CAgL/AAAAPwAAAAAAAAAAAAAAOTk5Of//////8PDw/wgICP8AAAChoaGh/////////////////+np6f+YmJj/QkJC/wAAAP8AAAD/UFBQ/7e3t//39/f///////////+oqKj/EBAQ/wAAAIgAAAAAAAAAZ2dnZ///////29vb/wEBAf8AAAA4NTU1/9zc3P/t7e3/tbW1/01NTf8AAACYAAAA////////////AwMD/wsLC/9oaGj/y8vL////////////8fHx/zg4OP8AAACWAAAApaWlpf//////n5+f/wAAAJ8AAAAAAAAAczg4OP9LS0v/EhIS/wAAAE0AAAAAAAAA////////////FRUV/wAAABUAAABoJSUl/4GBgf/i4uL///////////9+fn7/Pz8///b29v//////SkpK/wAAAEoAAAAAAAAAAAAAADgAAABLAAAAEgAAAAAAAAAAAAAAlgAAAP8AAAD/AAAAlgAAAAAAAAAAAAAAJQAAAIE8PDz/np6e//z8/P/////////////////8/Pz/CQkJ/wAAAAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlgAAAP8AAAD/AAAAlgAAAAAAAAAAAAAAAAAAAAAAAAA8DAwM/09PT/+7u7v///////////+QkJD/AAAAkwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////////////Dw8P/wAAAA8AAAAAAAAAAAAAAAAAAAAAAAAADAAAAFIYGBj/aGho/729vf8WFhb/AAAAJwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////////////FRUV/wAAABUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYAQEB/w8PD/8AAABUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////////////DAwM/wAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlgAAAP8AAAD/AAAAlgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8x/h/nO/4fw1D+HwFy/h4BRu4YAHOGEABkAAAAXAAAIFwAAOBnAAHgIAAD4GUAAOB4AABgXAAAIGMAAABtggAAVMYYAHT+HgE7/g8BcP4Pw2/+D+dc/h//XP///2c=), wait"};
this.getMotionDelta=function(a){var b=m.x-n.x,c=m.y-n.y,d=m.z-n.z;0.001>Math.abs(b)&&(b=0);0.001>Math.abs(c)&&(c=0);0.001>Math.abs(d)&&(d=0);a.set(b,c,d)};this.stepMotionDelta=function(a,b){b?(n.x+=0.6*a.x,n.y+=0.6*a.y,n.z+=0.6*a.z):n.copy(m)};this.getAccumulatedWheelDelta=function(){var a=Date.now(),b=0;h&&100<a-h?(b=0>g&&-3<g?-3:0<g&&3>g?3:g,g=0,h=f=null,k=!1):f&&100<a-f&&(k?3<=Math.abs(g)&&(b=g,g=0):(b=0>g&&-3<g?-3:0<g&&3>g?3:g,k=!0,g=0));return b};this.update=function(){var a=!1;if(-5<l){this.controller.setIsLocked(!0);
this.getMotionDelta(p);var e=p.x,f=p.y,g=p.z;if(0!==e||0!==f||0!==g)0<=l?(f=-f,g=Math.abs(e)>Math.abs(f)?e:f,0!==g&&(g*=-1,b.setVerticalFov(b.getVerticalFov()*(1+g),!0))):(e=this.getAccumulatedWheelDelta()/3,0!==e&&b.setFocalLength(b.getFocalLength()+e,!0));this.stepMotionDelta(p,!0);-1===l&&1E-5>Math.abs(g)&&(this.interactionEnd(-1),a=!0)}!d&&(a||-5<l)&&(-1<l&&n.copy(m),l=-5,this.controller.setIsLocked(!1));return c.dirty};this.interactionStart=function(a,c){if(c||a>l)l=a,d=!0;b.toPerspective()};
this.interactionEnd=function(a){a===l&&(-1!==a&&this.utilities.pivotActive(!1),d=!1)};this.handleWheelInput=function(a){if(-1<l)return!1;b.getReverseZoomDirection()&&(a*=-1);m.z+=a;g+=a;var c=Date.now();f||(f=c);h=c;0!=a&&this.interactionStart(-1);return!0};this.handleButtonDown=function(a,b){n.x=0.5*(a.normalizedX+1);n.y=1-0.5*(a.normalizedY+1);m.copy(n);this.interactionStart(b);return!0};this.handleButtonUp=function(a,b){m.x=0.5*(a.normalizedX+1);m.y=1-0.5*(a.normalizedY+1);this.interactionEnd(b);
return!0};this.handleMouseMove=function(a){m.x=0.5*(a.normalizedX+1);m.y=1-0.5*(a.normalizedY+1);return-1<l};this.handleBlur=function(a){this.interactionEnd(l);return!1}};AutodeskNamespace("Autodesk.Viewing");
Autodesk.Viewing.WorldUpTool=function(a,b){var c=function(){var a=new THREE.Vector3;return function(b,c,d,e){b=new THREE.Vector3(b,c,d);c=e.dot(b);a.copy(e);a.multiplyScalar(c);return b.sub(a)}}(),e=2*Math.PI,d=1E-5,g=b.navigation,f=g.getCamera(),h=["worldup"],k=!1,l=!1,n=new function(a,b){function f(a,b){var c=Math.abs(a-b);return c>e?c:Math.min(e-c,c)}function h(a,b){var c=m(a);if(c.distanceToSquared(b)<d)return!0;K.set(-b.x,-b.y,-b.z);return c.distanceToSquared(K)<d}function k(a){return a>e?a:
0>=a?a+Math.PI:a-Math.PI}function l(a,b,d,e,m){if(!O){O=new THREE.Object3D;var n=new THREE.RingGeometry(0.49,0.5,60);J=n=new THREE.Mesh(n,F);var p=new THREE.BoxGeometry(0.93,0.007,0.007),z=new THREE.BoxGeometry(0.007,0.93,0.007),q=new THREE.BoxGeometry(0.007,0.007,0.93);V=new THREE.Mesh(p,F);R=new THREE.Mesh(z,F);da=new THREE.Mesh(q,F);O.add(V);O.add(R);O.add(da);ba=new THREE.Mesh(new THREE.CircleGeometry(0.005),F);O.add(ba);M=Array(6);aa=Array(6);for(p=0;6>p;++p)M[p]=new THREE.Mesh(new THREE.CircleGeometry(0.005,
16),F),aa[p]=new THREE.Mesh(new THREE.CircleGeometry(0.0025,16),F),aa[p].visible=!1,M[p].add(aa[p]),n.add(M[p]);O.add(n)}g.orient(J,b,S.position,e);n=d.clone().normalize();p=Array(3);d=Array(6);p[0]=c(1,0,0,n);p[1]=c(0,1,0,n);p[2]=c(0,0,1,n);z=m.clone().cross(n).normalize();for(n=0;3>n;++n)q=p[n],d[n]=q.length(),d[n]<oa?ca[n]=Z:(q.multiplyScalar(1/d[n]),ca[n]=Math.atan2(z.dot(q),m.dot(q)));ca[3]=k(ca[0]);ca[4]=k(ca[1]);ca[5]=k(ca[2]);d[3]=d[0];d[4]=d[1];d[5]=d[2];m=ka+X+2*Math.PI/180;for(n=0;6>n;++n)if(ca[n]!==
Z)for(p=n+1;6>p;++p)if(ca[p]!==Z&&f(ca[n],ca[p])<m)if(d[n]<d[p]&&!h(n,e)||h(p,e)){ca[n]=Z;break}else ca[p]=Z;for(n=0;6>n;++n)ca[n]!==Z?(e=K.set(0,0,1),E.setFromAxisAngle(e,ca[n]),e=K.set(0,0.54,0),e.applyQuaternion(E),M[n].position.copy(e),M[n].visible=!0):M[n].visible=!1;O.scale.x=a;O.scale.y=a;O.scale.z=a;O.position.copy(b);return O}function m(a){z.set(0,0,0);if(0<=a){var b=3<=a?-1:1;a%=3;0===a&&(z.x=b);1===a&&(z.y=b);2===a&&(z.z=b)}xa&&z.multiplyScalar(-1);return z}function n(a,b){for(var c=f(ca[0],
a),d=0,e=1;6>e;++e){var g=f(ca[e],a);g<c&&(c=g,d=e)}return c<b?d:-1}function p(a){if(0!==a){var b=30*Math.PI/180,c=K.copy(S.position).sub(U).normalize();E.setFromAxisAngle(c,a);a=g.getWorldUpVector();c=Math.abs(c.angleTo(a));(c<b||Math.PI-c<b)&&a.copy(g.getCameraUpVector());a.applyQuaternion(E);g.setIsLocked(!1);g.setWorldUpVector(a,!0);g.setIsLocked(!0)}}function q(a,b){0>a.dot(b)&&(b=b.clone().multiplyScalar(-1));g.orient(ba,U,S.position,b);ba.position.copy(b.multiplyScalar(0.495));for(var c=!1,
e=na?X:ka,h=0;6>h;++h){var k=f(ca[h],ea),l;l=a;l=k<e?m(h).distanceToSquared(l)<d:!1;l&&(c=!0);k=l?4:3*(1-3*k/Math.PI);1>k&&(k=1);k*=D;aa[h].visible=l;l=M[h];l.scale.x=k;l.scale.y=k;l.scale.z=k}V.visible=c;R.visible=c;return da.visible=c}function I(a){ea+=a;ea>Math.PI?ea-=e:ea<=-Math.PI&&(ea=e+ea);var b;a:{if(!na&&(b=n(ea,ka),0<=b)){na=!0;ea=ca[b];b=m(b);break a}b=!1}if(b)ja=ea,a=b,g.setIsLocked(!1),g.setWorldUpVector(a,!0),g.setIsLocked(!0);else if(na&&0>n(ea,X)?(na=!1,b=!0):b=!1,b)p(ea-ja),ja=0;
else{if(na)return!1;p(a)}return!0}var H=2*Math.tan(THREE.Math.degToRad(15)),F=new THREE.MeshPhongMaterial({color:12303291,ambient:12303291,opacity:0.5,transparent:!0}),P=new THREE.MeshPhongMaterial({color:12303291,ambient:12303291,opacity:0.5,transparent:!0}),z=new THREE.Vector3,K=new THREE.Vector3,E=new THREE.Quaternion,S=new THREE.PerspectiveCamera(b.fov,b.aspect,b.near,b.far),D=1,U=null,J=null,V=null,R=null,da=null,O=null,ba=null,M=null,aa=null,ca=Array(6),ea=0,xa=!1,na=!0,ja=0,ka=5*Math.PI/180,
X=7*Math.PI/180,Z=1E3,oa=0.1;a.createOverlayScene("roll",F,P,S);this.updateRollCamera=function(a,c){S.position.copy(b.position);S.quaternion.copy(b.quaternion);S.up.copy(b.up);S.aspect=b.aspect;S.fov=30;a&&c&&(S.near=c-a,S.far=c+a);S.updateProjectionMatrix()};this.isSnapped=function(){return na};this.start=function(c){var d=g.getWorldUpVector(),e=g.getCameraUpVector();U=c;D=0.85/0.7;var f=z.copy(c).sub(b.position),h=f.length(),k=h*H*0.7;this.updateRollCamera(k,h);a.addOverlay("roll",l(k,c,f,d,e));
ja=ea=0;xa=0>d.dot(e);na=q(d,e)};this.handleRoll=function(a,b,c){this.updateRollCamera();q(g.getWorldUpVector(),g.getCameraUpVector());return 0!==a||0!==b?(a=c.x-a-0.5,b=c.y-b-0.5,I(Math.atan2(c.y-0.5,c.x-0.5)-Math.atan2(b,a))):!1};this.handleRollTouch=function(a,b,c,d){this.updateRollCamera();q(g.getWorldUpVector(),g.getCameraUpVector());a=Math.atan2(d.y-c.y,d.x-c.x)-Math.atan2(b.y-a.y,b.x-a.x);return I(a)};this.end=function(){a.removeOverlay("roll",O)}}(a,f),m=new THREE.Vector3,p=new THREE.Vector3,
q=new THREE.Vector3;this.getNames=function(){return h};this.getName=function(){return h[0]};this.activate=function(a){a=g.getEyeVector();var b=0.5*(f.near+f.far);a.normalize().multiplyScalar(b);a=a.add(f.position);this.utilities.savePivot();this.utilities.setPivotPoint(a,!0,!0);this.utilities.pivotActive(!0);g.setIsLocked(!0);n.start(a)};this.deactivate=function(a){n.end();g.setIsLocked(!1);this.utilities.restorePivot();k=!1};this.getCursor=function(){return"auto"};this.getMotionDelta=function(a){var b=
p.x-m.x,c=p.y-m.y,d=p.z-m.z;0.001>Math.abs(b)&&(b=0);0.001>Math.abs(c)&&(c=0);0.001>Math.abs(d)&&(d=0);a.set(b,c,d)};this.stepMotionDelta=function(){m.copy(p)};this.update=function(){var a=l;this.getMotionDelta(q);var b=q.x,c=q.y,d=q.z;if(l||k&&(0!==b||0!==c||0!==d))l=n.handleRoll(b,c,p);this.stepMotionDelta();f.dirty&&(a=!0);return a};this.handleResize=function(){l=!0};this.handleWheelInput=function(a){return!0};this.handleButtonDown=function(a,b){m.x=0.5*(a.normalizedX+1);m.y=1-0.5*(a.normalizedY+
1);p.copy(m);k=!0;this.controller.setIsLocked(!0);return!0};this.handleButtonUp=function(a,b){p.x=0.5*(a.normalizedX+1);p.y=1-0.5*(a.normalizedY+1);k=!1;l=!0;this.controller.setIsLocked(!1);return!0};this.handleMouseMove=function(a){p.x=0.5*(a.normalizedX+1);p.y=1-0.5*(a.normalizedY+1);return!0};this.handleBlur=function(a){return k=!1}};
function ViewController(a,b){function c(a,b){b=2*(1-b)-1;var c=new THREE.Vector3(2*a-1,b,1);return(c=D.hitTestViewport(c,!1))?c.intersectPoint:null}function e(a,b,c){b=2*(1-b)-1;a=new THREE.Vector3(2*a-1,b,0.5);Pa.unprojectVector(a,c);c=B.getPosition();a=a.sub(c).normalize();b=B.getPivotPoint().clone();var d=B.getEyeVector(),e=a.dot(d);b=0!==e?b.sub(c).dot(d)/e:b.sub(c).length();return a.multiplyScalar(b).add(c)}function d(a,b,d){a=B.getPivotDistance();if(b=c(b,d))b=b.sub(B.getPosition()),d=B.getEyeVector().normalize(),
a=Math.abs(d.dot(b));B.setTrackingDistance(a)}function g(a){var b=Y.domElement.getBoundingClientRect(),c=b.width,b=b.height,d={};d.x=a.reduce(function(a,b){return a+b.x},0)/a.length;d.y=a.reduce(function(a,b){return a+b.y},0)/a.length;d.scaledX=d.x/c;d.scaledY=d.y/b;return d}function f(a){var b=Y.domElement.getBoundingClientRect(),c=b.width,d=b.height,b=a[0].x/c,e=a[0].y/d,c=a[1].x/c;a=a[1].y/d;return Math.sqrt((b-c)*(b-c)+(e-a)*(e-a))}function h(){for(var a=0;a<ra.length;++a)ra[a]=ia[a]}function k(a){var b=
Math.abs(a.endX-a.startX),c=Math.abs(a.endY-a.startY);a=a.endTime-a.startTime<=F;return b<=I&&c<=I&&a}function l(a,b){var c=b.startTime-a.endTime,d=Math.abs(b.endX-a.startX),e=Math.abs(b.endY-a.startY),c=c<=P;return d<=H&&e<=H&&c}function n(){null!==Wa&&(clearTimeout(Wa),Wa=null);for(;0<Va.length;){var a=Va.shift();if(k(a))if(0<Va.length){var b=Va.shift();k(b)?l(a,b)?Y.handleDoubleTap(a,b):(Y.handleSingleTap(a),Va.unshift(b)):Y.handleSingleTap(a)}else if(Date.now()-a.endTime>=P)Y.handleSingleTap(a);
else{Va.unshift(a);Wa=setTimeout(function(){Wa=null;n()},P);break}}}var m=0.5*Math.PI,p=2*Math.PI,q=1E-5,s=Math.sin(THREE.Math.degToRad(20)),r=-1!=navigator.userAgent.search("Mac OS"),u=-1!=navigator.userAgent.search("Firefox"),w=void 0,A=function(){var a=new THREE.Vector3;return function(b,c,d,e){b=new THREE.Vector3(b,c,d);c=e.dot(b);a.copy(e);a.multiplyScalar(c);return b.sub(a)}}();this.setClickBehavior=function(a){this.clickConfig=a};this.getClickBehavior=function(){return this.clickConfig};var v=
function(){var a=new THREE.Matrix4,b=new THREE.Vector3,c=new THREE.Vector3,d=new THREE.Vector3;return function(e,f,g,h){var k=a.elements;d.subVectors(g,f).normalize();0===d.lengthSq()&&(d.z=1);b.crossVectors(h,d).normalize();0===b.lengthSq()&&(h.z>h.y?d.y-=1E-4:d.z+=1E-4,b.crossVectors(h,d).normalize());c.crossVectors(d,b);k[0]=b.x;k[4]=c.x;k[8]=d.x;k[1]=b.y;k[5]=c.y;k[9]=d.y;k[2]=b.z;k[6]=c.z;k[10]=d.z;e.setRotationFromMatrix(a)}}();THREE.EventDispatcher.call(this);this.camera=a.camera;this.domElement=
a.canvas;this.downY=this.downX=-1;this.inTouch=this.isDragging=!1;var B=new function(a){var c=0,d=0,e=0,f=0,g=5,h=0.025,k=!1,l=!1,n=!1,z=!1,t=null,r=!1,D=new THREE.Vector3(0,0,0),v=a.position.clone(),J=new THREE.Vector2(0,0),E=a.up.clone();this.saveCOI=function(){t=this.getPivotPoint().clone();r=b.navigation.getPivotSetFlag()};this.restoreCOI=function(){null!==t&&(this.setPivotPoint(t,!0,r),r||b.navigation.setPivotSetFlag(!1),t=null)};this.isDirty=function(){return k};this.cameraChanged=function(a){var b=
l;a&&(l=!1);return b};this.getPosition=function(){return v.clone().add(this.getViewOffset())};this.setPosition=function(a){this.setView(a,D)};this.getPivotDistance=function(){return e};this.setPivotPoint=function(a,c,d){if(c){c=k;var e=this.getPosition(),f=new THREE.Vector3;f.subVectors(a,e);var g=this.getCameraRightVector(),h=this.getCameraUpVector(),m=g.dot(f),f=h.dot(f);g.multiplyScalar(m);h.multiplyScalar(f);e.add(g);e.add(h);this.setView(e,a,-m,-f);k=c}else this.setView(v,a);b.navigation.setPivotPoint(this.getPivotPoint());
d&&b.navigation.setPivotSetFlag(!0);k||(l=!0)};this.getPivotPoint=function(){return D};this.pivotIsSet=function(){return b.navigation.getPivotSetFlag()};this.getLookAtPoint=function(){return this.getEyeVector().add(v).add(this.getViewOffset())};this.getForwardLookAtPoint=function(b){var c=this.getEyeVector().normalize(),d=this.getPosition();b=(b=b(0.5,0.5))?b.sub(d).length():0.5*(a.near+a.far);return d.add(c.multiplyScalar(b))};this.getCameraUpVector=function(){var b=this.getEyeVector();return 0===
b.lengthSq()?a.up:this.getCameraRightVector().cross(b).normalize()};this.getCameraRightVector=function(){var b=new THREE.Vector3,c=this.getEyeVector();if(0===c.lengthSq())return b.set(1,0,0);var d=n?this.getCurrentUpVector().multiplyScalar(-1):a.up;b.crossVectors(c,d);0===b.lengthSq()&&(d.z>d.y?c.y-=1E-4:c.z+=1E-4,b.crossVectors(c,d));return b.normalize()};this.checkCameraUp=function(){var b=this.getCameraRightVector(),c=this.getWorldUpVector(),b=b.dot(c);if(!(Math.abs(b)<s)){c.copy(a.up);var b=0<=
c.x?c.x:-c.x,d=0<=c.y?c.y:-c.y,e=0<=c.z?c.z:-c.z;b>d&&b>e?c.set(0<c.x?1:-1,0,0):d>b&&d>e?c.set(0,0<c.y?1:-1,0):c.set(0,0,0<c.z?1:-1)}E.copy(c)};this.setWorldUpVector=function(c,d){b.navigation.setWorldUpVector(c);d&&(n=!1,a.up.copy(c),a.up.copy(this.getCameraUpVector()));this.setView(v,D,J.x,J.y)};this.getCurrentUpVector=function(){return E.clone()};this.getCurrentRightVector=function(){var a=this.getCurrentUpVector();Math.abs(a.z)<=Math.abs(a.y)?a.set(a.y,-a.x,0):0<=a.z?a.set(a.z,0,-a.x):a.set(-a.z,
0,a.x);return a.normalize()};this.getWorldUpVector=function(){return b.navigation.getWorldUpVector()};this.getWorldRightVector=function(){var a=this.getWorldUpVector();Math.abs(a.z)<=Math.abs(a.y)?a.set(a.y,-a.x,0):0<=a.z?a.set(a.z,0,-a.x):a.set(-a.z,0,a.x);return a.normalize()};this.getEyeVector=function(){var a=new THREE.Vector3;a.subVectors(D,v);z&&a.set(-a.x,-a.y,-a.z);return a};this.setTrackingDistance=function(a){f=a};this.getWorldSize=function(c){var d=b.navigation.getScreenViewport(),d=d.width/
d.height;c=2*c*Math.tan(THREE.Math.degToRad(0.5*a.fov));return new THREE.Vector2(c*d,c)};this.trackReset=function(){J.set(0,0);b.navigation.setPivotSetFlag(!1)};this.trackRelative=function(a,b){var c=this.getWorldSize(f);J.set(J.x+a*c.x,J.y+b*c.y);k=!0};this.getViewOffset=function(){var a=this.getCameraUpVector(),b=this.getCameraRightVector().multiplyScalar(J.x),a=a.multiplyScalar(J.y);return b.add(a)};this.adjustDollyLookSpeed=function(a){0===a?(h=0.025,g=5):(h*=0<a?1.1:0.9,g*=0<a?1.1:0.9,1E-6>h&&
(h=1E-6),1E-6>g&&(g=1E-6))};this.getDollySpeed=function(){var a=e*h;return 0.01>a?0.01:a};this.getLookSpeed=function(){return g};this.coiIsVisible=function(){if(z)return!1;var c=Math.abs(J.x),d=Math.abs(J.y),f=b.navigation.getScreenViewport(),g=e*Math.tan(THREE.Math.degToRad(0.5*a.fov));return c<f.width/f.height*g&&d<g};this.coiIsActive=function(){return b.navigation.getPivotSetFlag()&&this.coiIsVisible()};this.orbitRelative=function(a,b){(Math.abs(a)>q||Math.abs(b)>q)&&this.look(c-a*g,d+b*g,e,!0)};
this.dollyRelativeTowardsPoint=function(a,b){Math.abs(a)<=q||(this.saveCOI(),this.setPivotPoint(b,!0,!1),this.dollyRelativeTowardsCOI(a),this.restoreCOI())};this.dollyRelativeTowardsCOI=function(a){if(!(Math.abs(a)<=q)){a*=this.getDollySpeed();var b=D.clone().sub(v),c=b.length();a=c+a;0.01>a&&(a=0.01);c=a/c;Math.abs(c-1)>q&&(b.multiplyScalar(c),b.set(-b.x,-b.y,-b.z),b.add(D),this.setView(b,D,J.x*c,J.y*c))}};this.setView=function(a,b,c,d,e){var f=new THREE.Vector3;f.subVectors(a,b);var g=0,h=0,l=10,
m=f.lengthSq();if(0<m){var h=this.getCurrentUpVector(),g=this.getCurrentRightVector(),l=g.clone().cross(h).normalize(),h=h.dot(f),g=g.dot(f),l=l.dot(f),n=(new THREE.Vector2(g,l)).length(),h=Math.atan2(h,n),g=Math.atan2(g,l),l=Math.sqrt(m);z=e?!1:0<f.dot(this.getEyeVector())}D.copy(b);v.copy(a);J.set(c||0,d||0);k=!0;this.look(g,h,l,!1)};this.look=function(a,b,g,h){0.01>g&&(g=0.01);a>p?a-=p:0>a&&(a+=p);b+=m;b>p?b-=p:0>b&&(b+=p);n=b>Math.PI;b-=m;if(Math.abs(c-a)>q||Math.abs(d-b)>q||Math.abs(e-g)>q)k=
!0;c=a;d=b;f=e=g;h&&(a=new THREE.Quaternion,b=this.getCurrentUpVector(),g=this.getCurrentRightVector(),h=g.clone().cross(b).normalize(),a.setFromAxisAngle(g,-d),h.applyQuaternion(a),a.setFromAxisAngle(b,c),h.applyQuaternion(a),v.set(D.x,D.y,D.z),v.add(h.multiplyScalar(e)),k=!0)};this.updateCamera=function(){b.navigation.setView(this.getPosition(),this.getLookAtPoint());b.navigation.getPivotSetFlag()||(D.copy(a.target),v.copy(a.position),J.set(0,0));b.navigation.setPivotPoint(D);b.navigation.updateCamera();
k=!1};this.oneStepTowards=function(b,c,d,e){var f;if(1<e){var g=1/e,h=1-g;b=b.clone().multiplyScalar(g);c=c.clone().multiplyScalar(g);e=J.x*h;f=J.y*h;v.multiplyScalar(h).add(b);D.multiplyScalar(h).add(c);a.fov=a.fov*h+d*g}else e=f=0,v.copy(b),D.copy(c),a.fov=d;this.setView(v,D,e,f,!0)}}(this.camera),C=Math.cos(45*Math.PI/180),N=Math.tan(45*Math.PI/180),G=Math.tan(20*Math.PI/180),I=8,H=32,F=300,P=300,z=-1,K=!1,E=null,S=null,D=a,U=!1,J=new THREE.Vector3,V=new THREE.Vector3,R=new THREE.Vector2,da=new THREE.Vector2,
O=new THREE.Vector2,ba=0,M=null,aa=null,ca=!1,ea,xa,na=new THREE.Vector3,ja=[!1,!1,!1,!1,!1,!1],ka=0,X=0,Z=0,oa=0,Da=0,La=0,Ka=0,Ma=0,ya=0,Ea=0,za=0,Ia=0,fa=-5,ha=null,pa=new function(a){var b=0,c=new THREE.SphereGeometry(1),d=new THREE.MeshPhongMaterial({color:32512,ambient:32512,opacity:0.6,transparent:!0}),e=new THREE.MeshPhongMaterial({color:32512,ambient:32512,opacity:0.6,transparent:!0}),f=new THREE.Mesh(c,e);a.createOverlayScene("pivot",d,e);f.visible=!1;this.shown=function(){return f.visible};
this.show=function(c,g,h){f.scale.x=g;f.scale.y=g;f.scale.z=g;f.position.set(c.x,c.y,c.z);e.opacity=0.6;d.opacity=0.6;f.visible=!0;a.addOverlay("pivot",f);b=h?Date.now()+750:0};this.hide=function(){f.visible&&(f.visible=!1,a.removeOverlay("pivot",f),b=0)};this.fade=function(){if(0<b){var a=b-Date.now();if(0>=a)return this.hide(),!0;a=a/750*0.6;d.opacity=a;e.opacity=a;return!0}return!1};this.fading=function(){return 0<b}}(a),Ga=new function(a,b){function c(a,b){var d=Math.abs(a-b);return d>p?d:Math.min(p-
d,d)}function d(a,b){var c=g(a);if(c.distanceToSquared(b)<q)return!0;D.set(-b.x,-b.y,-b.z);return c.distanceToSquared(D)<q}function e(a){return a>p?a:0>=a?a+Math.PI:a-Math.PI}function f(a,b,g,h,k){if(!B){B=new THREE.Object3D;var l=new THREE.RingGeometry(0.49,0.5,60);K=l=new THREE.Mesh(l,z);var m=new THREE.BoxGeometry(0.93,0.007,0.007),n=new THREE.BoxGeometry(0.007,0.93,0.007),p=new THREE.BoxGeometry(0.007,0.007,0.93);U=new THREE.Mesh(m,z);V=new THREE.Mesh(n,z);w=new THREE.Mesh(p,z);B.add(U);B.add(V);
B.add(w);S=new THREE.Mesh(new THREE.CircleGeometry(0.005),z);B.add(S);C=Array(6);G=Array(6);for(m=0;6>m;++m)C[m]=new THREE.Mesh(new THREE.CircleGeometry(0.005,16),z),G[m]=new THREE.Mesh(new THREE.CircleGeometry(0.0025,16),z),G[m].visible=!1,C[m].add(G[m]),l.add(C[m]);B.add(l)}v(K,b,J.position,h);l=g.clone().normalize();m=Array(3);g=Array(6);m[0]=A(1,0,0,l);m[1]=A(0,1,0,l);m[2]=A(0,0,1,l);n=k.clone().cross(l).normalize();for(l=0;3>l;++l)p=m[l],g[l]=p.length(),g[l]<P?R[l]=O:(p.multiplyScalar(1/g[l]),
R[l]=Math.atan2(n.dot(p),k.dot(p)));R[3]=e(R[0]);R[4]=e(R[1]);R[5]=e(R[2]);g[3]=g[0];g[4]=g[1];g[5]=g[2];k=M+da+2*Math.PI/180;for(l=0;6>l;++l)if(R[l]!==O)for(m=l+1;6>m;++m)if(R[m]!==O&&c(R[l],R[m])<k)if(g[l]<g[m]&&!d(l,h)||d(m,h)){R[l]=O;break}else R[m]=O;for(l=0;6>l;++l)R[l]!==O?(h=D.set(0,0,1),r.setFromAxisAngle(h,R[l]),h=D.set(0,0.54,0),h.applyQuaternion(r),C[l].position.copy(h),C[l].visible=!0):C[l].visible=!1;B.scale.x=a;B.scale.y=a;B.scale.z=a;B.position.copy(b);return B}function g(a){s.set(0,
0,0);if(0<=a){var b=3<=a?-1:1;a%=3;0===a&&(s.x=b);1===a&&(s.y=b);2===a&&(s.z=b)}N&&s.multiplyScalar(-1);return s}function h(a,b){for(var d=c(R[0],a),e=0,f=1;6>f;++f){var g=c(R[f],a);g<d&&(d=g,e=f)}return d<b?e:-1}function k(a,b){if(0!==a){var c=30*Math.PI/180,d=D.copy(J.position).sub(u).normalize();r.setFromAxisAngle(d,a);var e=s.copy(b.getWorldUp()),d=Math.abs(d.angleTo(e));(d<c||Math.PI-d<c)&&e.copy(b.getCameraUp());e.applyQuaternion(r);b.setWorldUp(e,!0)}}function l(a,b){0>a.dot(b)&&(b=b.clone().multiplyScalar(-1));
v(S,u,J.position,b);S.position.copy(b.multiplyScalar(0.495));for(var d=!1,e=H?da:M,f=0;6>f;++f){var h=c(R[f],F),k;k=a;k=h<e?g(f).distanceToSquared(k)<q:!1;k&&(d=!0);h=k?4:3*(1-3*h/Math.PI);1>h&&(h=1);h*=E;G[f].visible=k;k=C[f];k.scale.x=h;k.scale.y=h;k.scale.z=h}U.visible=d;V.visible=d;return w.visible=d}function m(a,b){F+=a;F>Math.PI?F-=p:F<=-Math.PI&&(F=p+F);var c;a:{if(!H&&(c=h(F,M),0<=c)){H=!0;F=R[c];c=g(c);break a}c=!1}c?(I=F,b.setWorldUp(c,!0)):(H&&0>h(F,da)?(H=!1,c=!0):c=!1,c?(k(F-I,b),I=0):
H||k(a,b));return!0}var n=2*Math.tan(THREE.Math.degToRad(15)),z=new THREE.MeshPhongMaterial({color:12303291,ambient:12303291,opacity:0.5,transparent:!0}),t=new THREE.MeshPhongMaterial({color:12303291,ambient:12303291,opacity:0.5,transparent:!0}),s=new THREE.Vector3,D=new THREE.Vector3,r=new THREE.Quaternion,J=new THREE.PerspectiveCamera(b.fov,b.aspect,b.near,b.far),E=1,u=null,K=null,U=null,V=null,w=null,B=null,S=null,C=null,G=null,R=Array(6),F=0,N=!1,H=!0,I=0,M=5*Math.PI/180,da=7*Math.PI/180,O=1E3,
P=0.1;a.createOverlayScene("roll",z,t,J);this.updateRollCamera=function(a,c){J.position.copy(b.position);J.quaternion.copy(b.quaternion);J.up.copy(b.up);J.aspect=b.aspect;J.fov=30;a&&c&&(J.near=c-a,J.far=c+a);J.updateProjectionMatrix()};this.isSnapped=function(){return H};this.start=function(c,d,e){u=c;E=0.85/0.7;var g=s.copy(c).sub(b.position),h=g.length(),k=h*n*0.7;this.updateRollCamera(k,h);a.addOverlay("roll",f(k,c,g,d,e));I=F=0;N=0>d.dot(e);H=l(d,e)};this.handleRoll=function(a,b,c,d){this.updateRollCamera();
l(d.getWorldUp(),d.getCameraUp());return 0!==a||0!==b?(a=c.x-a-0.5,b=c.y-b-0.5,m(Math.atan2(c.y-0.5,c.x-0.5)-Math.atan2(b,a),d)):!1};this.handleRollTouch=function(a,b,c,d,e){this.updateRollCamera();l(e.getWorldUp(),e.getCameraUp());a=Math.atan2(d.y-c.y,d.x-c.x)-Math.atan2(b.y-a.y,b.x-a.x);return m(a,e)};this.end=function(){a.removeOverlay("roll",B)}}(a,this.camera),sa=!1,qa=!1,ta=!1,wa=!1,ua=0,la=null,ga=0,ra=[],ia=[],t=null,Ya=null,Sa=null,Ba=null,Na=0,Pa=new THREE.Projector,Ha=-1,Oa=-1,Ta=-1,Va=
[],Wa=null,Xa=!1,Za=!1,ma={},$a=!1,Y=this;this.homePosition=new THREE.Vector3(0,0,1);this.homeTarget=new THREE.Vector3(0,0,0);this.homeUp=new THREE.Vector3(0,1,0);this.homeFov=this.camera.fov;this.setAutocam=function(a){E=a;E.sync(this.camera,!0);E.orbitMultiplier=B.getLookSpeed()};this.setViewpoint=function(a,c,d){b.navigation.getIsLocked()||(B.setView(a,c,0,0,!0),d&&(this.camera.up.copy(d),B.checkCameraUp()))};this.setCOI=function(a,c,d,e){if(c&&!d||!b.navigation.getIsLocked())B.setPivotPoint(a,
c,e),d?(c=B.getPosition(),this.transitionView(c,a,this.camera.fov,this.getWorldUp()),this.pivotActive(B.pivotIsSet())):pa.shown()&&this.activatePivot(pa.fading())};this.syncCamera=function(){this.setViewpoint(this.camera.position,this.camera.target,this.camera.up);this.camera.pivot&&0<this.camera.pivot.distanceToSquared(this.camera.target)&&this.setCOI(this.camera.pivot,!0,!1)};this.setSelector=function(a){ha=a};this.getNavigationMode=function(){return z};this.setNavigationMode=function(a){if(a!==
this.getNavigationMode())switch(za=Ia=ya=Ea=0,a){case Autodesk.Viewing.NAVIGATION_MODE.PAN:ya=1;break;case Autodesk.Viewing.NAVIGATION_MODE.DOLLY:Ea=1;break;case Autodesk.Viewing.NAVIGATION_MODE.ROLL:Ia=1;break;case Autodesk.Viewing.NAVIGATION_MODE.FOV:za=1}};this.recordHomeView=function(){this.homePosition.copy(B.getPosition());this.homeTarget.copy(B.getLookAtPoint());this.homeUp.copy(B.getWorldUpVector());this.homeFov=this.camera.fov;E&&E.setHomeViewFrom(this.camera)};this.goHome=function(){b.navigation.getIsLocked()||
(E?E.goHome():(b.navigation.setPivotSetFlag(!1),this.transitionView(this.homePosition,this.homeTarget,this.homeFov,this.homeUp,!0)))};this.getBoundingBox=function(a){var b;a||null===ha||(b=ha.getSelectionBounds());if(!b||b.empty())b=D.getVisibleBounds();return b};this.setWorldUp=function(a,b){a&&0<a.lengthSq()&&(B.setWorldUpVector(a,b),E&&E.setWorldUpVector(a),D.setWorldUp(a),qa=!0)};this.getCOI=function(){return B.getPivotPoint()};this.getLookAtPoint=function(){return B.getLookAtPoint()};this.transitionWorldUp=
function(a,b,c){la=(new THREE.Vector3(a,b,c)).normalize();a=B.getWorldUpVector();ua=10;b=la.clone().sub(a);b.multiplyScalar(1/ua);this.setWorldUp(a.add(b),!0);--ua};this.getWorldUp=function(){return B.getWorldUpVector()};this.getCameraUp=function(){return B.getCameraUpVector()};this.setFOV=function(a){b.navigation.setVerticalFov(a,!0);this.syncCamera()};this.setFocalLength=function(a){b.navigation.setFocalLength(a,!0);this.syncCamera()};this.__transitionView=function(a,b,c,d,e){e=e||this.getWorldUp();
E&&(targetView={position:a,center:b,pivot:b,fov:c,up:d,worldUp:e,isOrtho:!1===this.camera.isPerspective},E.goToView(targetView))};this.transitionView=function(a,b,c,d,e,f){f&&(d=b.clone().sub(a),0===d.lengthSq()?d=d.copy(e):(f=d.clone().cross(e),0===f.lengthSq()&&(e.z>e.y?d.y-=1E-4:d.z-=1E-4,f.crossVectors(d,e)),d=f.cross(d).normalize()));d||(d=this.camera.up);this.__transitionView(a,b,c,d,e)};this.computeFit=function(a,c,d){var e=this.getBoundingBox(!1);return b.navigation.computeFit(a,c,d,e)};this.fitToView=
function(a,c){c||(c=this.getBoundingBox(!1));var d=b.navigation.fitBounds(a,c);this.activatePivot(!0);return d};this.handleEvent=function(a){if("function"===typeof this[a.type])this[a.type](a)};this.activatePivot=function(a){var c=2*B.getPivotDistance()*Math.tan(THREE.Math.degToRad(0.5*this.camera.fov)),d=b.navigation.getScreenViewport(),c=5*c/(d.height*(window.devicePixelRatio||1));pa.show(B.getPivotPoint(),c,a)};this.pivotActive=function(a,b){Xa||(b=b||!1,!a&&pa.shown()?pa.hide():a&&this.activatePivot(b))};
this.interactionStart=function(a,b){if(b||a>fa)fa=a,wa=!0,E&&(E.startInteraction(R.x,R.y),S=R.clone()),this.pivotActive(B.pivotIsSet(),-1===a)};this.interactionCheck=function(){(ja[0]||ja[1]||ja[2]||ja[3]||ja[4]||ja[5]||ka||Z||X||oa)&&this.interactionStart(-4,!0);0<ia.length&&this.interactionStart(1===ia.length?-3:-2)};this.interactionEnd=function(a){a===fa&&(-1!==a&&this.pivotActive(!1),wa=!1)};this.autoMove=function(a,b){0>a?ja[0]=ja[1]=ja[2]=ja[3]=ja[4]=ja[5]=b:ja[a]=b;b||this.interactionEnd(-4);
this.interactionCheck()};this.getMotionDelta=function(a,c){var d=b.navigation,d=d&&d.getReverseZoomDirection()?-1.5:1.5;r&&(d*=-1);ja[0]&&(V.x+=0.01,da.x+=20);ja[1]&&(V.x-=0.01,da.x-=20);ja[2]&&(V.y+=0.01,da.y+=20);ja[3]&&(V.y-=0.01,da.y-=20);ja[4]&&(V.z+=d);ja[5]&&(V.z-=d);var d=V.x-J.x,e=V.y-J.y,f=V.z-J.z;0.001>Math.abs(d)&&(d=0);0.001>Math.abs(e)&&(e=0);0.001>Math.abs(f)&&(f=0);a.set(d,e,f);c&&c.set(da.x-R.x,da.y-R.y)};this.stepMotionDelta=function(a,b){b?(J.x+=0.6*a.x,J.y+=0.6*a.y,J.z+=0.6*a.z):
J.copy(V);R.copy(da)};this.getAccumulatedWheelDelta=function(){var a=Date.now(),b=0;aa&&100<a-aa?(b=0>ba&&-3<ba?-3:0<ba&&3>ba?3:ba,ba=0,aa=M=null,ca=!1):M&&100<a-M&&(ca?3<=Math.abs(ba)&&(b=ba,ba=0):(b=0>ba&&-3<ba?-3:0<ba&&3>ba?3:ba,ca=!0,ba=0));return b};this.adjustSpeed=function(a){B.adjustDollyLookSpeed(a);E&&(E.orbitMultiplier=B.getLookSpeed())};this.checkInteractionMode=function(){var a=-2===fa&&2===ia.length&&(z===Autodesk.Viewing.NAVIGATION_MODE.TOUCH_PAN_DOLLY||z!==Autodesk.Viewing.NAVIGATION_MODE.TOUCH_ROLL&&
Na&12)?Autodesk.Viewing.NAVIGATION_MODE.TOUCH_PAN_DOLLY:-2===fa&&2===ia.length&&(z===Autodesk.Viewing.NAVIGATION_MODE.TOUCH_ROLL||z!==Autodesk.Viewing.NAVIGATION_MODE.TOUCH_PAN_DOLLY&&Na&16)?Autodesk.Viewing.NAVIGATION_MODE.TOUCH_ROLL:X&&ka||Ia?Autodesk.Viewing.NAVIGATION_MODE.ROLL:Z&&ka||za?Autodesk.Viewing.NAVIGATION_MODE.FOV:2===fa&&ka&&!X&&!Z||2===fa&&X&&!ka&&!Z||1===fa&&Z&&!ka&&!X||Ea&&!X||0!==na.z?Autodesk.Viewing.NAVIGATION_MODE.DOLLY:2===fa&&!ka&&!X&&!Z||1===fa&&!ka&&!Z||1===fa&&X&&!Z||ka&&
!Z&&!X&&1!==fa||ya&&!X||oa?Autodesk.Viewing.NAVIGATION_MODE.PAN:Autodesk.Viewing.NAVIGATION_MODE.ORBIT;if(a!==z){if(z===Autodesk.Viewing.NAVIGATION_MODE.ROLL||z===Autodesk.Viewing.NAVIGATION_MODE.TOUCH_ROLL)Ga.end(),B.restoreCOI(),b.navigation.setIsLocked(!1),qa=!0;switch(a){case Autodesk.Viewing.NAVIGATION_MODE.ROLL:case Autodesk.Viewing.NAVIGATION_MODE.TOUCH_ROLL:var c=B.getLookAtPoint(),c=c.sub(this.camera.position),e=0.5*(this.camera.near+this.camera.far);c.normalize().multiplyScalar(e);c=c.add(this.camera.position);
B.saveCOI();B.setPivotPoint(c,!0,!1);this.pivotActive(!0);b.navigation.setIsLocked(!0);b.navigation.setPivotSetFlag(!0);Ga.start(c,this.getWorldUp(),B.getCameraUpVector());qa=!0;break;case Autodesk.Viewing.NAVIGATION_MODE.PAN:d(this.camera,V.x,V.y);break;case Autodesk.Viewing.NAVIGATION_MODE.TOUCH_PAN_DOLLY:d(this.camera,Sa.x,Sa.y);break;case Autodesk.Viewing.NAVIGATION_MODE.FOV:ba=0,aa=M=null,ca=!1}z!==a&&(b.fireEvent({type:Autodesk.Viewing.NAVIGATION_MODE_CHANGED_EVENT,value:a}),z=a)}};this.update=
function(){var a=!1,d=!1;this.camera.dirty&&this.syncCamera();b.navigation.getRequestFitToView()&&!b.navigation.getTransitionActive()&&(b.navigation.setRequestFitToView(!1),this.fitToView());b.navigation.getRequestHomeView()&&!b.navigation.getTransitionActive()&&(b.navigation.setRequestHomeView(!1),this.goHome());var k=b.navigation.getRequestTransition();k&&!b.navigation.getTransitionActive()&&(b.navigation.setRequestTransition(!1),this.transitionView(k.position,k.coi,k.fov,k.up,k.worldUp,k.reorient));
this.getMotionDelta(na,O);var l=na.x,m=na.y,k=na.z;Ya=t=Ba=Sa=null;Na=0;if(-2===fa){2===ia.length&&(Ya=f(ia),t=f(ra));Ba=g(ia);Sa=g(ra);for(var n=Ba,p=Sa,s=ia,r=ra,v=n.x-p.x,u=n.y-p.y,U=Math.sqrt(v*v+u*u),A=6<U,w=0,R=0,F=0,H=0,I=0,M=0,P=r.length,ba=0;ba<P;++ba){var ca=s[ba].x-r[ba].x,aa=s[ba].y-r[ba].y,Y=Math.sqrt(ca*ca+aa*aa);6<Y&&(w+=1,Y=(v*ca+u*aa)/(U*Y),A&&Y>C&&R++);var ca=s[ba].x-n.x,aa=s[ba].y-n.y,lb=r[ba].x-p.x,Z=r[ba].y-p.y,ha=Math.sqrt(lb*lb+Z*Z);0<ha&&(Y=(ca*Z-aa*lb)/ha,ca=(ca*lb+aa*Z)/
ha-ha,6<Math.abs(Y)&&Math.abs(ca)<=Math.abs(Y)*N&&(I++,0<Y&&M++),7<Math.abs(ca)&&Math.abs(Y)<=Math.abs(ca)*G&&(0<ca?F++:H++))}n=0;0!=w||A?(n|=2,1==P?n|=4:(0<w&&R<P&&F+H==P&&(n|=8),I!=P||0!=M&&M!=P||(n|=16),A&&R==P&&(n|=4))):n|=1;Na=n}K||this.checkInteractionMode();K=-1<fa;if(!((A=sa)||(A=0!==l)||(A=0!==m)||(A=0!==k)))a:{for(A=0;A<ia.length;++A)if(ia[A].x!==ra[A].x||ia[A].y!==ra[A].y){A=!0;break a}A=!1}if(A){-1<fa&&(ga=ua=0);sa&&(qa=!0,sa=!1);$a||($a=!0);switch(z){case Autodesk.Viewing.NAVIGATION_MODE.ORBIT:E&&
E.startState?(O.x=-O.x,S&&E.orbit(da,S,O,E.startState)):B.orbitRelative(0.6*l,0.6*m);ta=!0;break;case Autodesk.Viewing.NAVIGATION_MODE.DOLLY:k*=0.6;0<=fa||-3===fa?(m=-m,k=Math.abs(l)>Math.abs(m)?l:m,k*=100,d=l=0.5):(l=b.navigation.getScreenViewport(),d=(ea-l.left)/l.width,l=(xa-l.top)/l.height);b.navigation.getZoomTowardsPivot()?B.coiIsActive()?B.dollyRelativeTowardsCOI(k):(d=e(0.5,0.5,this.camera),B.dollyRelativeTowardsPoint(k,d)):(d=e(d,l,this.camera),B.dollyRelativeTowardsPoint(k,d));break;case Autodesk.Viewing.NAVIGATION_MODE.PAN:B.trackRelative(-l,
m);break;case Autodesk.Viewing.NAVIGATION_MODE.TOUCH_PAN_DOLLY:d=c(Ba.scaledX,Ba.scaledY);d||(d=new THREE.Vector3(2*Ba.scaledX-1,2-2*Ba.scaledY,0),Pa.unprojectVector(d,this.camera),d=d.sub(B.getPosition()),l=B.getPivotDistance()/this.camera.near,d=d.multiplyScalar(l).add(B.getPosition()));B.dollyRelativeTowardsPoint(-60*(Ya-t),d);B.trackRelative(Ba.scaledX-Sa.scaledX,Ba.scaledY-Sa.scaledY);h();break;case Autodesk.Viewing.NAVIGATION_MODE.ROLL:sa=Ga.handleRoll(l,m,V,this);break;case Autodesk.Viewing.NAVIGATION_MODE.TOUCH_ROLL:sa=
Ga.handleRollTouch(ra[0],ra[1],ia[0],ia[1],this);h();break;case Autodesk.Viewing.NAVIGATION_MODE.FOV:0<=fa||-3===fa?(m=-m,k=Math.abs(l)>Math.abs(m)?l:m,0!==k&&(k*=-1,this.setFOV(this.camera.fov*(1+k)))):(d=this.getAccumulatedWheelDelta()/3,0!==d&&this.setFocalLength(b.navigation.getFocalLength()+d))}d=!0}this.stepMotionDelta(na,z!==Autodesk.Viewing.NAVIGATION_MODE.PAN&&z!==Autodesk.Viewing.NAVIGATION_MODE.ROLL);-1===fa&&Math.abs(k)<q&&(this.interactionEnd(-1),d=a=!0);!wa&&(a||-5<fa)&&(E||ta&&!Ga.isSnapped()&&
this.setWorldUp(B.getCameraUpVector(),!1),-1<fa&&J.copy(V),fa=-5,K=!1,S=null,ta=!1,this.interactionCheck(),this.checkInteractionMode(),$a&&($a=!1));a=!1;0<ua&&la&&(k=la,1<ua&&(k=1/ua,l=1-k,k=B.getWorldUpVector().multiplyScalar(l).add(la.clone().multiplyScalar(k))),this.setWorldUp(k,!0),--ua,0===ua&&(a=!0));pa.shown()&&pa.fade()&&D.invalidate(!1,!1,!0);k=!1;if(qa||B.isDirty())B.updateCamera(),qa=!1,k=!0;B.cameraChanged(!0)&&(k=!0);d&&(d=B.pivotIsSet(),a?this.pivotActive(d,!0):this.pivotActive(d&&(wa||
ga||ua),-1===fa));k?this.moveDelay=Date.now()+150:0!==this.moveDelay&&(0<this.moveDelay-Date.now()?k=!0:this.moveDelay=0);return k};this.clientToCanvasCoords=function(a,b,c){var d=this.domElement.getBoundingClientRect(),e=d.width,f=d.height,g=a.clientX-d.left,d=a.clientY-d.top;a.canvasX=g;a.canvasY=d;a.normalizedX=g/e*2-1;a.normalizedY=(f-d)/f*2-1;b&&b.set(g/e,d/f,0);c&&c.set(g,d)};this.handleResize=function(){b.navigation.setScreenViewport(b.container.getBoundingClientRect());sa=!0};this.setCOIFromMouse=
function(a,c,d,f){var g=null;Xa?g=D.intersectGround(a,c):(g=D.castRay(a,c,!0),g.intersectPoint?g=g.intersectPoint:d?g=D.intersectGround(a,c):(d=b.navigation.getScreenViewport(),g=e((a-d.left)/d.width,(c-d.top)/d.height,this.camera)));g&&this.setCOI(g,!0,!1,f)};this.handleSingleClick=function(a){a=D.hitTest(a.clientX,a.clientY,!1);if(0===fa){var b="click";Z&&(b+="Ctrl");ka&&(b+="Shift");X&&(b+="Alt");oa&&(b+="Space");Da&&(b+="F1");La&&(b+="F2");Ka&&(b+="F3");Ma&&(b+="F4");var c="",c=a.node||a.intersectPoint?
"onObject":"offObject";this.clickConfig&&this.clickConfig[b]&&this.clickConfig[b][c]&&this.handleAction(this.clickConfig[b][c],a)}else 1===fa&&ka&&!X&&!Z&&a.intersectPoint&&(this.setCOI(a.intersectPoint,!0,!1,!0),this.pivotActive(!0,!0))};this.handleAction=function(a,c){for(var d=0;d<a.length;++d)switch(a[d]){case "selectOnly":ha&&c.node&&ha.setSelection([c.node]);break;case "deselectAll":ha&&ha.setSelection([]);break;case "selectToggle":ha&&c.node&&ha.toggleSelection(c.node);break;case "isolate":c.node&&
b.isolate(c.node);break;case "showAll":D.visibilityManager.isolateNone();break;case "setCOI":c.intersectPoint&&(this.setCOI(c.intersectPoint,!0,!1,!0),this.pivotActive(!0,!0));break;case "hide":c.node&&D.hideMultiple([c.node]);break;case "show":c.node&&D.showMultiple([c.node]);break;case "toggleVisibility":c.node&&D.toggleVisibility(c.node);break;case "focus":ha&&(c.node?ha.setSelection([c.node]):ha.setSelection([]),this.fitToView())}};this.handleDoubleClick=function(a){var c=Y.applyButtonMappings(a);
null!=ha&&0==c&&(a=D.castRay(a.clientX,a.clientY,!1),a.node?ha.setSelection([a.node]):ha.clearSelection(),this.fitToView());1==c&&(b.navigation.fitBounds(!1,this.getBoundingBox(!0)),b.navigation.setPivotSetFlag(!1))};this.handleSingleTap=function(a){a=D.castRay((a.startX+a.endX)/2,(a.startY+a.endY)/2,!1);a.intersectPoint&&(this.setCOI(a.intersectPoint,!0,!1,!0),this.pivotActive(!0,!0))};this.handleDoubleTap=function(a,b){var c=(a.startX+a.endX+b.startX+b.endX)/4,d=(a.startY+a.endY+b.startY+b.endY)/
4;null!=ha&&(c=D.castRay(c,d,!1),c.node?ha.setSelection([c.node]):ha.clearSelection(),this.fitToView())};this.handleWheelInput=function(a){Xa&&Y.setCOIFromMouse(ea,xa,!1);b.navigation.getReverseZoomDirection()&&(a*=-1);V.z+=a;ba+=a;var c=Date.now();M||(M=c);aa=c;0!=a&&this.interactionStart(-1)};this.applyButtonMappings=function(a){var c=a.button;"buttons"in a&&(a.firefoxSpoof?c=0:!Za||a.buttons&1?2===c&&a.buttons&1&&(c=0,a.firefoxSpoof=Za=!0):(Za=!1,c=0));b.navigation.getUseLeftHandedInput()&&(c=
0===c?2:2===c?0:c);return c};this.resetKeys=function(){this.autoMove(-1,!1);Ma=Ka=La=Da=oa=X=Z=ka=0};this.applyKeyMappings=function(a,b){switch(a.keyCode){case 91:case 93:case 224:return U=b,r&&U&&ka?null:17;case 16:return b&&r&&U?null:16;case 72:return 36;case 61:return 187;case 173:case 109:return 189}return a.keyCode};this.handleKeyDown=function(a){var b=!1;switch(this.applyKeyMappings(a,!0)){case 16:ka=1;b=!0;break;case 17:Z=1;b=!0;break;case 18:X=1;b=!0;break;case 32:oa=1;b=!0;break;case 112:Da=
1;break;case 113:La=1;break;case 114:Ka=1;break;case 115:Ma=1;break;case 36:this.goHome();break;case 70:this.fitToView();break;case 187:this.adjustSpeed(1);break;case 189:this.adjustSpeed(-1);break;case 48:this.adjustSpeed(0);break;case 37:this.autoMove(0,!0);break;case 39:this.autoMove(1,!0);break;case 33:this.autoMove(2,!0);break;case 34:this.autoMove(3,!0);break;case 38:this.autoMove(4,!0);break;case 40:this.autoMove(5,!0);break;default:return!1}b&&this.interactionStart(-4);return!0};this.handleKeyUp=
function(a){var c=!1;switch(this.applyKeyMappings(a,!1)){case 16:ka=0;c=!0;break;case 17:Z=0;c=!0;break;case 18:X=0;c=!0;break;case 32:oa=0;c=!0;break;case 112:Da=0;break;case 113:La=0;break;case 114:Ka=0;break;case 115:Ma=0;break;case 36:case 70:break;case 37:this.autoMove(0,!1);break;case 39:this.autoMove(1,!1);break;case 33:this.autoMove(2,!1);break;case 34:this.autoMove(3,!1);break;case 38:this.autoMove(4,!1);break;case 40:this.autoMove(5,!1);break;case 27:if(b.contextMenu&&b.contextMenu.hide())break;
b.fireEvent({type:Autodesk.Viewing.ESCAPE_EVENT});this.resetKeys();this.interactionEnd(fa);break;default:return!1}c&&this.interactionEnd(-4);return!0};this.handleButtonDown=function(a){this.interactionStart(a)};this.handleButtonUp=function(a){this.interactionEnd(a)};this.handleTouchChange=function(a,b){0===a?this.interactionStart(1===b?-3:-2):this.interactionEnd(1===a?-3:-2)};this.keydown=function(b){w!==a.canvas||r&&b.metaKey&&91!=b.keyCode&&93!=b.keyCode||!Y.handleKeyDown(b)||(b.preventDefault(),
b.stopPropagation())};this.keyup=function(a){r&&a.metaKey&&91!=a.keyCode&&93!=a.keyCode||!Y.handleKeyUp(a)||(a.preventDefault(),a.stopPropagation())};this.updateModifierState=function(a){Z=r&&a.metaKey||a.ctrlKey?1:0;ka=a.shiftKey?1:0;X=a.altKey?1:0};this.mousedown=function(a){function c(a){Y.applyButtonMappings(a)===d&&(document.removeEventListener("mouseup",c),Y.mouseup(a))}if(!Y.isDragging&&!Y.inTouch){_isIE11&&inFullscreen()||document.activeElement.blur();a.preventDefault();a.stopPropagation();
Y.updateModifierState(a);Y.clientToCanvasCoords(a,J,R);V.copy(J);da.copy(R);var d=Y.applyButtonMappings(a);Y.handleButtonDown(d);Y.downX=a.canvasX;Y.downY=a.canvasY;Y.isDragging=!0;if(b.navigation.getUseLeftHandedInput()&&0===d||u&&1===d){var e=void 0!==ma.time&&500>a.timeStamp-ma.time,f=void 0!==ma.x&&void 0!==ma.y&&2>=Math.abs(ma.x-a.canvasX)&&2>=Math.abs(ma.y-a.canvasY);if(!e||!f||ma.clickCount&&2<=ma.clickCount)ma.clickCount=0;ma.clickCount?1===ma.clickCount&&(ma.clickCount=2):(ma.clickCount=
1,ma.x=a.canvasX,ma.y=a.canvasY,ma.time=a.timeStamp)}document.addEventListener("mouseup",c,!1)}};this.mousemove=function(a){if(!Y.inTouch)if(Y.isDragging){a.preventDefault();a.stopPropagation();Y.updateModifierState(a);Y.clientToCanvasCoords(a,V,da);var b=Y.downY-a.canvasY;if(2<Math.abs(Y.downX-a.canvasX)||2<Math.abs(b))Y.downX=-1,Y.downY=-1}else ea=a.clientX,xa=a.clientY,Xa&&D.rolloverObject(ea,xa)};this.mouseup=function(a){a.preventDefault();a.stopPropagation();Y.updateModifierState(a);Y.clientToCanvasCoords(a,
V,da);var c=Y.applyButtonMappings(a);Y.handleButtonUp(c);var d=Y.downX-a.canvasX,e=Y.downY-a.canvasY;Y.downX=-1;Y.downY=-1;Y.isDragging=!1;2>=Math.abs(d)&&2>=Math.abs(e)&&Y.handleSingleClick(a);(b.navigation.getUseLeftHandedInput()&&0===c||u&&1===c)&&2===ma.clickCount&&(Y.handleDoubleClick(a),ma.clickCount=0,ma.x=void 0,ma.y=void 0,ma.time=void 0)};this.doubleclick=function(a){a.preventDefault();a.stopPropagation();Y.clientToCanvasCoords(a,J,R);V.copy(J);Y.downX=a.canvasX;Y.downY=a.canvasY;Y.handleDoubleClick(a)};
this.mousewheel=function(a){a.preventDefault();a.stopPropagation();if(!Y.inTouch){var b=0;a.wheelDelta?b=a.wheelDelta/40:a.detail&&(b=-a.detail);Y.handleWheelInput(b)}};this.touchstart=function(a){function b(a){ia.length!==a.targetTouches.length&&Y.handleTouchChange(ia.length,a.targetTouches.length);ra=[];ia=[];for(var c=0;c<a.targetTouches.length;++c){var d=a.targetTouches[c];d.clientX=d.pageX;d.clientY=d.pageY;Y.clientToCanvasCoords(d);ra.push({x:d.canvasX,y:d.canvasY});ia.push({x:d.canvasX,y:d.canvasY})}1===
ia.length&&(Y.clientToCanvasCoords(a.targetTouches[0],J,R),V.copy(J))}function c(a){a.preventDefault();a.stopPropagation();0===a.targetTouches.length?(Y.handleTouchChange(ia.length,0),document.removeEventListener("touchend",c),Y.touchend(a)):b(a)}if(!Y.isDragging){Y.inTouch=!0;a.preventDefault();a.stopPropagation();b(a);if(1===ia.length){var d=ia[0];Ha=d.x;Oa=d.y;Ta=Date.now()}else Ha=Oa=Ta=-1;document.activeElement.blur();Y.updateModifierState(a);1===a.targetTouches.length&&document.addEventListener("touchend",
c,!1)}};this.touchmove=function(a){if(!Y.isDragging){a.preventDefault();a.stopPropagation();ia=[];for(var b=0;b<a.targetTouches.length;++b){var c=a.targetTouches[b];c.clientX=c.pageX;c.clientY=c.pageY;Y.clientToCanvasCoords(c);ia.push({x:c.canvasX,y:c.canvasY})}2===ia.length&&2===ra.length&&(b=Math.atan2(ia[1].y-ia[0].y,ia[1].x-ia[0].x),0>b&&(b+=p),c=Math.atan2(ra[1].y-ra[0].y,ra[1].x-ra[0].x),0>c&&(c+=p),b=Math.abs(b-c),b>Math.PI&&(b=p-b),2.9<b&&(b=ia[1],ia[1]=ia[0],ia[0]=b));1===ia.length&&Y.clientToCanvasCoords(a.targetTouches[0],
V,da);Y.updateModifierState(a)}};this.touchend=function(a){Y.inTouch=!1;if(-1!==Ta){var b=ia[0],b={startX:Ha,startY:Oa,startTime:Ta,endX:b.x,endY:b.y,endTime:Date.now()};Va.push(b)}n();ra=[];ia=[];Y.updateModifierState(a)};this.set2DMode=function(a){(Xa=a)&&pa.hide()};this.blur=function(a){Y.resetKeys();Y.interactionEnd(fa)};this.domElement.addEventListener("mousedown",this.mousedown,!1);window.addEventListener("mousemove",this.mousemove,!1);this.domElement.addEventListener("dblclick",this.doubleclick,
!1);this.domElement.addEventListener("mousewheel",this.mousewheel,!1);this.domElement.addEventListener("DOMMouseScroll",this.mousewheel,!1);this.domElement.addEventListener("touchstart",function(a){Y.touchstart(a)},!1);this.domElement.addEventListener("touchmove",function(a){Y.touchmove(a)},!1);window.addEventListener("keydown",this.keydown,!1);window.addEventListener("keyup",this.keyup,!1);this.mouseover=function(b){w=b.target;w!=a.canvas&&Y.autoMove(-1,!1)};window.addEventListener("mouseover",this.mouseover,
!1);window.addEventListener("blur",this.blur,!1);this.uninitialize=function(){window.removeEventListener("mousemove",this.mousemove,!1);window.removeEventListener("keydown",this.keydown,!1);window.removeEventListener("keyup",this.keyup,!1);window.removeEventListener("mouseover",this.mouseover,!1);window.removeEventListener("blur",this.blur,!1)}}ViewController.prototype=Object.create(THREE.EventDispatcher.prototype);AutodeskNamespace("Autodesk.Viewing.Private");
Autodesk.Viewing.Private.Selector=function(a){function b(a){var c=a.dbId||a.fragIds;if(0<f[c])f[c]--,0==f[c]&&g.viewer.highlightObjectNode(g.model,a,!1);else if(0>f[c])throw"Selection State machine broken. Negatively selected object!";if(a.children)for(c=0;c<a.children.length;c++)b(a.children[c])}function c(a,b){var d=a.dbId||a.fragIds;f[d]?f[d]++:(g.viewer.highlightObjectNode(g.model,a,!0,b),f[d]=1);if(a.children)for(d=0;d<a.children.length;d++)c(a.children[d],!0)}function e(a){g.isSelected(a)||
(g.selectedObjectIds[a.dbId]=a,g.selectionCount++,c(a))}function d(a){g.isSelected(a)&&(b(a),g.selectedObjectIds[a.dbId]=null,g.selectionCount--)}var g=this;this.viewer=a;this.model=null;this.selectedObjectIds={};this.selectionCount=0;var f={};a.api.addEventListener(Autodesk.Viewing.ISOLATE_EVENT,function(a){g.deselectInvisible()});a.api.addEventListener(Autodesk.Viewing.HIDE_EVENT,function(a){g.deselectInvisible()});this.getSelectionLength=function(){return g.selectionCount};this.getSelection=function(){var a=
[],b=g.selectedObjectIds,c;for(c in b)b[c]&&a.push(b[c]);return a};this.clearSelection=function(a){if(0<this.selectionCount){var c=g.selectedObjectIds,d;for(d in c)c[d]&&b(c[d]);g.selectedObjectIds={};g.selectionCount=0;a||this.fireSelectionChangedEvent()}};this.fireSelectionChangedEvent=function(){var a=[],b=[],c=g.selectedObjectIds,d;for(d in c){var e=c[d];e&&(a.push(e.dbId),b.push(e.fragIds))}b={type:Autodesk.Viewing.SELECTION_CHANGED_EVENT,dbIdArray:a,fragIdsArray:b,nodeArray:this.getSelection()};
Autodesk.Viewing.Private.logger.log({viewer_current_time:Date.now(),viewer_event_type:"selection",viewer_event_on_object:a});this.viewer.api.fireEvent(b)};this.isSelected=function(a){if(a&&this.selectedObjectIds[a.dbId])return!0};this.toggleSelection=function(a){a?(this.isSelected(a)?d(a):e(a),g.fireSelectionChangedEvent()):console.error("Attempting to select a null node.")};this.setSelectionIds=function(a){this.setSelection(this.model.getNodesByIds(a))};this.selectionIsEqual=function(a){if(this.selectionCount!==
a.length)return!1;for(var b=0;b<a.length;b++)if(!this.isSelected(a[b]))return!1;return!0};this.setSelection=function(a){if(!this.selectionIsEqual(a)&&(this.clearSelection(!0),null!=a)){for(var b=0;b<a.length;b++)e(a[b]);this.fireSelectionChangedEvent()}};this.deselectInvisible=function(){var a=!1,b=g.selectedObjectIds,c;for(c in b){var e=b[c];e&&!1==e.visible&&(d(e),a=!0)}a&&this.fireSelectionChangedEvent()};this.toggleSelectionId=function(a){this.toggleSelection(this.model.getNodeById(a))};this.isSelectedOrParentIsSelected=
function(a){for(;a;){if(this.isSelected(a))return!0;a=a.parent}return!1};this.getSelectionBounds=function(){var a=new THREE.Box3,b=new THREE.Box3,c=[],d=g.selectedObjectIds,e;for(e in d)d[e]&&g.model.getNodeFragments(parseInt(e),c);d=this.viewer;e=this.model;for(var f=0;f<c.length;++f){var q=d.getRenderProxy(e,c[f]);q&&(q.geometry.boundingBox.getTransformedBox(q.matrixWorld,b),a.union(b))}return a};this.getSelectionVisibility=function(){var a=!1,b=!1,c=g.selectedObjectIds,d;for(d in c){var e=c[d];
if(e&&(Autodesk.Viewing.Private.VisibilityManager.isVisible(e)?a=!0:b=!0,a&&b))break}return{hasVisible:a,hasHidden:b}};this.uninitialize=function(){this.selectedObjectIds=this.model=this.viewer=null}};AutodeskNamespace("Autodesk.Viewing.Private");Autodesk.Viewing.Private.VisibilityManager=function(a){this.viewerImpl=a;this.model=null;this.isolatedNodes=[]};Autodesk.Viewing.Private.VisibilityManager.prototype.getIsolatedNodes=function(){return this.isolatedNodes.slice(0)};
Autodesk.Viewing.Private.VisibilityManager.prototype.isolate=function(a){a?this.isolateMultiple([a]):this.isolateNone()};Autodesk.Viewing.Private.VisibilityManager.prototype.isolateNone=function(){this.viewerImpl.setModelVisibility(this.model,!0);var a=this.model?this.model.getRoot():null;a&&this.setVisibilityOnNode(a,!0);this.isolatedNodes=[];this.viewerImpl.resetIsolation(this.model);this.viewerImpl.api.fireEvent({type:Autodesk.Viewing.ISOLATE_EVENT,nodeIdArray:[]})};
Autodesk.Viewing.Private.VisibilityManager.prototype.isolateMultiple=function(a){if(a&&0!=a.length){var b=this.model?this.model.getRoot():null;b&&this.setVisibilityOnNode(b,!1);this.viewerImpl.setModelVisibility(this.model,!1);for(b=0;b<a.length;b++)this.setVisibilityOnNode(a[b],!0),this.viewerImpl.needGhostedPass=!0;this.isolatedNodes=a.slice(0);this.viewerImpl.api.fireEvent({type:Autodesk.Viewing.ISOLATE_EVENT,nodeIdArray:a})}else this.isolateNone();this.viewerImpl.invalidate(!0)};
Autodesk.Viewing.Private.VisibilityManager.prototype.hideMultiple=function(a){for(var b=0;b<a.length;++b)this.setVisibilityOnNode(a[b],!1);0<a.length&&this.viewerImpl.api.fireEvent({type:Autodesk.Viewing.HIDE_EVENT,nodeIdArray:a})};Autodesk.Viewing.Private.VisibilityManager.prototype.hide=function(a){this.setVisibilityOnNode(a,!1);this.viewerImpl.api.fireEvent({type:Autodesk.Viewing.HIDE_EVENT,nodeIdArray:[a]})};
Autodesk.Viewing.Private.VisibilityManager.prototype.showMultiple=function(a){for(var b=0;b<a.length;++b)this.setVisibilityOnNode(a[b],!0);0<a.length&&this.viewerImpl.api.fireEvent({type:Autodesk.Viewing.SHOW_EVENT,nodeIdArray:a})};Autodesk.Viewing.Private.VisibilityManager.prototype.show=function(a){this.setVisibilityOnNode(a,!0);this.viewerImpl.api.fireEvent({type:Autodesk.Viewing.SHOW_EVENT,nodeIdArray:[a]})};
Autodesk.Viewing.Private.VisibilityManager.prototype.toggleVisibility=function(a){var b=Autodesk.Viewing.Private.VisibilityManager.isVisible(a);this.setVisibilityOnNode(a,!b);this.viewerImpl.api.fireEvent(b?{type:Autodesk.Viewing.HIDE_EVENT,nodeIdArray:[a]}:{type:Autodesk.Viewing.SHOW_EVENT,nodeIdArray:[a]})};
Autodesk.Viewing.Private.VisibilityManager.prototype.setVisibilityOnNode=function(a,b){var c=this.viewerImpl,e=this.model,d=this;(function f(a){if(a.visible&&!b)for(var k=0,l=d.isolatedNodes.length;k<l;++k)if(d.isolatedNodes[k].dbId===a.dbId){d.isolatedNodes.splice(k,1);break}a.visible=b;k=a.fragIds;if(void 0!==k)if(Array.isArray(k))for(l=0;l<k.length;l++)c.setFragmentVisibility(e,k[l],b);else c.setFragmentVisibility(e,k,b);if(a.children)for(k=0;k<a.children.length;k++)f(a.children[k])})(a);this.viewerImpl.needGhostedPass=
!0;this.viewerImpl.invalidate(!0,!1,!0)};Autodesk.Viewing.Private.VisibilityManager.isVisible=function(a){return null!=a.visible?a.visible:!0};Autodesk.Viewing.Private.VisibilityManager.prototype.areAllVisible=function(){return this.viewerImpl.isWholeModelVisible(this.model)};AutodeskNamespace("Autodesk.Viewing.Private");var NUM_WORKER_THREADS=3,NUM_PARALLEL_DOWNLOADS=2,WORKER_SCRIPT=null;LMV_WORKER_URL||(LMV_WORKER_URL="src/workers/MainWorker.js");
void 0==ENABLE_INLINE_WORKER&&(ENABLE_INLINE_WORKER=!1);ENABLE_DEBUG&&(NUM_PARALLEL_DOWNLOADS=NUM_WORKER_THREADS=6);
var WORKER_LOAD_GEOMETRY="LOAD_GEOMETRY",WORKER_LOAD_SVF="LOAD_SVF",WORKER_SEARCH="SEARCH",WORKER_GET_PROPERTIES="GET_PROPERTIES",WORKER_SEARCH_PROPERTIES="SEARCH_PROPERTIES",WORKER_GET_OBJECT_TREE="GET_OBJECT_TREE",WORKER_PARSE_F2D="PARSE_F2D",WORKER_STREAM_F2D="STREAM_F2D",WORKER_PARSE_F2D_FRAME="PARSE_F2D_FRAME",WORKER_CLOUD_RENDERING="CLOUD_RENDERING",WORKER_SVF_TO_SPD="SVF_TO_SPD",WORKER_POST_COMMENTS="POST_COMMENTS",WORKER_GET_COMMENTS="GET_COMMENTS";
Autodesk.Viewing.Private.SvfLoader=function(a){this.viewer3DImpl=a;this.next_pack=0;this.loading=!1;this.tmpMatrix=new THREE.Matrix4;this.getObjectTreeCallbacks=[];Autodesk.Viewing.Private.logger||(Autodesk.Viewing.Private.logger=new Autodesk.Viewing.Private.Logger({console:!0,viewingservice:!1,webstorage:!1,endpoint:"",flushThreshold:0}));this.logger=Autodesk.Viewing.Private.logger;this.loadTime=0};Autodesk.Viewing.Private.SvfLoader.prototype.uninitialize=function(){this.viewer3DImpl=this.svf=null};
Autodesk.Viewing.Private.SvfLoader.prototype.pathToURL=function(a){if("http://"==a.substr(0,7)||"https://"==a.substr(0,8)||"file:///"==a.substr(0,8)||"urn:"==a.substr(0,4))return a;var b=window.location.pathname,c=b.lastIndexOf("/"),b=b.substr(0,c+1);return window.location.protocol+"//"+window.location.host+b+a};
Autodesk.Viewing.Private.SvfLoader.prototype.loadSvf=function(a,b,c,e,d){if(this.loading)return stderr("loading of SVF already in progress."),!1;var g=a.indexOf("urn:");-1!=g&&(this.logger.bindURN(a.substr(g,a.substr(g).indexOf("/"))),stderr("Extracted URN: "+this.logger.urn),g=this.logger.urn.lastIndexOf(":"),this.svfUrn=this.logger.urn.substr(g+1));this.sharedDbPath=c;this.currentLoadPath=a;var f=this.isf2d=-1!=a.indexOf(".f2d");if(ENABLE_INLINE_WORKER){var h=new XMLHttpRequest;c=FORCE_USE_LOCAL_WORKER_SCRIPT?
LMV_WORKER_URL:RESOURCE_ROOT+LMV_WORKER_URL;c+="?domain="+window.location.hostname;h.open("GET",c,!0);h.setRequestHeader("Access-Control-Allow-Origin","*");var k=this;h.onload=function(){WORKER_SCRIPT=h.responseText;f?k.loadFydoCB(a,b,e,d):k.loadSvfCB(a,b,e,d)};h.send();return!0}return f?this.loadFydoCB(a,b,e,d):this.loadSvfCB(a,b,e,d)};
Autodesk.Viewing.Private.SvfLoader.prototype.loadSvfCB=function(a,b,c,e){this.t0=(new Date).getTime();this.failedToLoadSomeGeometryPacks=null;var d=createWorkerWithTokenRefresh(),g=this;a=g.pathToURL(a);d.postMessageWithCallback({operation:WORKER_LOAD_SVF,url:a,headers:{},objectIds:b,auth:auth,viewing_url:VIEWING_URL,queryParams:"domain="+window.location.hostname},function(a){if(a.data&&a.data.svf){a=g.svf=a.data.svf;g.failedToLoadSomeGeometryPacks&&(e&&e(g.failedToLoadSomeGeometryPacks.code,g.failedToLoadSomeGeometryPacks.msg),
g.failedToLoadSomeGeometryPacks=null);g.onSvfLoadDone(a);c&&c(a);var b=a.geompacks.length;if(b)for(var b=Math.min(b,NUM_PARALLEL_DOWNLOADS),k=0;k<b;k++){var l=a.geompacks[k];g.loadGeometryPack(l.id,l.uri);g.next_pack=k+1}else g.onGeomLoadDone();g.loading=!1;d.finish();d=null}else a.data&&a.data.progress||(a.data&&a.data.error?(g.loading=!1,d.finish(),d=null,e&&e(a.data.error.code,a.data.error.msg)):a.data&&a.data.debug?stderr(a.data.message):(stderr("SVF download failed."),g.loading=!1,d.finish(),
d=null))});return!0};
Autodesk.Viewing.Private.SvfLoader.prototype.loadFydoCB=function(a,b,c,e){this.t0=Date.now();var d=this.pathToURL(a),g=createWorker(),f=createWorker(),h=this,k={};g.addEventListener("message",function(a){if(a.data&&"F2DBLOB"==a.data.type){var b={operation:WORKER_PARSE_F2D,data:a.data.buffer,metadata:a.data.metadata,manifest:a.data.manifest,basePath:a.data.basePath,f2dLoadOptions:k,url:d};f.postMessage(b,[b.data]);g.terminate()}else a.data&&"F2DSTREAM"==a.data.type?(b={operation:WORKER_PARSE_F2D_FRAME,data:a.data.frames,
url:d,f2dLoadOptions:k},a.data.metadata&&(b.metadata=a.data.metadata,b.manifest=a.data.manifest),a.data.finalFrame&&(b.finalFrame=!0),a.data.progress&&h.viewer3DImpl.signalProgress(100*a.data.progress),f.postMessage(b,b.data?[b.data]:void 0),a.data.finalFrame&&g.terminate()):a.data&&a.data.debug?stderr(a.data.message):a.data&&a.data.error?(h.loading=!1,g.terminate(),e&&e.call(this,a.data.error.code,a.data.error.msg)):(stderr("F2D download failed."),h.loading=!1,g.terminate())},!1);f.addEventListener("message",
function(a){if(a.data&&a.data.f2d){var b=h.svf=a.data.f2d;f.terminate();stderr("Num polylines: "+b.numPolylines);stderr("Line segments: "+b.numLineSegs);stderr("Circular arcs: "+b.numCircles);stderr("Ellipitcal arcs:"+b.numEllipses);stderr("Plain triangles:"+b.numTriangles);stderr("Total # of op codes generated by fydo.parse: "+b.opCount);h.onSvfLoadDone(h.svf);c&&c(h.svf);for(var d=0;d<b.meshes.length;d++)h.processReceivedMesh2D(b.meshes[d],d);b.meshes=null;h.onGeomLoadDone();h.loading=!1}else if(a.data&&
a.data.f2dframe){var g=0;a.data.meshes?(b=a.data.bbox,h.svf.bbox=new THREE.Box3(b.min,b.max)):h.svf=a.data.f2dframe;g=a.data.baseIndex;b=h.svf;b.fragments&&b.fragments.initialized?b.maxObjectNumber=a.data.maxObjectNumber:(h.onSvfLoadDone(b),c&&c(b));if(a.data.meshes&&a.data.meshes.length){for(d=0;d<a.data.meshes.length;d++)h.processReceivedMesh2D(a.data.meshes[d],g+d);a.data.finalFrame&&(h.onGeomLoadDone(),h.loading=!1,f.terminate())}}else a.data&&a.data.progress||(a.data&&a.data.debug?stderr(a.data.message):
a.data&&a.data.error?(h.loading=!1,f.terminate(),stderr("Error while parsing F2d: "+JSON.stringify(a.data.error.args)),e&&e.call(this,a.data.error.code,a.data.error.msg)):(stderr("F2D download failed."),h.loading=!1,f.terminate()))},!1);g.postMessage({operation:WORKER_STREAM_F2D,url:d,headers:{},objectIds:b,auth:auth,viewing_url:VIEWING_URL,queryParams:"domain="+window.location.hostname});return!0};
Autodesk.Viewing.Private.SvfLoader.prototype.loadGeometryPack=function(a,b){var c,e,d,g=this;if(!this.pack_workers)for(this.pack_workers=[],c=0;c<NUM_WORKER_THREADS;c++)e=createWorkerWithTokenRefresh(),e.queued=0,this.pack_workers.push(e);e=0;var f=this.pack_workers[0].queued;for(c=1;c<NUM_WORKER_THREADS;c++)this.pack_workers[c].queued<f&&(e=c);c=this.pack_workers[e];c.queued+=2;f=this.pathToURL(this.svf.basePath+b);e={operation:WORKER_LOAD_GEOMETRY,url:f,packId:parseInt(a),headers:{},workerId:e,
auth:auth,viewing_url:VIEWING_URL};c.postMessageWithCallback(e,function(a){if(a.data&&a.data.mesh){if(g.processReceivedMesh(a.data),1<=a.data.progress){g.pack_workers[a.data.workerId].queued-=1;a=!0;for(d=0;d<g.pack_workers.length;d++)if(0!=g.pack_workers[d].queued){a=!1;break}if(a){for(d=0;d<NUM_WORKER_THREADS;d++)g.pack_workers[d].finish();g.pack_workers=null}g.svf.fragments.numLoaded==g.svf.fragments.length&&(g.onGeomLoadDone(),g.viewer3DImpl.matman().loadTextures(g.svf))}}else a.data&&a.data.progress?
(g.pack_workers[a.data.workerId].queued-=1,g.next_pack<g.svf.geompacks.length&&(a=g.svf.geompacks[g.next_pack++],g.loadGeometryPack(a.id,a.uri))):a.data&&a.data.debug?stderr(a.data.message):a.data&&a.data.error?g.failedToLoadSomeGeometryPacks={code:a.data.error.code,msg:a.data.error.msg}:g.pack_workers[a.data.workerId].queued-=2})};
function meshToGeometry(a){var b=a.mesh,c=new THREE.BufferGeometry;a.byteSize=0;c.vb=b.vb;c.vbstride=b.vbstride;b.isLines&&(c.isLines=b.isLines);a.is2d&&(c.is2d=!0);c.numInstances=b.numInstances;for(var e in b.vblayout){var d=b.vblayout[e];c.attributes[e]={itemSize:d.itemSize,bytesPerItem:d.bytesPerItem,normalize:d.normalize,isPattern:d.isPattern};c.numInstances&&(c.attributes[e].divisor=d.divisor);d.array?(c.attributes[e].array=d.array,a.byteSize+=d.array.byteLength):d.hasOwnProperty("offset")?c.attributes[e].itemOffset=
d.offset:stderr("VB attribute is neither interleaved nor separate. Something is wrong with the buffer specificaiton.")}a.byteSize+=b.vb.byteLength;c.attributes.index={itemSize:1,array:b.indices};a.byteSize+=b.indices.byteLength;c.freeCPUBuffers=!1;65535<b.vb.length/b.vbstride&&stderr("Mesh with >65535 vertices. It will fail to draw.");c.boundingBox=(new THREE.Box3).copy(b.boundingBox);c.boundingSphere=(new THREE.Sphere).copy(b.boundingSphere);a.geometry=c;delete a.mesh}
function getFragmentTransform(a,b,c){c*=16;b=b.transforms;if(!b)return null;for(var e=!0,d=0;16>d;d++)if(d%5&&0!=b[c+d]||!(d%5)&&1!=b[c+d]){e=!1;break}if(e)return null;for(e=0;16>e;e++)a.elements[e]=b[c+e];return a}
Autodesk.Viewing.Private.SvfLoader.prototype.processReceivedMesh=function(a){meshToGeometry(a);var b=a.packId+":"+a.meshIndex,c=this.svf,e=c.fragments,d=e.mesh2frag[b];if(void 0===d)stderr("Mesh "+b+" was not referenced by any fragments.");else{c.meshCount++;var g=268435456,f=MAX_FRAGS_PER_GROUP;this.isf2d&&(g*=2);if(67108864>c.gpuMeshMemory&&c.gpuNumMeshes<f)a.geometry.streamingDraw=!1,a.geometry.streamingIndex=!1;else if(c.gpuMeshMemory>g||2E3<c.gpuNumMeshes)a.geometry.streamingDraw=!0,a.geometry.streamingIndex=
!0;else{var h;this.isf2d?h=100001:Array.isArray(d)?h=d.length*a.byteSize:300>(0|d)?(a.geometry.streamingDraw=!1,a.geometry.streamingIndex=!1):h=a.byteSize;1E5>h&&(a.geometry.streamingDraw=!0,a.geometry.streamingIndex=!0)}a.geometry.streamingDraw||(c.gpuMeshMemory+=a.byteSize,c.gpuNumMeshes+=1);if(Array.isArray(d))for(f=0;f<d.length;f++)h=0|d[f],g=e.materials[h].toString(),this.viewer3DImpl.addMeshInstance(a.geometry,h,g,getFragmentTransform(this.tmpMatrix,e,h));else f=getFragmentTransform(this.tmpMatrix,
e,0|d),g=e.materials[d].toString(),this.viewer3DImpl.addMeshInstance(a.geometry,0|d,g,f);delete e.mesh2frag[b];b=a.geometry.attributes.index.array.length/3;c.geomPolyCount+=b;c.instancePolyCount+=b*(d.length||1);c.geomMemory+=a.byteSize;a=!e.numLoaded;e.numLoaded+=d.length||1;d=e.numLoaded;e=e.length;c=d/e;b=0|e/d;if(a||0==(b&b-1)&&this.lastRepaintFract!=b)this.lastRepaintFract=b,this.viewer3DImpl.invalidate(!1,!0);this.isf2d&&0==d%20?this.viewer3DImpl.invalidate(!1,!0):this.isf2d||1!=c||this.viewer3DImpl.invalidate(!0);
1>c&&0==d%10&&this.viewer3DImpl.signalProgress(100*c,"fragment "+d+" / "+e)}};
Autodesk.Viewing.Private.SvfLoader.prototype.processReceivedMesh2D=function(a,b){var c={mesh:a,is2d:!0,packId:"0",meshIndex:b},e="0:"+b,d=this.svf.fragments;d.fragId2dbId[b]=c.mesh.dbIds;for(var g in c.mesh.dbIds){var f=parseInt(g),h=d.dbId2fragId[f];Array.isArray(h)?h.push(b):d.dbId2fragId[f]="undefined"!==typeof h?[h,b]:b}d.mesh2frag[e]=b;d.materials[b]=this.viewer3DImpl.matman().create2DMaterial(a.material);d.length++;this.processReceivedMesh(c)};
Autodesk.Viewing.Private.SvfLoader.prototype.onSvfLoadDone=function(a){this.isf2d&&(a.fragments={},a.fragments.mesh2frag={},a.fragments.materials=[],a.fragments.fragId2dbId=[],a.fragments.dbId2fragId=[],a.fragments.length=0,a.fragments.initialized=!0);a.geomPolyCount=0;a.instancePolyCount=0;a.geomMemory=0;a.fragments.numLoaded=0;a.meshCount=0;a.gpuNumMeshes=0;a.gpuMeshMemory=0;a.basePath="";var b=this.currentLoadPath.lastIndexOf("/");-1!=b&&(a.basePath=this.currentLoadPath.substr(0,b+1));b=Date.now();
this.loadTime+=b-this.t0;stderr("SVF load: "+(b-this.t0));this.viewer3DImpl.matman().convertMaterials(a);this.t0=b;a.bbox=new THREE.Box3(a.bbox.min,a.bbox.max);if(a.cameras)for(b=0;b<a.cameras.length;b++){var c=a.cameras[b];c.position=(new THREE.Vector3).copy(c.position);c.target=(new THREE.Vector3).copy(c.target);c.up=(new THREE.Vector3).copy(c.up)}stderr("scene bounds: "+JSON.stringify(a.bbox));this.viewer3DImpl.signalProgress(5,"Hold on, getting the model...")};
Autodesk.Viewing.Private.SvfLoader.prototype.onGeomLoadDone=function(){this.svf.loadDone=!0;this.svf.fragments.entityIndexes=null;this.svf.fragments.packIds=null;var a=Date.now(),b="Fragments load time: "+(a-this.t0);this.loadTime+=a-this.t0;this.viewer3DImpl.onLoadComplete();stderr(b);stderr("Total geometry size: "+this.svf.geomMemory/1048576+" MB");stderr("Number of meshes: "+this.svf.meshCount);stderr("Num Meshes on GPU: "+this.svf.gpuNumMeshes);stderr("Net GPU geom memory used: "+this.svf.gpuMeshMemory);
a={viewer_current_time:Date.now(),viewer_model_stats_is_f2d:this.isf2d,viewer_model_stats_total_load_time:this.loadTime,viewer_model_stats_total_geometry_size:this.svf.geomMemory/1048576,viewer_model_stats_total_meshes_count:this.svf.meshCount,viewer_model_stats_total_meshes_on_gpu:this.svf.gpuNumMeshes,viewer_model_stats_total_gpu_memory_used:this.svf.gpuMeshMemory/1048576};this.logger.log(a,!0);this.currentLoadPath=null;this.isf2d=void 0};
Autodesk.Viewing.Private.SvfLoader.prototype.getProperties=function(a,b,c){this.propWorker||(this.propWorker=createWorkerWithTokenRefresh());var e=this,d=function(f){f.data&&f.data.error?c&&c(f.data.error.code,f.data.error.msg,f.data.error.args):f.data&&f.data.debug?stderr(f.data.message):f.data&&f.data.dbId===a&&(e.propWorker.removeMessageEventListener(d),b(f.data.result))},g=this.pathToURL(this.svf.basePath);this.sharedDbPath&&!this.svf.propertydb.values.length&&(g=this.sharedDbPath,stderr("Using shared property db: "+
g));this.propWorker.postMessageWithCallback({operation:WORKER_GET_PROPERTIES,url:g,propertydb:this.svf.propertydb,dbId:a,headers:{},auth:auth,viewing_url:VIEWING_URL},d)};
Autodesk.Viewing.Private.SvfLoader.prototype.searchProperties=function(a,b,c){var e=this;this.propWorker||(this.propWorker=createWorkerWithTokenRefresh());var d=function(a){a.data&&a.data.error?c&&c(a.data.error.code,a.data.error.msg):a.data&&a.data.debug?stderr(a.data.message):(e.propWorker.removeMessageEventListener(d),b&&b(a.data))},g=this.pathToURL(this.svf.basePath);this.sharedDbPath&&!this.svf.propertydb.values.length&&(g=this.sharedDbPath,stderr("Using shared property db: "+g));this.propWorker.postMessageWithCallback({operation:WORKER_SEARCH_PROPERTIES,
url:g,propertydb:this.svf.propertydb,searchText:a,headers:{},auth:auth,viewing_url:VIEWING_URL},d)};
Autodesk.Viewing.Private.SvfLoader.prototype.createFragToNodeMapping=function(){var a=this.svf,b=a.fragments.fragId2dbId;if(a.instanceTree&&b){var c=a.fragments.fragToDbNode=Array(b.length);(function d(a){var b=a.fragIds;if(void 0!==b)if(Array.isArray(b))for(var h=0;h<b.length;h++)c[b[h]]=a;else c[b]=a;if(a.children)for(b=0;b<a.children.length;b++)d(a.children[b])})(a.instanceTree);a.fragToNodeDone=!0;this.viewer3DImpl.api.fireEvent({type:Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT})}};
Autodesk.Viewing.Private.SvfLoader.prototype.getObjectTree=function(a,b){function c(){for(var a=0;a<e.getObjectTreeCallbacks.length;a++)e.getObjectTreeCallbacks[a](e.svf.instanceTree);e.getObjectTreeCallbacks=[]}var e=this;this.propWorker||(this.propWorker=createWorkerWithTokenRefresh());a&&this.getObjectTreeCallbacks.push(a);if(e.svf.instanceTree)c();else{var d=function(a){if(!a.data||!a.data.error)if(a.data&&a.data.debug)stderr(a.data.message);else{var b=a.data.instanceTree,g=a.data.instanceBoxes;
b?e.svf.instanceTree||(e.svf.instanceTree=b,e.svf.maxTreeDepth=a.data.maxTreeDepth,e.createFragToNodeMapping()):a.data.objectCount&&(e.svf.hasObjectProperties=a.data.objectCount);c();g&&(e.svf.instanceBoxes=g,e.propWorker.removeMessageEventListener(d))}},g=this.pathToURL(this.svf.basePath);this.sharedDbPath&&!this.svf.propertydb.values.length&&(g=this.sharedDbPath,stderr("Using shared property db: "+g));this.propWorker.postMessageWithCallback({operation:WORKER_GET_OBJECT_TREE,url:g,propertydb:this.svf.propertydb,
headers:{},fragToDbId:this.svf.fragments.fragId2dbId,fragBoxes:this.svf.fragments.boxes,auth:auth,viewing_url:VIEWING_URL},d)}};function createWorker(){if(ENABLE_DEBUG||!ENABLE_INLINE_WORKER)return new Worker(LMV_WORKER_URL);var a;window.URL=window.URL||window.webkitURL;try{a=new Blob([WORKER_SCRIPT],{type:"application/javascript"})}catch(b){a=new BlobBuilder,a.append(WORKER_SCRIPT),a=a.getBlob()}return new Worker(URL.createObjectURL(a))}
function createWorkerWithTokenRefresh(){var a=createWorker();a.hasEventListener=!1;a.onMessageReceivedCallbacks=[];a.onMessageReceived=function(b){if(b.data&&b.data.refreshToken)(new Autodesk.Viewing.Private.WorkerViewingServiceRefreshTokenHandler).refreshToken(function(b){stderr("Token refreshed in thread");a.postMessage({tokenRefreshed:!0})},function(b){stderr("Failed token refresh in thread");a.postMessage({tokenRefreshed:!1})});else for(var c=0;c<a.onMessageReceivedCallbacks.length;++c)a.onMessageReceivedCallbacks[c](b)};
a.postMessageWithCallback=function(b,c,e){a.onMessageReceivedCallbacks.push(c);a.hasEventListener||(a.addEventListener("message",a.onMessageReceived,!1),a.hasEventListener=!0);ENABLE_DEBUG&&e?(c=function(c){a.postMessage.call(a,b)},0===Autodesk.Viewing.Private.env.indexOf("Autodesk")?Autodesk.Viewing.Private.setApigeeTokenInCookie("invalid",c):Autodesk.Viewing.Private.setAuthTokenInCookie("invalid",c)):a.postMessage.call(a,b)};a.removeMessageEventListener=function(b){b=a.onMessageReceivedCallbacks.indexOf(b);
-1!==b&&a.onMessageReceivedCallbacks.splice(b,1);0===a.onMessageReceivedCallbacks.length&&(a.removeEventListener("message",a.onMessageReceived),a.hasEventListener=!1)};a.removeAllMessageEventListeners=function(){a.onMessageReceivedCallbacks=[];a.removeEventListener("message",a.onMessageReceived);a.hasEventListener=!1};a.finish=function(){a.removeAllMessageEventListeners();a.terminate()};return a}
Autodesk.Viewing.Private.SvfLoader.prototype.cloudRendering=function(a,b,c){a=this.cloudRenderingWorker;b={operation:WORKER_CLOUD_RENDERING,url:"urn:"+this.spdUrn,headers:{},auth:auth,viewing_url:VIEWING_URL,queryParams:"domain="+window.location.hostname,camera:b,canvas:{width:this.viewer3DImpl.canvas.width,height:this.viewer3DImpl.canvas.height},imageNo:c,exposureBias:this.viewer3DImpl.renderer().getExposureBias(),currentLightPreset:this.viewer3DImpl.currentLightPreset(),upVector:this.viewer3DImpl.model.getUpVector()};
a.postMessage(b)};
Autodesk.Viewing.Private.SvfLoader.prototype.svfToSpdTranslator=function(a){var b=this.cloudRenderingWorker,c=this;if(!this.cloudRenderingWorker){var b=this.cloudRenderingWorker=createWorker(),e=function(d){var g=function(){b.removeEventListener("message",e);b.terminate();b=null};d.data&&d.data.translation?(c.spdUrn=d.data.translation.spdUrn,c.spdUrn=btoa(c.spdUrn),stderr("spdUrn = "+c.spdUrn),c.cloudRendering(a,d.data.translation.camera,d.data.translation.imageNo),alertify.success("Translation Job Complete")):d.data&&
d.data.translationProgress?alertify.success("Translation Job In Progress"):d.data&&d.data.translationError?(a.raaSPanel.imageError(d.data.translationError.imageNo),alertify.error("Translation Job Error"),g()):d.data&&d.data.renderings?(d=d.data.renderings,a.raaSPanel.loadThumbnail(d.thumbnail,d.imageNo),a.raaSPanel.loadImage(d.image,d.imageNo),g=new Image,g.src=d.image,a.raaSPanel.displayImage(g,d.imageNo-1),alertify.success("RaaS Rendering Job Complete"),stderr(d)):d.data&&d.data.progress?alertify.success("RaaS Rendering Job in Progress"):
d.data&&d.data.error?(a.raaSPanel.imageError(d.data.error.imageNo),alertify.error("RaaS Rendering Job Error"),g()):d.data&&d.data.debug&&stderr(d.data.message)};b.addEventListener("message",e,!1)}b.postMessage({operation:WORKER_SVF_TO_SPD,url:"urn:",headers:{},auth:auth,viewing_url:VIEWING_URL,queryParams:"domain="+window.location.hostname,svfUrn:c.svfUrn,camera:this.viewer3DImpl.camera,imageNo:a.raaSPanel.imageNum})};
Autodesk.Viewing.Private.SvfLoader.prototype.postComments=function(a,b){var c=this.propWorker;c||(c=this.propWorker=createWorker());if(!this.propWorker.cb){var e=function(a){a.data&&!0===a.data.result||a.data&!1===a.data.result||a.data&&a.data.debug&&stderr(a.data.message)};c.addEventListener("message",e,!1);this.propWorker.cb=e}c.postMessage({operation:WORKER_POST_COMMENTS,url:"urn:"+this.svfUrn,data:b,headers:{},auth:auth,viewing_url:VIEWING_URL,queryParams:"domain="+window.location.hostname})};
Autodesk.Viewing.Private.SvfLoader.prototype.getComments=function(a){a=this.propWorker;a||(a=this.propWorker=createWorker());a.postMessage({operation:WORKER_GET_COMMENTS,headers:{},auth:auth,viewing_url:VIEWING_URL,queryParams:"domain="+window.location.hostname})};
var Stats=function(){var a=Date.now(),b=a,c=0,e=Infinity,d=0,g=0,f=Infinity,h=0,k=0,l=0,n=document.createElement("div");n.id="stats";n.addEventListener("mousedown",function(a){a.preventDefault();A(++l%2)},!1);n.style.cssText="width:80px;opacity:0.9;cursor:pointer";var m=document.createElement("div");m.id="fps";m.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002";n.appendChild(m);var p=document.createElement("div");p.id="fpsText";p.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px";
p.innerHTML="FPS";m.appendChild(p);var q=document.createElement("div");q.id="fpsGraph";q.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff";for(m.appendChild(q);74>q.children.length;){var s=document.createElement("span");s.style.cssText="width:1px;height:30px;float:left;background-color:#113";q.appendChild(s)}var r=document.createElement("div");r.id="ms";r.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none";n.appendChild(r);var u=document.createElement("div");
u.id="msText";u.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px";u.innerHTML="MS";r.appendChild(u);var w=document.createElement("div");w.id="msGraph";w.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0";for(r.appendChild(w);74>w.children.length;)s=document.createElement("span"),s.style.cssText="width:1px;height:30px;float:left;background-color:#131",w.appendChild(s);var A=function(a){l=a;switch(l){case 0:m.style.display=
"block";r.style.display="none";break;case 1:m.style.display="none",r.style.display="block"}};return{REVISION:11,domElement:n,setMode:A,begin:function(){a=Date.now()},end:function(){var l=Date.now();c=l-a;e=Math.min(e,c);d=Math.max(d,c);u.textContent=c+" MS ("+e+"-"+d+")";var m=Math.min(30,30-c/200*30);w.appendChild(w.firstChild).style.height=m+"px";k++;l>b+2E3&&(g=Math.round(1E3*k/(l-b)),f=Math.min(f,g),h=Math.max(h,g),p.textContent=g+" FPS ("+f+"-"+h+")",m=Math.min(30,30-g/100*30),q.appendChild(q.firstChild).style.height=
m+"px",b=l,k=0,e=Infinity,d=0);return l},update:function(){a=this.end()}}},MAX_FRAGS_PER_GROUP=333;
function RenderQueue(a,b,c,e){function d(a,b,c){var d=r[a];if(!!(d&b)==c)return!1;r[a]=c?d|b:d&~b;return!0}var g=0,f=-1,h=!0,k=!1,l=0,n=new THREE.Box3,m,p=new THREE.Box3,q=0<e?e:MAX_FRAGS_PER_GROUP;0>=a&&(a=1);var s=Array(a),r=new Uint8Array(a),u=new THREE.Raycaster;this.prototypeScene=b;var w=0,A=!1,v=0,B=1;a=0|(a+q-1)/q;var C=Array(a);for(e=0;e<a;e++)(C[e]=new THREE.Scene(!0)).__lights=b.__lights;this.visibleBoundsDirty=!1;c&&n.copy(c);this.addMesh=function(a,b){var c=s[a];c&&(stderr("duplicate fragment."),
c.parent.remove(c));s[a]=b;b.fragId=a;if(r.length<s.length){c=2*r.length;c<s.length&&(c=s.length);for(var c=new Uint8Array(c),d=0,e=r.length;d<e;d++)c[d]=r[d];r=c}r[a]=1;c=0|a/q;d=C[c];d||(C[c]=d=new THREE.Scene(!0),d.__lights=this.prototypeScene.__lights);p.copy(b.geometry.boundingBox);p.applyMatrix4(b.matrixWorld);n.union(p);d.add(b);this.visibleBoundsDirty=!0};this.renderSome=function(a,b){var c=g,d=C.length,e=r,h=Date.now(),k,l=h,m=!0,n=0==c;n&&!A&&(f=-1,A=!0);for(b*=B;c<d;c++){var p=C[c];k=!1;
n&&0<f?(c==f&&(k=!0),m=!1):m?(0>=b&&(k=!0),m=!1):b<=0.5*p.avgFrameTime&&(k=!0);if(k)break;k=p.children;var q=!0;if(2==w)for(var s=0,u=k.length;s<u;s++){var R=k[s],da=!(e[R.fragId]&1);R.visible=da;q=q&&!da}else if(1==w)for(s=0,u=k.length;s<u;s++)R=k[s],da=!!(e[R.fragId]&2),R.visible=da,q=q&&!da;else for(s=0,u=k.length;s<u;s++)R=k[s],da=1==e[R.fragId],R.visible=da,q=q&&!da;q||a(p);k=Date.now();q=k-h;h=k;p.avgFrameTime=void 0===p.avgFrameTime?q:0.9*p.avgFrameTime+0.1*q;g=c+1;b-=p.avgFrameTime}n&&-1==
f&&(f=c);n&&v&&(B=(h-l)/v,0>=B&&(B=1),1<B&&(B=1));c!=d&&n||(f=-1,A=!1);return b/B};this.isDone=function(){return g==C.length};this.reset=function(a,b){g=0;v=b};this.drawNormalObjectsOnly=function(){w=0};this.drawHighlightedObjectsOnly=function(){w=1};this.drawHiddenObjectsOnly=function(){w=2};this.setOverrideMaterial=function(a){for(var b=0,c=C.length;b<c;b++)C[b].overrideMaterial=a};this.setHightlighted=function(a,b){d(a,2,b)&&(b?l++:l--);this.visibleBoundsDirty=!0};this.setVisibility=function(a,
b){d(a,1,b);this.visibleBoundsDirty=k=!0};this.setAllVisibility=function(a){var b=r,c=0,d=b.length;if(a)for(;c<d;c++)b[c]|=1;else for(;c<d;c++)b[c]&=-2;h=a;k=!1;this.visibleBoundsDirty=!0};this.hideLines=function(a){var b=r,c=0,d=b.length;if(a)for(;c<d;c++)s[c]&&s[c].isLine&&(b[c]|=4);else for(;c<d;c++)s[c]&&s[c].isLine&&(b[c]&=-5);k=!0};this.hasHighlighted=function(){return!!l};this.isFragVisible=function(a){return 1==(r[a]&3)};this.areAllVisible=function(){if(k){h=!0;k=!1;for(var a=r,b=0,c=a.length;b<
c;b++)if(0==(a[b]&1)){h=!1;break}}return h};this.getVisibleBounds=function(a){if(!this.visibleBoundsDirty&&a==m)return n;m=a;var b=r;n.makeEmpty();for(var c=0,d=b.length;c<d;c++){var e=b[c];if(e&1||a&&0==e)if(e=s[c])e.geometry.boundingBox.getTransformedBox(e.matrixWorld,p),n.union(p)}this.visibleBoundsDirty=!1;return n};this.rayIntersect=function(a,b,c){u.set(a,b);a=u.intersectObjects(C,!0);for(var d=b=null,e=0;e<a.length;e++){var f=a[e].object;if(!f.is2d){var g=f.visible;void 0!==f.fragId&&(g=this.isFragVisible(f.fragId));
if(g&&(!c||!a[e].object.material.transparent)){b=a[e].object;d=a[e].point;break}}}return[b,d]};this.getRenderProgress=function(){return g/C.length};this.getVizmesh=function(a){return s[a]};this.getSceneCount=function(){return C.length}}
function RenderContext(){var a,b,c,e,d,g,f,h,k,l,n,m=!1,p,q=null,s=null,r=null,u=null,w=null,A=null,v=0,B,C,N=new Uint8Array(4),G={r:0,g:0,b:0},I=!1,H={antialias:!0,sao:!1,useHdrTarget:!1,haveTwoSided:!1,useSSAA:!1,idbuffer:!1};this.settings=H;this.init=function(a){I=-1!=window.navigator.userAgent.indexOf("Firefox")&&-1!=window.navigator.userAgent.indexOf("Mac OS");b=a;B=b.clientWidth;C=b.clientHeight;this.createRenderer();this.createRenderPasses();this.initPostPipeline(H.sao,H.antialias,!1)};this.createRenderer=
function(){var c=window.devicePixelRatio;c||(c=1);this.screenCaptureRenderer=a=new FireflyWebGLRenderer({canvas:b,antialias:!1,alpha:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!0,stencil:!1,depth:!1,devicePixelRatio:c});a.autoClear=!1;a.sortObjects=!1};this.createRenderPasses=function(){function a(b){b.material.blending=THREE.NoBlending;b.material.depthWrite=!1;b.material.depthTest=!1}var b=NormalsShader;c=new THREE.ShaderMaterial({fragmentShader:b.fragmentShader,vertexShader:b.vertexShader,uniforms:THREE.UniformsUtils.clone(b.uniforms)});
c.blending=THREE.NoBlending;f=new THREE.ShaderPass(SAOShader);a(f);g=new THREE.ShaderPass(SAOBlurShader);a(g);k=new THREE.ShaderPass(SAOMinifyFirstShader);a(k);h=new THREE.ShaderPass(SAOMinifyShader);a(h);l=new THREE.ShaderPass(FXAAShader);a(l);n=new THREE.ShaderPass(BlendShader);a(n);d=new THREE.ShaderPass(BackgroundShader);a(d)};this.beginScene=function(b,c,g){e=c;m=!1;g&&(a.setClearColor(G,0),a.clearTarget(s,!1,!0,!1),d.render(a,s,null));A&&(a.setClearColor(G,0),a.clearTarget(A,!0,!1,!1));H.sao&&
(g&&(a.setClearColor(G,0),a.clearTarget(p,!0,!1,!1)),f.uniforms.cameraNear.value=c.near,f.uniforms.cameraFar.value=c.far,k.uniforms.cameraNear.value=c.near,k.uniforms.cameraInvNearFar.value=1/(c.near-c.far),g=c.projectionMatrix.elements,c.isPerspective?(f.uniforms.projInfo.value.set(-2/(s.width*g[0]),-2/(s.height*g[5]),(1-g[8])/g[0],(1+g[9])/g[5]),f.uniforms.isOrtho.value=0):(f.uniforms.projInfo.value.set(-2/(s.width*g[0]),-2/(s.height*g[5]),(1-g[12])/g[0],(1-g[13])/g[5]),f.uniforms.isOrtho.value=
1),f.uniforms.projScale.value=0.125*s.height*g[5]);this.renderScenePart(b,!1)};this.renderScenePart=function(b,d,f,g){m=!1;this.hasMRT()?(H.sao&&f&&H.idbuffer&&g&&stderr("Incompatible render target combination given to renderScenePart"),H.idbuffer?a.render(b,e,[s,A]):H.sao?a.render(b,e,[s,p]):a.render(b,e,s)):(d&&a.render(b,e,s),H.idbuffer&&g&&a.render(b,e,A),H.sao&&f&&(d=b.overrideMaterial,b.overrideMaterial=c,a.render(b,e,p),b.overrideMaterial=d))};this.clearAllOverlays=function(){a.clearTarget(r,
!0,!1,!1)};this.renderOverlays=function(b){var c=0,d;for(d in b)if(b.hasOwnProperty(d)){var f=b[d],g=f.scene,h=f.camera?f.camera:e;g.children.length&&(c||(c=1,a.setClearColor(G,0),a.clearTarget(r,!0,!1,!1)),f.materialPre&&(g.overrideMaterial=f.materialPre,a.render(g,h,r,!1)),f.materialPost&&(g.overrideMaterial=f.materialPost,a.context.depthFunc(a.context.GREATER),a.render(g,h,r,!1),a.context.depthFunc(a.context.LEQUAL)),g.overrideMaterial=null)}n.uniforms.useOverlay.value=c};this.composeFinalFrame=
function(b){if(!b&&H.sao){if(!m){if(q){b=q[0];k.uniforms.resolution.value.set(1/b.width,1/b.height);k.render(a,b,p);for(var c=1;c<q.length;c++){var d=q[c];h.uniforms.resolution.value.set(1/d.width,1/d.height);h.render(a,d,b);b=d}}f.render(a,w,s);g.uniforms.axis.value.set(1,0);g.render(a,u,w);g.uniforms.axis.value.set(0,1);g.render(a,w,u);m=!0}n.uniforms.useAO.value=1}else n.uniforms.useAO.value=0;H.antialias?(n.render(a,u,s),l.render(a,null,u)):n.render(a,null,s);a.endFrame()};this.setSize=function(b,
c,d){B=b;C=c;a.setSize(b,c);var e=0|b*a.devicePixelRatio,h=0|c*a.devicePixelRatio;H.logicalWidth=b;H.logicalHeight=c;H.deviceWidth=e;H.deviceHeight=h;var k=1/e,m=1/h;b=!1;if(H.useSSAA){if(H.antialias){e*=3/a.devicePixelRatio;h*=3/a.devicePixelRatio;for(b=1;b<e;)b*=2;for(c=1;c<h;)c*=2;e=b;h=c}d=b=!0}if(d||!s||s.width!=e||s.height!=h)stderr("Reallocating render targets."),s=new THREE.WebGLRenderTarget(e,h,{minFilter:b?THREE.LinearMipMapLinearFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBFormat,
type:H.useHdrTarget?THREE.FloatType:THREE.UnsignedByteType,stencilBuffer:!1,generateMipmaps:b}),r=new THREE.WebGLRenderTarget(e,h,{minFilter:THREE.NearestFilter,magFilter:THREE.NearestFilter,format:THREE.RGBAFormat,stencilBuffer:!1}),r.shareDepthFrom=s,w=u=p=null,q=[];if(H.antialias||H.sao)if(d||!u||u.width!=e||u.height!=h)u=new THREE.WebGLRenderTarget(e,h,{minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBAFormat,stencilBuffer:!1,depthBuffer:!1});if(H.sao){if(d||!p||p.width!=
e||p.height!=h){p=new THREE.WebGLRenderTarget(e,h,{minFilter:THREE.NearestFilter,magFilter:THREE.NearestFilter,format:THREE.RGBFormat,type:THREE.FloatType,stencilBuffer:!1});p.shareDepthFrom=s;q=[];for(c=0;5>c;c++){var v=new THREE.WebGLRenderTarget(0|e/(2<<c),0|h/(2<<c),{minFilter:THREE.NearestFilter,magFilter:THREE.NearestFilter,format:THREE.RGBAFormat,depthBuffer:!1,stencilBuffer:!1});v.generateMipmaps=!1;q.push(v);f.uniforms["tDepth_mip"+(c+1)].value=v}a.verifyMRTWorks([s,p]);w=u.clone()}A=null;
f.uniforms.size.value.set(e,h);f.uniforms.tDepth.value=p;g.uniforms.size.value.set(e,h);g.uniforms.resolution.value.set(k,m)}!H.idbuffer||!d&&A&&A.width==e&&A.height==h||(A=new THREE.WebGLRenderTarget(e,h,{minFilter:THREE.NearestFilter,magFilter:THREE.NearestFilter,format:THREE.RGBFormat,type:THREE.UnsignedByteType,stencilBuffer:!1,generateMipmaps:b}),A.shareDepthFrom=s,a.verifyMRTWorks([s,A]),q=p=null);l.uniforms.resolution.value.set(k,m);n.uniforms.tOverlay.value=r;n.uniforms.tAO.value=w;n.uniforms.useAO.value=
H.sao?1:0;n.uniforms.resolution.value.set(k,m);n.uniforms.tID.value=A};this.getMaxAnisotropy=function(){return a.getMaxAnisotropy()};this.hasMRT=function(){return!I&&a.supportsMRT()};this.initPostPipeline=function(a,b,e){H.sao=a&&!_isIE11;H.antialias=b&&!_isIE11;if(H.idbuffer=e)H.sao=!1;H.haveTwoSided&&(c.side=THREE.DoubleSide);c.needsUpdate=!0;f.material.needsUpdate=!0;g.material.needsUpdate=!0;k.material.needsUpdate=!0;h.material.needsUpdate=!0;l.material.needsUpdate=!0;n.material.needsUpdate=!0;
d.material.needsUpdate=!0;this.setSize(B,C)};this.setClearColors=function(a,b){d.uniforms.color2.value.copy(a);b?d.uniforms.color1.value.copy(b):d.uniforms.color1.value.set(0,0,0,1)};this.setAOOptions=function(a,b){void 0!==a&&(f.uniforms.radius.value=a);void 0!==b&&(f.uniforms.intensity.value=b);m=!1};this.getAORadius=function(){return f.uniforms.radius.value};this.getAOIntensity=function(){return f.uniforms.intensity.value};this.setExposureBias=function(a,b){v=a;n.uniforms.exposureBias.value=Math.pow(2,
a);d.uniforms.luminance.value=Math.pow(2,-a)};this.getExposureBias=function(){return v};this.setTonemapMethod=function(b){0==b?(H.useHdrTarget&&(H.useHdrTarget=!1,this.setSize(B,C,!0)),a.gammaInput=!1):(H.useHdrTarget||(H.useHdrTarget=!0,this.setSize(B,C,!0)),a.gammaInput=!0);n.uniforms.toneMapMethod.value=b;d.uniforms.linearize.value=0==b?0:1};this.getToneMapMethod=function(){return n.uniforms.toneMapMethod.value};this.toggleTwoSided=function(a){H.haveTwoSided!=a&&c&&(c.side=a?THREE.DoubleSide:THREE.FrontSide,
c.needsUpdate=!0);H.haveTwoSided=a};this.enter2DMode=function(a){};this.idAtPixel=function(b,c){if(!A)return 0;a.readPixels(A,0.5*(b+1)*A.width,0.5*(c+1)*A.height,1,1,N);return N[2]<<16|N[1]<<8|N[0]};this.rolloverObjectViewport=function(a,b){var c=this.idAtPixel(a,b);0==c&&(N[0]=N[1]=N[2]=N[3]=0);n.uniforms.objID.value=c;n.uniforms.objIDv3.value.set(N[0]/255,N[1]/255,N[2]/255)}}
FXAAShader={uniforms:{tDiffuse:{type:"t",value:null},resolution:{type:"v2",value:new THREE.Vector2(1/1024,1/512)}},vertexShader:"varying vec2 vUv;\nvoid main() {\nvUv = uv;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D tDiffuse;\nuniform vec2 resolution;\nvarying vec2 vUv;\n#define FXAA_SPAN_MAX     8.0\n#define FXAA_EDGE_THRESHOLD_MIN (1.0/24.0)\n#define FXAA_EDGE_THRESHOLD (1.0/8.0)\n#define FXAA_SEARCH_THRESHOLD (1.0/4.0)\n#define FXAA_SEARCH_STEPS 24\n#define FXAA_SUBPIX_TRIM (1.0/4.0)\n#define FXAA_SUBPIX_TRIM_SCALE (1.0/(1.0 - FXAA_SUBPIX_TRIM))\n#define FXAA_SUBPIX_CAP (3.0/4.0)\nvec4 getColor(sampler2D tex, vec2 uv) {\nvec4 c = texture2D(tex, uv);\nreturn c;\n}\nfloat FxaaLuma(vec3 rgb) {\nreturn rgb.y * (0.587/0.299) + rgb.x; }\nvec4 FxaaFilterReturn(vec4 rgba) {\nreturn rgba;}\nvec3 FxaaLerp3(vec3 a, vec3 b, float amountOfA) {\nreturn (vec3(-amountOfA) * b) +\n((a * vec3(amountOfA)) + b); }\nvec4 FxaaTex(sampler2D tex, vec2 pos) {\nreturn getColor(tex, pos.xy);}\nvec4 FxaaTexOff(sampler2D tex, vec2 pos, vec2 offset, vec2 resolution) {\nvec2 uv = pos.xy + offset * resolution;\nreturn getColor(tex, uv);}\nvoid main() {\nvec3 rgbN = FxaaTexOff( tDiffuse, vUv, vec2(0.0,-1.0), resolution ).xyz;\nvec3 rgbE = FxaaTexOff( tDiffuse, vUv, vec2(1.0, 0.0), resolution ).xyz;\nvec3 rgbW = FxaaTexOff( tDiffuse, vUv, vec2(-1.0,0.0), resolution ).xyz;\nvec3 rgbS = FxaaTexOff( tDiffuse, vUv, vec2(0.0, 1.0), resolution ).xyz;\nvec4 rgbaM = FxaaTex( tDiffuse, vUv);\nvec3 rgbM  = rgbaM.xyz;\nfloat lumaN = FxaaLuma(rgbN);\nfloat lumaE = FxaaLuma(rgbE);\nfloat lumaW = FxaaLuma(rgbW);\nfloat lumaS = FxaaLuma(rgbS);\nfloat lumaM = FxaaLuma(rgbM);\nfloat rangeMin = min(lumaM, min(min(lumaN, lumaW), min(lumaS, lumaE)));\nfloat rangeMax = max(lumaM, max(max(lumaN, lumaW), max(lumaS, lumaE)));\nfloat range = rangeMax - rangeMin;\nif(range < max(FXAA_EDGE_THRESHOLD_MIN, rangeMax * FXAA_EDGE_THRESHOLD)) {\ngl_FragColor = FxaaFilterReturn(rgbaM); return;}\nvec3 rgbL = rgbN + rgbW + rgbM + rgbE + rgbS;\nfloat lumaL = (lumaN + lumaW + lumaE + lumaS) * 0.25;\nfloat rangeL = abs(lumaL - lumaM);\nfloat blendL = max(0.0, (rangeL / range) - FXAA_SUBPIX_TRIM) * FXAA_SUBPIX_TRIM_SCALE;\nblendL = min(FXAA_SUBPIX_CAP, blendL);\nvec3 rgbNW = FxaaTexOff( tDiffuse, vUv, vec2(-1.0,-1.0), resolution ).xyz;\nvec3 rgbNE = FxaaTexOff( tDiffuse, vUv, vec2(1.0,-1.0), resolution ).xyz;\nvec3 rgbSW = FxaaTexOff( tDiffuse, vUv, vec2(-1.0,1.0), resolution ).xyz;\nvec3 rgbSE = FxaaTexOff( tDiffuse, vUv, vec2(1.0,1.0), resolution ).xyz;\nfloat opacity  = rgbaM.w;\nrgbL += (rgbNW + rgbNE + rgbSW + rgbSE);\nrgbL *= vec3(1.0/9.0);\nfloat lumaNW = FxaaLuma( rgbNW);\nfloat lumaNE = FxaaLuma( rgbNE);\nfloat lumaSW = FxaaLuma( rgbSW);\nfloat lumaSE = FxaaLuma( rgbSE);\nfloat edgeVert = abs((0.25 * lumaNW) + (-0.5 * lumaN) + (0.25 * lumaNE)) +\nabs((0.50 * lumaW ) + (-1.0 * lumaM) + (0.50 * lumaE )) +\nabs((0.25 * lumaSW) + (-0.5 * lumaS) + (0.25 * lumaSE));\nfloat edgeHorz = abs((0.25 * lumaNW) + (-0.5 * lumaW) + (0.25 * lumaSW)) +\nabs((0.50 * lumaN ) + (-1.0 * lumaM) + (0.50 * lumaS )) +\nabs((0.25 * lumaNE) + (-0.5 * lumaE) + (0.25 * lumaSE));\nbool horzSpan = edgeHorz >= edgeVert;\nfloat lengthSign = horzSpan ? -resolution.y : -resolution.x;\nif(!horzSpan) lumaN = lumaW;\nif(!horzSpan) lumaS = lumaE;\nfloat gradientN = abs(lumaN - lumaM);\nfloat gradientS = abs(lumaS - lumaM);\nlumaN = (lumaN + lumaM) * 0.5;\nlumaS = (lumaS + lumaM) * 0.5;\nbool pairN = gradientN >= gradientS;\nif(!pairN) lumaN = lumaS;\nif(!pairN) gradientN = gradientS;\nif(!pairN) lengthSign *= -1.0;\nvec2 posN;\nposN.x = vUv.x + (horzSpan ? 0.0 : lengthSign * 0.5);\nposN.y = vUv.y + (horzSpan ? lengthSign * 0.5 : 0.0);\ngradientN *= FXAA_SEARCH_THRESHOLD;\nvec2 posP = posN;\nvec2 offNP = horzSpan ? vec2(resolution.x, 0.0) : vec2(0.0, resolution.y);\nfloat lumaEndN = lumaN;\nfloat lumaEndP = lumaN;\nbool doneN = false;\nbool doneP = false;\nposN += offNP * vec2(-1.0, -1.0);\nposP += offNP * vec2( 1.0,  1.0);\nfor(int i = 0; i < FXAA_SEARCH_STEPS; i++) {\nif(!doneN) lumaEndN = FxaaLuma(FxaaTex( tDiffuse, posN.xy).xyz);\nif(!doneP) lumaEndP = FxaaLuma(FxaaTex( tDiffuse, posP.xy).xyz);\ndoneN = doneN || (abs(lumaEndN - lumaN) >= gradientN);\ndoneP = doneP || (abs(lumaEndP - lumaN) >= gradientN);\nif(doneN && doneP) break;\nif(!doneN) posN -= offNP;\nif(!doneP) posP += offNP; }\nfloat dstN = horzSpan ? vUv.x - posN.x : vUv.y - posN.y;\nfloat dstP = horzSpan ? posP.x - vUv.x : posP.y - vUv.y;\nbool directionN = dstN < dstP;\nlumaEndN = directionN ? lumaEndN : lumaEndP;\nif(((lumaM - lumaN) < 0.0) == ((lumaEndN - lumaN) < 0.0))\nlengthSign = 0.0;\nfloat spanLength = (dstP + dstN);\ndstN = directionN ? dstN : dstP;\nfloat subPixelOffset = (0.5 + (dstN * (-1.0/spanLength))) * lengthSign;\nvec3 rgbF = FxaaTex(tDiffuse, vec2(\nvUv.x + (horzSpan ? 0.0 : subPixelOffset),\nvUv.y + (horzSpan ? subPixelOffset : 0.0))).xyz;\ngl_FragColor = FxaaFilterReturn(vec4(FxaaLerp3(rgbL, rgbF, blendL), opacity));\n}"};
TonemapShaderChunk="float luminance_post(vec3 rgb) {\nreturn dot(rgb, vec3(0.299, 0.587, 0.114));\n}\nfloat luminance_pre(vec3 rgb) {\nreturn dot(rgb, vec3(0.212671, 0.715160, 0.072169));\n}\nconst float Shift = 1.0 / 0.18;\nfloat toneMapCanonFilmic_NoGamma(float x) {\nx *= Shift;\nconst float A = 0.2;\nconst float B = 0.34;\nconst float C = 0.002;\nconst float D = 1.68;\nconst float E = 0.0005;\nconst float F = 0.252;\nconst float scale = 1.0/0.833837;\nreturn (((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F) * scale;\n}\nvec3 toneMapCanonFilmic_WithGamma(vec3 x) {\nx *= Shift;\nconst float A = 0.27;\nconst float B = 0.29;\nconst float C = 0.052;\nconst float D = 0.2;\nconst float F = 0.18;\nconst float scale = 1.0/0.897105;\nreturn (((x*(A*x+C*B))/(x*(A*x+B)+D*F))) * scale;\n}";
BlendShader={uniforms:{tDiffuse:{type:"t",value:null},tAO:{type:"t",value:null},useAO:{type:"i",value:0},tOverlay:{type:"t",value:null},useOverlay:{type:"i",value:0},tID:{type:"t",value:null},objID:{type:"i",value:0},objIDv3:{type:"v3",value:new THREE.Vector3(0,0,0)},resolution:{type:"v2",value:new THREE.Vector2(1/1024,1/512)},exposureBias:{type:"f",value:1},toneMapMethod:{type:"i",value:0}},vertexShader:"varying vec2 vUv;\nvoid main() {\nvUv = uv;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",
fragmentShader:["uniform sampler2D tDiffuse;\nuniform sampler2D tAO;\nuniform int useAO;\nuniform sampler2D tOverlay;\nuniform int useOverlay;\nuniform vec2 resolution;\nuniform float exposureBias;\nuniform int toneMapMethod;\nuniform int objID;\nuniform vec3 objIDv3;\nuniform sampler2D tID;\nvarying vec2 vUv;",TonemapShaderChunk,"vec4 fetchOverlayTexel(vec2 uv, vec2 offset) {\nreturn texture2D(tOverlay, uv + resolution * offset);\n}\nvec4 overlayEdgeDetect(vec2 vUv) {\nint has_zero = 0;\nvec4 center;\nvec4 non_zero_pixel;\nfloat max_alpha = 0.0;\nfor (int j=-1; j<=1; j++) {\nfor (int i=-1; i<=1; i++) {\nvec4 c = fetchOverlayTexel(vUv, vec2(i, j));\nmax_alpha = max(max_alpha, c.a);\nif (i==0 && j==0)\ncenter = c;\nif (c.a == 0.0)\nhas_zero++;\nelse\nnon_zero_pixel = c;\n}\n}\nif (has_zero != 0 && has_zero != 9)\n{\nif (center == vec4(0.0))\ncenter = non_zero_pixel;\nfloat maxComponent = max(center.r, max(center.g, center.b));\ncenter.rgb /= maxComponent;\ncenter.rgb = sqrt(center.rgb);\ncenter.a = 0.5 + 0.5 * max_alpha * 0.125 * float(has_zero);\n}\nif (has_zero == 0) {\ncenter.a = -center.a;\n}\nreturn center;\n}\nvoid main() {\nvec4 texel = texture2D( tDiffuse, vUv );\nfloat ao = (useAO != 0) ? texture2D(tAO, vUv).r : 1.0;\ntexel.rgb *= ao;\nif (toneMapMethod == 1) {\nvec3 rgb = texel.rgb * exposureBias;\ntexel.rgb = toneMapCanonFilmic_WithGamma(rgb);\n} else if (toneMapMethod == 2) {\nvec3 rgb = texel.rgb * exposureBias;\nfloat lum = luminance_pre(rgb);\nfloat lum2 = toneMapCanonFilmic_NoGamma(lum);\nrgb *= lum2 / lum;\ntexel.rgb = rgb;\ntexel.rgb = pow(texel.rgb, vec3(1.0/2.2));\n}\nif (useOverlay!=0) {\nvec4 overlay = overlayEdgeDetect(vUv);\nif (overlay.a < 0.0) {\noverlay.a = -overlay.a;\nif (overlay.a >= 0.99) {\noverlay.a = 0.75;\ntexel.rgb = vec3(luminance_post(texel.rgb));\n}\n}\ntexel.rgb = mix(texel.rgb, sqrt(overlay.rgb)/*sqrt=gamma*/, overlay.a);\n}\nif (objID != 0) {\nvec4 idAtPixel = texture2D(tID, vUv);\nvec3 idDelta = abs(idAtPixel.rgb - objIDv3.rgb);\nif (max(max(idDelta.r, idDelta.g), idDelta.b) < 1e-3) {\ntexel.rgb = mix(texel.rgb, vec3(1.0,1.0,0.0), 0.25);\n}\n}\ngl_FragColor = texel;\n}"].join("\n")};
THREE.ShaderPass=function(a,b){this.textureID=void 0!==b?b:"tDiffuse";this.uniforms=THREE.UniformsUtils.clone(a.uniforms);this.material=new THREE.ShaderMaterial({uniforms:this.uniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader});this.renderToScreen=!1;this.enabled=!0;this.clear=!1;this.camera=new THREE.OrthographicCamera(-1,1,1,-1,0,1);var c=new THREE.BufferGeometry,e=new Float32Array(9);e[0]=-1;e[1]=-1;e[2]=0;e[3]=3;e[4]=-1;e[5]=0;e[6]=-1;e[7]=3;e[8]=0;var d=new Float32Array(6);
d[0]=0;d[1]=0;d[2]=2;d[3]=0;d[4]=0;d[5]=2;c.attributes.position={itemSize:3,array:e};c.attributes.uv={itemSize:2,array:d};this.quad=new THREE.Mesh(c,this.material);this.scene=new THREE.Scene;this.scene.add(this.quad)};THREE.ShaderPass.prototype={render:function(a,b,c,e){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=c);this.renderToScreen||!b?a.render(this.scene,this.camera):a.render(this.scene,this.camera,b,this.clear)}};
SAOShader={uniforms:{tDepth:{type:"t",value:null},size:{type:"v2",value:new THREE.Vector2(512,512)},cameraNear:{type:"f",value:1},cameraFar:{type:"f",value:100},radius:{type:"f",value:10},bias:{type:"f",value:0.01},projScale:{type:"f",value:500},projInfo:{type:"v4",value:new THREE.Vector4(0,0,0,0)},intensity:{type:"f",value:0.75},isOrtho:{type:"f",value:1},tDepth_mip1:{type:"t",value:null},tDepth_mip2:{type:"t",value:null},tDepth_mip3:{type:"t",value:null},tDepth_mip4:{type:"t",value:null},tDepth_mip5:{type:"t",
value:null}},vertexShader:"varying vec2 vUv;\nvoid main() {\nvUv = uv;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"#extension GL_OES_standard_derivatives : enable\n#define USE_MIPMAP 1\nuniform float cameraNear;\nuniform float cameraFar;\nuniform vec2 size;\nuniform float lumInfluence;\nvarying vec2 vUv;\n#define NUM_SAMPLES (17)\n#define LOG_MAX_OFFSET (3)\n#define MAX_MIP_LEVEL (5)\n#define NUM_SPIRAL_TURNS (7)\nuniform float           projScale;\nuniform sampler2D tDepth;\n#ifdef USE_MIPMAP\nuniform sampler2D tDepth_mip1;\nuniform sampler2D tDepth_mip2;\nuniform sampler2D tDepth_mip3;\nuniform sampler2D tDepth_mip4;\nuniform sampler2D tDepth_mip5;\n#endif\nuniform float radius;\nuniform float bias;\nuniform float intensity;\nuniform float isOrtho;\nfloat intensityDivR6 = intensity / pow(radius, 6.0);\nvec2 tapLocation(int sampleNumber, float spinAngle, out float ssR){\nfloat alpha = float(float(sampleNumber) + 0.5) * (1.0 / float(NUM_SAMPLES));\nfloat angle = alpha * (float(NUM_SPIRAL_TURNS) * 6.28) + spinAngle;\nssR = alpha;\nreturn vec2(cos(angle), sin(angle));\n}\nfloat CSZToKey(float z) {\nreturn clamp(z * (1.0 / -cameraFar), 0.0, 1.0);\n}\nvoid packKey(float key, out vec2 p) {\nfloat temp = floor(key * 256.0);\np.x = temp * (1.0 / 256.0);\np.y = key * 256.0 - temp;\n}\nfloat unpackDepth( const in vec4 rgba_depth ) {\nfloat depth = dot( rgba_depth, vec4(1.0, 1.0/255.0, 1.0/65025.0, 1.0/160581375.0) );\nif (depth == 0.0)\nreturn -cameraFar * 1.0e10;\nreturn depth * (cameraNear - cameraFar) - cameraNear;\n}\nuniform vec4 projInfo;\nvec3 reconstructCSPosition(vec2 S, float z) {\nreturn vec3((S.xy * projInfo.xy + projInfo.zw) * mix(z, -1.0, isOrtho), z);\n}\nvec3 reconstructCSFaceNormal(vec3 C) {\nreturn normalize(cross(dFdy(C), dFdx(C)));\n}\nvec3 reconstructNonUnitCSFaceNormal(vec3 C) {\nreturn cross(dFdy(C), dFdx(C));\n}\nvec2 sizeM1 = vec2(1.0/(size.x), 1.0/(size.y));\nvec3 getPosition(ivec2 ssP, float depth) {\nvec3 P;\nP = reconstructCSPosition(vec2(ssP) + vec2(0.5), depth);\nreturn P;\n}\nvec3 getOffsetPosition(ivec2 ssC, vec2 unitOffset, float ssR) {\nivec2 ssP = ivec2(ssR * unitOffset) + ssC;\nvec3 P;\nvec2 screenUV = (vec2(ssP) + vec2(0.5)) * sizeM1;\n#ifdef USE_MIPMAP\nint mipLevel = int(max(0.0, min(floor(log2(ssR)) - float(LOG_MAX_OFFSET), float(MAX_MIP_LEVEL))));\nif (mipLevel == 0) {\nP.z = texture2D(tDepth, screenUV).z;\nif (P.z == 0.0) P.z = -cameraFar * 1.0e10;\n}\nelse if (mipLevel == 1)\nP.z = unpackDepth(texture2D(tDepth_mip1, screenUV));\nelse if (mipLevel == 2)\nP.z = unpackDepth(texture2D(tDepth_mip2, screenUV));\nelse if (mipLevel == 3)\nP.z = unpackDepth(texture2D(tDepth_mip3, screenUV));\nelse if (mipLevel == 4)\nP.z = unpackDepth(texture2D(tDepth_mip4, screenUV));\nelse if (mipLevel == 5)\nP.z = unpackDepth(texture2D(tDepth_mip5, screenUV));\n#else\nP.z = texture2D(tDepth, screenUV).z;\nif (P.z == 0.0) P.z = -cameraFar * 1.0e10;\n#endif\nP = reconstructCSPosition(vec2(ssP) + vec2(0.5), P.z);\nreturn P;\n}\nfloat radius2 = radius * radius;\nfloat invRadius2 = 1.0 / radius2;\nfloat sampleAO(in ivec2 ssC, in vec3 C, in vec3 n_C, in float ssDiskRadius, in int tapIndex, in float randomPatternRotationAngle) {\nfloat ssR;\nvec2 unitOffset = tapLocation(tapIndex, randomPatternRotationAngle, ssR);\nssR *= ssDiskRadius;\nvec3 Q = getOffsetPosition(ssC, unitOffset, ssR);\nvec3 v = Q - C;\nfloat vv = dot(v, v);\nfloat vn = dot(v, n_C);\nconst float epsilon = 0.01;\nfloat f = max(radius2 - vv, 0.0); return f * f * f * max((vn - bias) / (epsilon + vv), 0.0);\n}\nconst bool useNoise = true;\nvec2 rand( const vec2 coord ) {\nvec2 noise;\nif ( useNoise ) {\nfloat nx = dot ( coord, vec2( 12.9898, 78.233 ) );\nfloat ny = dot ( coord, vec2( 12.9898, 78.233 ) * 2.0 );\nnoise = clamp( fract ( 43758.5453 * sin( vec2( nx, ny ) ) ), 0.0, 1.0 );\n} else {\nfloat ff = fract( 1.0 - coord.s * ( size.x / 2.0 ) );\nfloat gg = fract( coord.t * ( size.y / 2.0 ) );\nnoise = vec2( 0.25, 0.75 ) * vec2( ff ) + vec2( 0.75, 0.25 ) * gg;\n}\nreturn ( noise * 2.0  - 1.0 );\n}\nfloat getRandomAngle(vec2 pos) {\nvec2 rnd = rand(pos);\nreturn atan(rnd.y, rnd.x);\n}\nvoid main() {\nivec2 ssC = ivec2(gl_FragCoord.xy);\nvec4 nrmz = texture2D(tDepth, vUv);\nif (nrmz.z == 0.0) {\ngl_FragColor.r = 1.0;\ngl_FragColor.a = 0.0;\npackKey(1.0, gl_FragColor.gb);\nreturn;\n}\nvec3 C = getPosition(ssC, nrmz.z);\npackKey(CSZToKey(C.z), gl_FragColor.gb);\nfloat randomPatternRotationAngle = getRandomAngle(vUv);\nvec3 n_C = vec3(nrmz.x, nrmz.y, sqrt(1.0 - dot(nrmz.xy, nrmz.xy)));\nfloat ssDiskRadius = -projScale * radius / mix(C.z, -1.0, isOrtho);\nfloat sum = 0.0;\nfor (int i = 0; i < NUM_SAMPLES; ++i) {\nsum += sampleAO(ssC, C, n_C, ssDiskRadius, i, randomPatternRotationAngle);\n}\nfloat A = max(0.0, 1.0 - sum * intensityDivR6 * (5.0 / float(NUM_SAMPLES)));\nif (abs(dFdx(C.z)) < 0.02) {\nA -= dFdx(A) * (mod(float(ssC.x), 2.0) - 0.5);\n}\nif (abs(dFdy(C.z)) < 0.02) {\nA -= dFdy(A) * (mod(float(ssC.y), 2.0) - 0.5);\n}\ngl_FragColor.r = A;\ngl_FragColor.a = 1.0;\n}"};
SAOBlurShader={uniforms:{tDiffuse:{type:"t",value:null},size:{type:"v2",value:new THREE.Vector2(512,512)},resolution:{type:"v2",value:new THREE.Vector2(1/512,1/512)},axis:{type:"v2",value:new THREE.Vector2(1,0)}},vertexShader:"varying vec2 vUv;\nvoid main() {\nvUv = uv;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"#define EDGE_SHARPNESS     (1.0)\n#define SCALE               (2)\n#define R                   (4)\n#define VALUE_TYPE        float\n#define VALUE_COMPONENTS   r\n#define VALUE_IS_KEY       0\n#define KEY_COMPONENTS     gb\n#if __VERSION__ >= 330\nconst float gaussian[R + 1] =\nfloat[](0.153170, 0.144893, 0.122649, 0.092902, 0.062970);  // stddev = 2.0\n#endif\nuniform sampler2D   tDiffuse;\nuniform vec2 size;\nuniform vec2 resolution;\nuniform vec2       axis;\nivec2 axisi = ivec2(axis);\n#define  result         gl_FragColor.VALUE_COMPONENTS\n#define  keyPassThrough gl_FragColor.KEY_COMPONENTS\nfloat unpackKey(vec2 p) {\nreturn p.x * (256.0 / 257.0) + p.y * (1.0 / 257.0);\n}\nvarying vec2 vUv;\nvoid main() {\n#   if __VERSION__ < 330\nfloat gaussian[R + 1];\n#       if R == 3\ngaussian[0] = 0.153170; gaussian[1] = 0.144893; gaussian[2] = 0.122649; gaussian[3] = 0.092902;  // stddev = 2.0\n#       elif R == 4\ngaussian[0] = 0.153170; gaussian[1] = 0.144893; gaussian[2] = 0.122649; gaussian[3] = 0.092902; gaussian[4] = 0.062970;  // stddev = 2.0\n#       elif R == 6\ngaussian[0] = 0.111220; gaussian[1] = 0.107798; gaussian[2] = 0.098151; gaussian[3] = 0.083953; gaussian[4] = 0.067458; gaussian[5] = 0.050920; gaussian[6] = 0.036108;\n#       endif\n#   endif\nivec2 ssC = ivec2(gl_FragCoord.xy);\nvec4 temp = texture2D(tDiffuse, vUv);\ngl_FragColor.gb = temp.KEY_COMPONENTS;\ngl_FragColor.a = temp.a;\nVALUE_TYPE sum = temp.VALUE_COMPONENTS;\nif (temp.a == 0.0) {\nresult = sum;\nreturn;\n}\nfloat key = unpackKey(keyPassThrough);\nfloat BASE = gaussian[0];\nfloat totalWeight = BASE;\nsum *= totalWeight;\nfor (int r = -R; r <= R; ++r) {\nif (r != 0) {\nvec2 ssUV = vec2(ssC + axisi * (r * SCALE))*resolution;\ntemp = texture2D(tDiffuse, ssUV);\nfloat      tapKey = unpackKey(temp.KEY_COMPONENTS);\nVALUE_TYPE value  = temp.VALUE_COMPONENTS;\nfloat weight = 0.3 + gaussian[r<0?-r:r];\nfloat dz = tapKey - key;\nweight *= max(0.0, 1.0 - (EDGE_SHARPNESS * 2000.0) * abs(dz));\nsum += value * weight;\ntotalWeight += weight;\n}\n}\nconst float epsilon = 0.0001;\nresult = sum / (totalWeight + epsilon);\n}"};
SAOMinifyFirstShader={uniforms:{tDiffuse:{type:"t",value:null},cameraNear:{type:"f",value:1},cameraInvNearFar:{type:"f",value:100},resolution:{type:"v2",value:new THREE.Vector2(1/512,1/512)}},vertexShader:"varying vec2 vUv;\nvoid main() {\nvUv = uv;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D tDiffuse;\nuniform vec2 resolution;\nuniform float cameraNear;\nuniform float cameraInvNearFar;\nvarying vec2 vUv;\nvec4 packDepth( const in float depth ) {\nvec4 enc = vec4(1.0, 255.0, 65025.0, 160581375.0) * depth;\nenc = fract(enc);\nenc -= enc.yzww * vec4(1.0/255.0,1.0/255.0,1.0/255.0,0.0);\nreturn enc;\n}\nvoid main() {\nvec2 ssP = vec2(gl_FragCoord.xy);\nssP = ssP * 2.0 + mod(ssP, 2.0);\nssP = (ssP + 0.5) * resolution * 0.5;\nfloat depth = texture2D(tDiffuse, ssP).z;\nif (depth != 0.0)\ndepth = (depth + cameraNear) * cameraInvNearFar;\ngl_FragColor = packDepth(depth);\n}"};
SAOMinifyShader={uniforms:{tDiffuse:{type:"t",value:null},resolution:{type:"v2",value:new THREE.Vector2(1/512,1/512)}},vertexShader:"varying vec2 vUv;\nvoid main() {\nvUv = uv;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D tDiffuse;\nuniform vec2 resolution;\nvarying vec2 vUv;\nvoid main() {\nvec2 ssP = vec2(gl_FragCoord.xy);\nssP = ssP * 2.0 + mod(ssP, 2.0);\nssP = (ssP + 0.5) * resolution * 0.5;\ngl_FragColor = texture2D(tDiffuse, ssP);\n}"};
NormalsShader={uniforms:{},vertexShader:"varying vec3 vNormal;\nvarying float depth;\nvoid main() {\nvNormal = normalize( normalMatrix * normal );\nvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\ndepth = mvPosition.z;\nvec4 p_Position = projectionMatrix * mvPosition;\ngl_Position = p_Position;\n}",fragmentShader:"varying vec3 vNormal;\nvarying float depth;\nvoid main() {\nvec3 n = vNormal;\nn = n * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\nn = normalize( n );\ngl_FragColor = vec4(n.x, n.y, depth, 1.0);\n}"};
BackgroundShader={uniforms:{color1:{type:"v4",value:new THREE.Vector4(1/255,2/255,3/255,1)},color2:{type:"v4",value:new THREE.Vector4(41/255,76/255,120/255,1)},luminance:{type:"f",value:1},linearize:{type:"i",value:1}},vertexShader:"uniform vec4 color1;\nuniform vec4 color2;\nuniform float luminance;\nuniform int linearize;\nvarying vec4 vcolor;\nvoid main() {\nif (uv.y == 0.0)\nvcolor = color1;\nelse\nvcolor = color2;\nif (linearize != 0)\nvcolor *= vcolor;\nvcolor *= luminance;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",
fragmentShader:"const vec4 c0 = vec4(1.0, 13.0, 4.0, 16.0);\nconst vec4 c1 = vec4(9.0, 5.0, 12.0, 8.0);\nconst vec4 c2 = vec4(3.0, 15.0, 2.0, 14.0);\nconst vec4 c3 = vec4(11.0, 7.0, 10.0, 6.0);\nvarying vec4 vcolor;\nvoid main() {\nvec4 c = vcolor;\nint i = int(mod(float(gl_FragCoord.x), 4.0));\nint j = int(mod(float(gl_FragCoord.y), 4.0));\nvec4 col;\nif (i==0) col = c0; else if (i==1) col = c1; else if (i==2) col = c2; else col = c3;\nfloat bias;\nif (j==0) bias = col.x; else if (j==1) bias = col.y; else if (j==2) bias = col.z; else bias = col.w;\nc.xyz += bias * (1.0/(17.0*256.0));\ngl_FragColor = c;\n}"};
LineShader={uniforms:{pixelsPerUnit:{type:"f",value:1},unitsPerPixel:{type:"f",value:1},tLayerMask:{type:"t",value:null},tRaster:{type:"t",value:null},tSelectionTexture:{type:"t",value:null},vSelTexSize:{type:"v2",value:new THREE.Vector2(4096,1)},mvpMatrix:{type:"m4",value:new THREE.Matrix4}},attributes:{fields1:0,fields2:0,color4b:0,dbId4b:0,flags4b:0,extraParams:0,instFlags4b:0},defines:{},vertexShader:"#define TAU 6.28318530718\n#define PI 3.14159265358979\n#define HALF_PI 1.57079632679\n#define VBB_LINE_SEGMENT     16.0\n#define VBB_ARC_CIRCULAR     32.0\n#define VBB_ARC_ELLIPTICAL   48.0\n#define VBB_TEX_QUAD         64.0\n#define VBB_ONE_TRIANGLE     80.0\n#define VBB_INSTANCED_FLAG   0.0\n#define VBB_SEG_START_RIGHT  1.0\n#define VBB_SEG_START_LEFT   2.0\n#define VBB_SEG_END_RIGHT    3.0\n#define VBB_SEG_END_LEFT     4.0\nattribute vec3 fields1;\nattribute vec3 fields2;\nattribute vec4 color4b;\nattribute vec4 dbId4b;\nattribute vec4 flags4b;\n#ifdef HAS_ELLIPTICALS\nattribute vec3 extraParams;\n#endif\nattribute vec4 instFlags4b;\nuniform mat4 mvpMatrix;\nuniform float pixelsPerUnit;\nuniform float unitsPerPixel;\nuniform sampler2D tLayerMask;\n#ifdef SELECTION_RENDERER\nuniform sampler2D tSelectionTexture;\nuniform vec2 vSelTexSize;\n#endif\nvarying vec4 outColor;\nvarying vec4 dbId;\nvarying vec2 centralVertex;\nvarying vec2 offsetPosition;\nvarying vec4 multipurpose;\nvarying float halfWidth;\nvoid strokeLineSegment(float vertexId) {\nfloat distanceAlong = fields2.x;\nfloat isStartCapVertex = (vertexId < VBB_SEG_END_RIGHT) ? -1.0 : 1.0;\nfloat isLeftSide = (vertexId == VBB_SEG_END_LEFT || vertexId == VBB_SEG_START_LEFT) ? 1.0 : -1.0;\nfloat angleTransverse = fields1.z + isLeftSide * HALF_PI;\nfloat st = sin(angleTransverse);\nfloat ct = cos(angleTransverse);\nfloat lwAdjustment = halfWidth + 0.5 * unitsPerPixel;\nvec2 transverseOffset = vec2(ct, st) * lwAdjustment;\noffsetPosition.xy += transverseOffset;\nvec2 moveOffset = isStartCapVertex * isLeftSide * vec2(-transverseOffset.y, transverseOffset.x);\noffsetPosition.xy -= moveOffset;\ncentralVertex.xy -= moveOffset;\nfloat distanceFromStart = max(isStartCapVertex, 0.0) * distanceAlong;\nvec2 along = distanceFromStart * vec2(cos(fields1.z), sin(fields1.z));\noffsetPosition.xy += along;\ncentralVertex.xy += along;\nmultipurpose.x = (isStartCapVertex * lwAdjustment) + distanceFromStart;\nmultipurpose.y = distanceAlong;\nmultipurpose.z = 0.0;\n}\n#ifdef HAS_TRIANGLE_GEOMS\nvoid strokeOneTriangle(float vertexId) {\nhalfWidth = 0.0;\nif (vertexId == VBB_SEG_END_RIGHT)\noffsetPosition.xy = vec2(fields1.z, fields2.x);\nelse if (vertexId == VBB_SEG_END_LEFT)\noffsetPosition.xy = fields2.yz;\n}\n#endif\n#ifdef HAS_RASTER_QUADS\nvoid strokeTexQuad(float vertexId) {\nfloat distanceAlong = fields2.x;\nbool isStartCapVertex = (vertexId < VBB_SEG_END_RIGHT);\nfloat isLeftSide = (vertexId == VBB_SEG_END_LEFT || vertexId == VBB_SEG_START_LEFT) ? 1.0 : -1.0;\nfloat angleTransverse = fields1.z + isLeftSide * HALF_PI;\nmultipurpose.y = distanceAlong;\nfloat st = sin(angleTransverse);\nfloat ct = cos(angleTransverse);\nfloat moveDist = halfWidth;\nvec2 offset = vec2(ct, st) * moveDist;\noffsetPosition.xy += offset;\nmultipurpose.z = 1.0;\nhalfWidth = 0.0;\nif (isStartCapVertex) {\noffsetPosition.xy += isLeftSide * vec2(0.0, offset.x);\nmultipurpose.x = 0.0;\nmultipurpose.y = max(0.0, isLeftSide);\n}\nelse {\nvec2 along = vec2(cos(fields1.z), sin(fields1.z));\noffsetPosition.xy += distanceAlong * along;\ncentralVertex.xy += distanceAlong * along;\noffsetPosition.xy += isLeftSide * vec2(0.0, -offset.x);\nmultipurpose.x = 1.0;\nmultipurpose.y = max(0.0, isLeftSide);\n}\n}\n#endif\n#ifdef HAS_CIRCLES\nvoid strokeCircularArc(float vertexId) {\nvec2 angles = vec2(fields1.z, fields2.x);\nfloat r = fields2.z;\nif (r * pixelsPerUnit < 0.125)\nr = 0.125 * unitsPerPixel;\nfloat isStart = (vertexId < VBB_SEG_END_RIGHT) ? -1.0 : 1.0;\nfloat isLeft = (vertexId == VBB_SEG_END_LEFT || vertexId == VBB_SEG_START_LEFT) ? -1.0 : 1.0;\nvec2 minPt;\nvec2 maxPt;\nvec2 endsX = vec2(fields1.x) + r * cos(angles);\nvec2 endsY = vec2(fields1.y) + r * sin(angles);\nminPt = maxPt = vec2(endsX.x, endsY.x);\nminPt = min(minPt, vec2(endsX.y, endsY.y));\nmaxPt = max(maxPt, vec2(endsX.y, endsY.y));\nfloat start = angles.x;\nfloat end = angles.y;\nif (end > start) {\nif (start < (0.5 * PI) && end > (0.5 * PI)) {\nminPt = min(minPt, vec2(fields1.x, fields1.y + r));\nmaxPt = max(maxPt, vec2(fields1.x, fields1.y + r));\n}\nif (start < PI && end > PI) {\nminPt = min(minPt, vec2(fields1.x - r, fields1.y));\nmaxPt = max(maxPt, vec2(fields1.x - r, fields1.y));\n}\nif (start < (1.5 * PI) && end > (1.5 * PI)) {\nminPt = min(minPt, vec2(fields1.x, fields1.y - r));\nmaxPt = max(maxPt, vec2(fields1.x, fields1.y - r));\n}\n}\nelse {\nminPt = min(minPt, vec2(fields1.x + r, fields1.y));\nmaxPt = max(maxPt, vec2(fields1.x + r, fields1.y));\nif (start < (0.5 * PI) || end > (0.5 * PI)) {\nminPt = min(minPt, vec2(fields1.x, fields1.y + r));\nmaxPt = max(maxPt, vec2(fields1.x, fields1.y + r));\n}\nif (start < PI || end > PI) {\nminPt = min(minPt, vec2(fields1.x - r, fields1.y));\nmaxPt = max(maxPt, vec2(fields1.x - r, fields1.y));\n}\nif (start < (1.5 * PI) || end > (1.5 * PI)) {\nminPt = min(minPt, vec2(fields1.x, fields1.y - r));\nmaxPt = max(maxPt, vec2(fields1.x, fields1.y - r));\n}\n}\nminPt -= halfWidth + 0.5 * unitsPerPixel;\nmaxPt += halfWidth + 0.5 * unitsPerPixel;\nif (isStart<0.0)\noffsetPosition.x = minPt.x;\nelse\noffsetPosition.x = maxPt.x;\nif (isLeft<0.0)\noffsetPosition.y = minPt.y;\nelse\noffsetPosition.y = maxPt.y;\nmultipurpose.x = angles.x;\nmultipurpose.y = -r;\nmultipurpose.z = angles.y;\nmultipurpose.w = -r;\n}\n#endif\n#ifdef HAS_ELLIPTICALS\nvoid strokeEllipticalArc(float vertexId) {\nvec2 angles = vec2(fields1.z, fields2.x);\nfloat isStart = (vertexId < VBB_SEG_END_RIGHT) ? -1.0 : 1.0;\nfloat isLeft = (vertexId == VBB_SEG_END_LEFT || vertexId == VBB_SEG_START_LEFT) ? -1.0 : 1.0;\nfloat major = fields2.z;\nfloat minor = extraParams.x;\nvec2 minPt;\nvec2 maxPt;\nvec2 endsX = vec2(fields1.x) + major * cos(angles);\nvec2 endsY = vec2(fields1.y) + minor * sin(angles);\nminPt = maxPt = vec2(endsX.x, endsY.x);\nminPt = min(minPt, vec2(endsX.y, endsY.y));\nmaxPt = max(maxPt, vec2(endsX.y, endsY.y));\nfloat start = angles.x;\nfloat end = angles.y;\nif (end > start) {\nif (start < (0.5 * PI) && end > (0.5 * PI)) {\nminPt = min(minPt, vec2(fields1.x, fields1.y + minor));\nmaxPt = max(maxPt, vec2(fields1.x, fields1.y + minor));\n}\nif (start < PI && end > PI) {\nminPt = min(minPt, vec2(fields1.x - major, fields1.y));\nmaxPt = max(maxPt, vec2(fields1.x - major, fields1.y));\n}\nif (start < (1.5 * PI) && end > (1.5 * PI)) {\nminPt = min(minPt, vec2(fields1.x, fields1.y - minor));\nmaxPt = max(maxPt, vec2(fields1.x, fields1.y - minor));\n}\n}\nelse {\nminPt = min(minPt, vec2(fields1.x + major, fields1.y));\nmaxPt = max(maxPt, vec2(fields1.x + major, fields1.y));\nif (start < (0.5 * PI) || end > (0.5 * PI)) {\nminPt = min(minPt, vec2(fields1.x, fields1.y + minor));\nmaxPt = max(maxPt, vec2(fields1.x, fields1.y + minor));\n}\nif (start < PI || end > PI) {\nminPt = min(minPt, vec2(fields1.x - major, fields1.y));\nmaxPt = max(maxPt, vec2(fields1.x - major, fields1.y));\n}\nif (start < (1.5 * PI) || end > (1.5 * PI)) {\nminPt = min(minPt, vec2(fields1.x, fields1.y - minor));\nmaxPt = max(maxPt, vec2(fields1.x, fields1.y - minor));\n}\n}\nminPt -= halfWidth + 0.5 * unitsPerPixel;\nmaxPt += halfWidth + 0.5 * unitsPerPixel;\nif (isStart < 0.0)\noffsetPosition.x = minPt.x;\nelse\noffsetPosition.x = maxPt.x;\nif (isLeft < 0.0)\noffsetPosition.y = minPt.y;\nelse\noffsetPosition.y = maxPt.y;\nmultipurpose.x = angles.x;\nmultipurpose.y = -major;\nmultipurpose.z = angles.y;\nmultipurpose.w = minor;\n}\n#endif\n#ifdef SELECTION_RENDERER\nbool isSelected() {\nvec3 oid = dbId4b.rgb * 255.0;\nfloat id01 = oid.r + oid.g * 256.0;\nfloat t = (id01 + 0.5) * (1.0 / 4096.0);\nfloat flrt = floor(t);\nfloat texU = t - flrt;\nfloat id23 = oid.b * (65536.0 / 4096.0) + flrt;\nt = (id23 + 0.5) / vSelTexSize.y;\nfloat texV = fract(t);\nvec4 selBit = texture2D(tSelectionTexture, vec2(texU, texV));\nreturn selBit.r == 1.0;\n}\n#endif\nbool isLayerOff() {\nvec4 layerBit = texture2D(tLayerMask, flags4b.ba / 255.0);\nreturn layerBit.r == 0.0;\n}\nvoid main() {\ncentralVertex = offsetPosition = fields1.xy;\nif (isLayerOff()) {\noutColor = vec4(0.0);\n}\nelse {\nfloat vertexId = mod(flags4b.x, 16.0);\nfloat geomType = flags4b.x - vertexId;\nvertexId = max(instFlags4b.x, vertexId);\nfloat lineWeight = fields2.y;\nif (lineWeight > 0.0) {\nif (lineWeight * pixelsPerUnit < 0.5)\nlineWeight = 0.5 * unitsPerPixel;\n}\nelse {\nlineWeight = abs(lineWeight) * unitsPerPixel;\n}\n#ifdef SELECTION_RENDERER\nif (isSelected())\noutColor = vec4(0.0,0.0,1.0,1.0);\nelse\noutColor = vec4(0.0);\n#else\noutColor = color4b;\n#endif\nhalfWidth = lineWeight;\ndbId = dbId4b;\nif (geomType == VBB_LINE_SEGMENT)\nstrokeLineSegment(vertexId);\n#ifdef HAS_CIRCLES\nelse if (geomType == VBB_ARC_CIRCULAR)\nstrokeCircularArc(vertexId);\n#endif\n#ifdef HAS_ELLIPTICALS\nelse if (geomType == VBB_ARC_ELLIPTICAL)\nstrokeEllipticalArc(vertexId);\n#endif\n#ifdef HAS_RASTER_QUADS\nelse if (geomType == VBB_TEX_QUAD)\nstrokeTexQuad(vertexId);\n#endif\n#ifdef HAS_TRIANGLE_GEOMS\nelse if (geomType == VBB_ONE_TRIANGLE)\nstrokeOneTriangle(vertexId);\n#endif\nelse {\nhalfWidth = 0.0;\nmultipurpose.z = 0.0;\n}\n}\ngl_Position = mvpMatrix * vec4( offsetPosition.xy, 0.0, 1.0 );\n}",
fragmentShader:"#define TAU 6.28318530717958\n#define PI  3.14159265358979\nuniform float pixelsPerUnit;\nuniform float unitsPerPixel;\nfloat aaRange = 0.5 * unitsPerPixel;\n#ifdef HAS_RASTER_QUADS\nuniform sampler2D tRaster;\n#endif\nvarying vec4 outColor;\nvarying vec4 dbId;\n#ifdef MRT_ID_BUFFER\n#extension GL_EXT_draw_buffers : enable\n#define gl_FragColor gl_FragData[0]\n#endif\nvarying vec2 centralVertex;\nvarying vec2 offsetPosition;\nvarying vec4 multipurpose;\nvarying float halfWidth;\nfloat curveGaussian(float r, float invWidth) {\nfloat amt = clamp(r * invWidth, 0.0, 1.0);\nfloat exponent = amt * 3.5;\nreturn exp(-exponent*exponent);\n}\nvoid fillLineSegment() {\nfloat radius = halfWidth;\nfloat parametricDistance = multipurpose.x;\nfloat segmentLength = multipurpose.y;\nfloat ltz = max(0.0, sign(parametricDistance));\nfloat gtsl = max(0.0, sign(parametricDistance - segmentLength));\nfloat d = (1.0 - ltz + gtsl) * (parametricDistance - ltz * segmentLength);\nradius = sqrt(max(0.0, radius * radius - d * d));\nfloat dist = distance(centralVertex, offsetPosition);\nfloat range =  dist - radius;\nif (range > aaRange) {\ndiscard;\n}\ngl_FragColor = outColor;\ngl_FragColor.a *= curveGaussian(range+aaRange, pixelsPerUnit);\n}\n#ifdef HAS_CIRCLES\nvoid fillCircularArc() {\nfloat dist = distance(centralVertex, offsetPosition);\nfloat radius = abs(multipurpose.y);\nfloat range =  abs(dist - radius);\nrange -= halfWidth;\nif (range > aaRange) {\ndiscard;\n}\nvec2 angles = multipurpose.xz;\nvec2 direction = offsetPosition - centralVertex;\nfloat angle = atan(direction.y, direction.x);\nif (angles.x > angles.y)\nangles.x -= TAU;\nelse if (angle < 0.0)\nangle += TAU;\nif (angle > angles.x && angle < angles.y) {\ngl_FragColor = outColor;\ngl_FragColor.a *= curveGaussian(range+aaRange, pixelsPerUnit);\n}\nelse {\ndiscard;\n}\n}\n#endif\n#ifdef HAS_ELLIPTICALS\nfloat DistancePointEllipseSpecial (vec2 e, vec2 y, out vec2 x, float width, float aaRange) {\nfloat dist;\nvec2 esqr = e * e;\nvec2 ey = e * y;\nfloat t0 = -esqr[1] + ey[1];\nfloat t1 = -esqr[1] + length(ey);\nfloat t;\nvec2 r;\nfor (int i = 0; i < 6; ++i) {\nt = mix(t0, t1, 0.5);//0.5*(t0 + t1);\nr = ey / (vec2(t) + esqr);\nvec2 rsq = r * r;\nfloat f = rsq[0] + rsq[1] - 1.0;\nfloat fsign = sign(f);\nt0 = mix(t0, t, max(0.0, fsign));\nt1 = mix(t1, t, max(0.0, -fsign));\n}\nx = e * r;\ndist = distance(x, y);\nif (dist > max(2.0 * (width + aaRange), e[0] * 0.05))\nreturn dist;\nfor (int i = 0; i < 6; ++i) {\nt = mix(t0, t1, 0.5);//0.5*(t0 + t1);\nr = ey / (vec2(t) + esqr);\nvec2 rsq = r * r;\nfloat f = rsq[0] + rsq[1] - 1.0;\nfloat fsign = sign(f);\nt0 = mix(t0, t, max(0.0, fsign));\nt1 = mix(t1, t, max(0.0, -fsign));\n}\nx = e * r;\ndist = distance(x, y);\nfloat ecc = 1.0 +  0.1 * e[0] / e[1];\nif (dist > max(ecc * (width + aaRange), e[0] * 0.001))\nreturn dist;\nif (dist < (width - aaRange) / ecc)\nreturn dist;\nfor (int i = 0; i < 10; ++i) {\nt = mix(t0, t1, 0.5);//0.5*(t0 + t1);\nr = ey / (vec2(t) + esqr);\nvec2 rsq = r * r;\nfloat f = rsq[0] + rsq[1] - 1.0;\nfloat fsign = sign(f);\nt0 = mix(t0, t, max(0.0, fsign));\nt1 = mix(t1, t, max(0.0, -fsign));\n}\nx = e * r;\ndist = distance(x, y);\nreturn dist;\n}\nfloat DistancePointEllipse(vec2 e, vec2 y, out vec2 locX, float width, float aaRange) {\nvec2 locE, locY;\nfloat diff = sign(e[0] - e[1]);\nvec2 swizzle = vec2(max(diff, 0.0), -min(diff, 0.0));\nlocE.x = dot(e, swizzle.xy);\nlocE.y = dot(e, swizzle.yx);\nlocY.x = dot(y, swizzle.xy);\nlocY.y = dot(y, swizzle.yx);\nvec2 refl = sign(locY);\nlocY *= refl;\nvec2 x;\nfloat distance = DistancePointEllipseSpecial(locE, locY, x, width, aaRange);\nx *= refl;\nlocX.x = dot(x, swizzle.xy);\nlocX.y = dot(x, swizzle.yx);\nreturn distance;\n}\nvoid fillEllipticalArc() {\nvec2 radii = abs(multipurpose.yw);\nvec2 dir = offsetPosition - centralVertex;\nvec2 pos;\nfloat range = DistancePointEllipse(radii, dir, pos, halfWidth, aaRange);\nrange -= halfWidth;\nif (range > aaRange)\ndiscard;\nfloat ar = radii[0] / radii[1];\nvec2 angles = multipurpose.xz;\nfloat angle = atan(ar * pos.y, pos.x);\nif (angles.x > angles.y)\nangles.x -= TAU;\nelse if (angle < 0.0)\nangle += TAU;\nif (angle > angles.x && angle < angles.y) {\ngl_FragColor = outColor;\ngl_FragColor.a *= curveGaussian(range+aaRange, pixelsPerUnit);\n}\nelse {\ndiscard;\n}\n}\n#endif\nvoid main() {\nif (outColor.a == 0.0) {\ndiscard;\n}\nif (halfWidth == 0.0) {\n#ifdef HAS_RASTER_QUADS\nif (multipurpose.z != 0.0)\ngl_FragColor = texture2D(tRaster, multipurpose.xy);\nelse\n#endif\ngl_FragColor = outColor;\n}\nelse if (multipurpose.y < 0.0) {\n#ifdef HAS_CIRCLES\n#ifdef HAS_ELLIPTICALS\nif (multipurpose.y == multipurpose.w)\n#endif\nfillCircularArc();\n#endif\n#ifdef HAS_ELLIPTICALS\n#ifdef HAS_CIRCLES\nelse\n#endif\nfillEllipticalArc();\n#endif\n}\nelse\nfillLineSegment();\n#ifdef MRT_ID_BUFFER\ngl_FragData[1] = vec4(dbId.rgb, 1.0);\n#elif defined(ID_COLOR)\ngl_FragColor = vec4(dbId.rgba);\n#endif\n}"};
FireflyWebGLRenderer=function(a){function b(a,b){var f=b.geometry,g=a.faces3,h=3*g.length,k=1*g.length,l=3*g.length,g=c(b,a),m=d(g),n=e(g),p=g.vertexColors?g.vertexColors:!1;a.__vertexArray=new Float32Array(3*h);n&&(a.__normalArray=new Float32Array(3*h));f.hasTangents&&(a.__tangentArray=new Float32Array(4*h));p&&(a.__colorArray=new Float32Array(3*h));m&&(0<f.faceVertexUvs.length&&(a.__uvArray=new Float32Array(2*h)),1<f.faceVertexUvs.length&&(a.__uv2Array=new Float32Array(2*h)));b.geometry.skinWeights.length&&
b.geometry.skinIndices.length&&(a.__skinIndexArray=new Float32Array(4*h),a.__skinWeightArray=new Float32Array(4*h));a.__faceArray=new Uint16Array(3*k);a.__lineArray=new Uint16Array(2*l);a.__webglFaceCount=3*k;a.__webglLineCount=2*l;if(g.attributes){void 0===a.__webglCustomAttributesList&&(a.__webglCustomAttributesList=[]);for(var z in g.attributes){var f=g.attributes[z],k={},q;for(q in f)k[q]=f[q];if(!k.__webglInitialized||k.createUniqueBuffers)k.__webglInitialized=!0,l=1,"v2"===k.type?l=2:"v3"===
k.type?l=3:"v4"===k.type?l=4:"c"===k.type&&(l=3),k.size=l,k.array=new Float32Array(h*l),k.buffer=t.createBuffer(),k.buffer.belongsToAttribute=z,f.needsUpdate=!0,k.__original=f;a.__webglCustomAttributesList.push(k)}}a.__inittedArrays=!0}function c(a,b){return a.material instanceof THREE.MeshFaceMaterial?a.material.materials[b.materialIndex]:a.material}function e(a){return a instanceof THREE.MeshBasicMaterial&&!a.envMap||a instanceof THREE.MeshDepthMaterial?!1:a&&void 0!==a.shading&&a.shading===THREE.SmoothShading?
THREE.SmoothShading:THREE.FlatShading}function d(a){return a.map||a.lightMap||a.bumpMap||a.normalMap||a.specularMap||a.alphaMap||a instanceof THREE.ShaderMaterial?!0:!1}function g(a,b,c,d){var e,g,h,k=!1;if(c.vb){if(c.streamingDraw){var l=qa.interleavedVB;l||(l=t.createBuffer(),qa.interleavedVB=l);t.bindBuffer(t.ARRAY_BUFFER,l);t.bufferData(t.ARRAY_BUFFER,c.vb,t.STREAM_DRAW)}else t.bindBuffer(t.ARRAY_BUFFER,c.vbbuffer);l=c.vbstride;for(h in b)if("index"!=h&&(g=b[h],e=c.attributes[h],0<=g&&e))if(void 0!==
e.itemOffset){var m=t.FLOAT;1===e.bytesPerItem&&(m=t.UNSIGNED_BYTE);f(g);t.vertexAttribPointer(g,e.itemSize,m,e.normalize,4*l,4*(e.itemOffset+d*l));Oa&&Oa.vertexAttribDivisorANGLE(g,e.divisor||0)}else k=!0}else k=!0;if(k)for(h in b)"index"!=h&&(g=b[h],e=c.attributes[h],0<=g&&(e?void 0===e.itemOffset&&(c.streamingDraw?(l=qa[h],l||(l=t.createBuffer(),qa[h]=l),t.bindBuffer(t.ARRAY_BUFFER,l),t.bufferData(t.ARRAY_BUFFER,e.array,t.DYNAMIC_DRAW)):t.bindBuffer(t.ARRAY_BUFFER,e.buffer),m=t.FLOAT,1===e.bytesPerItem&&
(m=t.UNSIGNED_BYTE),f(g),t.vertexAttribPointer(g,e.itemSize,m,e.normalize,0,d*e.itemSize*4),Oa&&Oa.vertexAttribDivisorANGLE(g,e.divisor||0)):a.defaultAttributeValues&&((e=a.defaultAttributeValues[h])&&2===e.length?t.vertexAttrib2fv(g,a.defaultAttributeValues[h]):e&&3===e.length&&t.vertexAttrib3fv(g,a.defaultAttributeValues[h]))))}function f(a){sa[a]||(t.enableVertexAttribArray(a),sa[a]=!0)}function h(){for(var a=0,b=sa.length;a<b;a++)sa[a]&&(t.disableVertexAttribArray(a),sa[a]=!1)}function k(a,b){return a.z!==
b.z?b.z-a.z:a.id-b.id}function l(a,b,c){if(a.length)for(var d=0,e=a.length;d<e;d++)ca=O=null,M=aa=ja=na=La=Da=ka=-1,ra=!0,a[d].render(b,c,pa,Ga),ca=O=null,M=aa=ja=na=La=Da=ka=-1,ra=!0}function n(a,b,c,d,e,f,g,h){var k,l,m,n;b?(l=a.length-1,n=b=-1):(l=0,b=a.length,n=1);for(var p=l;p!==b;p+=n)if(k=a[p],k.render){l=k.object;m=k.buffer;if(h)k=h;else{k=k[c];if(!k)continue;g&&V.setBlending(k.blending,k.blendEquation,k.blendSrc,k.blendDst);V.setDepthTest(k.depthTest);V.setDepthWrite(k.depthWrite);B(k.polygonOffset,
k.polygonOffsetFactor,k.polygonOffsetUnits)}V.setMaterialFaces(k);m instanceof THREE.BufferGeometry?V.renderBufferDirect(d,e,f,k,m,l):V.renderBuffer(d,e,f,k,m,l)}}function m(a,c){var d,e,f,g;if(void 0===a.__webglInit&&(a.__webglInit=!0,a._modelViewMatrix=new THREE.Matrix4,a._normalMatrix=new THREE.Matrix3,void 0!==a.geometry&&void 0===a.geometry.__webglInit&&(a.geometry.__webglInit=!0,a.geometry.addEventListener("dispose",db)),e=a.geometry,void 0!==e))if(e instanceof THREE.BufferGeometry)if(e.streamingDraw)!e.streamingIndex&&
(e=e.attributes.index)&&(e.buffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.buffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,e.array,t.STATIC_DRAW));else{e.vb&&(e.vbbuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,e.vbbuffer),t.bufferData(t.ARRAY_BUFFER,e.vb,t.STATIC_DRAW));var h,k;for(h in e.attributes)g=e.attributes[h],g.array&&(k="index"===h?t.ELEMENT_ARRAY_BUFFER:t.ARRAY_BUFFER,g.buffer=t.createBuffer(),t.bindBuffer(k,g.buffer),t.bufferData(k,g.array,t.STATIC_DRAW))}else if(a instanceof
THREE.Mesh){f=a.material;if(void 0===e.geometryGroups){k=e;var l,m,n;h={};var z=k.morphTargets.length,q=k.morphNormals.length,s=f instanceof THREE.MeshFaceMaterial;k.geometryGroups={};f=0;for(l=k.faces.length;f<l;f++)m=k.faces[f],m=s?m.materialIndex:0,void 0===h[m]&&(h[m]={hash:m,counter:0}),n=h[m].hash+"_"+h[m].counter,void 0===k.geometryGroups[n]&&(k.geometryGroups[n]={faces3:[],materialIndex:m,vertices:0,numMorphTargets:z,numMorphNormals:q}),65535<k.geometryGroups[n].vertices+3&&(h[m].counter+=
1,n=h[m].hash+"_"+h[m].counter,void 0===k.geometryGroups[n]&&(k.geometryGroups[n]={faces3:[],materialIndex:m,vertices:0,numMorphTargets:z,numMorphNormals:q})),k.geometryGroups[n].faces3.push(f),k.geometryGroups[n].vertices+=3;k.geometryGroupsList=[];for(g in k.geometryGroups)k.geometryGroups[g].id=ea++,k.geometryGroupsList.push(k.geometryGroups[g])}for(d in e.geometryGroups)g=e.geometryGroups[d],g.__webglVertexBuffer||(k=g,k.__webglVertexBuffer=t.createBuffer(),k.__webglNormalBuffer=t.createBuffer(),
k.__webglTangentBuffer=t.createBuffer(),k.__webglColorBuffer=t.createBuffer(),k.__webglUVBuffer=t.createBuffer(),k.__webglUV2Buffer=t.createBuffer(),k.__webglSkinIndicesBuffer=t.createBuffer(),k.__webglSkinWeightsBuffer=t.createBuffer(),k.__webglFaceBuffer=t.createBuffer(),k.__webglLineBuffer=t.createBuffer(),V.info.memory.geometries++,b(g,a),e.verticesNeedUpdate=!0,e.morphTargetsNeedUpdate=!0,e.elementsNeedUpdate=!0,e.uvsNeedUpdate=!0,e.normalsNeedUpdate=!0,e.tangentsNeedUpdate=!0,e.colorsNeedUpdate=
!0)}else if(a instanceof THREE.Line&&!e.__webglVertexBuffer){g=e;g.__webglVertexBuffer=t.createBuffer();g.__webglColorBuffer=t.createBuffer();g.__webglLineDistanceBuffer=t.createBuffer();V.info.memory.geometries++;g=e;h=g.vertices.length;g.__vertexArray=new Float32Array(3*h);g.__colorArray=new Float32Array(3*h);g.__lineDistanceArray=new Float32Array(1*h);g.__webglLineCount=h;h=g.vertices.length;z=a.material;if(z.attributes)for(k in void 0===g.__webglCustomAttributesList&&(g.__webglCustomAttributesList=
[]),z.attributes){q=z.attributes[k];if(!q.__webglInitialized||q.createUniqueBuffers)q.__webglInitialized=!0,f=1,"v2"===q.type?f=2:"v3"===q.type?f=3:"v4"===q.type?f=4:"c"===q.type&&(f=3),q.size=f,q.array=new Float32Array(h*f),q.buffer=t.createBuffer(),q.buffer.belongsToAttribute=k,q.needsUpdate=!0;g.__webglCustomAttributesList.push(q)}e.verticesNeedUpdate=!0;e.colorsNeedUpdate=!0;e.lineDistancesNeedUpdate=!0}if(void 0===a.__webglActive){if(a instanceof THREE.Mesh)if(e=a.geometry,e instanceof THREE.BufferGeometry)p(c.__webglObjects,
e,a);else{if(e instanceof THREE.Geometry)for(d in e.geometryGroups)g=e.geometryGroups[d],p(c.__webglObjects,g,a)}else a instanceof THREE.Line&&(e=a.geometry,p(c.__webglObjects,e,a));a.__webglActive=!0}}function p(a,b,c){a.push({id:null,buffer:b,object:c,opaque:null,transparent:null,z:0})}function q(a){for(var b in a.attributes)if(a.attributes[b].needsUpdate)return!0;return!1}function s(a){for(var b in a.attributes)a.attributes[b].needsUpdate=!1}function r(a,b){if(a instanceof THREE.Mesh||a instanceof
THREE.Line)for(var c=b.__webglObjects,d=c.length-1;0<=d;d--)c[d].object===a&&c.splice(d,1);delete a.__webglActive}function u(a,b,c,d,e){xa=0;d.needsUpdate&&(d.program&&kb(d),V.initMaterial(d,b,c,e),d.needsUpdate=!1);var f=!1,g=d.program,h=g.uniforms,k=d.uniforms;g!==O&&(t.useProgram(g),O=g,f=!0);d.id!==M&&(M=d.id,f=!0);if(f||a!==ca)t.uniformMatrix4fv(h.projectionMatrix,!1,a.projectionMatrix.elements),a!==ca&&(ca=a);if(f){c&&d.fog&&(k.fogColor.value=c.color,c instanceof THREE.Fog?(k.fogNear.value=
c.near,k.fogFar.value=c.far):c instanceof THREE.FogExp2&&(k.fogDensity.value=c.density));if(d instanceof THREE.MeshPhongMaterial||d instanceof THREE.MeshLambertMaterial||d.lights){if(ra){var l,m=0,n=0,p=0,q,z,s,r=ia,D=r.directional.colors,J=r.directional.positions,u=r.point.colors,E=r.point.positions,K=r.point.distances,U=r.spot.colors,B=r.spot.positions,R=r.spot.distances,C=r.spot.directions,S=r.spot.anglesCos,da=r.spot.exponents,F=r.hemi.skyColors,N=r.hemi.groundColors,I=r.hemi.positions,ba=0,P=
0,aa=0,ea=0,Y=0,fa=0,Z=0,ha=0,Qa=l=0;c=s=Qa=0;for(f=b.length;c<f;c++)if(l=b[c],!l.onlyShadow)if(q=l.color,z=l.intensity,s=l.distance,l instanceof THREE.AmbientLight)l.visible&&(V.gammaInput?(m+=q.r*q.r,n+=q.g*q.g,p+=q.b*q.b):(m+=q.r,n+=q.g,p+=q.b));else if(l instanceof THREE.DirectionalLight){if(Y+=1,l.visible&&(ga.setFromMatrixPosition(l.matrixWorld),la.setFromMatrixPosition(l.target.matrixWorld),ga.sub(la),ga.normalize(),0!==ga.x||0!==ga.y||0!==ga.z))l=3*ba,J[l]=ga.x,J[l+1]=ga.y,J[l+2]=ga.z,V.gammaInput?
A(D,l,q,z*z):v(D,l,q,z),ba+=1}else l instanceof THREE.PointLight?(fa+=1,l.visible&&(Qa=3*P,V.gammaInput?A(u,Qa,q,z*z):v(u,Qa,q,z),la.setFromMatrixPosition(l.matrixWorld),E[Qa]=la.x,E[Qa+1]=la.y,E[Qa+2]=la.z,K[P]=s,P+=1)):l instanceof THREE.SpotLight?(Z+=1,l.visible&&(Qa=3*aa,V.gammaInput?A(U,Qa,q,z*z):v(U,Qa,q,z),la.setFromMatrixPosition(l.matrixWorld),B[Qa]=la.x,B[Qa+1]=la.y,B[Qa+2]=la.z,R[aa]=s,ga.copy(la),la.setFromMatrixPosition(l.target.matrixWorld),ga.sub(la),ga.normalize(),C[Qa]=ga.x,C[Qa+
1]=ga.y,C[Qa+2]=ga.z,S[aa]=Math.cos(l.angle),da[aa]=l.exponent,aa+=1)):l instanceof THREE.HemisphereLight&&(ha+=1,l.visible&&(ga.setFromMatrixPosition(l.matrixWorld),ga.normalize(),0!==ga.x||0!==ga.y||0!==ga.z))&&(s=3*ea,I[s]=ga.x,I[s+1]=ga.y,I[s+2]=ga.z,q=l.color,l=l.groundColor,V.gammaInput?(z*=z,A(F,s,q,z),A(N,s,l,z)):(v(F,s,q,z),v(N,s,l,z)),ea+=1);c=3*ba;for(f=Math.max(D.length,3*Y);c<f;c++)D[c]=0;c=3*P;for(f=Math.max(u.length,3*fa);c<f;c++)u[c]=0;c=3*aa;for(f=Math.max(U.length,3*Z);c<f;c++)U[c]=
0;c=3*ea;for(f=Math.max(F.length,3*ha);c<f;c++)F[c]=0;c=3*ea;for(f=Math.max(N.length,3*ha);c<f;c++)N[c]=0;r.directional.length=ba;r.point.length=P;r.spot.length=aa;r.hemi.length=ea;r.ambient[0]=m;r.ambient[1]=n;r.ambient[2]=p;ra=!1}c=ia;k.ambientLightColor.value=c.ambient;k.directionalLightColor.value=c.directional.colors;k.directionalLightDirection.value=c.directional.positions;k.pointLightColor.value=c.point.colors;k.pointLightPosition.value=c.point.positions;k.pointLightDistance.value=c.point.distances;
k.spotLightColor.value=c.spot.colors;k.spotLightPosition.value=c.spot.positions;k.spotLightDistance.value=c.spot.distances;k.spotLightDirection.value=c.spot.directions;k.spotLightAngleCos.value=c.spot.anglesCos;k.spotLightExponent.value=c.spot.exponents;k.hemisphereLightSkyColor.value=c.hemi.skyColors;k.hemisphereLightGroundColor.value=c.hemi.groundColors;k.hemisphereLightDirection.value=c.hemi.positions}if(d instanceof THREE.MeshBasicMaterial||d instanceof THREE.MeshLambertMaterial||d instanceof
THREE.MeshPhongMaterial){k.opacity.value=d.opacity;V.gammaInput?k.diffuse.value.copyGammaToLinear(d.color):k.diffuse.value.copy(d.color);k.map.value=d.map;k.lightMap.value=d.lightMap;k.specularMap.value=d.specularMap;k.alphaMap.value=d.alphaMap;d.bumpMap&&(k.bumpMap.value=d.bumpMap,k.bumpScale.value=d.bumpScale);d.normalMap&&(k.normalMap.value=d.normalMap,k.normalScale.value.copy(d.normalScale));var T;d.map?T=d.map:d.specularMap?T=d.specularMap:d.alphaMap&&(T=d.alphaMap);void 0!==T&&(c=T.offset,T=
T.repeat,k.offsetRepeat.value.set(c.x,c.y,T.x,T.y));var X;d.normalMap?X=d.normalMap:d.bumpMap&&(X=d.bumpMap);void 0!==X&&(c=X.offset,T=X.repeat,k.offsetRepeatBump.value.set(c.x,c.y,T.x,T.y));d.alphaMap&&(c=d.alphaMap.offset,T=d.alphaMap.repeat,k.offsetRepeatAlpha.value.set(c.x,c.y,T.x,T.y));k.envMap.value=d.envMap;k.irradianceMap&&(k.irradianceMap.value=d.irradianceMap);k.reflectivity.value=V.gammaInput?d.reflectivity*d.reflectivity:d.reflectivity;k.refractionRatio.value=d.refractionRatio;k.combine.value=
d.combine;k.useRefract.value=d.envMap&&d.envMap.mapping instanceof THREE.CubeRefractionMapping}d instanceof THREE.LineBasicMaterial?(k.diffuse.value=d.color,k.opacity.value=d.opacity):d instanceof THREE.LineDashedMaterial?(k.diffuse.value=d.color,k.opacity.value=d.opacity,k.dashSize.value=d.dashSize,k.totalSize.value=d.dashSize+d.gapSize,k.scale.value=d.scale):d instanceof THREE.MeshPhongMaterial?(k.shininess.value=d.shininess,V.gammaInput?(k.ambient.value.copyGammaToLinear(d.ambient),k.emissive.value.copyGammaToLinear(d.emissive),
k.specular.value.copyGammaToLinear(d.specular)):(k.ambient.value.copy(d.ambient),k.emissive.value.copy(d.emissive),k.specular.value.copy(d.specular)),d.wrapAround&&k.wrapRGB.value.copy(d.wrapRGB)):d instanceof THREE.MeshLambertMaterial?(V.gammaInput?(k.ambient.value.copyGammaToLinear(d.ambient),k.emissive.value.copyGammaToLinear(d.emissive)):(k.ambient.value.copy(d.ambient),k.emissive.value.copy(d.emissive)),d.wrapAround&&k.wrapRGB.value.copy(d.wrapRGB)):d instanceof THREE.MeshDepthMaterial?(k.mNear.value=
a.near,k.mFar.value=a.far,k.opacity.value=d.opacity):d instanceof THREE.MeshNormalMaterial&&(k.opacity.value=d.opacity);if(e.receiveShadow&&!d._shadowPass&&k.shadowMatrix)for(T=X=0,c=b.length;T<c;T++)f=b[T],f.castShadow&&(f instanceof THREE.SpotLight||f instanceof THREE.DirectionalLight&&!f.shadowCascade)&&(k.shadowMap.value[X]=f.shadowMap,k.shadowMapSize.value[X]=f.shadowMapSize,k.shadowMatrix.value[X]=f.shadowMatrix,k.shadowDarkness.value[X]=f.shadowDarkness,k.shadowBias.value[X]=f.shadowBias,X++);
b=d.uniformsList;k=0;for(X=b.length;k<X;k++)if(c=g.uniforms[b[k][1]])if(T=b[k][0],f=T.type,n=T.value,"i"===f)t.uniform1i(c,n);else if("f"===f)t.uniform1f(c,n);else if("v2"===f)t.uniform2f(c,n.x,n.y);else if("v3"===f)t.uniform3f(c,n.x,n.y,n.z);else if("v4"===f)t.uniform4f(c,n.x,n.y,n.z,n.w);else if("c"===f)t.uniform3f(c,n.r,n.g,n.b);else if("iv1"===f)t.uniform1iv(c,n);else if("iv"===f)t.uniform3iv(c,n);else if("fv1"===f)t.uniform1fv(c,n);else if("fv"===f)n.length&&t.uniform3fv(c,n);else if("v2v"===
f){void 0===T._array&&(T._array=new Float32Array(2*n.length));f=0;for(m=n.length;f<m;f++)p=2*f,T._array[p]=n[f].x,T._array[p+1]=n[f].y;t.uniform2fv(c,T._array)}else if("v3v"===f){void 0===T._array&&(T._array=new Float32Array(3*n.length));f=0;for(m=n.length;f<m;f++)p=3*f,T._array[p]=n[f].x,T._array[p+1]=n[f].y,T._array[p+2]=n[f].z;t.uniform3fv(c,T._array)}else if("v4v"===f){void 0===T._array&&(T._array=new Float32Array(4*n.length));f=0;for(m=n.length;f<m;f++)p=4*f,T._array[p]=n[f].x,T._array[p+1]=
n[f].y,T._array[p+2]=n[f].z,T._array[p+3]=n[f].w;t.uniform4fv(c,T._array)}else if("m4"===f)void 0===T._array&&(T._array=new Float32Array(16)),n.flattenToArray(T._array),t.uniformMatrix4fv(c,!1,T._array);else if("m4v"===f){void 0===T._array&&(T._array=new Float32Array(16*n.length));f=0;for(m=n.length;f<m;f++)n[f].flattenToArrayOffset(T._array,16*f);t.uniformMatrix4fv(c,!1,T._array)}else if("t"===f){if(p=n,n=w(),t.uniform1i(c,n),p)if(p.image instanceof Array&&6===p.image.length){if(T=p,c=n,6===T.image.length)if(T.needsUpdate){T.image.__webglTextureCube||
(T.addEventListener("dispose",bb),T.image.__webglTextureCube=t.createTexture(),V.info.memory.textures++);t.activeTexture(t.TEXTURE0+c);t.bindTexture(t.TEXTURE_CUBE_MAP,T.image.__webglTextureCube);t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,T.flipY);c=T instanceof THREE.CompressedTexture;f=[];for(m=0;6>m;m++)V.autoScaleCubemaps&&!c?(n=f,p=m,r=T.image[m],J=Wa,r.width<=J&&r.height<=J||(u=Math.max(r.width,r.height),D=Math.floor(r.width*J/u),J=Math.floor(r.height*J/u),u=document.createElement("canvas"),u.width=
D,u.height=J,u.getContext("2d").drawImage(r,0,0,r.width,r.height,0,0,D,J),r=u),n[p]=r):f[m]=T.image[m];m=f[0];n=0===(m.width&m.width-1)&&0===(m.height&m.height-1);p=H(T.format);r=H(T.type);G(t.TEXTURE_CUBE_MAP,T,n&&r!=t.FLOAT);for(m=0;6>m;m++)if(c)for(J=f[m].mipmaps,u=0,E=J.length;u<E;u++)D=J[u],T.format!==THREE.RGBAFormat?t.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+m,u,p,D.width,D.height,0,D.data):t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+m,u,p,D.width,D.height,0,p,r,D.data);else f[m].data?
t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+m,0,p,f[m].width,f[m].height,0,p,r,f[m].data):t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+m,0,p,p,r,f[m]);T.generateMipmaps&&n&&t.generateMipmap(t.TEXTURE_CUBE_MAP);T.needsUpdate=!1;if(T.onUpdate)T.onUpdate()}else t.activeTexture(t.TEXTURE0+c),t.bindTexture(t.TEXTURE_CUBE_MAP,T.image.__webglTextureCube)}else V.setTexture(p,n)}else if("tv"===f){void 0===T._array&&(T._array=[]);f=0;for(m=T.value.length;f<m;f++)T._array[f]=w();t.uniform1iv(c,T._array);f=0;for(m=
T.value.length;f<m;f++)p=T.value[f],n=T._array[f],p&&V.setTexture(p,n)}else console.warn("THREE.WebGLRenderer: Unknown uniform type: "+f);(d instanceof THREE.ShaderMaterial||d instanceof THREE.MeshPhongMaterial||d.envMap)&&null!==h.cameraPosition&&(la.setFromMatrixPosition(a.matrixWorld),t.uniform3f(h.cameraPosition,la.x,la.y,la.z));if(d instanceof THREE.MeshPhongMaterial||d instanceof THREE.MeshLambertMaterial||d instanceof THREE.ShaderMaterial||d.skinning)null!==h.viewMatrix&&t.uniformMatrix4fv(h.viewMatrix,
!1,a.matrixWorldInverse.elements),null!==h.mvpMatrix&&t.uniformMatrix4fv(h.mvpMatrix,!1,wa.elements),null!==h.viewMatrixInverse&&t.uniformMatrix4fv(h.viewMatrixInverse,!1,ua.elements)}t.uniformMatrix4fv(h.modelViewMatrix,!1,e._modelViewMatrix.elements);h.normalMatrix&&t.uniformMatrix3fv(h.normalMatrix,!1,e._normalMatrix.elements);null!==h.modelMatrix&&t.uniformMatrix4fv(h.modelMatrix,!1,e.matrixWorld.elements);return g}function w(){var a=xa;a>=Va&&console.warn("WebGLRenderer: trying to use "+a+" texture units while this GPU supports only "+
Va);xa+=1;return a}function A(a,b,c,d){a[b]=c.r*c.r*d;a[b+1]=c.g*c.g*d;a[b+2]=c.b*c.b*d}function v(a,b,c,d){a[b]=c.r*d;a[b+1]=c.g*d;a[b+2]=c.b*d}function B(a,b,c){Ka!==a&&(a?t.enable(t.POLYGON_OFFSET_FILL):t.disable(t.POLYGON_OFFSET_FILL),Ka=a);!a||Ma===b&&ya===c||(t.polygonOffset(b,c),Ma=b,ya=c)}function C(a){a=a.split("\n");for(var b=0,c=a.length;b<c;b++)a[b]=b+1+": "+a[b];return a.join("\n")}function N(a,b){var c;"fragment"===a?c=t.createShader(t.FRAGMENT_SHADER):"vertex"===a&&(c=t.createShader(t.VERTEX_SHADER));
t.shaderSource(c,b);t.compileShader(c);return t.getShaderParameter(c,t.COMPILE_STATUS)?c:(console.error(t.getShaderInfoLog(c)),console.error(C(b)),null)}function G(a,b,c){c?(t.texParameteri(a,t.TEXTURE_WRAP_S,H(b.wrapS)),t.texParameteri(a,t.TEXTURE_WRAP_T,H(b.wrapT)),t.texParameteri(a,t.TEXTURE_MAG_FILTER,H(b.magFilter)),t.texParameteri(a,t.TEXTURE_MIN_FILTER,H(b.minFilter))):(t.texParameteri(a,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(a,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(a,
t.TEXTURE_MAG_FILTER,I(b.magFilter)),t.texParameteri(a,t.TEXTURE_MIN_FILTER,I(b.minFilter)));Na&&b.type!==THREE.FloatType&&(1<b.anisotropy||b.__oldAnisotropy)&&(t.texParameterf(a,Na.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(b.anisotropy,Xa)),b.__oldAnisotropy=b.anisotropy)}function I(a){return a===THREE.NearestFilter||a===THREE.NearestMipMapNearestFilter||a===THREE.NearestMipMapLinearFilter?t.NEAREST:t.LINEAR}function H(a){if(a===THREE.RepeatWrapping)return t.REPEAT;if(a===THREE.ClampToEdgeWrapping)return t.CLAMP_TO_EDGE;
if(a===THREE.MirroredRepeatWrapping)return t.MIRRORED_REPEAT;if(a===THREE.NearestFilter)return t.NEAREST;if(a===THREE.NearestMipMapNearestFilter)return t.NEAREST_MIPMAP_NEAREST;if(a===THREE.NearestMipMapLinearFilter)return t.NEAREST_MIPMAP_LINEAR;if(a===THREE.LinearFilter)return t.LINEAR;if(a===THREE.LinearMipMapNearestFilter)return t.LINEAR_MIPMAP_NEAREST;if(a===THREE.LinearMipMapLinearFilter)return t.LINEAR_MIPMAP_LINEAR;if(a===THREE.UnsignedByteType)return t.UNSIGNED_BYTE;if(a===THREE.UnsignedShort4444Type)return t.UNSIGNED_SHORT_4_4_4_4;
if(a===THREE.UnsignedShort5551Type)return t.UNSIGNED_SHORT_5_5_5_1;if(a===THREE.UnsignedShort565Type)return t.UNSIGNED_SHORT_5_6_5;if(a===THREE.ByteType)return t.BYTE;if(a===THREE.ShortType)return t.SHORT;if(a===THREE.UnsignedShortType)return t.UNSIGNED_SHORT;if(a===THREE.IntType)return t.INT;if(a===THREE.UnsignedIntType)return t.UNSIGNED_INT;if(a===THREE.FloatType)return t.FLOAT;if(a===THREE.HalfFloatType)return 36193;if(a===THREE.AlphaFormat)return t.ALPHA;if(a===THREE.RGBFormat)return t.RGB;if(a===
THREE.RGBAFormat)return t.RGBA;if(a===THREE.LuminanceFormat)return t.LUMINANCE;if(a===THREE.LuminanceAlphaFormat)return t.LUMINANCE_ALPHA;if(a===THREE.AddEquation)return t.FUNC_ADD;if(a===THREE.SubtractEquation)return t.FUNC_SUBTRACT;if(a===THREE.ReverseSubtractEquation)return t.FUNC_REVERSE_SUBTRACT;if(a===THREE.ZeroFactor)return t.ZERO;if(a===THREE.OneFactor)return t.ONE;if(a===THREE.SrcColorFactor)return t.SRC_COLOR;if(a===THREE.OneMinusSrcColorFactor)return t.ONE_MINUS_SRC_COLOR;if(a===THREE.SrcAlphaFactor)return t.SRC_ALPHA;
if(a===THREE.OneMinusSrcAlphaFactor)return t.ONE_MINUS_SRC_ALPHA;if(a===THREE.DstAlphaFactor)return t.DST_ALPHA;if(a===THREE.OneMinusDstAlphaFactor)return t.ONE_MINUS_DST_ALPHA;if(a===THREE.DstColorFactor)return t.DST_COLOR;if(a===THREE.OneMinusDstColorFactor)return t.ONE_MINUS_DST_COLOR;if(a===THREE.SrcAlphaSaturateFactor)return t.SRC_ALPHA_SATURATE;if(void 0!==Pa){if(a===THREE.RGB_S3TC_DXT1_Format)return Pa.COMPRESSED_RGB_S3TC_DXT1_EXT;if(a===THREE.RGBA_S3TC_DXT1_Format)return Pa.COMPRESSED_RGBA_S3TC_DXT1_EXT;
if(a===THREE.RGBA_S3TC_DXT3_Format)return Pa.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(a===THREE.RGBA_S3TC_DXT5_Format)return Pa.COMPRESSED_RGBA_S3TC_DXT5_EXT}return 0}console.log("THREE.WebGLRenderer",THREE.REVISION);a=a||{};var F=void 0!==a.canvas?a.canvas:document.createElement("canvas"),P=void 0!==a.precision?a.precision:"highp",z=void 0!==a.alpha?a.alpha:!1,K=void 0!==a.premultipliedAlpha?a.premultipliedAlpha:!0,E=void 0!==a.antialias?a.antialias:!1,S=void 0!==a.stencil?a.stencil:!0,D=void 0!==a.preserveDrawingBuffer?
a.preserveDrawingBuffer:!0,U=new THREE.Color(0),J=0;this.domElement=F;this.context=null;this.devicePixelRatio=void 0!==a.devicePixelRatio?a.devicePixelRatio:void 0!==self.devicePixelRatio?self.devicePixelRatio:1;this.autoUpdateObjects=this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0;this.shadowMapEnabled=this.gammaOutput=this.gammaInput=!1;this.shadowMapAutoUpdate=!0;this.shadowMapType=THREE.PCFShadowMap;this.shadowMapCullFace=THREE.CullFaceFront;this.shadowMapCascade=
this.shadowMapDebug=!1;this.maxMorphTargets=8;this.maxMorphNormals=4;this.autoScaleCubemaps=!0;this.renderPluginsPre=[];this.renderPluginsPost=[];this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}};var V=this,R=[],da=0,O=null,ba=null,M=-1,aa=null,ca=null,ea=0,xa=0,na=-1,ja=-1,ka=-1,X=-1,Z=-1,oa=-1,Da=-1,La=-1,Ka=null,Ma=null,ya=null,Ea=null,za=0,Ia=0,fa=F.width,ha=F.height,pa=0,Ga=0,sa=[],qa={},ta=new THREE.Frustum,wa=new THREE.Matrix4,ua=new THREE.Matrix4,
la=new THREE.Vector3,ga=new THREE.Vector3,ra=!0,ia={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}},t,Ya,Sa,Ba,Na,Pa,Ha,Oa,Ta=!1;(function(){try{var a={alpha:z,premultipliedAlpha:K,antialias:E,stencil:S,preserveDrawingBuffer:D};t=F.getContext("webgl",a)||F.getContext("experimental-webgl",
a);if(null===t)throw"Error creating WebGL context.";}catch(b){console.error(b)}Ya=t.getExtension("OES_texture_float");Sa=t.getExtension("OES_texture_half_float");t.getExtension("OES_texture_float_linear");Ba=t.getExtension("OES_standard_derivatives");Ha=t.getExtension("WEBGL_draw_buffers");t.getExtension("OES_element_index_uint");Oa=t.getExtension("ANGLE_instanced_arrays");Ta=!!Ha;Na=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");
Pa=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");Ya||console.log("THREE.WebGLRenderer: Float textures not supported.");Sa||console.log("THREE.WebGLRenderer: Half float textures not supported.");Ba||console.log("THREE.WebGLRenderer: Standard derivatives not supported.");Na||console.log("THREE.WebGLRenderer: Anisotropic texture filtering not supported.");Pa||console.log("THREE.WebGLRenderer: S3TC compressed textures not supported.");
Ha||console.log("THREE.WebGLRenderer: Multiple render targets not supported.");Oa||console.log("THREE.WebGLRenderer: Hardware instancing not supported.");void 0===t.getShaderPrecisionFormat&&(t.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})})();t.clearColor(0,0,0,1);t.clearDepth(1);t.clearStencil(0);t.enable(t.DEPTH_TEST);t.depthFunc(t.LEQUAL);t.frontFace(t.CCW);t.cullFace(t.BACK);t.enable(t.CULL_FACE);t.enable(t.BLEND);t.blendEquation(t.FUNC_ADD);t.blendFunc(t.SRC_ALPHA,
t.ONE_MINUS_SRC_ALPHA);t.viewport(za,Ia,fa,ha);t.clearColor(U.r,U.g,U.b,J);this.context=t;var Va=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);a=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS);t.getParameter(t.MAX_TEXTURE_SIZE);var Wa=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),Xa=Na?t.getParameter(Na.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,Za=0<a;Pa&&t.getParameter(t.COMPRESSED_TEXTURE_FORMATS);var ma=t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT);a=t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT);
t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.LOW_FLOAT);var $a=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT),Y=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT);t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.LOW_FLOAT);t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_INT);t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_INT);t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.LOW_INT);t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_INT);t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,
t.MEDIUM_INT);t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.LOW_INT);ma=0<ma.precision&&0<$a.precision;a=0<a.precision&&0<Y.precision;"highp"!==P||ma||(a?(P="mediump",console.warn("WebGLRenderer: highp not supported, using mediump")):(P="lowp",console.warn("WebGLRenderer: highp and mediump not supported, using lowp")));"mediump"!==P||a||(P="lowp",console.warn("WebGLRenderer: mediump not supported, using lowp"));this.getContext=function(){return t};this.supportsVertexTextures=function(){return Za};
this.supportsFloatTextures=function(){return Ya};this.supportsStandardDerivatives=function(){return Ba};this.supportsCompressedTextureS3TC=function(){return Pa};this.supportsMRT=function(){return Ta};this.getMaxAnisotropy=function(){return Xa};this.getPrecision=function(){return P};this.setSize=function(a,b,c){F.width=a*this.devicePixelRatio;F.height=b*this.devicePixelRatio;1!==this.devicePixelRatio&&!1!==c&&(F.style.width=a+"px",F.style.height=b+"px");this.setViewport(0,0,a,b)};this.setViewport=
function(a,b,c,d){za=a*this.devicePixelRatio;Ia=b*this.devicePixelRatio;fa=c*this.devicePixelRatio;ha=d*this.devicePixelRatio;t.viewport(za,Ia,fa,ha)};this.setScissor=function(a,b,c,d){t.scissor(a,b,c,d)};this.enableScissorTest=function(a){a?t.enable(t.SCISSOR_TEST):t.disable(t.SCISSOR_TEST)};this.setClearColor=function(a,b){U.set(a);J=void 0!==b?b:1;t.clearColor(U.r,U.g,U.b,J)};this.setClearColorHex=function(a,b){console.warn("DEPRECATED: .setClearColorHex() is being removed. Use .setClearColor() instead.");
this.setClearColor(a,b)};this.getClearColor=function(){return U};this.getClearAlpha=function(){return J};this.clear=function(a,b,c){var d=0;if(void 0===a||a)d|=t.COLOR_BUFFER_BIT;if(void 0===b||b)d|=t.DEPTH_BUFFER_BIT;if(void 0===c||c)d|=t.STENCIL_BUFFER_BIT;t.clear(d)};this.clearColor=function(){t.clear(t.COLOR_BUFFER_BIT)};this.clearDepth=function(){t.clear(t.DEPTH_BUFFER_BIT)};this.clearStencil=function(){t.clear(t.STENCIL_BUFFER_BIT)};this.clearTarget=function(a,b,c,d){this.setRenderTarget(a);
this.clear(b,c,d)};this.addPostPlugin=function(a){a.init(this);this.renderPluginsPost.push(a)};this.addPrePlugin=function(a){a.init(this);this.renderPluginsPre.push(a)};this.updateShadowMap=function(a,b){O=null;M=aa=La=Da=ka=-1;ra=!0;ja=na=-1;this.shadowMapPlugin.update(a,b)};var db=function(a){a=a.target;a.removeEventListener("dispose",db);a.__webglInit=void 0;if(a instanceof THREE.BufferGeometry){void 0!==a.vbbuffer&&t.deleteBuffer(a.vbbuffer);var b=a.attributes,c;for(c in b)void 0!==b[c].buffer&&
t.deleteBuffer(b[c].buffer);V.info.memory.geometries--}else if(void 0!==a.geometryGroups)for(b in a.geometryGroups)jb(a.geometryGroups[b]);else jb(a)},bb=function(a){a=a.target;a.removeEventListener("dispose",bb);a.image&&a.image.__webglTextureCube?t.deleteTexture(a.image.__webglTextureCube):a.__webglInit&&(a.__webglInit=!1,t.deleteTexture(a.__webglTexture));V.info.memory.textures--},eb=function(a){a=a.target;a.removeEventListener("dispose",eb);a&&a.__webglTexture&&(t.deleteTexture(a.__webglTexture),
t.deleteFramebuffer(a.__webglFramebuffer),t.deleteRenderbuffer(a.__webglRenderbuffer));V.info.memory.textures--},ib=function(a){a=a.target;a.removeEventListener("dispose",ib);kb(a)},jb=function(a){void 0!==a.__webglVertexBuffer&&t.deleteBuffer(a.__webglVertexBuffer);void 0!==a.__webglNormalBuffer&&t.deleteBuffer(a.__webglNormalBuffer);void 0!==a.__webglTangentBuffer&&t.deleteBuffer(a.__webglTangentBuffer);void 0!==a.__webglColorBuffer&&t.deleteBuffer(a.__webglColorBuffer);void 0!==a.__webglUVBuffer&&
t.deleteBuffer(a.__webglUVBuffer);void 0!==a.__webglUV2Buffer&&t.deleteBuffer(a.__webglUV2Buffer);void 0!==a.__webglSkinIndicesBuffer&&t.deleteBuffer(a.__webglSkinIndicesBuffer);void 0!==a.__webglSkinWeightsBuffer&&t.deleteBuffer(a.__webglSkinWeightsBuffer);void 0!==a.__webglFaceBuffer&&t.deleteBuffer(a.__webglFaceBuffer);void 0!==a.__webglLineBuffer&&t.deleteBuffer(a.__webglLineBuffer);void 0!==a.__webglLineDistanceBuffer&&t.deleteBuffer(a.__webglLineDistanceBuffer);if(void 0!==a.__webglCustomAttributesList)for(var b in a.__webglCustomAttributesList)t.deleteBuffer(a.__webglCustomAttributesList[b].buffer);
V.info.memory.geometries--},kb=function(a){var b=a.program;if(void 0!==b){a.program=void 0;var c,d,e=!1;a=0;for(c=R.length;a<c;a++)if(d=R[a],d.program===b){d.usedTimes--;0===d.usedTimes&&(e=!0);break}if(!0===e){e=[];a=0;for(c=R.length;a<c;a++)d=R[a],d.program!==b&&e.push(d);R=e;t.deleteProgram(b);V.info.memory.programs--}}};this.renderBufferDirect=function(a,b,c,d,e,f){if(!1!==d.visible){var k=u(a,b,c,d,f);a=k.attributes;c=e.attributes;b=!1;k=16777215*e.id+2*k.id+(d.wireframe?1:0);k!==aa&&(aa=k,b=
!0);b&&h();if(f instanceof THREE.Mesh)if(f=c.index){(c=e.offsets)&&1<c.length&&(b=!0);k=0;do{var l,m,n;c?(l=c[k].index,m=c[k].start,n=c[k].count):(m=l=0,n=f.array.length);b&&(g(d,a,e,l),!f.buffer&&e.streamingDraw?(l=qa.index,l||(l=t.createBuffer(),qa.index=l),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,l),t.bufferData(t.ELEMENT_ARRAY_BUFFER,f.array,t.DYNAMIC_DRAW)):t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,f.buffer));e.numInstances?Oa.drawElementsInstancedANGLE(e.isLines?
t.LINES:t.TRIANGLES,n,t.UNSIGNED_SHORT,2*m,e.numInstances):t.drawElements(e.isLines?t.LINES:t.TRIANGLES,n,t.UNSIGNED_SHORT,2*m)}while(c&&++k<c.length)}else b&&g(d,a,e,l),d=e.attributes.position,e.numInstances?Oa.drawArraysInstancedANGLE(e.isLines?t.LINE_STRIP:t.TRIANGLES,0,d.array.length/3,e.numInstances):t.drawArrays(e.isLines?t.LINE_STRIP:t.TRIANGLES,0,d.array.length/3);else console.log("Only THREE.Mesh can be rendered by the Firefly renderer. Use THREE.Mesh to draw lines.")}};this.renderBuffer=
function(a,b,c,d,e,g){if(!1!==d.visible){var k,l;c=u(a,b,c,d,g);b=c.attributes;a=!1;c=16777215*e.id+2*c.id+(d.wireframe?1:0);c!==aa&&(aa=c,a=!0);a&&h();!d.morphTargets&&0<=b.position&&a&&(t.bindBuffer(t.ARRAY_BUFFER,e.__webglVertexBuffer),f(b.position),t.vertexAttribPointer(b.position,3,t.FLOAT,!1,0,0));if(a){if(e.__webglCustomAttributesList)for(k=0,l=e.__webglCustomAttributesList.length;k<l;k++)c=e.__webglCustomAttributesList[k],0<=b[c.buffer.belongsToAttribute]&&(t.bindBuffer(t.ARRAY_BUFFER,c.buffer),
f(b[c.buffer.belongsToAttribute]),t.vertexAttribPointer(b[c.buffer.belongsToAttribute],c.size,t.FLOAT,!1,0,0));0<=b.color&&(0<g.geometry.colors.length||0<g.geometry.faces.length?(t.bindBuffer(t.ARRAY_BUFFER,e.__webglColorBuffer),f(b.color),t.vertexAttribPointer(b.color,3,t.FLOAT,!1,0,0)):d.defaultAttributeValues&&t.vertexAttrib3fv(b.color,d.defaultAttributeValues.color));0<=b.normal&&(t.bindBuffer(t.ARRAY_BUFFER,e.__webglNormalBuffer),f(b.normal),t.vertexAttribPointer(b.normal,3,t.FLOAT,!1,0,0));
0<=b.tangent&&(t.bindBuffer(t.ARRAY_BUFFER,e.__webglTangentBuffer),f(b.tangent),t.vertexAttribPointer(b.tangent,4,t.FLOAT,!1,0,0));0<=b.uv&&(g.geometry.faceVertexUvs[0]?(t.bindBuffer(t.ARRAY_BUFFER,e.__webglUVBuffer),f(b.uv),t.vertexAttribPointer(b.uv,2,t.FLOAT,!1,0,0)):d.defaultAttributeValues&&t.vertexAttrib2fv(b.uv,d.defaultAttributeValues.uv));0<=b.uv2&&(g.geometry.faceVertexUvs[1]?(t.bindBuffer(t.ARRAY_BUFFER,e.__webglUV2Buffer),f(b.uv2),t.vertexAttribPointer(b.uv2,2,t.FLOAT,!1,0,0)):d.defaultAttributeValues&&
t.vertexAttrib2fv(b.uv2,d.defaultAttributeValues.uv2));0<=b.lineDistance&&(t.bindBuffer(t.ARRAY_BUFFER,e.__webglLineDistanceBuffer),f(b.lineDistance),t.vertexAttribPointer(b.lineDistance,1,t.FLOAT,!1,0,0))}g instanceof THREE.Mesh?d.wireframe?(d=d.wireframeLinewidth,d!==Ea&&(t.lineWidth(d),Ea=d),a&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.__webglLineBuffer),t.drawElements(t.LINES,e.__webglLineCount,t.UNSIGNED_SHORT,0)):(a&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.__webglFaceBuffer),t.drawElements(t.TRIANGLES,
e.__webglFaceCount,t.UNSIGNED_SHORT,0)):g instanceof THREE.Line&&(g=g.type===THREE.LineStrip?t.LINE_STRIP:t.LINES,d=d.linewidth,d!==Ea&&(t.lineWidth(d),Ea=d),t.drawArrays(g,0,e.__webglLineCount))}};this.render=function(a,b,c,d){if(!1===b instanceof THREE.Camera)console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");else{var e,f,g,h,m=a.__lights,p=a.fog;M=-1;ra=!0;!0===a.autoUpdate&&a.updateMatrixWorld();void 0===b.parent&&b.updateMatrixWorld();b.matrixWorldInverse.getInverse(b.matrixWorld);
b.worldUpTransform?ua.multiplyMatrices(b.worldUpTransform,b.matrixWorld):ua.copy(b.matrixWorld);wa.multiplyMatrices(b.projectionMatrix,b.matrixWorldInverse);ta.setFromMatrix(wa);this.autoUpdateObjects&&this.initWebGLObjects(a);l(this.renderPluginsPre,a,b);this.setRenderTarget(c);(this.autoClear||d)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil);h=a.__webglObjects;d=0;for(e=h.length;d<e;d++)if(f=h[d],g=f.object,f.id=d,f.render=!1,g.visible&&(!(g instanceof THREE.Mesh&&g.frustumCulled)||
ta.intersectsObject(g))){var q=g;q._modelViewMatrix.multiplyMatrices(b.matrixWorldInverse,q.matrixWorld);q._normalMatrix.getNormalMatrix(q._modelViewMatrix);var q=f,z=q.object,s=q.buffer,r=z.geometry,z=z.material;z instanceof THREE.MeshFaceMaterial?(z=z.materials[r instanceof THREE.BufferGeometry?0:s.materialIndex],z.transparent?(q.transparent=z,q.opaque=null):(q.opaque=z,q.transparent=null)):z&&(z.transparent?(q.transparent=z,q.opaque=null):(q.opaque=z,q.transparent=null));f.render=!0;!0===this.sortObjects&&
(null!==g.renderDepth?f.z=g.renderDepth:(la.setFromMatrixPosition(g.matrixWorld),la.applyProjection(wa),f.z=la.z))}this.sortObjects&&h.sort(k);a.overrideMaterial?(d=a.overrideMaterial,this.setBlending(d.blending,d.blendEquation,d.blendSrc,d.blendDst),this.setDepthTest(d.depthTest),this.setDepthWrite(d.depthWrite),B(d.polygonOffset,d.polygonOffsetFactor,d.polygonOffsetUnits),n(a.__webglObjects,!1,"",b,m,p,!0,d)):(d=null,this.setBlending(THREE.NoBlending),n(a.__webglObjects,!0,"opaque",b,m,p,!1,d),
n(a.__webglObjects,!1,"transparent",b,m,p,!0,d));l(this.renderPluginsPost,a,b);c&&c.generateMipmaps&&c.minFilter!==THREE.NearestFilter&&c.minFilter!==THREE.LinearFilter&&(t.bindTexture(t.TEXTURE_2D,c.__webglTexture),t.generateMipmap(t.TEXTURE_2D),t.bindTexture(t.TEXTURE_2D,null));this.setDepthTest(!0);this.setDepthWrite(!0)}};this.endFrame=function(){};this.initWebGLObjects=function(a){a.__webglObjects||(a.__webglObjects=[]);for(;a.__objectsAdded.length;)m(a.__objectsAdded[0],a),a.__objectsAdded.splice(0,
1);for(;a.__objectsRemoved.length;)r(a.__objectsRemoved[0],a),a.__objectsRemoved.splice(0,1);for(var f=0,g=a.__webglObjects.length;f<g;f++){var k=a.__webglObjects[f].object;void 0===k.__webglInit&&(void 0!==k.__webglActive&&r(k,a),m(k,a));var h=k,l=h.geometry,n=void 0,p=void 0,z=void 0;if(l instanceof THREE.BufferGeometry){var D=l,J=t.DYNAMIC_DRAW,v=l.freeCPUBuffers;if(!D.streamingDraw){var u=D.attributes,E=!1,K=void 0,A=void 0;for(K in u)A=u[K],A.needsUpdate&&("index"===K?(t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,
A.buffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,A.array,J)):A.array?(t.bindBuffer(t.ARRAY_BUFFER,A.buffer),t.bufferData(t.ARRAY_BUFFER,A.array,J)):E=!0,A.needsUpdate=!1),v&&A.freeCPUBuffers&&(A.array=null);E&&(t.bindBuffer(t.ARRAY_BUFFER,D.vbbuffer),t.bufferData(t.ARRAY_BUFFER,D.vb,J),v&&D.freeCPUBuffers&&(D.vb=null))}}else if(h instanceof THREE.Mesh){for(var U=0,B=l.geometryGroupsList.length;U<B;U++)if(n=l.geometryGroupsList[U],z=c(h,n),l.buffersNeedUpdate&&b(n,h),p=z.attributes&&q(z),l.verticesNeedUpdate||
l.morphTargetsNeedUpdate||l.elementsNeedUpdate||l.uvsNeedUpdate||l.normalsNeedUpdate||l.colorsNeedUpdate||l.tangentsNeedUpdate||p){var w=n,V=h,R=t.DYNAMIC_DRAW,C=l.freeCPUBuffers,S=z;if(w.__inittedArrays){var G=e(S),M=S.vertexColors?S.vertexColors:!1,da=d(S),H=G===THREE.SmoothShading,O=void 0,F=void 0,N=void 0,I=void 0,ba=void 0,P=void 0,ca=void 0,aa=void 0,ea=void 0,Y=void 0,fa=void 0,X=void 0,Z=void 0,T=void 0,ha=void 0,na=void 0,ja=void 0,oa=void 0,ia=void 0,xa=void 0,ga=void 0,za=void 0,Ia=void 0,
qa=void 0,ra=void 0,ka=0,la=0,Ea=0,ta=0,wa=0,sa=0,ma=0,Da=0,ya=0,W=0,pa=void 0,ua=w.__vertexArray,La=w.__uvArray,Ga=w.__uv2Array,Ma=w.__normalArray,Ba=w.__tangentArray,Ka=w.__colorArray,Pa=w.__webglCustomAttributesList,Q=void 0,Oa=w.__faceArray,Na=w.__lineArray,Ha=V.geometry,Ta=Ha.elementsNeedUpdate,Sa=Ha.uvsNeedUpdate,Va=Ha.normalsNeedUpdate,Xa=Ha.tangentsNeedUpdate,Ya=Ha.colorsNeedUpdate,Wa=Ha.vertices,va=w.faces3,ab=Ha.faces,Za=Ha.faceVertexUvs[0],$a=Ha.faceVertexUvs[1];if(Ha.verticesNeedUpdate){O=
0;for(F=va.length;O<F;O++)I=ab[va[O]],X=Wa[I.a],Z=Wa[I.b],T=Wa[I.c],ua[la]=X.x,ua[la+1]=X.y,ua[la+2]=X.z,ua[la+3]=Z.x,ua[la+4]=Z.y,ua[la+5]=Z.z,ua[la+6]=T.x,ua[la+7]=T.y,ua[la+8]=T.z,la+=9;t.bindBuffer(t.ARRAY_BUFFER,w.__webglVertexBuffer);t.bufferData(t.ARRAY_BUFFER,ua,R)}if(Ya&&M){O=0;for(F=va.length;O<F;O++)I=ab[va[O]],ca=I.vertexColors,aa=I.color,3===ca.length&&M===THREE.VertexColors?(oa=ca[0],ia=ca[1],xa=ca[2]):xa=ia=oa=aa,Ka[ya]=oa.r,Ka[ya+1]=oa.g,Ka[ya+2]=oa.b,Ka[ya+3]=ia.r,Ka[ya+4]=ia.g,Ka[ya+
5]=ia.b,Ka[ya+6]=xa.r,Ka[ya+7]=xa.g,Ka[ya+8]=xa.b,ya+=9;0<ya&&(t.bindBuffer(t.ARRAY_BUFFER,w.__webglColorBuffer),t.bufferData(t.ARRAY_BUFFER,Ka,R))}if(Xa&&Ha.hasTangents){O=0;for(F=va.length;O<F;O++)I=ab[va[O]],ea=I.vertexTangents,ha=ea[0],na=ea[1],ja=ea[2],Ba[ma]=ha.x,Ba[ma+1]=ha.y,Ba[ma+2]=ha.z,Ba[ma+3]=ha.w,Ba[ma+4]=na.x,Ba[ma+5]=na.y,Ba[ma+6]=na.z,Ba[ma+7]=na.w,Ba[ma+8]=ja.x,Ba[ma+9]=ja.y,Ba[ma+10]=ja.z,Ba[ma+11]=ja.w,ma+=12;t.bindBuffer(t.ARRAY_BUFFER,w.__webglTangentBuffer);t.bufferData(t.ARRAY_BUFFER,
Ba,R)}if(Va&&G){O=0;for(F=va.length;O<F;O++)if(I=ab[va[O]],ba=I.vertexNormals,P=I.normal,3===ba.length&&H)for(ga=0;3>ga;ga++)Ia=ba[ga],Ma[sa]=Ia.x,Ma[sa+1]=Ia.y,Ma[sa+2]=Ia.z,sa+=3;else for(ga=0;3>ga;ga++)Ma[sa]=P.x,Ma[sa+1]=P.y,Ma[sa+2]=P.z,sa+=3;t.bindBuffer(t.ARRAY_BUFFER,w.__webglNormalBuffer);t.bufferData(t.ARRAY_BUFFER,Ma,R)}if(Sa&&Za&&da){O=0;for(F=va.length;O<F;O++)if(N=va[O],Y=Za[N],void 0!==Y)for(ga=0;3>ga;ga++)qa=Y[ga],La[Ea]=qa.x,La[Ea+1]=qa.y,Ea+=2;0<Ea&&(t.bindBuffer(t.ARRAY_BUFFER,
w.__webglUVBuffer),t.bufferData(t.ARRAY_BUFFER,La,R))}if(Sa&&$a&&da){O=0;for(F=va.length;O<F;O++)if(N=va[O],fa=$a[N],void 0!==fa)for(ga=0;3>ga;ga++)ra=fa[ga],Ga[ta]=ra.x,Ga[ta+1]=ra.y,ta+=2;0<ta&&(t.bindBuffer(t.ARRAY_BUFFER,w.__webglUV2Buffer),t.bufferData(t.ARRAY_BUFFER,Ga,R))}if(Ta){O=0;for(F=va.length;O<F;O++)Oa[wa]=ka,Oa[wa+1]=ka+1,Oa[wa+2]=ka+2,wa+=3,Na[Da]=ka,Na[Da+1]=ka+1,Na[Da+2]=ka,Na[Da+3]=ka+2,Na[Da+4]=ka+1,Na[Da+5]=ka+2,Da+=6,ka+=3;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,w.__webglFaceBuffer);
t.bufferData(t.ELEMENT_ARRAY_BUFFER,Oa,R);t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,w.__webglLineBuffer);t.bufferData(t.ELEMENT_ARRAY_BUFFER,Na,R)}if(Pa)for(ga=0,za=Pa.length;ga<za;ga++)if(Q=Pa[ga],Q.__original.needsUpdate){W=0;if(1===Q.size)if(void 0===Q.boundTo||"vertices"===Q.boundTo)for(O=0,F=va.length;O<F;O++)I=ab[va[O]],Q.array[W]=Q.value[I.a],Q.array[W+1]=Q.value[I.b],Q.array[W+2]=Q.value[I.c],W+=3;else{if("faces"===Q.boundTo)for(O=0,F=va.length;O<F;O++)pa=Q.value[va[O]],Q.array[W]=pa,Q.array[W+
1]=pa,Q.array[W+2]=pa,W+=3}else if(2===Q.size)if(void 0===Q.boundTo||"vertices"===Q.boundTo)for(O=0,F=va.length;O<F;O++)I=ab[va[O]],X=Q.value[I.a],Z=Q.value[I.b],T=Q.value[I.c],Q.array[W]=X.x,Q.array[W+1]=X.y,Q.array[W+2]=Z.x,Q.array[W+3]=Z.y,Q.array[W+4]=T.x,Q.array[W+5]=T.y,W+=6;else{if("faces"===Q.boundTo)for(O=0,F=va.length;O<F;O++)T=Z=X=pa=Q.value[va[O]],Q.array[W]=X.x,Q.array[W+1]=X.y,Q.array[W+2]=Z.x,Q.array[W+3]=Z.y,Q.array[W+4]=T.x,Q.array[W+5]=T.y,W+=6}else if(3===Q.size){var Fa;Fa="c"===
Q.type?["r","g","b"]:["x","y","z"];if(void 0===Q.boundTo||"vertices"===Q.boundTo)for(O=0,F=va.length;O<F;O++)I=ab[va[O]],X=Q.value[I.a],Z=Q.value[I.b],T=Q.value[I.c],Q.array[W]=X[Fa[0]],Q.array[W+1]=X[Fa[1]],Q.array[W+2]=X[Fa[2]],Q.array[W+3]=Z[Fa[0]],Q.array[W+4]=Z[Fa[1]],Q.array[W+5]=Z[Fa[2]],Q.array[W+6]=T[Fa[0]],Q.array[W+7]=T[Fa[1]],Q.array[W+8]=T[Fa[2]],W+=9;else if("faces"===Q.boundTo)for(O=0,F=va.length;O<F;O++)T=Z=X=pa=Q.value[va[O]],Q.array[W]=X[Fa[0]],Q.array[W+1]=X[Fa[1]],Q.array[W+2]=
X[Fa[2]],Q.array[W+3]=Z[Fa[0]],Q.array[W+4]=Z[Fa[1]],Q.array[W+5]=Z[Fa[2]],Q.array[W+6]=T[Fa[0]],Q.array[W+7]=T[Fa[1]],Q.array[W+8]=T[Fa[2]],W+=9;else if("faceVertices"===Q.boundTo)for(O=0,F=va.length;O<F;O++)pa=Q.value[va[O]],X=pa[0],Z=pa[1],T=pa[2],Q.array[W]=X[Fa[0]],Q.array[W+1]=X[Fa[1]],Q.array[W+2]=X[Fa[2]],Q.array[W+3]=Z[Fa[0]],Q.array[W+4]=Z[Fa[1]],Q.array[W+5]=Z[Fa[2]],Q.array[W+6]=T[Fa[0]],Q.array[W+7]=T[Fa[1]],Q.array[W+8]=T[Fa[2]],W+=9}else if(4===Q.size)if(void 0===Q.boundTo||"vertices"===
Q.boundTo)for(O=0,F=va.length;O<F;O++)I=ab[va[O]],X=Q.value[I.a],Z=Q.value[I.b],T=Q.value[I.c],Q.array[W]=X.x,Q.array[W+1]=X.y,Q.array[W+2]=X.z,Q.array[W+3]=X.w,Q.array[W+4]=Z.x,Q.array[W+5]=Z.y,Q.array[W+6]=Z.z,Q.array[W+7]=Z.w,Q.array[W+8]=T.x,Q.array[W+9]=T.y,Q.array[W+10]=T.z,Q.array[W+11]=T.w,W+=12;else if("faces"===Q.boundTo)for(O=0,F=va.length;O<F;O++)T=Z=X=pa=Q.value[va[O]],Q.array[W]=X.x,Q.array[W+1]=X.y,Q.array[W+2]=X.z,Q.array[W+3]=X.w,Q.array[W+4]=Z.x,Q.array[W+5]=Z.y,Q.array[W+6]=Z.z,
Q.array[W+7]=Z.w,Q.array[W+8]=T.x,Q.array[W+9]=T.y,Q.array[W+10]=T.z,Q.array[W+11]=T.w,W+=12;else if("faceVertices"===Q.boundTo)for(O=0,F=va.length;O<F;O++)pa=Q.value[va[O]],X=pa[0],Z=pa[1],T=pa[2],Q.array[W]=X.x,Q.array[W+1]=X.y,Q.array[W+2]=X.z,Q.array[W+3]=X.w,Q.array[W+4]=Z.x,Q.array[W+5]=Z.y,Q.array[W+6]=Z.z,Q.array[W+7]=Z.w,Q.array[W+8]=T.x,Q.array[W+9]=T.y,Q.array[W+10]=T.z,Q.array[W+11]=T.w,W+=12;t.bindBuffer(t.ARRAY_BUFFER,Q.buffer);t.bufferData(t.ARRAY_BUFFER,Q.array,R)}C&&(delete w.__inittedArrays,
delete w.__colorArray,delete w.__normalArray,delete w.__tangentArray,delete w.__uvArray,delete w.__uv2Array,delete w.__faceArray,delete w.__vertexArray,delete w.__lineArray,delete w.__skinIndexArray,delete w.__skinWeightArray)}}l.verticesNeedUpdate=!1;l.morphTargetsNeedUpdate=!1;l.elementsNeedUpdate=!1;l.uvsNeedUpdate=!1;l.normalsNeedUpdate=!1;l.colorsNeedUpdate=!1;l.tangentsNeedUpdate=!1;l.buffersNeedUpdate=!1;z.attributes&&s(z)}else if(h instanceof THREE.Line){z=c(h,l);p=z.attributes&&q(z);if(l.verticesNeedUpdate||
l.colorsNeedUpdate||l.lineDistancesNeedUpdate||p){var Ua=l,mb=t.DYNAMIC_DRAW,fb=void 0,gb=void 0,hb=void 0,nb=void 0,Ca=void 0,ob=void 0,bb=Ua.vertices,db=Ua.colors,eb=Ua.lineDistances,ib=bb.length,jb=db.length,kb=eb.length,pb=Ua.__vertexArray,qb=Ua.__colorArray,tb=Ua.__lineDistanceArray,vb=Ua.colorsNeedUpdate,wb=Ua.lineDistancesNeedUpdate,sb=Ua.__webglCustomAttributesList,rb=void 0,ub=void 0,Ja=void 0,cb=void 0,Ra=void 0,Aa=void 0;if(Ua.verticesNeedUpdate){for(fb=0;fb<ib;fb++)nb=bb[fb],Ca=3*fb,pb[Ca]=
nb.x,pb[Ca+1]=nb.y,pb[Ca+2]=nb.z;t.bindBuffer(t.ARRAY_BUFFER,Ua.__webglVertexBuffer);t.bufferData(t.ARRAY_BUFFER,pb,mb)}if(vb){for(gb=0;gb<jb;gb++)ob=db[gb],Ca=3*gb,qb[Ca]=ob.r,qb[Ca+1]=ob.g,qb[Ca+2]=ob.b;t.bindBuffer(t.ARRAY_BUFFER,Ua.__webglColorBuffer);t.bufferData(t.ARRAY_BUFFER,qb,mb)}if(wb){for(hb=0;hb<kb;hb++)tb[hb]=eb[hb];t.bindBuffer(t.ARRAY_BUFFER,Ua.__webglLineDistanceBuffer);t.bufferData(t.ARRAY_BUFFER,tb,mb)}if(sb)for(rb=0,ub=sb.length;rb<ub;rb++)if(Aa=sb[rb],Aa.needsUpdate&&(void 0===
Aa.boundTo||"vertices"===Aa.boundTo)){Ca=0;cb=Aa.value.length;if(1===Aa.size)for(Ja=0;Ja<cb;Ja++)Aa.array[Ja]=Aa.value[Ja];else if(2===Aa.size)for(Ja=0;Ja<cb;Ja++)Ra=Aa.value[Ja],Aa.array[Ca]=Ra.x,Aa.array[Ca+1]=Ra.y,Ca+=2;else if(3===Aa.size)if("c"===Aa.type)for(Ja=0;Ja<cb;Ja++)Ra=Aa.value[Ja],Aa.array[Ca]=Ra.r,Aa.array[Ca+1]=Ra.g,Aa.array[Ca+2]=Ra.b,Ca+=3;else for(Ja=0;Ja<cb;Ja++)Ra=Aa.value[Ja],Aa.array[Ca]=Ra.x,Aa.array[Ca+1]=Ra.y,Aa.array[Ca+2]=Ra.z,Ca+=3;else if(4===Aa.size)for(Ja=0;Ja<cb;Ja++)Ra=
Aa.value[Ja],Aa.array[Ca]=Ra.x,Aa.array[Ca+1]=Ra.y,Aa.array[Ca+2]=Ra.z,Aa.array[Ca+3]=Ra.w,Ca+=4;t.bindBuffer(t.ARRAY_BUFFER,Aa.buffer);t.bufferData(t.ARRAY_BUFFER,Aa.array,mb)}}l.verticesNeedUpdate=!1;l.colorsNeedUpdate=!1;l.lineDistancesNeedUpdate=!1;z.attributes&&s(z)}}};this.initMaterial=function(a,b,c,d){a.addEventListener("dispose",ib);var e,f;a instanceof THREE.MeshDepthMaterial?f="depth":a instanceof THREE.MeshNormalMaterial?console.log("MeshNormalMaterial is turned off."):a instanceof THREE.MeshBasicMaterial?
f="basic":a instanceof THREE.MeshLambertMaterial?console.log("MeshLambertMaterial is turned off."):a instanceof THREE.MeshPhongMaterial?f="phong":a instanceof THREE.LineBasicMaterial?f="basic":a instanceof THREE.LineDashedMaterial&&(f="dashed");if(f){var g=THREE.ShaderLib[f];a.uniforms=THREE.UniformsUtils.clone(g.uniforms);a.vertexShader=g.vertexShader;a.fragmentShader=g.fragmentShader}for(var k=0,h=0,l=0,m=0,g=0,n=b.length;g<n;g++){var p=b[g];p.onlyShadow||(p instanceof THREE.DirectionalLight&&k++,
p instanceof THREE.PointLight&&h++,p instanceof THREE.SpotLight&&l++,p instanceof THREE.HemisphereLight&&m++)}for(var z=0,g=0,n=b.length;g<n;g++)p=b[g],p.castShadow&&(p instanceof THREE.SpotLight&&z++,p instanceof THREE.DirectionalLight&&!p.shadowCascade&&z++);var q;a:{n=a.fragmentShader;p=a.vertexShader;g=a.uniforms;b=a.attributes;var s=a.defines;d={map:!!a.map,envMap:!!a.envMap,irradianceMap:!!a.irradianceMap,envIsSpherical:a.envMap&&a.envMap.mapping instanceof THREE.SphericalReflectionMapping,
envLogLuv:a.envMap&&a.envMap.LogLuv,irrLogLuv:a.irradianceMap&&a.irradianceMap.LogLuv,lightMap:!!a.lightMap,bumpMap:Ba&&!!a.bumpMap,normalMap:Ba&&!!a.normalMap,specularMap:!!a.specularMap,alphaMap:!!a.alphaMap,vertexColors:a.vertexColors,fog:c,useFog:a.fog,fogExp:c instanceof THREE.FogExp2,sizeAttenuation:a.sizeAttenuation,maxDirLights:k,maxPointLights:h,maxSpotLights:l,maxHemiLights:m,maxShadows:z,shadowMapEnabled:this.shadowMapEnabled&&d.receiveShadow,shadowMapType:this.shadowMapType,shadowMapDebug:this.shadowMapDebug,
shadowMapCascade:this.shadowMapCascade,alphaTest:a.alphaTest,metal:a.metal,clearcoat:a.clearcoat,wrapAround:a.wrapAround,doubleSided:a.side===THREE.DoubleSide,flipSided:a.side===THREE.BackSide,mrtNormals:Ta&&a.mrtNormals};c=a.index0AttributeName;var r,D,J,k=[];f?k.push(f):(k.push(n),k.push(p));for(D in s)k.push(D),k.push(s[D]);for(r in d)k.push(r),k.push(d[r]);f=k.join();r=0;for(D=R.length;r<D;r++)if(k=R[r],k.code===f){k.usedTimes++;q=k.program;break a}r="SHADOWMAP_TYPE_BASIC";d.shadowMapType===THREE.PCFShadowMap?
r="SHADOWMAP_TYPE_PCF":d.shadowMapType===THREE.PCFSoftShadowMap&&(r="SHADOWMAP_TYPE_PCF_SOFT");D=[];for(J in s)k=s[J],!1!==k&&(k="#define "+J+" "+k,D.push(k));s=D.join("\n");J=t.createProgram();D=["precision "+P+" float;","precision "+P+" int;",s,Za?"#define VERTEX_TEXTURES":"",V.gammaInput?"#define GAMMA_INPUT":"",V.gammaOutput?"#define GAMMA_OUTPUT":"",d.mrtNormals?"#define MRT_NORMALS":"","#define MAX_DIR_LIGHTS "+d.maxDirLights,"#define MAX_POINT_LIGHTS "+d.maxPointLights,"#define MAX_SPOT_LIGHTS "+
d.maxSpotLights,"#define MAX_HEMI_LIGHTS "+d.maxHemiLights,"#define MAX_SHADOWS "+d.maxShadows,"#define MAX_BONES "+d.maxBones,d.map?"#define USE_MAP":"",d.envMap?"#define USE_ENVMAP":"",d.irradianceMap?"#define USE_IRRADIANCEMAP":"",d.lightMap?"#define USE_LIGHTMAP":"",d.bumpMap?"#define USE_BUMPMAP":"",d.normalMap?"#define USE_NORMALMAP":"",d.specularMap?"#define USE_SPECULARMAP":"",d.alphaMap?"#define USE_ALPHAMAP":"",d.vertexColors?"#define USE_COLOR":"",d.wrapAround?"#define WRAP_AROUND":"",
d.doubleSided?"#define DOUBLE_SIDED":"",d.flipSided?"#define FLIP_SIDED":"",d.shadowMapEnabled?"#define USE_SHADOWMAP":"",d.shadowMapEnabled?"#define "+r:"",d.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",d.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",d.sizeAttenuation?"#define USE_SIZEATTENUATION":"","uniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 cameraPosition;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\nattribute vec2 uv2;\n#ifdef USE_COLOR\nattribute vec3 color;\n#endif\n"].join("\n");
r=["precision "+P+" float;","precision "+P+" int;",d.bumpMap||d.normalMap?"#extension GL_OES_standard_derivatives : enable":"",s,"#define MAX_DIR_LIGHTS "+d.maxDirLights,"#define MAX_POINT_LIGHTS "+d.maxPointLights,"#define MAX_SPOT_LIGHTS "+d.maxSpotLights,"#define MAX_HEMI_LIGHTS "+d.maxHemiLights,"#define MAX_SHADOWS "+d.maxShadows,d.alphaTest?"#define ALPHATEST "+d.alphaTest:"",d.mrtNormals?"#define MRT_NORMALS":"",V.gammaInput?"#define GAMMA_INPUT":"",V.gammaOutput?"#define GAMMA_OUTPUT":"",
d.useFog&&d.fog?"#define USE_FOG":"",d.useFog&&d.fogExp?"#define FOG_EXP2":"",d.map?"#define USE_MAP":"",d.envMap?"#define USE_ENVMAP":"",d.irradianceMap?"#define USE_IRRADIANCEMAP":"",d.envLogLuv?"#define ENV_LOGLUV":"",d.irrLogLuv?"#define IRR_LOGLUV":"",d.lightMap?"#define USE_LIGHTMAP":"",d.bumpMap?"#define USE_BUMPMAP":"",d.normalMap?"#define USE_NORMALMAP":"",d.specularMap?"#define USE_SPECULARMAP":"",d.alphaMap?"#define USE_ALPHAMAP":"",d.vertexColors?"#define USE_COLOR":"",d.metal?"#define METAL":
"",d.clearcoat?"#define CLEARCOAT":"",d.wrapAround?"#define WRAP_AROUND":"",d.doubleSided?"#define DOUBLE_SIDED":"",d.flipSided?"#define FLIP_SIDED":"",d.shadowMapEnabled?"#define USE_SHADOWMAP":"",d.shadowMapEnabled?"#define "+r:"",d.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",d.shadowMapCascade?"#define SHADOWMAP_CASCADE":"","uniform mat4 viewMatrix;\nuniform vec3 cameraPosition;\n#ifdef USE_ENVMAP\nuniform mat4 viewMatrixInverse;\n#endif\n"].join("\n");p=N("vertex",D+p);n=N("fragment",r+n);t.attachShader(J,
p);t.attachShader(J,n);c&&t.bindAttribLocation(J,0,c);t.linkProgram(J);t.getProgramParameter(J,t.LINK_STATUS)||(console.error("Could not initialise shader\nVALIDATE_STATUS: "+t.getProgramParameter(J,t.VALIDATE_STATUS)+", gl error ["+t.getError()+"]"),console.error("Program Info Log: "+t.getProgramInfoLog(J)));t.deleteShader(n);t.deleteShader(p);J.uniforms={};J.attributes={};var v,n="viewMatrix modelViewMatrix projectionMatrix normalMatrix modelMatrix cameraPosition viewMatrixInverse".split(" ");for(v in g)n.push(v);
v=n;g=0;for(n=v.length;g<n;g++)p=v[g],J.uniforms[p]=t.getUniformLocation(J,p);n="position normal uv uv2 color lineDistance".split(" ");for(q in b)n.push(q);q=n;v=0;for(b=q.length;v<b;v++)g=q[v],J.attributes[g]=t.getAttribLocation(J,g);J.id=da++;R.push({program:J,code:f,usedTimes:1});V.info.memory.programs=R.length;q=J}a.program=q;a.uniformsList=[];for(e in a.uniforms)a.uniformsList.push([a.uniforms[e],e])};this.setFaceCulling=function(a,b){a===THREE.CullFaceNone?t.disable(t.CULL_FACE):(b===THREE.FrontFaceDirectionCW?
t.frontFace(t.CW):t.frontFace(t.CCW),a===THREE.CullFaceBack?t.cullFace(t.BACK):a===THREE.CullFaceFront?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK),t.enable(t.CULL_FACE))};this.setMaterialFaces=function(a){var b=a.side===THREE.DoubleSide;a=a.side===THREE.BackSide;na!==b&&(b?t.disable(t.CULL_FACE):t.enable(t.CULL_FACE),na=b);ja!==a&&(a?t.frontFace(t.CW):t.frontFace(t.CCW),ja=a)};this.setDepthTest=function(a){Da!==a&&(a?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),Da=a)};this.setDepthWrite=function(a){La!==
a&&(t.depthMask(a),La=a)};this.setBlending=function(a,b,c,d){a!==ka&&(a===THREE.NoBlending?t.disable(t.BLEND):a===THREE.AdditiveBlending?(t.enable(t.BLEND),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.SRC_ALPHA,t.ONE)):a===THREE.SubtractiveBlending?(t.enable(t.BLEND),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.ONE_MINUS_SRC_COLOR)):a===THREE.MultiplyBlending?(t.enable(t.BLEND),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.SRC_COLOR)):a===THREE.CustomBlending?t.enable(t.BLEND):(t.enable(t.BLEND),
t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA)),ka=a);if(a===THREE.CustomBlending){if(b!==X&&(t.blendEquation(H(b)),X=b),c!==Z||d!==oa)t.blendFunc(H(c),H(d)),Z=c,oa=d}else oa=Z=X=null};this.setTexture=function(a,b){if(a.needsUpdate){a.__webglInit||(a.__webglInit=!0,a.addEventListener("dispose",bb),a.__webglTexture=t.createTexture(),V.info.memory.textures++);t.activeTexture(t.TEXTURE0+b);t.bindTexture(t.TEXTURE_2D,a.__webglTexture);
t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,a.flipY);t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultiplyAlpha);t.pixelStorei(t.UNPACK_ALIGNMENT,a.unpackAlignment);var c=a.image,d=0===(c.width&c.width-1)&&0===(c.height&c.height-1),e=H(a.format),f=H(a.type);G(t.TEXTURE_2D,a,d);var g=a.mipmaps;if(a instanceof THREE.DataTexture)if(0<g.length&&d){for(var k=0,h=g.length;k<h;k++)c=g[k],t.texImage2D(t.TEXTURE_2D,k,e,c.width,c.height,0,e,f,c.data);a.generateMipmaps=!1}else t.texImage2D(t.TEXTURE_2D,0,e,c.width,
c.height,0,e,f,c.data);else if(a instanceof THREE.CompressedTexture)for(k=0,h=g.length;k<h;k++)c=g[k],a.format!==THREE.RGBAFormat?t.compressedTexImage2D(t.TEXTURE_2D,k,e,c.width,c.height,0,c.data):t.texImage2D(t.TEXTURE_2D,k,e,c.width,c.height,0,e,f,c.data);else if(0<g.length&&d){k=0;for(h=g.length;k<h;k++)c=g[k],t.texImage2D(t.TEXTURE_2D,k,e,e,f,c);a.generateMipmaps=!1}else t.texImage2D(t.TEXTURE_2D,0,e,e,f,a.image);a.generateMipmaps&&d&&t.generateMipmap(t.TEXTURE_2D);a.needsUpdate=!1;if(a.onUpdate)a.onUpdate()}else t.activeTexture(t.TEXTURE0+
b),t.bindTexture(t.TEXTURE_2D,a.__webglTexture)};this.initFrameBufferMRT=function(a,b){var c=a[0],d=!1;if(c&&!c.__webglFramebuffer){void 0===c.depthBuffer&&(c.depthBuffer=!0);void 0===c.stencilBuffer&&(c.stencilBuffer=!0);c.__webglFramebuffer=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,c.__webglFramebuffer);var e;c.shareDepthFrom?e=c.__webglRenderbuffer=c.shareDepthFrom.__webglRenderbuffer:c.depthBuffer&&!c.stencilBuffer?(e=c.__webglRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,
e),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,c.width,c.height)):c.depthBuffer&&c.stencilBuffer&&(e=c.__webglRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,e),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,c.width,c.height));c.depthBuffer&&!c.stencilBuffer?t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e):c.depthBuffer&&c.stencilBuffer&&t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e);d=!0}e=
ba;t.bindFramebuffer(t.FRAMEBUFFER,c.__webglFramebuffer);for(var f=0;f<a.length;f++){var g=a[f];if(!g.__webglTexture){var k=0===(g.width&g.width-1)&&0===(g.height&g.height-1),h=H(g.format),l=H(g.type);g.addEventListener("dispose",eb);g.__webglTexture=t.createTexture();V.info.memory.textures++;t.bindTexture(t.TEXTURE_2D,g.__webglTexture);G(t.TEXTURE_2D,g,k);t.texImage2D(t.TEXTURE_2D,0,h,g.width,g.height,0,h,l,null);k&&g.generateMipmaps&&t.generateMipmap(t.TEXTURE_2D)}t.framebufferTexture2D(t.FRAMEBUFFER,
t.COLOR_ATTACHMENT0+f,t.TEXTURE_2D,g.__webglTexture,0)}Ta&&1<a.length&&Ha.drawBuffersWEBGL([Ha.COLOR_ATTACHMENT0_WEBGL,Ha.COLOR_ATTACHMENT1_WEBGL]);b&&(f=t.checkFramebufferStatus(t.FRAMEBUFFER),f!==t.FRAMEBUFFER_COMPLETE&&(console.log("Can't use multiple render targets. Falling back to two passes. "+f),delete c.__webglFramebuffer,b=!1));t.bindFramebuffer(t.FRAMEBUFFER,e);d&&(t.bindTexture(t.TEXTURE_2D,null),t.bindRenderbuffer(t.RENDERBUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null));return b};this.setRenderTarget=
function(a){var b;Array.isArray(a)?(this.initFrameBufferMRT(a),b=a[0]):a&&(this.initFrameBufferMRT([a]),b=a);var c,d,e;b?(a=b.__webglFramebuffer,c=b.width,b=b.height,e=d=0):(a=null,c=fa,b=ha,d=za,e=Ia);a!==ba&&(t.bindFramebuffer(t.FRAMEBUFFER,a),t.viewport(d,e,c,b),ba=a);pa=c;Ga=b};this.readPixels=function(a,b,c,d,e,f){this.setRenderTarget(a);t.readPixels(b,c,d,e,t.RGBA,t.UNSIGNED_BYTE,f)};this.verifyMRTWorks=function(a){Ha&&(Ta=this.initFrameBufferMRT(a,!0));return Ta};this.shadowMapPlugin=new THREE.ShadowMapPlugin;
this.addPrePlugin(this.shadowMapPlugin)};AutodeskNamespace("Autodesk.Viewing.Private");
(function(){var a=Autodesk.Viewing.Private;a.BackgroundPresets={"Fusion Grey":[230,230,230,150,150,150],"Sky Blue":[200,233,255,100,116,127],Midnight:[41,76,120,1,2,3],White:[255,255,255,255,255,255],AutoCADModel:[30,40,48,30,40,48],"Dark Grey":[51,51,51,51,51,51],"Infinity Pool":[164,175,179,164,175,179],Tranquility:[0,84,166,0,84,166],"Grey Room":[129,129,129,129,129,129],"Photo Booth":[237,237,237,237,237,237],"RaaS SBS":[1,1,1,90,90,90],Custom:[230,230,230,150,150,150]};var b=a.BackgroundPresets;
a.LightPresets=[{name:"Simple Grey",path:null,tonemap:0,E_bias:0,directLightColor:[1,0.84,0.67],ambientColor:[0.8,0.9,1],lightMultiplier:1,bgColorGradient:b["Fusion Grey"],darkerFade:!1},{name:"Sharp Highlights",path:"studio_01",tonemap:1,E_bias:-9,directLightColor:[0.5,0.5,0.5],ambientColor:[0.25,0.25,0.25],lightMultiplier:1,bgColorGradient:b["Photo Booth"],darkerFade:!0},{name:"Dark Sky",path:"DarkSky",tonemap:1,E_bias:-2,directLightColor:[1,1,1],ambientColor:[0,0,0],lightMultiplier:2.5,bgColorGradient:b["Dark Grey"],
darkerFade:!1},{name:"Grey Room",path:"GreyRoom",tonemap:1,E_bias:1,directLightColor:[1,1,1],ambientColor:[0,0,0],lightMultiplier:0,bgColorGradient:b["Grey Room"],darkerFade:!0},{name:"Photo Booth",path:"PhotoBooth",tonemap:1,E_bias:0,directLightColor:[1,1,1],ambientColor:[0.125,0.125,0.125],lightMultiplier:1,bgColorGradient:b["Photo Booth"],darkerFade:!0},{name:"Tranquility",path:"TranquilityBlue",tonemap:1,E_bias:-2,directLightColor:[1,1,1],ambientColor:[0,0,0],lightMultiplier:4,bgColorGradient:b.Tranquility,
darkerFade:!1},{name:"Infinity Pool",path:"InfinityPool",tonemap:1,E_bias:-1,directLightColor:[1,0.84,0.67],ambientColor:[0,0,0],lightMultiplier:2.5,bgColorGradient:b["Infinity Pool"],darkerFade:!1},{name:"Simple White",path:null,tonemap:0,E_bias:0,directLightColor:[1,1,1],ambientColor:[0.9,0.9,0.9],lightMultiplier:1,bgColorGradient:b.White,saoRadius:0.06,saoIntensity:0.15,darkerFade:!0},{name:"Riverbank",path:"riverbank",tonemap:1,E_bias:-5.7,directLightColor:[1,1,1],lightMultiplier:0,bgColorGradient:b["Sky Blue"],
darkerFade:!1},{name:"Contrast",path:"IDViz",tonemap:1,E_bias:0,directLightColor:[1,1,1],lightMultiplier:0,bgColorGradient:b.Midnight,darkerFade:!1},{name:"Rim Highlights",path:"RimHighlights",tonemap:1,E_bias:-9,directLightColor:[0.5,0.5,0.5],ambientColor:[0.25,0.25,0.25],lightMultiplier:1,bgColorGradient:b["Photo Booth"],darkerFade:!0},{name:"Cool Light",path:"CoolLight",tonemap:1,E_bias:-9,directLightColor:[0.5,0.5,0.5],ambientColor:[0.25,0.25,0.25],lightMultiplier:1,bgColorGradient:b["Photo Booth"],
darkerFade:!0},{name:"Warm Light",path:"WarmLight",tonemap:1,E_bias:-9,directLightColor:[0.5,0.5,0.5],ambientColor:[0.25,0.25,0.25],lightMultiplier:1,bgColorGradient:b["Photo Booth"],darkerFade:!0},{name:"Soft Light",path:"SoftLight",tonemap:1,E_bias:-9,directLightColor:[0.5,0.5,0.5],ambientColor:[0.25,0.25,0.25],lightMultiplier:1,bgColorGradient:b["Photo Booth"],darkerFade:!0},{name:"Grid Light",path:"GridLight",tonemap:1,E_bias:-9,directLightColor:[0.5,0.5,0.5],ambientColor:[0.25,0.25,0.25],lightMultiplier:1,
bgColorGradient:b["Photo Booth"],darkerFade:!0},{name:"Plaza",path:"Plaza",tonemap:1,E_bias:-13,directLightColor:[1,1,1],ambientColor:[0.25,0.25,0.25],lightMultiplier:1,bgColorGradient:b["Sky Blue"],darkerFade:!1},{name:"Snow Field",path:"SnowField",tonemap:1,E_bias:-11.5,directLightColor:[0.8,0.8,0.8],ambientColor:[0.25,0.25,0.25],lightMultiplier:1,bgColorGradient:b["Sky Blue"],darkerFade:!1}];a.DebugEnvironments=[{name:"Field",path:"field",tonemap:1,E_bias:-2.9,directLightColor:[1,1,1],lightMultiplier:0,
bgColorGradient:b["Sky Blue"],darkerFade:!1},{name:"Crossroads",path:"crossroads",tonemap:1,E_bias:-5.5,directLightColor:[1,1,1],lightMultiplier:0,bgColorGradient:b["Sky Blue"],darkerFade:!1},{name:"Seaport",path:"seaport",tonemap:1,E_bias:-6.5,directLightColor:[1,1,1],lightMultiplier:0,bgColorGradient:b["Sky Blue"],darkerFade:!1},{name:"Glacier",path:"glacier",tonemap:1,E_bias:0,directLightColor:[1,1,1],lightMultiplier:0,bgColorGradient:b.Midnight,darkerFade:!1},{name:"Boardwalk",path:"boardwalk",
tonemap:1,E_bias:-7,directLightColor:[1,1,1],lightMultiplier:0,bgColorGradient:b["Sky Blue"],darkerFade:!1},{name:"RaaS Test Env",path:"Reflection",tonemap:2,E_bias:-1.5,directLightColor:[1,1,1],lightMultiplier:0,bgColorGradient:b["RaaS SBS"],darkerFade:!1},{name:"RaaS Test Env 2",path:"ReflectionBlinn",tonemap:2,E_bias:-1.5,directLightColor:[1,1,1],lightMultiplier:0,bgColorGradient:b["RaaS SBS"],darkerFade:!1}];ENABLE_DEBUG&&(a.LightPresets=a.LightPresets.concat(a.DebugEnvironments));a.CreateCubeMapFromColors=
function(a,b){for(var d=255*a.x,g=255*a.y,f=255*a.z,h=255*b.x,k=255*b.y,l=255*b.z,n=new Uint8Array(16),m=new Uint8Array(16),p=new Uint8Array(16),q=0;4>q;q++)n[4*q]=d,n[4*q+1]=g,n[4*q+2]=f,n[4*q+3]=255,m[4*q]=h,m[4*q+1]=k,m[4*q+2]=l,m[4*q+3]=255,0|q/2?(p[4*q]=d,p[4*q+1]=g,p[4*q+2]=f):(p[4*q]=h,p[4*q+1]=k,p[4*q+2]=l),p[4*q+3]=255;d=new THREE.DataTexture(p,2,2,THREE.RGBAFormat);g=new THREE.DataTexture(p,2,2,THREE.RGBAFormat);m=new THREE.DataTexture(m,2,2,THREE.RGBAFormat);n=new THREE.DataTexture(n,2,
2,THREE.RGBAFormat);f=new THREE.DataTexture(p,2,2,THREE.RGBAFormat);p=new THREE.DataTexture(p,2,2,THREE.RGBAFormat);h=new THREE.Texture(null,new THREE.CubeReflectionMapping,THREE.RepeatWrapping,THREE.RepeatWrapping,THREE.LinearFilter,THREE.LinearFilter,THREE.RGBAFormat);h.image=[g.image,d.image,n.image,m.image,p.image,f.image];h.needsUpdate=!0;return h};a.DefaultLightPreset=1})();AutodeskNamespace("Autodesk.Viewing.Private");
Autodesk.Viewing.Private.MaterialManager=function(a){function b(a){if("http://"==a.substr(0,7)||"https://"==a.substr(0,8)||"file:///"==a.substr(0,8)||"urn:"==a.substr(0,4))return a;var b=window.location.pathname,c=b.lastIndexOf("/"),b=b.substr(0,c+1);return window.location.protocol+"//"+window.location.host+b+a}function c(a){return-1!=a.indexOf("__lineMaterial__")}function e(a,b,c){auth&&(-1!=a.indexOf("/items/")?THREE.ImageUtils.crossOrigin="use-credentials":THREE.ImageUtils.crossOrigin="");return THREE.ImageUtils.loadTexture(a,
b,c)}var d=Autodesk.Viewing.Private,g=this,f=this.materials={};this.textures={};this.irradianceMap=this.reflectionCube=this.layerMaskTex=null;var h=[];this.defaultMaterial=new THREE.MeshPhongMaterial({ambient:197379,color:7829367,specular:3355443,shininess:30,shading:THREE.SmoothShading});this.findMaterial=function(a,b){var d=f[c(b)?b:a.basePath+"|mat|"+b];d||(stderr("Unknown material "+b+". Using default."),d=this.defaultMaterial);return d};this.convertMaterials=function(a){if(a.materials){var b=
a.materials.materials,d;for(d in b){var e=a.simplemats[d],f=c(d)?d:a.basePath+"|mat|"+d;if(e){e.color=(new THREE.Color).copy(e.color);e.ambient=(new THREE.Color).copy(e.ambient);e.specular=(new THREE.Color).copy(e.specular);e.emissive=(new THREE.Color).copy(e.emissive);var g=new THREE.MeshPhongMaterial(e);g.proteinType=e.proteinType;g.proteinMat=b[d];g.tag=e.tag;g.metal=e.metal;_isIE11||!e.doubleSided&&!a.doubleSided||(g.side=THREE.DoubleSide);for(var h in e)0==h.indexOf("uri_")&&(g[h]=e[h]),0==h.indexOf("uscale_")&&
(g[h]=e[h]),0==h.indexOf("vscale_")&&(g[h]=e[h])}else g=new THREE.MeshPhongMaterial({ambient:197379,color:7829367,specular:3355443,shininess:30,shading:THREE.SmoothShading}),g.proteinMat=b[d];this.addMaterial(f,g)}}};this.updateMaterials=function(){for(;h.length;)for(var b=h.pop(),c=0;c<b.mats.length;c++)b.mats[c][b.slot]=b.tex,b.mats[c].needsUpdate=!0,a.invalidate(!0,!1,!1)};this.loadTextures=function(c){for(var d in f){var n=f[d];if(n){var m=function(a){for(var b=g.textures[a.name],c=0;c<b.mats.length;c++)b.mats[c][b.slots[c]]=
a;h.push(b)},p=["map","bumpMap","specularMap","normalMap","alphaMap"];n.bumpScale&&1<=n.bumpScale&&(n.bumpScale=0.03);for(var q=0;q<p.length;q++){var s=n["uri_"+p[q]];if(s)if(g.textures[s])g.textures[s].mats.push(n),g.textures[s].slots.push(p[q]);else{var r="envMap"==p[q],s=s.replace(/\\/g,"/"),u=b(c.basePath+s),w=u.indexOf("urn:");-1!=w&&(u=u.substr(0,w)+encodeURIComponent(u.substr(w)),u+="?domain="+window.location.hostname);var w=n["uscale_"+p[q]],A=n["vscale_"+p[q]];w||(w=1);A||(A=1);u=r?e(u,new THREE.SphericalReflectionMapping,
m):e(u,new THREE.UVMapping,m);u.name=s;g.textures[s]={mats:[n],slots:[p[q]],tex:u};"alphaMap"==p[q]&&(n.transparent=!0);u.anisotropy="bumpMap"==p[q]||"normalMap"==p[q]?0:a.renderer().getMaxAnisotropy();u.repeat.set(w,A);u.wrapS=THREE.RepeatWrapping;u.wrapT=THREE.RepeatWrapping;u.flipY=!r;r&&(c.envMap=u)}}}}};this.create2DMaterial=function(b,d,h){var m="__lineMaterial__";b.image&&(m+="|image:"+b.image.name);b.clip&&(m+="|clip:"+JSON.stringify(b.clip));d&&(m+="|id");h&&(m+="|selection");b.skipEllipticals&&
(m+="|skipEllipticals");b.skipCircles&&(m+="|skipCircles");b.skipTriangleGeoms&&(m+="|skipTriangleGeoms");m=c(m)?m:null.basePath+"|mat|"+m;if(!f.hasOwnProperty(m)){var p=new THREE.ShaderMaterial({fragmentShader:LineShader.fragmentShader,vertexShader:LineShader.vertexShader,uniforms:THREE.UniformsUtils.clone(LineShader.uniforms),attributes:LineShader.attributes,defines:THREE.UniformsUtils.clone(LineShader.defines),transparent:!0});p.depthWrite=!1;p.depthTest=!1;p.side=THREE.DoubleSide;p.blending=THREE.NormalBlending;
d?(p.defines.ID_COLOR=1,p.blending=THREE.NoBlending):h?p.defines.SELECTION_RENDERER=1:a.renderer().hasMRT()&&(p.defines.MRT_ID_BUFFER=1);b.skipEllipticals||(p.defines.HAS_ELLIPTICALS=1);b.skipCircles||(p.defines.HAS_CIRCLES=1);b.skipTriangleGeoms||(p.defines.HAS_TRIANGLE_GEOMS=1);p.uniforms.tLayerMask.value=g.layerMaskTex;b.image&&(p.defines.HAS_RASTER_QUADS=1,e(b.image.dataURI,new THREE.UVMapping,function(c){c.wrapS=THREE.ClampToEdgeWrapping;c.wrapT=THREE.ClampToEdgeWrapping;c.minFilter=THREE.LinearFilter;
c.magFilter=THREE.LinearFilter;c.anisotropy=1;c.flipY=!0;c.needsUpdate=!0;p.uniforms.tRaster.value=c;-1!=b.image.dataURI.indexOf("png")&&(p.transparent=!0);p.needsUpdate=!0;a.invalidate(!1,!0,!1)}));f[m]=p}return m};this.addMaterial=function(b,c,d){function e(a){return 0.299*a.r+0.587*a.g+0.114*a.b}var h=c.proteinMat?c.proteinMat:null,q=c.proteinType&&-1!=c.proteinType.indexOf("Prism");if(!d){if(c.metal){if(c.reflectivity||(c.reflectivity=e(c.specular)),h&&(1===c.reflectivity&&(c.reflectivity=e(c.specular)),
0!==c.color.r||0!==c.color.g||0!==c.color.b))c.color.r*=0.1,c.color.g*=0.1,c.color.b*=0.1}else h?q?(d=!1,"PrismLayered"==c.proteinType&&(c.clearcoat=!0,c.reflectivity=0.06,h&&(h=h.materials[h.userassets[0]].categories)&&h.length&&-1!=h[0].indexOf("Metal")&&(d=!0)),c.reflectivity=Math.sqrt(c.reflectivity),d?c.specular.copy(c.color):(c.specular.r=c.reflectivity,c.specular.g=c.reflectivity,c.specular.b=c.reflectivity)):(c.reflectivity||(c.reflectivity=0.01+0.06*e(c.specular)),c.specular.r*=c.reflectivity,
c.specular.g*=c.reflectivity,c.specular.b*=c.reflectivity):c.reflectivity?(c.metal=!0,c.specular.r=c.color.r*c.reflectivity,c.specular.g=c.color.g*c.reflectivity,c.specular.b=c.color.b*c.reflectivity,c.color.r*=0.1,c.color.g*=0.1,c.color.b*=0.1):1!==c.color.r||1!==c.color.g||1!==c.color.b||1!==c.specular.r||1!==c.specular.g||1!==c.specular.b||c.uri_map||c.uri_specularMap||(c.metal=!0,c.reflectivity=0.7,c.specular.r=c.specular.g=c.specular.b=c.reflectivity,c.color.r*=0.1,c.color.g*=0.1,c.color.b*=
0.1);c.ambient.copy(c.color);c.ambient.r*=0.3;c.ambient.g*=0.3;c.ambient.b*=0.3;c.combine=THREE.MixOperation;if(c.transparent||c.uri_map&&-1!=c.uri_map.toLowerCase().indexOf(".png")||c.uri_opacityMap)c.alphaTest=0.01}if(c.uri_normalMap){h=c.bumpScale;if(void 0===h||1<=h)h=1;c.normalScale=new THREE.Vector2(h,h)}else void 0===c.bumpScale&&(c.uri_map||c.uri_bumpMap)?c.bumpScale=0.03:1<=c.bumpScale&&(c.bumpScale=0.03);g.reflectionCube&&(c.envMap=g.reflectionCube);g.irradianceMap&&(c.irradianceMap=g.irradianceMap);
c.mrtNormals=a.renderer().hasMRT()&&a.renderer().settings.sao;c.side==THREE.DoubleSide&&a.renderer().toggleTwoSided(!0);f[b]=c};this.togglePolygonOffset=function(a){for(var b in f){var c=f[b];c instanceof THREE.MeshPhongMaterial&&(c.polygonOffset=!0,c.polygonOffsetFactor=a?1:0,c.polygonOffsetUnits=a?1:0,c.needsUpdate=!0)}};this.applyGeometryFlagsToMaterial=function(a,b){b.attributes.color&&(a.vertexColors=THREE.VertexColors,a.needsUpdate=!0);!a.proteinType&&b.attributes.uv&&b.attributes.uv.isPattern&&
(a.map&&!a.bumpMap&&(a.bumpMap=a.map,a.needsUpdate=!0),a.uri_map&&!a.uri_bumpMap&&(a.uri_bumpMap=a.uri_map,a.needsUpdate=!0))};this.toggleMRTSetting=function(a){for(var b in f){var c=f[b];c.mrtNormals!==a&&(c.mrtNormals=a,c.needsUpdate=!0)}};this.updatePixelScale=function(a){for(var b in f)c(b)&&(f[b].uniforms.unitsPerPixel.value=1/a,f[b].uniforms.pixelsPerUnit.value=a)};this.setCubeMapFromColors=function(b,c){var e=d.CreateCubeMapFromColors(b,c);g.reflectionCube=e;g.reflectionCube.isBgColor=!0;for(var h in f){var p=
f[h];p.envMap=e;p.needsUpdate=!0}a.invalidate(!0)};this.setCubeMap=function(b){var c=function(b){g.reflectionCube=b;if(g.reflectionCube)for(var c in f)b=f[c],b.envMap=g.reflectionCube,b.needsUpdate=!0;else g.setCubeMapFromColors(a.clearColorTop,a.clearColorBottom);a.invalidate(!0)};Array.isArray(b)?(g.reflectionCube=THREE.ImageUtils.loadTextureCube(b,new THREE.CubeReflectionMapping,c),g.reflectionCube.format=THREE.RGBFormat):"string"==typeof b?-1!=b.toLowerCase().indexOf(".dds")?(g.reflectionCube=
THREE.ImageUtils.loadCompressedTextureCube(b,new THREE.CubeReflectionMapping,c),g.reflectionCube.LogLuv=-1!=b.indexOf("logluv")):(g.reflectionCube=THREE.ImageUtils.loadTexture(b,new THREE.SphericalReflectionMapping,c),g.reflectionCube.format=THREE.RGBFormat):b?c(b):c(null)};this.setIrradianceMap=function(b){var c=function(b){if(b){for(var c in f){var d=f[c];d.irradianceMap=b;d.needsUpdate=!0}g.irradianceMap=b}else if(g.irradianceMap){for(c in f)d=f[c],d.irradianceMap=null,d.needsUpdate=!0;g.irradianceMap=
null}a.invalidate(!0)};THREE.ImageUtils.crossOrigin="";Array.isArray(b)?(g.irradianceMap=THREE.ImageUtils.loadTextureCube(b,new THREE.CubeReflectionMapping,c),g.irradianceMap.format=THREE.RGBFormat):"string"==typeof b?-1!=b.toLowerCase().indexOf(".dds")&&(g.irradianceMap=THREE.ImageUtils.loadCompressedTextureCube(b,new THREE.CubeReflectionMapping,c),g.irradianceMap.LogLuv=-1!=b.indexOf("logluv")):b?c(b):c(null)};this.initLayersTexture=function(a){for(var b=a.getData().layerCount,c=new Uint8Array(65536),
d=0;d<b;d++)c[d]=255;b=new THREE.DataTexture(c,256,256,THREE.LuminanceFormat,THREE.UnsignedByteType,new THREE.UVMapping,THREE.ClampToEdgeWrapping,THREE.ClampToEdgeWrapping,THREE.NearestFilter,THREE.NearestFilter,0);b.generateMipmaps=!1;b.flipY=!1;b.needsUpdate=!0;this.layerMaskTex=b;this.layersMap=a.getData().layersMap};this.initSelectionMaterial=function(a){var b=a.myData.maxObjectNumber||1;a=0|Math.ceil(b/4096);for(var c=1;c<a;)c*=2;a=c;for(var c=new Uint8Array(4096*a),d=0;d<b;d++)c[d]=0;b=new THREE.DataTexture(c,
4096,a,THREE.LuminanceFormat,THREE.UnsignedByteType,new THREE.UVMapping,THREE.ClampToEdgeWrapping,THREE.ClampToEdgeWrapping,THREE.NearestFilter,THREE.NearestFilter,0);b.generateMipmaps=!1;b.flipY=!1;b.needsUpdate=!0;this.selectionTex=b;b=this.create2DMaterial({},!1,!0);b=f[b];b.uniforms.tSelectionTexture.value=this.selectionTex;b.uniforms.vSelTexSize.value.set(4096,a);b.needsUpdate=!0;return b};this.setLayerVisible=function(b,d){for(var e=this.layerMaskTex,g=e.image.data,h=this.layersMap,q=d?255:
0,s=0;s<b.length;++s)g[h[b[s]]]=q;e.needsUpdate=!0;for(var r in f)c(r)&&(f[r].needsUpdate=!0);a.invalidate(!0)};this.isLayerVisible=function(a){return!!this.layerMaskTex.image.data[this.layersMap[a]]};this.highlightObject2D=function(b,c){this.selectionTex.image.data[b]=c?255:0;this.selectionTex.needsUpdate=!0;a.invalidate(!1,!1,!0)};this.addMaterial("__defaultMaterial__",this.defaultMaterial)};AutodeskNamespace("Autodesk.Viewing.Private");Autodesk.Viewing.Private.AnimationHandler=Object.create(THREE.AnimationHandler);
Autodesk.Viewing.Private.AnimationHandler.parse=function(a){function b(a,c){c.push(a);if(a.children&&!(a instanceof THREE.Camera))for(var g=0;g<a.children.length;g++)b(a.children[g],c)}var c=[];b(a,c);return c};
Autodesk.Viewing.Private.Animation=function(a,b){this.root=a;this.data=Autodesk.Viewing.Private.AnimationHandler.get(b);this.hierarchy=Autodesk.Viewing.Private.AnimationHandler.parse(a);this.name=b;this.currentTime=0;this.timeScale=1;if(0<this.hierarchy.length){var c=this.data.hierarchy[0].keys;this.startKeyTime=c[0].time;this.endKeyTime=c[c.length-1].time}else this.startKeyTime=this.endKeyTime=0;this.isPlaying=!1;this.isPaused=!0;this.loop=!1;this.delta=0.01;this.interpolationType=THREE.AnimationHandler.LINEAR};
Autodesk.Viewing.Private.Animation.prototype=Object.create(THREE.Animation.prototype);Autodesk.Viewing.Private.Animation.prototype.constructor=Autodesk.Viewing.Private.Animation;Autodesk.Viewing.Private.Animation.prototype.stop=function(){THREE.Animation.prototype.stop.call(this);this.currentTime=0};
Autodesk.Viewing.Private.Animation.prototype.reset=function(){for(var a=0,b=this.hierarchy.length;a<b;a++){var c=this.hierarchy[a],e=this.data.hierarchy[a];c.matrixAutoUpdate=!0;void 0===e.animationCache&&(e.animationCache={},e.animationCache.prevKey={pos:0,rot:0,scl:0},e.animationCache.nextKey={pos:0,rot:0,scl:0},e.animationCache.originalMatrix=c instanceof THREE.Bone?c.skinMatrix:c.matrix);c=e.animationCache.prevKey;e=e.animationCache.nextKey;c.pos=this.data.hierarchy[a].keys[0];c.rot=this.data.hierarchy[a].keys[0];
c.scl=this.data.hierarchy[a].keys[0];e.pos=this.getNextKeyWith("pos",a,1);e.rot=this.getNextKeyWith("rot",a,1);e.scl=this.getNextKeyWith("scl",a,1)}0<this.hierarchy.length?(a=this.data.hierarchy[0].keys,this.startKeyTime=a[0].time,this.endKeyTime=a[a.length-1].time):this.startKeyTime=this.endKeyTime=0};Autodesk.Viewing.Private.Animation.prototype.isPlayingOutOfRange=function(){return!1===this.isPaused&&(this.currentTime<this.startKeyTime||this.currentTime>this.endKeyTime+this.delta)};
Autodesk.Viewing.Private.Animation.prototype.update=function(){var a=[],b=new THREE.Vector3;return function(c){if(!1!==this.isPlaying&&(this.currentTime+=c*this.timeScale,!this.isPlayingOutOfRange())){var e;c=["pos","rot","scl"];for(var d=0,g=this.hierarchy.length;d<g;d++){for(var f=this.hierarchy[d],h=this.data.hierarchy[d].animationCache,k=0;3>k;k++){e=c[k];var l=h.prevKey[e],n=h.nextKey[e];if(n.time<=this.currentTime||l.time>=this.currentTime){l=this.data.hierarchy[d].keys[0];for(n=this.getNextKeyWith(e,
d,1);n.time<this.currentTime&&n.index>l.index;)l=n,n=this.getNextKeyWith(e,d,n.index+1);h.prevKey[e]=l;h.nextKey[e]=n}if(n.time!==l.time){var m=(this.currentTime-l.time)/(n.time-l.time),p=l[e],q=n[e];0>m&&(m=0);1<m&&(m=1);if("pos"===e)if(e=f.position,this.interpolationType===THREE.AnimationHandler.LINEAR)e.x=p[0]+(q[0]-p[0])*m,e.y=p[1]+(q[1]-p[1])*m,e.z=p[2]+(q[2]-p[2])*m;else{if(this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD)a[0]=
this.getPrevKeyWith("pos",d,l.index-1).pos,a[1]=p,a[2]=q,a[3]=this.getNextKeyWith("pos",d,n.index+1).pos,m=0.33*m+0.33,l=interpolateCatmullRom(a,m),e.x=l[0],e.y=l[1],e.z=l[2],this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD&&(m=interpolateCatmullRom(a,1.01*m),b.set(m[0],m[1],m[2]),b.sub(e),b.y=0,b.normalize(),e=Math.atan2(b.x,b.z),f.rotation.set(0,e,0))}else"rot"===e?THREE.Quaternion.slerp(p,q,f.quaternion,m):"scl"===e&&(e=f.scale,e.x=p[0]+(q[0]-p[0])*m,e.y=p[1]+(q[1]-p[1])*m,e.z=
p[2]+(q[2]-p[2])*m)}}f.matrixAutoUpdate=!0;f.matrixWorldNeedsUpdate=!0;this.isPaused&&f.updateMatrixWorld()}}}}();Autodesk.Viewing.Private.Animation.prototype.goto=function(a){this.isPlaying||this.play();this.isPaused||this.pause();this.update(a-this.currentTime)};Autodesk.Viewing.Private.CameraAnimation=function(a,b,c){Autodesk.Viewing.Private.Animation.call(this,a,b);this.viewer=c};Autodesk.Viewing.Private.CameraAnimation.prototype=Object.create(Autodesk.Viewing.Private.Animation.prototype);
Autodesk.Viewing.Private.CameraAnimation.prototype.constructor=Autodesk.Viewing.Private.CameraAnimation;
Autodesk.Viewing.Private.CameraAnimation.prototype.reset=function(){for(var a=0,b=this.hierarchy.length;a<b;a++){var c=this.hierarchy[a],e=this.data.hierarchy[a];c.matrixAutoUpdate=!0;void 0===e.animationCache&&(e.animationCache={},e.animationCache.prevKey={pos:0,up:0,target:0},e.animationCache.nextKey={pos:0,up:0,target:0},e.animationCache.originalMatrix=c instanceof THREE.Bone?c.skinMatrix:c.matrix);c=e.animationCache.prevKey;e=e.animationCache.nextKey;c.pos=this.data.hierarchy[a].keys[0];c.up=
this.data.hierarchy[a].keys[0];c.target=this.data.hierarchy[a].keys[0];e.pos=this.getNextKeyWith("pos",a,1);e.up=this.getNextKeyWith("up",a,1);e.target=this.getNextKeyWith("target",a,1)}};
Autodesk.Viewing.Private.CameraAnimation.prototype.update=function(){var a=[],b=new THREE.Vector3;return function(c){if(!1!==this.isPlaying&&(this.currentTime+=c*this.timeScale,!this.isPlayingOutOfRange())){var e;c=["pos","up","target"];for(var d=0,g=this.hierarchy.length;d<g;d++){for(var f=this.hierarchy[d],h=this.data.hierarchy[d].animationCache,k=0;3>k;k++){var l=c[k],n=h.prevKey[l],m=h.nextKey[l];if(m.time<=this.currentTime||n.time>=this.currentTime){n=this.data.hierarchy[d].keys[0];for(m=this.getNextKeyWith(l,
d,1);m.time<this.currentTime&&m.index>n.index;)n=m,m=this.getNextKeyWith(l,d,m.index+1);h.prevKey[l]=n;h.nextKey[l]=m}if(m.time!==n.time){var p=(this.currentTime-n.time)/(m.time-n.time),q=n[l],s=m[l];0>p&&(p=0);1<p&&(p=1);"pos"===l?e=f.position:"up"===l?e=f.up:"target"===l&&(e=f.target);if(this.interpolationType===THREE.AnimationHandler.LINEAR)e.x=q[0]+(s[0]-q[0])*p,e.y=q[1]+(s[1]-q[1])*p,e.z=q[2]+(s[2]-q[2])*p;else if(this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===
THREE.AnimationHandler.CATMULLROM_FORWARD)a[0]=this.getPrevKeyWith(l,d,n.index-1)[l],a[1]=q,a[2]=s,a[3]=this.getNextKeyWith(l,d,m.index+1)[l],p=0.33*p+0.33,l=interpolateCatmullRom(a,p),e.x=l[0],e.y=l[1],e.z=l[2],this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD&&(p=interpolateCatmullRom(a,1.01*p),b.set(p[0],p[1],p[2]),b.sub(e),b.y=0,b.normalize(),p=Math.atan2(b.x,b.z),f.rotation.set(0,p,0))}}f.matrixAutoUpdate=!0;f.matrixWorldNeedsUpdate=!0}f.lookAt(f.target);this.viewer.syncCamera(!0)}}}();
Autodesk.Viewing.Private.VisibilityAnimation=function(a,b,c,e){Autodesk.Viewing.Private.Animation.call(this,a,b);this.viewer=c;this.node=e;this.epsilon=0.1};Autodesk.Viewing.Private.VisibilityAnimation.prototype=Object.create(Autodesk.Viewing.Private.Animation.prototype);Autodesk.Viewing.Private.VisibilityAnimation.prototype.constructor=Autodesk.Viewing.Private.VisibilityAnimation;
Autodesk.Viewing.Private.VisibilityAnimation.prototype.reset=function(){for(var a=0,b=this.hierarchy.length;a<b;a++){var c=this.data.hierarchy[a];void 0===c.animationCache&&(c.animationCache={},c.animationCache.prevKey={vis:1,opa:1},c.animationCache.nextKey={vis:1,opa:1});var e=c.animationCache.prevKey,c=c.animationCache.nextKey;e.vis=this.data.hierarchy[a].keys[0];e.opa=this.data.hierarchy[a].keys[0];c.vis=this.getNextKeyWith("vis",a,1);c.opa=this.getNextKeyWith("opa",a,1)}};
Autodesk.Viewing.Private.VisibilityAnimation.prototype.update=function(){return function(a){if(!1!==this.isPlaying&&(this.currentTime+=a*this.timeScale,!this.isPlayingOutOfRange())){a=["vis","opa"];for(var b=0,c=this.hierarchy.length;b<c;b++)for(var e=this.hierarchy[b],d=this.data.hierarchy[b].animationCache,g=0;2>g;g++){var f=a[g],h=d.prevKey[f],k=d.nextKey[f];if(k.time<=this.currentTime||h.time>=this.currentTime){h=this.data.hierarchy[b].keys[0];for(k=this.getNextKeyWith(f,b,1);k.time<this.currentTime&&
k.index>h.index;)h=k,k=this.getNextKeyWith(f,b,k.index+1);d.prevKey[f]=h;d.nextKey[f]=k}if(k.time!==h.time){var l=h[f],n=k[f];"vis"===f?(l=Math.abs(this.currentTime-k.time)<this.epsilon?n:l,this.viewer.visibilityManager.setVisibilityOnNode(this.node,l)):"opa"===f&&(f=(this.currentTime-h.time)/(k.time-h.time),0>f&&(f=0),1<f&&(f=1),l+=(n-l)*f,e.material.transparent=1===l?!1:!0,e.material.opacity=l)}}}}}();
Autodesk.Viewing.Private.AnnotationAnimation=function(a,b,c){function e(a,b,c){var d=document.createElement("div");d.id=a;d.style.cursor="pointer";d.style.visibility=c;var e=document.createElement("div");e.id=a+"-txt";e.style.cssText="display: none;position: absolute;z-index: 1;color: #eeeeee;font-family: consolas,courier,monospace;font-size: 14px;background: rgba(34,34,34,0.8);padding: 6px 6px 6px 6px;";d.appendChild(e);c=document.createElement("img");c.src=RESOURCE_ROOT+"icons/markup_icon.png";
c.id=a+"-img";c.style.cssText="display: block;position: absolute;z-index: 1;";d.appendChild(c);b.api.container.appendChild(d);d.addEventListener("click",function(){e.style.display="none"===e.style.display?"block":"none"});c=new THREE.SphereGeometry(0.01);a=new THREE.MeshPhongMaterial({color:32512,ambient:32512,opacity:0.6,transparent:!0});d=new THREE.MeshPhongMaterial({color:32512,ambient:32512,opacity:0.6,transparent:!0});c=new THREE.Mesh(c,d);c.visible=!1;void 0===b.overlayScenes.annotation&&b.createOverlayScene("annotation",
a,d);b.addOverlay("annotation",c);return c}null===a&&(a=e(b,c,"hidden"));Autodesk.Viewing.Private.Animation.call(this,a,b);this.viewer=c;this.id=b;this.text="";this.state="hidden";var d=this;this.viewer.api.addEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT,function(b){d.updateText(a.position,d.text)})};Autodesk.Viewing.Private.AnnotationAnimation.prototype=Object.create(Autodesk.Viewing.Private.Animation.prototype);Autodesk.Viewing.Private.AnnotationAnimation.prototype.constructor=Autodesk.Viewing.Private.AnnotationAnimation;
Autodesk.Viewing.Private.AnnotationAnimation.prototype.reset=function(){for(var a=0,b=this.hierarchy.length;a<b;a++){var c=this.hierarchy[a],e=this.data.hierarchy[a];c.matrixAutoUpdate=!0;void 0===e.animationCache&&(e.animationCache={},e.animationCache.prevKey={pos:0,text:"",vis:1},e.animationCache.nextKey={pos:0,text:"",vis:1},e.animationCache.originalMatrix=c instanceof THREE.Bone?c.skinMatrix:c.matrix);c=e.animationCache.prevKey;e=e.animationCache.nextKey;c.pos=this.data.hierarchy[a].keys[0];c.text=
this.data.hierarchy[a].keys[0];c.vis=this.data.hierarchy[a].keys[0];e.pos=this.getNextKeyWith("pos",a,1);e.text=this.getNextKeyWith("text",a,1);e.vis=this.getNextKeyWith("vis",a,1)}};
Autodesk.Viewing.Private.AnnotationAnimation.prototype.updateText=function(a,b){var c,e;c=this.viewer.camera;e=this.viewer.canvas;var d=a.clone(),g=new THREE.Matrix4;c.updateMatrixWorld();c.matrixWorldInverse.getInverse(c.matrixWorld);g.multiplyMatrices(c.projectionMatrix,c.matrixWorldInverse);d.applyProjection(g);c=(d.x+1)*e.width/2+e.offsetLeft;e=(-d.y+1)*e.height/2+e.offsetTop;if(d=document.getElementById(this.id+"-txt"))d.innerHTML=b,d.style.left=c+"px",d.style.top=e+"px",this.text=b;if(d=document.getElementById(this.id+
"-img"))d.style.left=c+"px",d.style.top=e-24+"px"};
Autodesk.Viewing.Private.AnnotationAnimation.prototype.update=function(){var a=[],b=new THREE.Vector3;return function(c){if(!1!==this.isPlaying&&(this.currentTime+=c*this.timeScale,!this.isPlayingOutOfRange()))if(this.isPaused&&this.currentTime<this.startKeyTime){var e=document.getElementById(this.id);e&&(e.style.visibility=this.state)}else{c=["pos","text","vis"];for(var d=0,g=this.hierarchy.length;d<g;d++){for(var f=this.hierarchy[d],h=this.data.hierarchy[d].animationCache,k=0;3>k;k++){var e=c[k],
l=h.prevKey[e],n=h.nextKey[e];if(n.time<=this.currentTime||l.time>=this.currentTime){l=this.data.hierarchy[d].keys[0];for(n=this.getNextKeyWith(e,d,1);n.time<this.currentTime&&n.index>l.index;)l=n,n=this.getNextKeyWith(e,d,n.index+1);h.prevKey[e]=l;h.nextKey[e]=n}if(n.time!==l.time){var m=(this.currentTime-l.time)/(n.time-l.time),p=l[e],q=n[e];0>m&&(m=0);1<m&&(m=1);if("pos"===e)if(e=f.position,this.interpolationType===THREE.AnimationHandler.LINEAR)e.x=p[0]+(q[0]-p[0])*m,e.y=p[1]+(q[1]-p[1])*m,e.z=
p[2]+(q[2]-p[2])*m;else{if(this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD)a[0]=this.getPrevKeyWith("pos",d,l.index-1).pos,a[1]=p,a[2]=q,a[3]=this.getNextKeyWith("pos",d,n.index+1).pos,m=0.33*m+0.33,p=interpolateCatmullRom(a,m),e.x=p[0],e.y=p[1],e.z=p[2],this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD&&(m=interpolateCatmullRom(a,1.01*m),b.set(m[0],m[1],m[2]),b.sub(e),b.y=0,b.normalize(),m=Math.atan2(b.x,
b.z),f.rotation.set(0,m,0))}else"text"===e?this.updateText(f.position,0.5>m?p:q):"vis"===e&&(e=document.getElementById(this.id))&&(e.style.visibility=(0.5>m?p:q)?"visible":"hidden")}}f.matrixAutoUpdate=!0;f.matrixWorldNeedsUpdate=!0}}}}();Autodesk.Viewing.Private.PolylineAnimation=function(a,b,c){this.viewer=c;null===a&&(a=this.createPolyline([]));Autodesk.Viewing.Private.Animation.call(this,a,b)};Autodesk.Viewing.Private.PolylineAnimation.prototype=Object.create(Autodesk.Viewing.Private.Animation.prototype);
Autodesk.Viewing.Private.PolylineAnimation.prototype.constructor=Autodesk.Viewing.Private.PolylineAnimation;
Autodesk.Viewing.Private.PolylineAnimation.prototype.reset=function(){for(var a=0,b=this.hierarchy.length;a<b;a++){var c=this.data.hierarchy[a];void 0===c.animationCache&&(c.animationCache={},c.animationCache.prevKey={points:[],vis:1},c.animationCache.nextKey={points:[],vis:1});var e=c.animationCache.prevKey,c=c.animationCache.nextKey;e.points=this.data.hierarchy[a].keys[0];c.points=this.getNextKeyWith("points",a,1);e.vis=this.data.hierarchy[a].keys[0];c.vis=this.getNextKeyWith("vis",a,1)}};
Autodesk.Viewing.Private.PolylineAnimation.prototype.update=function(){return function(a){if(!1!==this.isPlaying&&(this.currentTime+=a*this.timeScale,!this.isPlayingOutOfRange()))if(this.isPaused&&this.currentTime<this.startKeyTime)this.root&&(this.viewer.removeOverlay("polyline",this.root),this.root=null);else{a=["points","vis"];for(var b=0,c=this.hierarchy.length;b<c;b++)for(var e=this.data.hierarchy[b].animationCache,d=0;2>d;d++){var g=a[d],f=e.prevKey[g],h=e.nextKey[g];if(h.time<=this.currentTime||
f.time>=this.currentTime){f=this.data.hierarchy[b].keys[0];for(h=this.getNextKeyWith(g,b,1);h.time<this.currentTime&&h.index>f.index;)f=h,h=this.getNextKeyWith(g,b,h.index+1);e.prevKey[g]=f;e.nextKey[g]=h}if(h.time!==f.time){var k=(this.currentTime-f.time)/(h.time-f.time),f=f[g],h=h[g];0>k&&(k=0);1<k&&(k=1);if("points"===g){g=0.5>k?f:h;this.viewer.removeOverlay("polyline",this.root);this.root=null;for(var l=[],n=0;n<g.length;n++){var m=g[n].slice();if(0===n)m[0]=f[n][0]+(h[n][0]-f[n][0])*k,m[1]=f[n][1]+
(h[n][1]-f[n][1])*k,m[2]=f[n][2]+(h[n][2]-f[n][2])*k;else if(n===g.length-1){var p=f.length-1,q=h.length-1;m[0]=f[p][0]+(h[q][0]-f[p][0])*k;m[1]=f[p][1]+(h[q][1]-f[p][1])*k;m[2]=f[p][2]+(h[q][2]-f[p][2])*k}m=new THREE.Vector3(m[0],m[1],m[2]);l.push(m)}this.root=this.createPolyline(l)}else"vis"===g&&(this.root.visible=0.5>k?f:h)}}}}}();
Autodesk.Viewing.Private.PolylineAnimation.prototype.createPolyline=function(a){for(var b=new THREE.Geometry,c=0;c<a.length;c++)b.vertices.push(a[c]);b.computeLineDistances();a=new THREE.LineDashedMaterial({color:16755200,dashSize:1,gapSize:0.5,linewidth:1});b=new THREE.Line(b,a,THREE.LineStrip);void 0===this.viewer.overlayScenes.polyline&&this.viewer.createOverlayScene("polyline",a,null);this.viewer.addOverlay("polyline",b);return b};
Autodesk.Viewing.Private.interpolateCatmullRom=function(a,b){function c(a,b,c,d,e,f,g){a=0.5*(c-a);d=0.5*(d-b);return(2*(b-c)+a+d)*g+(-3*(b-c)-2*a-d)*f+a*e+b}var e=[],d=[],g,f,h,k,l,n;g=(a.length-1)*b;f=Math.floor(g);g-=f;e[0]=0===f?f:f-1;e[1]=f;e[2]=f>a.length-2?f:f+1;e[3]=f>a.length-3?f:f+2;f=a[e[0]];k=a[e[1]];l=a[e[2]];n=a[e[3]];e=g*g;h=g*e;d[0]=c(f[0],k[0],l[0],n[0],g,e,h);d[1]=c(f[1],k[1],l[1],n[1],g,e,h);d[2]=c(f[2],k[2],l[2],n[2],g,e,h);return d};AutodeskNamespace("Autodesk.Viewing.Private");
Autodesk.Viewing.Private.KeyFrameAnimator=function(a,b){this.animations=[];this.viewer=a;this.keys=[];this.isPlaying=!1;this.needsUpdate=this.isPaused=!0;this.duration=b;this.currentTime=0;this.onPlayCallback=null};
Autodesk.Viewing.Private.KeyFrameAnimator.prototype.add=function(a){if(a.hierarchy&&!(1>a.hierarchy.length||!a.hierarchy[0].keys||2>a.hierarchy[0].keys.length)){var b=null,c=this;if("camera"===a.type)Autodesk.Viewing.Private.AnimationHandler.add(a),b=new Autodesk.Viewing.Private.CameraAnimation(c.viewer.camera,a.name,c.viewer),c.animations.push(b);else if("annotation"===a.type)Autodesk.Viewing.Private.AnimationHandler.add(a),b=new Autodesk.Viewing.Private.AnnotationAnimation(null,a.name,c.viewer),
c.animations.push(b);else if("polyline"===a.type)Autodesk.Viewing.Private.AnimationHandler.add(a),b=new Autodesk.Viewing.Private.PolylineAnimation(null,a.name,c.viewer),c.animations.push(b);else if("mesh"===a.type||"visibility"===a.type)for(var e=c.viewer.model.getNodesByIds([a.id]),d=0;d<e.length;d++)(function k(d){var e=d.fragIds;if(void 0!==e){Array.isArray(e)||(e=[e]);for(var f=0;f<e.length;f++){var g=c.viewer.getRenderProxy(c.viewer.model,e[f]);g&&(g.matrix.decompose(g.position,g.quaternion,
g.scale),0===f&&Autodesk.Viewing.Private.AnimationHandler.add(a),b="mesh"===a.type?new Autodesk.Viewing.Private.Animation(g,a.name):new Autodesk.Viewing.Private.VisibilityAnimation(g,a.name,c.viewer,d),c.animations.push(b))}}if(d.children)for(e=0;e<d.children.length;e++)k(d.children[e])})(e[d]);if(b){for(var e=0,g=a.hierarchy.length;e<g;e++)for(var f=a.hierarchy[e].keys,d=0;d<f.length;d++)c.keys.push(f[d].time);c.keys=function(a){a.sort(function(a,b){return a-b});return a.filter(function(a,b,c){return c.indexOf(a)===
b})}(c.keys)}}};Autodesk.Viewing.Private.KeyFrameAnimator.prototype.update=function(a){Autodesk.Viewing.Private.AnimationHandler.update(a);var b=!1;if(this.isPlaying&&!this.isPaused){this.currentTime+=a;this.currentTime=Math.min(this.currentTime,this.duration);if(this.onPlayCallback)this.onPlayCallback(this.currentTime/this.duration*100);b=!0}else this.needsUpdate&&(this.needsUpdate=!1,b=!0);return b};
Autodesk.Viewing.Private.KeyFrameAnimator.prototype.play=function(a,b){this.onPlayCallback=b;if(this.isPlaying)this.pause();else{for(var c=0;c<this.animations.length;c++)this.animations[c].play(a);this.isPlaying=!0;this.isPaused=!1}};Autodesk.Viewing.Private.KeyFrameAnimator.prototype.pause=function(){for(var a=0;a<this.animations.length;a++)this.animations[a].pause();this.isPaused=!this.isPaused};
Autodesk.Viewing.Private.KeyFrameAnimator.prototype.stop=function(){for(var a=0;a<this.animations.length;a++)this.animations[a].stop();this.isPaused=this.isPlaying=!1;this.currentTime=0};Autodesk.Viewing.Private.KeyFrameAnimator.prototype.goto=function(a){for(var b=0;b<this.animations.length;b++)this.animations[b].goto(a);this.isPaused=this.isPlaying=!0;this.currentTime=a;this.needsUpdate=!0};
Autodesk.Viewing.Private.KeyFrameAnimator.prototype.next=function(){for(var a=this.keys,b=-1,c=0;c<a.length;c++)if(a[c]>this.currentTime){b=a[c];break}this.goto(0>b?a[a.length-1]:b)};Autodesk.Viewing.Private.KeyFrameAnimator.prototype.prev=function(){for(var a=this.keys,b=-1,c=a.length-1;-1<c;c--)if(a[c]<this.currentTime){b=a[c];break}this.goto(0>b?a[0]:b)};AutodeskNamespace("Autodesk.Viewing.Private");void 0===ENABLE_DEBUG&&(ENABLE_DEBUG=!0);void 0===ENABLE_TRACE&&(ENABLE_TRACE=!0);
var ENABLE_AUTOCAM=!0;
Autodesk.Viewing.Private.Viewer3DImpl=function(a,b,c){function e(a){var b=d.stats;b&&b.begin();w&&(d.controls.handleResize(),d.camera.aspect=A/v,C.setSize(A,v),H=G=I=!0,w=!1,d.api.fireEvent({type:Autodesk.Viewing.VIEWER_RESIZE_EVENT}));N.updateMaterials();if(d.keyFrameAnimator){var c=0<S?(a-S)/1E3:0;d.keyFrameAnimator.update(c)&&(G=B.visibleBoundsDirty=!0)}var e=d.controls.update()||P,g=e||G;P=!1;H=H||e;var p=d.model&&d.model.isLoadDone(),z=B,q=d.progressiveRender?0.5*(d.maxFrameTime+d.minFrameTime):
1E10,r=q;g||I?(p&&d.signalProgress(0,null),0<K&&(c=a-K,E=0.75*E+0.25*c),K=a,d.updateCameraMatrices(),C.beginScene(d.scene,d.camera,g),e&&d.api.fireEvent(d.cameraChangedEvent),d.needGhostedPass&&z.setOverrideMaterial(null),F=!0,z&&(z.hasHighlighted()?(m=h,z.reset(d.camera),z.drawHighlightedObjectsOnly(),z.setOverrideMaterial(d.highlightMaterial)):(m=f,z.reset(d.camera,E),z.drawNormalObjectsOnly(),z.setOverrideMaterial(null)))):K=-1;z&&!z.isDone()&&(c=function(a){var b=m;C.renderScenePart(a,b!=n,b==
f,b==n)},r=z.renderSome(c,r),z.isDone()&&m===h&&(m=f,z.reset(d.camera),z.drawNormalObjectsOnly(),z.setOverrideMaterial(null),r=z.renderSome(c,r)),e||H||C.composeFinalFrame(),z.isDone()?(m===f&&!z.areAllVisible()&&d.showGhosting?(m=k,z.reset(d.camera),z.drawHiddenObjectsOnly(),z.setOverrideMaterial(d.fadeMaterial)):m==n?(m=l,F=!1):(m=l,C.composeFinalFrame(e&&d.skipAOWhenMoving)),p&&d.signalProgress(100,null)):p&&d.signalProgress(100*z.getRenderProgress(),null));H&&(z&&z.isDone()||d.showOverlaysWhileMoving?
(d.renderOverlays(),z&&!z.isDone()&&(H=!0)):C.clearAllOverlays(),C.composeFinalFrame(e&&d.skipAOWhenMoving));m==l&&F&&(C.hasMRT()?F=!1:(m=n,z.reset(d.camera),z.drawNormalObjectsOnly(),z.setOverrideMaterial(d.idMaterial)));r<q&&b&&b.end();s&&!e&&d.skipAOWhenMoving&&C.composeFinalFrame();s=e;S=a;G=I=!1}var d=this,g=Autodesk.Viewing.Private,f=0,h=1,k=2,l=3,n=4,m=f,p=g.DefaultLightPreset,q=new THREE.Projector,s=!1,r=new THREE.Vector3(0,1,0),u,w,A,v,B,C,N,G=!1,I=!1,H=!1,F=!1,P,z=0,K=0,E=0,S=0;this.run=
function(){u=0;(function U(a){u=window.requestAnimationFrame(U);e(a)})()};this.toggleProgressive=function(a){this.progressiveRender=a;G=!0};this.toggleGhosting=function(a){this.showGhosting=a;G=!0};this.toggleOverlaysWhileMoving=function(a){this.showOverlaysWhileMoving=a};this.togglePostProcess=function(a,b,c){C.initPostPipeline(a,b,c);this.fireRenderOptionChanged();G=!0};this.setOptimizeNavigation=function(a){this.skipAOWhenMoving=a};this.renderOverlays=function(){var a=this.lightsOn;a||this.toggleLights(!0,
!0);if(this.dir_light1){var b=this.dir_light1.intensity;this.dir_light1.intensity=1}C.renderOverlays(this.overlayScenes);a||this.toggleLights(!1,!0);this.dir_light1&&(this.dir_light1.intensity=b);H=!1};this.setLayerVisible=function(a,b){this.matman().setLayerVisible(a,b)};this.isLayerVisible=function(a){return this.matman().isLayerVisible(a)};this.updateCameraMatrices=function(){var a=this.camera;a.updateMatrixWorld();a.matrixWorldInverse.getInverse(a.matrixWorld);if(this.model){var b=this.getVisibleBounds(!0,
!0),c=new THREE.Box3;b.getTransformedBox(a.matrixWorldInverse,c);var d=1E-5*(c.max.z-c.min.z),e=-(c.max.z+d),c=-(c.min.z-d);a.isPerspective&&(e=Math.max(e,Math.min(1,1E-4*Math.abs(c-e))));c=Math.max(c,e);a.near=e;a.far=c;a.updateProjectionMatrix();this.model.is2d()&&(b=(e=this.intersectGroundViewport(new THREE.Vector3(0,0,1)))?a.position.distanceTo(e):a.position.distanceTo(b.center()),a=C.settings.deviceHeight/(2*b*Math.tan(THREE.Math.degToRad(0.5*a.fov))),N.updatePixelScale(0.5*a))}};this.initLights=
function(a){var b=g.LightPresets[p].lightMultiplier;this.lightNode=new THREE.Object3D;this.dir_light1=new THREE.DirectionalLight((new THREE.Color).setRGB(1,1,1),b);this.dir_light1.position.set(-1,0,1);this.dir_light1.position.multiplyScalar(1E3*a);this.lightNode.add(this.dir_light1);this.amb_light=new THREE.AmbientLight((new THREE.Color).setRGB(1,1,1));this.scene.add(this.amb_light);this.toggleLights(0!=b)};this.toggleLights=function(a,b){a&&!this.lightsOn?(this.scene.add(this.amb_light),this.camera.add(this.lightNode),
this.lightsOn=!0):!a&&this.lightsOn&&(this.amb_light&&this.scene.remove(this.amb_light),this.lightNode&&this.camera.remove(this.lightNode),this.lightsOn=!1);var c=g.LightPresets[p],d=c.ambientLightColor,c=c.directLightColor;this.lightsOn?(b&&this.amb_light?this.amb_light.color.setRGB(0.5*c[0],0.5*c[1],0.5*c[2]):d&&this.amb_light&&this.amb_light.color.setRGB(d[0],d[1],d[2]),c&&this.dir_light1&&this.dir_light1.color.setRGB(c[0],c[1],c[2])):d&&this.amb_light&&b&&this.amb_light.color.setRGB(d[0],d[1],
d[2])};this.syncCamera=function(a){this.camera.updateProjectionMatrix();a&&this.setWorldUp(this.api.navigation.getWorldUpVector());ENABLE_AUTOCAM?this.controls.syncCamera():this.controls.resetScene(this.model.getBoundingBox());P=!0};this.setViewFromFile=function(a,b){var c;c=a.getDefaultCamera();if(!c){c={};var d=a.getBoundingBox(),e=d.size();c.target=d.center();a.is2d()?(c.isPerspective=!1,d=this.camera.aspect,c.orthoScale=d>e.x/e.y?e.y:e.x/d,c.up=new THREE.Vector3(0,0,1),c.position=c.target.clone(),
c.position.z+=c.orthoScale,c.target.y+=1E-6*e.y):(c.isPerspective=!0,c.fov=this.camera.fov,c.up=this.camera.up.clone(),c.position=c.target.clone(),c.position.z+=Math.max(e.x,e.y,e.z))}this.setViewFromCamera(c,b)};this.setViewFromCamera=function(a,b){if(!a.isPerspective&&this.model){var c=this.model.getBoundingBox(),d=c.size(),e=a.target.clone().sub(a.position);e.length()>1E3*d.length()?(c=a.position.distanceTo(c.center()),a.target.copy(a.position).add(e.normalize().multiplyScalar(c))):a.position.copy(a.target).add(e.normalize().multiplyScalar(-a.orthoScale))}(e=
this.model?this.model.getUpVector():null)?c=(new THREE.Vector3).fromArray(e):(e=(new THREE.Vector3(a.up.x,a.up.y,a.up.z)).clone(),0>e.x&&(e.x=-e.x),0>e.y&&(e.y=-e.y),0>e.z&&(e.z=-e.z),e.x>e.y&&e.x>e.z?e.set(0<e.x?1:-1,0,0):e.y>e.x&&e.y>e.z?e.set(0,0<e.y?1:-1,0):e.set(0,0,0<e.z?1:-1),c=e);a.up=c;e=this.api.navigation;b?(c=this.camera,c.up.copy(a.up),c.position.copy(a.position),c.target.copy(a.target),a.isPerspective?c.fov=a.fov:(c.saveFov=a.fov,c.fov=Autodesk.Viewing.UnifiedCamera.ORTHO_FOV),c.isPerspective=
a.isPerspective,c.orthoScale=a.orthoScale,c.dirty=!0,e.setWorldUpVector(c.up),e.setView(c.position,c.target),this.syncCamera(!0)):(this.camera.isPerspective=a.isPerspective,c=e.computeOrthogonalUp(a.position,a.target),e.setRequestTransitionWithUp(!0,a.position,a.target,a.fov,c,a.up));P=!0};this.setWorldUp=function(a){r.copy(a);var b=0,c=Math.abs(a.x);Math.abs(a.y)>c&&(b=1,c=Math.abs(a.y));Math.abs(a.z)>c&&(b=2);this.camera.worldUpTransform=null;2==b?(a=this.camera.worldUpTransform=new THREE.Matrix4,
a=a.elements,a[0]=1,a[1]=0,a[2]=0,a[4]=0,a[5]=0,a[6]=-1,a[8]=0,a[9]=1,a[10]=0):0==b&&(a=this.camera.worldUpTransform=new THREE.Matrix4,a=a.elements,a[0]=0,a[1]=1,a[2]=0,a[4]=-1,a[5]=0,a[6]=0,a[8]=0,a[9]=0,a[10]=1)};this.setModel=function(a){a&&(this.model=a,this.selector.model=this.model,this.visibilityManager.model=this.model,this.model.setLoader(this.svfloader),this.initScene())};this.initScene=function(){if(this.model){var a=this.model,b=a.is2d();b&&this.enter2DMode();this.api.navigation.setIs2D(b);
this.api.setNavigationMode(b?Autodesk.Viewing.NAVIGATION_MODE.PAN:Autodesk.Viewing.NAVIGATION_MODE.ORBIT);var c=a.getBoundingBox();B=new RenderQueue(a.getData().fragments.length,this.scene,c,a.is2d()?50:0);this.setViewFromFile(a,!0);this.controls.recordHomeView();a=0.5*c.size().length();this.initLights(a);b||this.setLightPresetFromFile()||this.setLightPreset(p,!0);this.invalidate(!0)}};this.addMeshInstance=function(a,b,c,d){var e=this.model.getData();if(0!==b||-1==e.basePath.indexOf("SaRang")){var f;
if(a.isLines){var g=!!a.attributes.color;f=new THREE.LineBasicMaterial({vertexColors:g});g||(c=N.findMaterial(e,c),f.color=c.color);f=new THREE.Mesh(a,f,!e.animations);f.isLine=!0;e.hasLines=!0}else f=N.findMaterial(e,c),N.applyGeometryFlagsToMaterial(f,a),f=new THREE.Mesh(a,f,!e.animations),a.is2d&&(f.is2d=!0);d&&(f.matrix?f.matrix.copy(d):f.matrixWorld.copy(d));f.matrixAutoUpdate=!1;B.addMesh(b,f)}};this.onLoadComplete=function(){this.signalProgress(100,"");this.api.fireEvent({type:Autodesk.Viewing.GEOMETRY_LOADED_EVENT});
this.is2d&&(this.selectionMaterial2d=N.initSelectionMaterial(this.model),this.createOverlayScene("selection2d",this.selectionMaterial2d));this.model.getData().hasLines&&N.togglePolygonOffset(!0)};this.signalProgress=function(a,b){this.api.fireEvent({type:Autodesk.Viewing.PROGRESS_UPDATE_EVENT,percent:a,message:b})};this.resize=function(a,b){w=!0;A=a;v=b};this.enter2DMode=function(){this.is2d=!0;this.controls.set2DMode(!0);N.initLayersTexture(this.model);var a=N.create2DMaterial({},!0);this.idMaterial=
N.findMaterial(null,a);C.enter2DMode(this.idMaterial);this.setLightPreset(0);a=this.model.getData();if(a.hidePaper){var b=a.bgColor,a=b>>16&255,c=b>>8&255,b=b&255;this.setClearColors(a,c,b,a,c,b)}this.togglePostProcess(!1,!1,!0)};this.loadSvf=function(a,b,c,d,e){return this.svfloader.loadSvf(a,b,c,d,e)};this.createOverlayScene=function(a,b,c,d){b&&(b.depthWrite=!1,b.depthTest=!0);c&&(c.depthWrite=!1,c.depthTest=!1);var e=new THREE.Scene(!0);e.__lights=this.scene.__lights;this.overlayScenes[a]={scene:e,
camera:d,materialPre:b,materialPost:c}};this.removeOverlayScene=function(a){this.overlayScenes[a]&&delete this.overlayScenes[a]};this.addOverlay=function(a,b){this.overlayScenes[a].scene.add(b);H=!0};this.removeOverlay=function(a,b){this.overlayScenes[a].scene.remove(b);H=!0};this.clearOverlay=function(a){this.overlayScenes[a].scene.clear();H=!0};this.setClearColors=function(a,b,c,d,e,f){this.clearColorTop=new THREE.Vector4(a/255,b/255,c/255,1);this.clearColorBottom=new THREE.Vector4(d/255,e/255,
f/255,1);N.reflectionCube&&!N.reflectionCube.isBgColor||N.setCubeMapFromColors(this.clearColorTop,this.clearColorBottom);C.setClearColors(this.clearColorTop,this.clearColorBottom);G=!0;this.fireRenderOptionChanged()};this.getOverlayBounds=function(){var a=new THREE.Box3,b=this.overlayScenes,c;for(c in b)if(b.hasOwnProperty(c)){var d=new THREE.Box3;d.setFromObject(b[c].scene);a.union(d)}return a};this.getVisibleBounds=function(a,b){var c=null;B&&(c=B.getVisibleBounds(a),b&&(c=this.getOverlayBounds().union(c)));
return c};this.getFitBounds=function(a){var b;this.is2d&&(a=!0);a||null===this.selector||(b=this.selector.getSelectionBounds());if(!b||b.empty())b=this.getVisibleBounds();return b};this.getRenderProxy=function(a,b){return B?B.getVizmesh(b):null};this.setFragmentVisibility=function(a,b,c){B&&B.setVisibility(b,c)};this.setModelVisibility=function(a,b){B&&B.setAllVisibility(b)};this.isWholeModelVisible=function(a){return B?B.areAllVisible():!0};this.resetIsolation=function(a){B&&(B.setOverrideMaterial(null),
this.needGhostedPass=!1,G=!0)};this.highlightObjectNode=function(a,b,c,d){var e=b.fragIds;if("undefined"!=typeof e){Array.isArray(e)||(e=[e]);for(var f=0;f<e.length;++f){var g=e[f],h=this.getRenderProxy(a,g),k=h.is2d?"selection2d":"selection";h.is2d?N.highlightObject2D(b.dbId,c):!d&&c||B.setHightlighted(g,c);if(c){if(!d||h.is2d)h.selectionProxy=new THREE.Mesh(h.geometry,h.material,!0),h.selectionProxy.matrixWorld=h.matrixWorld,this.addOverlay(k,h.selectionProxy)}else h.selectionProxy?(this.removeOverlay(k,
h.selectionProxy),h.selectionProxy=null):h.is2d||this.invalidate(!0)}}};this.highlightFragment=function(a,b,c){this.is2d?N.highlightObject2D(b,c):B.setHightlighted(b,c)};this.explode=function(a){if(a!=z&&this.model){z=a;var b=this.model,c=b.getData(),e=this.getVisibleBounds(!0).center(),f=c.fragments,g=f.transforms,h=a*(c.maxTreeDepth-1)+1,k=0|h,l=h-k;a*=2;if(c.instanceTree&&c.instanceBoxes&&0!=a){var m=c.instanceBoxes;(function X(c,e,f,h,n,p,z,q){var s=2*a;e==k&&(s*=l);var r=6*c.dbId,v=0.5*(m[r]+
m[r+3]),u=0.5*(m[r+1]+m[r+4]),r=0.5*(m[r+2]+m[r+5]);0<e&&e<=k&&(p+=(v-f)*s,z+=(u-h)*s,q+=(r-n)*s);if(f=c.children)for(h=0,n=f.length;h<n;h++)X(f[h],e+1,v,u,r,p,z,q);c=c.fragIds;if(void 0!==c)if(Array.isArray(c))for(e=0;e<c.length;e++)v=0|c[e],r=16*v,u=d.getRenderProxy(b,v).matrixWorld.elements,u[12]=g[r+12]+p,u[13]=g[r+13]+z,u[14]=g[r+14]+q;else v=c|0,u=d.getRenderProxy(b,v).matrixWorld.elements,r=16*v,u[12]=g[r+12]+p,u[13]=g[r+13]+z,u[14]=g[r+14]+q})(c.instanceTree,0,e.x,e.y,e.x,0,0,0)}else for(c=
f.boxes,h=0,f=f.length;h<f;h++){var n=6*h,p=16*h,q=0.5*(c[n]+c[n+3]),s=0.5*(c[n+1]+c[n+4]),n=0.5*(c[n+2]+c[n+5]),q=a*(q-e.x),s=a*(s-e.y),n=a*(n-e.z),r=d.getRenderProxy(b,h).matrixWorld.elements;r[12]=g[p+12]+q;r[13]=g[p+13]+s;r[14]=g[p+14]+n}H=G=B.visibleBoundsDirty=!0;this.api.fireEvent({type:Autodesk.Viewing.EXPLODE_CHANGE_EVENT})}};this.getExplodeScale=function(){return z};this.setGhostingBrightness=function(a){this.fadeMaterial.color=a?new THREE.Color(1052688):new THREE.Color(16777215);this.fadeMaterial.needsUpdate=
!0};this.setLightPreset=function(a,b){if(p!=a||b){if(0>a||g.LightPresets.length<=a)a=g.DefaultLightPreset;p=a;var c=g.LightPresets[a];if(c&&c.path){var d=RESOURCE_ROOT+"environments/"+c.path,e=d+"_mipdrop.logluv.dds";N.setIrradianceMap(d+"_irr.logluv.dds");N.setCubeMap(e);C.setExposureBias(c.E_bias,c.lightMultiplier);this.setGhostingBrightness(c.darkerFade)}else N.setIrradianceMap(null),N.setCubeMap(null),C.setExposureBias(0,1);C.setTonemapMethod(c.tonemap);d=SAOShader.uniforms.radius.value;e=SAOShader.uniforms.intensity.value;
c.hasOwnProperty("saoRadius")&&(d=c.saoRadius);c.hasOwnProperty("saoIntensity")&&(e=c.saoIntensity);C.setAOOptions(d,e);(d=c.bgColorGradient)||(d=g.BackgroundPresets.Custom);this.setClearColors(d[0],d[1],d[2],d[3],d[4],d[5]);d=1;null!==c.lightMultiplier&&void 0!==c.lightMultiplier&&(d=c.lightMultiplier);this.dir_light1&&(this.toggleLights(0!=d),this.dir_light1.intensity=d);H=G=!0;this.fireRenderOptionChanged()}};this.setLightPresetFromFile=function(){var a=this.model.getMetadata("renderEnvironmentStyle",
"value",null);if(null===a||""===a)return!1;for(var b=this.model.getMetadata("renderEnvironmentExposureBias","value",null),c=this.model.getMetadata("renderEnvironmentExposureBase","value",null),d=0;d<g.LightPresets.length;d++)if(a===g.LightPresets[d].name)return null!==b&&null!==c&&(g.LightPresets[d].E_bias=b+c),this.setLightPreset(d,!0),!0;return!1};this.uninitialize=function(){window.cancelAnimationFrame(u);this.controls.uninitialize();this.canvas=this.controls=null;this.svfloader.uninitialize();
this.svfloader=null;this.selector.uninitialize();N=C=B=this.visibilityManager=this.model=this.selector=null};this.hideLines=function(a){return B?(B.hideLines(a),G=!0):!1};this.fireRenderOptionChanged=function(){var a=C.hasMRT()&&C.settings.sao;N.toggleMRTSetting(a);this.api.fireEvent({type:Autodesk.Viewing.RENDER_OPTION_CHANGED_EVENT})};this.castRayViewport=function(a,b){if(!B)return{};var c=this.camera;a.z=-1;var d=new THREE.Vector3(a.x,a.y,1);q.unprojectVector(a,c);q.unprojectVector(d,c);d.sub(a).normalize();
var d=B.rayIntersect(c.isPerspective?c.position:a,d,b),c=d[0],d=d[1],e=null;c&&(e=(e=this.model.getData())?e.fragments:null,c=c.fragId,e=e.fragToDbNode&&e.fragToDbNode[c]?e.fragToDbNode[c]:{dbId:c,fragIds:c});return{node:e,intersectPoint:d}};this.clientToViewport=function(a,b){var c=d.canvas.getBoundingClientRect();return new THREE.Vector3((a+0.5-c.left)/c.width*2-1,2*-((b+0.5-c.top)/c.height)+1,1)};this.viewportToClient=function(a,b){var c=d.canvas.getBoundingClientRect();return new THREE.Vector3(0.5*
(a+1)*c.width+c.left-0.5,-0.5*(b-1)*c.height+c.top-0.5,0)};this.castRay=function(a,b,c){return this.castRayViewport(this.clientToViewport(a,b),c)};this.intersectGroundViewport=function(a){var b=this.camera,c="z";1==r.x?c="x":1==r.y&&(c="y");a.z=-1;var d=new THREE.Vector3(a.x,a.y,1);q.unprojectVector(a,b);q.unprojectVector(d,b);d.sub(a).normalize();if(1E-6>Math.abs(d[c]))return null;a=((this.model?this.model.getBoundingBox().min[c]:0)-b.position[c])/d[c];d.multiplyScalar(a);d.add(b.position);return d};
this.intersectGround=function(a,b){return this.intersectGroundViewport(this.clientToViewport(a,b))};this.hitTestViewport=function(a,b){var c;if(d.is2d){var e=C.idAtPixel(a.x,a.y);c=this.intersectGroundViewport(a);var f=e?{dbId:e,fragIds:d.model.getData().fragments.dbId2fragId[e]}:null;c={intersectPoint:c,node:f};e&&stderr("dbId "+e)}else c=this.castRayViewport(a,b);return c};this.hitTest=function(a,b,c){return d.hitTestViewport(this.clientToViewport(a,b),c)};this.rolloverObjectViewport=function(a){F||
(C.rolloverObjectViewport(a.x,a.y),H=!0)};this.rolloverObject=function(a,b){this.rolloverObjectViewport(this.clientToViewport(a,b))};this.modelQueue=function(){return B};this.renderer=function(){return C};this.invalidate=function(a,b,c){G=a;I=b;H=c};this.currentLightPreset=function(){return p};this.matman=function(){return N};this.api=b;this.canvas=a;this.svfloader=new g.SvfLoader(this);C=new RenderContext;C.init(a);N=new g.MaterialManager(this);this.camera=new Autodesk.Viewing.UnifiedCamera(a.clientWidth,
a.clientHeight);this.cameraChangedEvent=this.camera.getCameraChangedEvent();this.scene=new THREE.Scene;this.scene.add(this.camera);this.overlayScenes={};this.selectionMaterialBase=new THREE.MeshPhongMaterial({color:6724095,specular:526344,emissive:3361911,ambient:0,opacity:1,transparent:!1});this.selectionMaterialTop=new THREE.MeshPhongMaterial({color:6724095,specular:526344,emissive:3361911,ambient:0,opacity:0.15,transparent:!0});this.selectionMaterial2d=null;this.createOverlayScene("selection",
this.selectionMaterialBase,this.selectionMaterialTop);this.fadeMaterial=new THREE.MeshPhongMaterial({color:16777215,opacity:0.1,reflectivity:0,transparent:!0});N.addMaterial("__fadeMaterial__",this.fadeMaterial,!0);this.highlightMaterial=new THREE.MeshPhongMaterial({color:6724095,specular:526344,emissive:3361911,ambient:0,opacity:1,transparent:!1});N.addMaterial("__highlightMaterial__",this.highlightMaterial,!0);this.idMaterial=null;this.progressiveRender=!0;this.maxFrameTime=50;this.minFrameTime=
25;c&&(this.controls=c(this));this.controls||(ENABLE_AUTOCAM?this.controls=new ViewController(this,this.api):(this.controls=new THREE.TrackballControls(this.camera,this.canvas),this.controls.rotateSpeed=1,this.controls.zoomSpeed=1,this.controls.panSpeed=0.5,this.controls.dynamicDampingFactor=0.5,this.controls.owner=this));this.selector=new g.Selector(this);this.controls.setSelector(this.selector);this.visibilityManager=new g.VisibilityManager(this);this.showOverlaysWhileMoving=this.showGhosting=!0;
this.skipAOWhenMoving=!1;this.keyFrameAnimator=null;this.setClearColors(230,230,230,150,150,150);C.beginScene(this.scene,this.camera,!0);C.composeFinalFrame()};Autodesk.Viewing.Private.Viewer3DImpl.prototype.constructor=Autodesk.Viewing.Private.Viewer3DImpl;AutodeskNamespace("Autodesk.Viewing.Private");
Autodesk.Viewing.Private.ViewerState=function(a){this.getState=function(b){var c=a.navigation,e=Autodesk.Viewing.Private,c={version:1,guid:Autodesk.Viewing.Private.getGUID(),seedURN:a.impl.svfloader.svfUrn,objectState:{selection:this.getSelectedNodes(),isolation:this.getIsolatedNodes(),transformsOverrides:this.getTransformsOverrides(),explodeScale:a.getExplodeScale()},viewState:{name:"",worldUpVector:c.getWorldUpVector().toArray(),pivotPoint:c.getPivotPoint().toArray(),camera:{eye:c.getPosition().toArray(),
target:c.getTarget().toArray(),up:c.getCamera().up.toArray()},projection:{isOrthographic:!c.getCamera().isPerspective},fieldOfView:c.getVerticalFov()},renderOptionState:{ambientOcclusion:{enabled:a.impl.renderer().settings.sao,radius:a.impl.renderer().getAORadius(),intensity:a.impl.renderer().getAOIntensity()},environment:e.LightPresets[a.impl.currentLightPreset()].name,toneMap:{method:a.impl.renderer().getToneMapMethod(),exposure:a.impl.renderer().getExposureBias(),lightMultiplier:this.getToneMapIntensity()},
appearance:{ghostHidden:a.impl.showGhosting,ambientShadow:a.prefs.ambientShadows,antiAliasing:a.impl.renderer().settings.antialias,progressiveDisplay:a.prefs.progressiveRendering,displayLines:a.prefs.lineRendering}}};b||(b=!0);this.applyFilter(c,b);return c};this.restoreState=function(b,c,e){if(!b)return stderr("restoreState has no viewer state to restore from."),!1;c||(c=!0);this.applyFilter(b,c);c=b.version;if(!c||1<c)return stderr("Expected version no higher than 1, received: "+c),!1;c=a.navigation;
if(c.getTransitionActive())return stderr("Abort restoreState, animation in progress..."),!1;var d=b.objectState;if(d){var g=a.impl?a.impl.selector:null,f=d.selection;f&&g&&g.setSelectionIds(f);a.isolateById(d.isolation||[]);"explodeScale"in d&&(d=parseFloat(d.explodeScale),a.explode&&a.explodeslider&&(a.explode(d),a.explodeslider.value=100*d))}if(d=b.viewState){var h=d.camera,g="fieldOfView"in d?d.fieldOfView:c.getVerticalFov(),f=this.getVector3FromArray(d.pivotPoint,c.getPivotPoint());if(h){var k=
this.getVector3FromArray(h.eye,c.getPosition()),l=this.getVector3FromArray(h.target,c.getTarget()),h=this.getVector3FromArray(h.up,c.getCamera().up);c.getCamera().up=h;"projection"in d&&"isOrthographic"in d.projection&&(d.projection.isOrthographic?c.toOrthographic():c.toPerspective());e?(c.setVerticalFov(g),c.setView(k,l)):c.setRequestTransition(!0,k,l,g,!1);c.setPivotPoint(f);c.setPivotSetFlag(!0)}}if(c=b.renderOptionState){b=a.prefs.ambientShadows;e=a.prefs.antialiasing;if(g=c.ambientOcclusion)"enabled"in
g&&(b=g.enabled),d="radius"in g?g.radius:null,g="intensity"in g?g.intensity:null,null!==d&&null!==g&&(a.impl.renderer().setAOOptions(d,g),a.impl.renderer().composeFinalFrame(!1));"environment"in c&&(d=this.getLightPresetIndex(c.environment),-1!==d&&a.setLightPreset(d));if(g=c.toneMap)"method"in g&&a.setTonemapMethod(g.method),d="lightMultiplier"in g?g.lightMultiplier:null,g="exposure"in g?g.exposure:null,null!==d&&null!==g&&(a.impl.dir_light1&&(a.impl.dir_light1.intensity=Math.pow(2,d)),a.impl.renderer().setExposureBias(g,
d),a.impl.invalidate(!0));if(c=c.appearance)"antiAliasing"in c&&(e=c.antiAliasing),"progressiveDisplay"in c&&a.setProgressiveRendering(c.progressiveDisplay),"ghostHidden"in c&&a.setGhosting(c.ghostHidden),"displayLines"in c&&a.hideLines(!c.displayLines);a.setQualityLevel(b,e)}return!0};this.getVector3FromArray=function(a,c){return a instanceof Array&&2<a.length?(new THREE.Vector3).fromArray(a):c};this.getSelectedNodes=function(){for(var b=a.impl&&a.impl.selector?a.impl.selector.getSelection():[],
c=b.length,e=[],d=0;d<c;++d)e.push(b[d].dbId);return e};this.getIsolatedNodes=function(){for(var b=a.getIsolatedNodes(),c=0,e=b.length;c<e;++c)b[c]=b[c].dbId;return b};this.getTransformsOverrides=function(){return{}};this.getToneMapIntensity=function(){var b=0;a.impl.dir_light1&&(b=0!=a.impl.dir_light1.intensity?Math.log(a.impl.dir_light1.intensity)/Math.log(2):-1E-20);return b};this.getLightPresetIndex=function(a){for(var c=Autodesk.Viewing.Private,e=0;e<c.LightPresets.length;e++)if(c.LightPresets[e].name===
a)return e;return-1};this.applyFilter=function(a,c){if(!0!==c)for(var e in a)if(a.hasOwnProperty(e)){var d=c[e];void 0===d?(delete a[e],stderr("[applyFilter] C - skipping key ["+e+"] from viewerState; unspecified in filter.")):"boolean"===typeof d?!1===d&&(delete a[e],stderr("[applyFilter] D - skipping key ["+e+"] from viewerState; explicit filtering.")):d instanceof Object?a[e]instanceof Object?this.applyFilter(a[e],c[e]):stderr("[applyFilter] A - Invalid filter Object for key ["+e+"]"):stderr("[applyFilter] B - Invalid filter value for key ["+
e+"]")}}};Autodesk.Viewing.Private.ViewerState.prototype.constructor=Autodesk.Viewing.Private.ViewerState;AutodeskNamespace("Autodesk.Viewing.i18n");
(function(){function a(a,b){if(!b||"function"===typeof b)return a;for(var c in b)a[c]=b[c];return a}function b(a,b,c){var d,e=0,f=a.length,g=void 0===f||"[object Array]"!==Object.prototype.toString.apply(a)||"function"===typeof a;if(c)if(g)for(d in a){if(!1===b.apply(a[d],c))break}else for(;e<f&&!1!==b.apply(a[e++],c););else if(g)for(d in a){if(!1===b.call(a[d],d,a[d]))break}else for(;e<f&&!1!==b.call(a[e],e,a[e++]););return a}function c(a){var b=function(a){if(window.XMLHttpRequest)return a(null,
new XMLHttpRequest);if(window.ActiveXObject)try{return a(null,new ActiveXObject("Msxml2.XMLHTTP"))}catch(b){return a(null,new ActiveXObject("Microsoft.XMLHTTP"))}return a(Error())},c=function(a){if("string"===typeof a)return a;var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")},d=function(){for(var a=arguments[0],b=1;b<arguments.length;b++){var c=arguments[b],d;for(d in c)c.hasOwnProperty(d)&&(a[d]=c[d])}return a},e=function(a,
f,g,h){"function"===typeof g&&(h=g,g={});g.cache=g.cache||!1;g.data=g.data||{};g.headers=g.headers||{};g.jsonp=g.jsonp||!1;g.async=void 0===g.async?!0:g.async;var k=d({accept:"*/*","content-type":"application/x-www-form-urlencoded;charset=UTF-8"},e.headers,g.headers),l;l="application/json"===k["content-type"]?JSON.stringify(g.data):c(g.data);if("GET"===a){var m=[];l&&(m.push(l),l=null);g.cache||m.push("_="+(new Date).getTime());g.jsonp&&(m.push("callback="+g.jsonp),m.push("jsonp="+g.jsonp));m=m.join("&");
1<m.length&&(f=-1<f.indexOf("?")?f+("&"+m):f+("?"+m));if(g.jsonp){var m=document.getElementsByTagName("head")[0],n=document.createElement("script");n.type="text/javascript";n.src=f;m.appendChild(n);return}}b(function(b,c){if(b)return h(b);c.open(a,f,g.async);for(var d in k)k.hasOwnProperty(d)&&c.setRequestHeader(d,k[d]);c.onreadystatechange=function(){if(4===c.readyState){var a=c.responseText||"";h&&h(c.status,a)}};c.send(l)})};({authBasic:function(a,b){var c=e.headers,d;d=a+":"+b;d=d.replace(/\r\n/g,
"\n");for(var f="",g=0;g<d.length;g++){var h=d.charCodeAt(g);128>h?f+=String.fromCharCode(h):(127<h&&2048>h?f+=String.fromCharCode(h>>6|192):(f+=String.fromCharCode(h>>12|224),f+=String.fromCharCode(h>>6&63|128)),f+=String.fromCharCode(h&63|128))}d=f;var f="",k,l,m,n,p=0;do k=d.charCodeAt(p++),g=d.charCodeAt(p++),h=d.charCodeAt(p++),l=k>>2,k=(k&3)<<4|g>>4,m=(g&15)<<2|h>>6,n=h&63,isNaN(g)?m=n=64:isNaN(h)&&(n=64),f+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(l)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(k)+
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(m)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(n);while(p<d.length);c.Authorization="Basic "+f},connect:function(a,b,c){return e("CONNECT",a,b,c)},del:function(a,b,c){return e("DELETE",a,b,c)},get:function(a,b,c){return e("GET",a,b,c)},head:function(a,b,c){return e("HEAD",a,b,c)},headers:function(a){e.headers=a||{}},isAllowed:function(a,b,c){this.options(a,function(a,d){c(-1!==d.text().indexOf(b))})},
options:function(a,b,c){return e("OPTIONS",a,b,c)},patch:function(a,b,c){return e("PATCH",a,b,c)},post:function(a,b,c){return e("POST",a,b,c)},put:function(a,b,c){return e("PUT",a,b,c)},trace:function(a,b,c){return e("TRACE",a,b,c)}})[a.type?a.type.toLowerCase():"get"](a.url,a,function(b,c){200===b?a.success(c,b,null):a.error(c,b,null)})}function e(a,b){"function"===typeof a&&(b=a,a={});a=a||{};G.extend(v,a);delete v.fixLng;"string"==typeof v.ns&&(v.ns={namespaces:[v.ns],defaultNs:v.ns});"string"==
typeof v.fallbackNS&&(v.fallbackNS=[v.fallbackNS]);if("string"==typeof v.fallbackLng||"boolean"==typeof v.fallbackLng)v.fallbackLng=[v.fallbackLng];v.interpolationPrefixEscaped=G.regexEscape(v.interpolationPrefix);v.interpolationSuffixEscaped=G.regexEscape(v.interpolationSuffix);v.lng||(v.lng=G.detectLanguage());v.lng?v.useCookie&&G.cookie.create(v.cookieName,v.lng,v.cookieExpirationTime,v.cookieDomain):(v.lng=v.fallbackLng[0],v.useCookie&&G.cookie.remove(v.cookieName));w=G.toLanguages(v.lng);r=w[0];
G.log("currentLng set to: "+r);var c=k;a.fixLng&&(c=function(a,b){b=b||{};b.lng=b.lng||c.lng;return k(a,b)},c.lng=r);H.setCurrentLng(r);if(v.resStore)s=v.resStore,A=!0,b&&b(c);else{var d=G.toLanguages(v.lng);"string"===typeof v.preload&&(v.preload=[v.preload]);for(var e=0,f=v.preload.length;e<f;e++)for(var g=G.toLanguages(v.preload[e]),h=0,l=g.length;h<l;h++)0>d.indexOf(g[h])&&d.push(g[h]);Autodesk.Viewing.i18n.sync.load(d,v,function(a,d){s=d;A=!0;b&&b(c)})}}function d(a,b){var c={dynamicLoad:v.dynamicLoad,
resGetPath:v.resGetPath,getAsync:v.getAsync,customLoad:v.customLoad,ns:{namespaces:a,defaultNs:""}},d=G.toLanguages(v.lng);"string"===typeof v.preload&&(v.preload=[v.preload]);for(var e=0,f=v.preload.length;e<f;e++)for(var g=G.toLanguages(v.preload[e]),h=0,k=g.length;h<k;h++)0>d.indexOf(g[h])&&d.push(g[h]);for(var l=[],e=0,f=d.length;e<f;e++){g=!1;if(h=s[d[e]])for(var k=0,m=a.length;k<m;k++)h[a[k]]||(g=!0);else g=!0;g&&l.push(d[e])}l.length?q.sync._fetch(l,c,function(c,d){var e=a.length*l.length;
G.each(a,function(a,c){0>v.ns.namespaces.indexOf(c)&&v.ns.namespaces.push(c);G.each(l,function(a,f){s[f]=s[f]||{};s[f][c]=d[f][c];e--;0===e&&b&&(v.useLocalStorage&&q.sync._storeLocal(s),b())})})}):b&&b()}function g(a,b,c,d){if(!a)return a;d=d||b;if(0>a.indexOf(d.interpolationPrefix||v.interpolationPrefix))return a;var e=d.interpolationPrefix?G.regexEscape(d.interpolationPrefix):v.interpolationPrefixEscaped,f=d.interpolationSuffix?G.regexEscape(d.interpolationSuffix):v.interpolationSuffixEscaped,h=
"HTML"+f;G.each(b,function(b,k){var l=c?c+v.keyseparator+b:b;"object"===typeof k&&null!==k?a=g(a,k,l,d):d.escapeInterpolation||v.escapeInterpolation?(a=a.replace(RegExp([e,l,h].join(""),"g"),k),a=a.replace(RegExp([e,l,f].join(""),"g"),G.escape(k))):a=a.replace(RegExp([e,l,f].join(""),"g"),k)});return a}function f(a,b){var c=G.extend({},b);for(delete c.postProcess;-1!=a.indexOf(v.reusePrefix);){u++;if(u>v.maxRecursion)break;var d=a.lastIndexOf(v.reusePrefix),e=a.indexOf(v.reuseSuffix,d)+v.reuseSuffix.length,
d=a.substring(d,e),e=d.replace(v.reusePrefix,"").replace(v.reuseSuffix,"");if(-1!=e.indexOf(",")){var f=e.indexOf(",");if(-1!=e.indexOf("{",f)&&-1!=e.indexOf("}",f)){var g=e.indexOf("{",f),h=e.indexOf("}",g)+1;try{c=G.extend(c,JSON.parse(e.substring(g,h))),e=e.substring(0,f)}catch(k){}}}e=n(e,c);a=a.replace(d,e)}return a}function h(a,b){b=b||{};var c=void 0!==b.defaultValue?b.defaultValue:a,d=m(a,b);return void 0!==d||d===c}function k(a,b){b=b||{};if(!A){G.log("i18next not finished initialization. you might have called t function before loading resources finished.");
var c=a.indexOf(":");0>c?c=0:c++;(c=b.defaultValue||a.substr(c))&&(c=g(c,b));return c}u=0;return n.apply(null,arguments)}function l(){for(var a=[],b=1;b<arguments.length;b++)a.push(arguments[b]);return{postProcess:"sprintf",sprintf:a}}function n(a,b){b&&"object"!==typeof b?"sprintf"===v.shortcutFunction?b=l.apply(null,arguments):"defaultValue"===v.shortcutFunction&&(b={defaultValue:b}):b=b||{};if(void 0===a||null===a)return"";"string"==typeof a&&(a=[a]);var c=a[0];if(1<a.length)for(var d=0;d<a.length&&
(c=a[d],!h(c,b));d++);var d=void 0!==b.defaultValue?b.defaultValue:c,e=m(c,b),k=b.lng?G.toLanguages(b.lng):w,n=b.ns||v.ns.defaultNs,p;-1<c.indexOf(v.nsseparator)&&(p=c.split(v.nsseparator),n=p[0],c=p[1]);void 0===e&&v.sendMissing&&(b.lng?I.postMissing(k[0],n,c,d,k):I.postMissing(v.lng,n,c,d,k));k=b.postProcess||v.postProcess;void 0!==e&&k&&F[k]&&(e=F[k](e,c,b));p=d;-1<d.indexOf(v.nsseparator)&&(p=d.split(v.nsseparator),p=p[1]);p===c&&v.parseMissingKey&&(d=v.parseMissingKey(d));void 0===e&&(d=g(d,
b),d=f(d,b),k&&F[k]&&(e=F[k](void 0!==b.defaultValue?b.defaultValue:c,c,b)));return void 0!==e?e:d}function m(a,b){b=b||{};var c,d=void 0!==b.defaultValue?b.defaultValue:a,e=w;if(!s||"cimode"===e[0].toLowerCase())return d;if(b.lng&&(e=G.toLanguages(b.lng),!s[e[0]])){var h=v.getAsync;v.getAsync=!1;Autodesk.Viewing.i18n.sync.load(e,v,function(a,b){G.extend(s,b);v.getAsync=h})}var l=b.ns||v.ns.defaultNs;-1<a.indexOf(v.nsseparator)&&(c=a.split(v.nsseparator),l=c[0],a=c[1]);if(b.context&&("string"==typeof b.context||
"number"==typeof b.context)&&(c=G.extend({},b),delete c.context,c.defaultValue=v.contextNotFound,c=k(l+v.nsseparator+a+"_"+b.context,c),c!=v.contextNotFound))return g(c,{context:b.context});if(void 0!==b.count&&"string"!=typeof b.count&&1!==b.count){c=G.extend({},b);delete c.count;c.defaultValue=v.pluralNotFound;var p=l+v.nsseparator+a+v.pluralSuffix,q=H.get(e[0],b.count);0<=q?p=p+"_"+q:1===q&&(p=l+v.nsseparator+a);c=k(p,c);if(c!=v.pluralNotFound)return g(c,{count:b.count,interpolationPrefix:b.interpolationPrefix,
interpolationSuffix:b.interpolationSuffix})}var r;c=a.split(v.keyseparator);p=0;for(q=e.length;p<q&&void 0===r;p++){for(var u=e[p],A=0,B=s[u]&&s[u][l];c[A];)B=B&&B[c[A]],A++;if(void 0!==B){r=Object.prototype.toString.apply(B);if("string"===typeof B)B=g(B,b),B=f(B,b);else if("[object Array]"===r&&!v.returnObjectTrees&&!b.returnObjectTrees)B=B.join("\n"),B=g(B,b),B=f(B,b);else if(null===B&&!0===v.fallbackOnNull)B=void 0;else if(null!==B)if(!v.returnObjectTrees&&!b.returnObjectTrees)v.objectTreeKeyHandler&&
"function"==typeof v.objectTreeKeyHandler?B=v.objectTreeKeyHandler(a,B,u,l,b):(B="key '"+l+":"+a+" ("+u+")' returned an object instead of string.",G.log(B));else if("[object Number]"!==r&&"[object Function]"!==r&&"[object RegExp]"!==r){var C="[object Array]"===r?[]:{};G.each(B,function(c){C[c]=n(l+v.nsseparator+a+v.keyseparator+c,b)});B=C}"string"===typeof B&&""===B.trim()&&!0===v.fallbackOnEmpty&&(B=void 0);r=B}}if(void 0===r&&!b.isFallbackLookup&&(!0===v.fallbackToDefaultNS||v.fallbackNS&&0<v.fallbackNS.length))if(b.isFallbackLookup=
!0,v.fallbackNS.length)for(e=0,c=v.fallbackNS.length;e<c;e++){if(r=m(v.fallbackNS[e]+v.nsseparator+a,b))if(p=-1<r.indexOf(v.nsseparator)?r.split(v.nsseparator)[1]:r,q=-1<d.indexOf(v.nsseparator)?d.split(v.nsseparator)[1]:d,p!==q)break}else r=m(a,b);return r}Array.prototype.indexOf||(Array.prototype.indexOf=function(a){if(null==this)throw new TypeError;var b=Object(this),c=b.length>>>0;if(0===c)return-1;var d=0;0<arguments.length&&(d=Number(arguments[1]),d!=d?d=0:0!=d&&Infinity!=d&&-Infinity!=d&&(d=
(0<d||-1)*Math.floor(Math.abs(d))));if(d>=c)return-1;for(d=0<=d?d:Math.max(c-Math.abs(d),0);d<c;d++)if(d in b&&b[d]===a)return d;return-1});Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(a){if(null==this)throw new TypeError;var b=Object(this),c=b.length>>>0;if(0===c)return-1;var d=c;1<arguments.length&&(d=Number(arguments[1]),d!=d?d=0:0!=d&&d!=1/0&&d!=-(1/0)&&(d=(0<d||-1)*Math.floor(Math.abs(d))));for(c=0<=d?Math.min(d,c-1):c-Math.abs(d);0<=c;c--)if(c in b&&b[c]===a)return c;return-1});
"function"!==typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var p=this.jQuery||this.Zepto,q={},s={},r,u=0,w=[],A=!1;"undefined"!==typeof module&&module.exports?module.exports=q:(p&&(p.i18n=p.i18n||q),this.i18n=this.i18n||q);var v={lng:void 0,load:"all",preload:[],lowerCaseLng:!1,returnObjectTrees:!1,fallbackLng:["dev"],fallbackNS:[],detectLngQS:"setLng",ns:"translation",fallbackOnNull:!0,fallbackOnEmpty:!1,fallbackToDefaultNS:!1,nsseparator:":",
keyseparator:".",selectorAttr:"data-i18n",debug:!1,resGetPath:"locales/__lng__/__ns__.json",resPostPath:"locales/add/__lng__/__ns__",getAsync:!0,postAsync:!0,resStore:void 0,useLocalStorage:!1,localStorageExpirationTime:6048E5,dynamicLoad:!1,sendMissing:!1,sendMissingTo:"fallback",sendType:"POST",interpolationPrefix:"__",interpolationSuffix:"__",reusePrefix:"$t(",reuseSuffix:")",pluralSuffix:"_plural",pluralNotFound:["plural_not_found",Math.random()].join(""),contextNotFound:["context_not_found",
Math.random()].join(""),escapeInterpolation:!1,defaultValueFromContent:!0,useDataAttrOptions:!1,cookieExpirationTime:void 0,useCookie:!0,cookieName:"i18next",cookieDomain:void 0,objectTreeKeyHandler:void 0,postProcess:void 0,parseMissingKey:void 0,shortcutFunction:"sprintf"},B={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},C={create:function(a,b,c,d){if(c){var e=new Date;e.setTime(e.getTime()+6E4*c);c="; expires="+e.toGMTString()}else c="";document.cookie=a+"="+b+c+";"+
(d?"domain="+d+";":"")+"path=/"},read:function(a){a+="=";for(var b=document.cookie.split(";"),c=0;c<b.length;c++){for(var d=b[c];" "==d.charAt(0);)d=d.substring(1,d.length);if(0===d.indexOf(a))return d.substring(a.length,d.length)}return null},remove:function(a){this.create(a,"",-1)}},N={create:function(a,b,c,d){},read:function(a){return null},remove:function(a){}},G={extend:p?p.extend:a,each:p?p.each:b,ajax:p?p.ajax:"undefined"!==typeof document?c:function(){},cookie:"undefined"!==typeof document?
C:N,detectLanguage:function(){var a,b=[];if("undefined"!==typeof window){for(var c=window.location.search.substring(1).split("&"),d=0;d<c.length;d++){var e=c[d].indexOf("=");if(0<e){var f=c[d].substring(0,e),e=c[d].substring(e+1);b[f]=e}}b[v.detectLngQS]&&(a=b[v.detectLngQS])}!a&&"undefined"!==typeof document&&v.useCookie&&(b=G.cookie.read(v.cookieName))&&(a=b);a||"undefined"===typeof navigator||(a=navigator.language?navigator.language:navigator.userLanguage);return a},escape:function(a){return"string"===
typeof a?a.replace(/[&<>"'\/]/g,function(a){return B[a]}):a},log:function(a){v.debug&&"undefined"!==typeof console&&console.log(a)},toLanguages:function(a){var b=[];if("string"===typeof a&&-1<a.indexOf("-")){var c=a.split("-");a=v.lowerCaseLng?c[0].toLowerCase()+"-"+c[1].toLowerCase():c[0].toLowerCase()+"-"+c[1].toUpperCase();"unspecific"!==v.load&&b.push(a);"current"!==v.load&&b.push(c[0])}else b.push(a);for(a=0;a<v.fallbackLng.length;a++)-1===b.indexOf(v.fallbackLng[a])&&v.fallbackLng[a]&&b.push(v.fallbackLng[a]);
return b},regexEscape:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}};G.applyReplacement=g;var I={load:function(a,b,c){b.useLocalStorage?I._loadLocal(a,b,function(d,e){for(var f=[],g=0,h=a.length;g<h;g++)e[a[g]]||f.push(a[g]);0<f.length?I._fetch(f,b,function(a,b){G.extend(e,b);I._storeLocal(b);c(null,e)}):c(null,e)}):I._fetch(a,b,function(a,b){c(null,b)})},_loadLocal:function(a,b,c){var d={},e=(new Date).getTime();if(window.localStorage){var f=a.length;G.each(a,function(a,
g){var h=window.localStorage.getItem("res_"+g);h&&(h=JSON.parse(h),h.i18nStamp&&h.i18nStamp+b.localStorageExpirationTime>e&&(d[g]=h));f--;0===f&&c(null,d)})}},_storeLocal:function(a){if(window.localStorage)for(var b in a)a[b].i18nStamp=(new Date).getTime(),window.localStorage.setItem("res_"+b,JSON.stringify(a[b]))},_fetch:function(a,b,c){var d=b.ns,e={};if(b.dynamicLoad){var f=function(a,b){c(null,b)};if("function"==typeof b.customLoad)b.customLoad(a,d.namespaces,b,f);else{var h=g(b.resGetPath,{lng:a.join("+"),
ns:d.namespaces.join("+")}),h=RESOURCE_ROOT+h;G.ajax({url:h,success:function(a,b,d){G.log("loaded: "+h);a=a.json();c(null,a)},error:function(a,b,d){G.log("failed loading: "+h);c(null,void 0)},dataType:"text",async:b.getAsync})}}else{var k=d.namespaces.length*a.length,l;G.each(d.namespaces,function(d,f){G.each(a,function(a,d){var g=function(a,b){a&&(l=l||[],l.push(a));e[d]=e[d]||{};e[d][f]=b;k--;0===k&&c(l,e)};"function"==typeof b.customLoad?b.customLoad(d,f,b,g):I._fetchOne(d,f,b,g)})})}},_fetchOne:function(a,
b,c,d){var e=g(c.resGetPath,{lng:a,ns:b}),e=RESOURCE_ROOT+e;G.ajax({url:e,success:function(a,b,c){G.log("loaded: "+e);for(var f=!1,g=!1,h="",k=0;k<a.length;k++)if(b=a[k],c=a[k+1],g||"\\"===a[k-1]||'"'!==b||(f=!f),f)h+=b;else{if(!g&&"//"===b+c)g="single",k++;else if("single"===g&&"\r\n"===b+c)g=!1,k++;else if("single"===g&&"\n"===b)g=!1;else if(!g&&"/*"===b+c){g="multi";k++;continue}else if("multi"===g&&"*/"===b+c){g=!1;k++;continue}g||(h+=b)}d(null,JSON.parse(h))},error:function(a,b,c){b&&200==b||
a&&a.status&&200==a.status?G.log("There is a typo in: "+e):b&&404==b||a&&a.status&&404==a.status?G.log("Does not exist: "+e):G.log((b?b:a&&a.status?a.status:null)+" when loading "+e);d(c,{})},dataType:"text",async:c.getAsync})},postMissing:function(a,b,c,d,e){var f={};f[c]=d;var h=[];if("fallback"===v.sendMissingTo&&!1!==v.fallbackLng[0])for(a=0;a<v.fallbackLng.length;a++)h.push({lng:v.fallbackLng[a],url:g(v.resPostPath,{lng:v.fallbackLng[a],ns:b})});else if("current"===v.sendMissingTo||"fallback"===
v.sendMissingTo&&!1===v.fallbackLng[0])h.push({lng:a,url:g(v.resPostPath,{lng:a,ns:b})});else if("all"===v.sendMissingTo){a=0;for(var k=e.length;a<k;a++)h.push({lng:e[a],url:g(v.resPostPath,{lng:e[a],ns:b})})}e=0;for(a=h.length;e<a;e++){var l=h[e];G.ajax({url:l.url,type:v.sendType,data:f,success:function(a,e,f){G.log("posted missing key '"+c+"' to: "+l.url);a=c.split(".");e=0;for(f=s[l.lng][b];a[e];)f=e===a.length-1?f[a[e]]=d:f[a[e]]=f[a[e]]||{},e++},error:function(a,b,d){G.log("failed posting missing key '"+
c+"' to: "+l.url)},dataType:"json",async:v.postAsync})}}},H={rules:{ach:{name:"Acholi",numbers:[1,2],plurals:function(a){return Number(1<a)}},af:{name:"Afrikaans",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ak:{name:"Akan",numbers:[1,2],plurals:function(a){return Number(1<a)}},am:{name:"Amharic",numbers:[1,2],plurals:function(a){return Number(1<a)}},an:{name:"Aragonese",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ar:{name:"Arabic",numbers:[0,1,2,3,11,100],plurals:function(a){return Number(0===
a?0:1==a?1:2==a?2:3<=a%100&&10>=a%100?3:11<=a%100?4:5)}},arn:{name:"Mapudungun",numbers:[1,2],plurals:function(a){return Number(1<a)}},ast:{name:"Asturian",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ay:{name:"Aymar\u00e1",numbers:[1],plurals:function(a){return 0}},az:{name:"Azerbaijani",numbers:[1,2],plurals:function(a){return Number(1!=a)}},be:{name:"Belarusian",numbers:[1,2,5],plurals:function(a){return Number(1==a%10&&11!=a%100?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2)}},bg:{name:"Bulgarian",
numbers:[1,2],plurals:function(a){return Number(1!=a)}},bn:{name:"Bengali",numbers:[1,2],plurals:function(a){return Number(1!=a)}},bo:{name:"Tibetan",numbers:[1],plurals:function(a){return 0}},br:{name:"Breton",numbers:[1,2],plurals:function(a){return Number(1<a)}},bs:{name:"Bosnian",numbers:[1,2,5],plurals:function(a){return Number(1==a%10&&11!=a%100?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2)}},ca:{name:"Catalan",numbers:[1,2],plurals:function(a){return Number(1!=a)}},cgg:{name:"Chiga",numbers:[1],
plurals:function(a){return 0}},cs:{name:"Czech",numbers:[1,2,5],plurals:function(a){return Number(1==a?0:2<=a&&4>=a?1:2)}},csb:{name:"Kashubian",numbers:[1,2,5],plurals:function(a){return Number(1==a?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2)}},cy:{name:"Welsh",numbers:[1,2,3,8],plurals:function(a){return Number(1==a?0:2==a?1:8!=a&&11!=a?2:3)}},da:{name:"Danish",numbers:[1,2],plurals:function(a){return Number(1!=a)}},de:{name:"German",numbers:[1,2],plurals:function(a){return Number(1!=a)}},dz:{name:"Dzongkha",
numbers:[1],plurals:function(a){return 0}},el:{name:"Greek",numbers:[1,2],plurals:function(a){return Number(1!=a)}},en:{name:"English",numbers:[1,2],plurals:function(a){return Number(1!=a)}},eo:{name:"Esperanto",numbers:[1,2],plurals:function(a){return Number(1!=a)}},es:{name:"Spanish",numbers:[1,2],plurals:function(a){return Number(1!=a)}},es_ar:{name:"Argentinean Spanish",numbers:[1,2],plurals:function(a){return Number(1!=a)}},et:{name:"Estonian",numbers:[1,2],plurals:function(a){return Number(1!=
a)}},eu:{name:"Basque",numbers:[1,2],plurals:function(a){return Number(1!=a)}},fa:{name:"Persian",numbers:[1],plurals:function(a){return 0}},fi:{name:"Finnish",numbers:[1,2],plurals:function(a){return Number(1!=a)}},fil:{name:"Filipino",numbers:[1,2],plurals:function(a){return Number(1<a)}},fo:{name:"Faroese",numbers:[1,2],plurals:function(a){return Number(1!=a)}},fr:{name:"French",numbers:[1,2],plurals:function(a){return Number(1<a)}},fur:{name:"Friulian",numbers:[1,2],plurals:function(a){return Number(1!=
a)}},fy:{name:"Frisian",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ga:{name:"Irish",numbers:[1,2,3,7,11],plurals:function(a){return Number(1==a?0:2==a?1:7>a?2:11>a?3:4)}},gd:{name:"Scottish Gaelic",numbers:[1,2,3,20],plurals:function(a){return Number(1==a||11==a?0:2==a||12==a?1:2<a&&20>a?2:3)}},gl:{name:"Galician",numbers:[1,2],plurals:function(a){return Number(1!=a)}},gu:{name:"Gujarati",numbers:[1,2],plurals:function(a){return Number(1!=a)}},gun:{name:"Gun",numbers:[1,2],plurals:function(a){return Number(1<
a)}},ha:{name:"Hausa",numbers:[1,2],plurals:function(a){return Number(1!=a)}},he:{name:"Hebrew",numbers:[1,2],plurals:function(a){return Number(1!=a)}},hi:{name:"Hindi",numbers:[1,2],plurals:function(a){return Number(1!=a)}},hr:{name:"Croatian",numbers:[1,2,5],plurals:function(a){return Number(1==a%10&&11!=a%100?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2)}},hu:{name:"Hungarian",numbers:[1,2],plurals:function(a){return Number(1!=a)}},hy:{name:"Armenian",numbers:[1,2],plurals:function(a){return Number(1!=
a)}},ia:{name:"Interlingua",numbers:[1,2],plurals:function(a){return Number(1!=a)}},id:{name:"Indonesian",numbers:[1],plurals:function(a){return 0}},is:{name:"Icelandic",numbers:[1,2],plurals:function(a){return Number(1!=a%10||11==a%100)}},it:{name:"Italian",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ja:{name:"Japanese",numbers:[1],plurals:function(a){return 0}},jbo:{name:"Lojban",numbers:[1],plurals:function(a){return 0}},jv:{name:"Javanese",numbers:[0,1],plurals:function(a){return Number(0!==
a)}},ka:{name:"Georgian",numbers:[1],plurals:function(a){return 0}},kk:{name:"Kazakh",numbers:[1],plurals:function(a){return 0}},km:{name:"Khmer",numbers:[1],plurals:function(a){return 0}},kn:{name:"Kannada",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ko:{name:"Korean",numbers:[1],plurals:function(a){return 0}},ku:{name:"Kurdish",numbers:[1,2],plurals:function(a){return Number(1!=a)}},kw:{name:"Cornish",numbers:[1,2,3,4],plurals:function(a){return Number(1==a?0:2==a?1:3==a?2:3)}},ky:{name:"Kyrgyz",
numbers:[1],plurals:function(a){return 0}},lb:{name:"Letzeburgesch",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ln:{name:"Lingala",numbers:[1,2],plurals:function(a){return Number(1<a)}},lo:{name:"Lao",numbers:[1],plurals:function(a){return 0}},lt:{name:"Lithuanian",numbers:[1,2,10],plurals:function(a){return Number(1==a%10&&11!=a%100?0:2<=a%10&&(10>a%100||20<=a%100)?1:2)}},lv:{name:"Latvian",numbers:[1,2,0],plurals:function(a){return Number(1==a%10&&11!=a%100?0:0!==a?1:2)}},mai:{name:"Maithili",
numbers:[1,2],plurals:function(a){return Number(1!=a)}},mfe:{name:"Mauritian Creole",numbers:[1,2],plurals:function(a){return Number(1<a)}},mg:{name:"Malagasy",numbers:[1,2],plurals:function(a){return Number(1<a)}},mi:{name:"Maori",numbers:[1,2],plurals:function(a){return Number(1<a)}},mk:{name:"Macedonian",numbers:[1,2],plurals:function(a){return Number(1==a||1==a%10?0:1)}},ml:{name:"Malayalam",numbers:[1,2],plurals:function(a){return Number(1!=a)}},mn:{name:"Mongolian",numbers:[1,2],plurals:function(a){return Number(1!=
a)}},mnk:{name:"Mandinka",numbers:[0,1,2],plurals:function(a){return Number(1==a?1:2)}},mr:{name:"Marathi",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ms:{name:"Malay",numbers:[1],plurals:function(a){return 0}},mt:{name:"Maltese",numbers:[1,2,11,20],plurals:function(a){return Number(1==a?0:0===a||1<a%100&&11>a%100?1:10<a%100&&20>a%100?2:3)}},nah:{name:"Nahuatl",numbers:[1,2],plurals:function(a){return Number(1!=a)}},nap:{name:"Neapolitan",numbers:[1,2],plurals:function(a){return Number(1!=
a)}},nb:{name:"Norwegian Bokmal",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ne:{name:"Nepali",numbers:[1,2],plurals:function(a){return Number(1!=a)}},nl:{name:"Dutch",numbers:[1,2],plurals:function(a){return Number(1!=a)}},nn:{name:"Norwegian Nynorsk",numbers:[1,2],plurals:function(a){return Number(1!=a)}},no:{name:"Norwegian",numbers:[1,2],plurals:function(a){return Number(1!=a)}},nso:{name:"Northern Sotho",numbers:[1,2],plurals:function(a){return Number(1!=a)}},oc:{name:"Occitan",numbers:[1,
2],plurals:function(a){return Number(1<a)}},or:{name:"Oriya",numbers:[2,1],plurals:function(a){return Number(1!=a)}},pa:{name:"Punjabi",numbers:[1,2],plurals:function(a){return Number(1!=a)}},pap:{name:"Papiamento",numbers:[1,2],plurals:function(a){return Number(1!=a)}},pl:{name:"Polish",numbers:[1,2,5],plurals:function(a){return Number(1==a?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2)}},pms:{name:"Piemontese",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ps:{name:"Pashto",numbers:[1,
2],plurals:function(a){return Number(1!=a)}},pt:{name:"Portuguese",numbers:[1,2],plurals:function(a){return Number(1!=a)}},pt_br:{name:"Brazilian Portuguese",numbers:[1,2],plurals:function(a){return Number(1!=a)}},rm:{name:"Romansh",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ro:{name:"Romanian",numbers:[1,2,20],plurals:function(a){return Number(1==a?0:0===a||0<a%100&&20>a%100?1:2)}},ru:{name:"Russian",numbers:[1,2,5],plurals:function(a){return Number(1==a%10&&11!=a%100?0:2<=a%10&&4>=
a%10&&(10>a%100||20<=a%100)?1:2)}},sah:{name:"Yakut",numbers:[1],plurals:function(a){return 0}},sco:{name:"Scots",numbers:[1,2],plurals:function(a){return Number(1!=a)}},se:{name:"Northern Sami",numbers:[1,2],plurals:function(a){return Number(1!=a)}},si:{name:"Sinhala",numbers:[1,2],plurals:function(a){return Number(1!=a)}},sk:{name:"Slovak",numbers:[1,2,5],plurals:function(a){return Number(1==a?0:2<=a&&4>=a?1:2)}},sl:{name:"Slovenian",numbers:[5,1,2,3],plurals:function(a){return Number(1==a%100?
1:2==a%100?2:3==a%100||4==a%100?3:0)}},so:{name:"Somali",numbers:[1,2],plurals:function(a){return Number(1!=a)}},son:{name:"Songhay",numbers:[1,2],plurals:function(a){return Number(1!=a)}},sq:{name:"Albanian",numbers:[1,2],plurals:function(a){return Number(1!=a)}},sr:{name:"Serbian",numbers:[1,2,5],plurals:function(a){return Number(1==a%10&&11!=a%100?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2)}},su:{name:"Sundanese",numbers:[1],plurals:function(a){return 0}},sv:{name:"Swedish",numbers:[1,2],plurals:function(a){return Number(1!=
a)}},sw:{name:"Swahili",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ta:{name:"Tamil",numbers:[1,2],plurals:function(a){return Number(1!=a)}},te:{name:"Telugu",numbers:[1,2],plurals:function(a){return Number(1!=a)}},tg:{name:"Tajik",numbers:[1,2],plurals:function(a){return Number(1<a)}},th:{name:"Thai",numbers:[1],plurals:function(a){return 0}},ti:{name:"Tigrinya",numbers:[1,2],plurals:function(a){return Number(1<a)}},tk:{name:"Turkmen",numbers:[1,2],plurals:function(a){return Number(1!=
a)}},tr:{name:"Turkish",numbers:[1,2],plurals:function(a){return Number(1<a)}},tt:{name:"Tatar",numbers:[1],plurals:function(a){return 0}},ug:{name:"Uyghur",numbers:[1],plurals:function(a){return 0}},uk:{name:"Ukrainian",numbers:[1,2,5],plurals:function(a){return Number(1==a%10&&11!=a%100?0:2<=a%10&&4>=a%10&&(10>a%100||20<=a%100)?1:2)}},ur:{name:"Urdu",numbers:[1,2],plurals:function(a){return Number(1!=a)}},uz:{name:"Uzbek",numbers:[1,2],plurals:function(a){return Number(1<a)}},vi:{name:"Vietnamese",
numbers:[1],plurals:function(a){return 0}},wa:{name:"Walloon",numbers:[1,2],plurals:function(a){return Number(1<a)}},wo:{name:"Wolof",numbers:[1],plurals:function(a){return 0}},yo:{name:"Yoruba",numbers:[1,2],plurals:function(a){return Number(1!=a)}},zh:{name:"Chinese",numbers:[1],plurals:function(a){return 0}}},addRule:function(a,b){H.rules[a]=b},setCurrentLng:function(a){if(!H.currentRule||H.currentRule.lng!==a){var b=a.split("-");H.currentRule={lng:a,rule:H.rules[b[0]]}}},get:function(a,b){var c=
a.split("-");if(c=H.currentRule&&H.currentRule.lng===a?H.currentRule.rule:H.rules[c[0]]){var d=c.plurals(b),d=c.numbers[d];2===c.numbers.length&&1===c.numbers[0]&&(2===d?d=-1:1===d&&(d=1));c=d}else c=1===b?"1":"-1";return c}},F={},p=function(a,b){F[a]=b},P=function(){function a(b){return Object.prototype.toString.call(b).slice(8,-1).toLowerCase()}var b=function(){b.cache.hasOwnProperty(arguments[0])||(b.cache[arguments[0]]=b.parse(arguments[0]));return b.format.call(null,b.cache[arguments[0]],arguments)};
b.format=function(b,c){var d=1,e=b.length,f="",g=[],h,k,l,m;for(h=0;h<e;h++)if(f=a(b[h]),"string"===f)g.push(b[h]);else if("array"===f){l=b[h];if(l[2])for(f=c[d],k=0;k<l[2].length;k++){if(!f.hasOwnProperty(l[2][k]))throw P('[sprintf] property "%s" does not exist',l[2][k]);f=f[l[2][k]]}else f=l[1]?c[l[1]]:c[d++];if(/[^s]/.test(l[8])&&"number"!=a(f))throw P("[sprintf] expecting number but found %s",a(f));switch(l[8]){case "b":f=f.toString(2);break;case "c":f=String.fromCharCode(f);break;case "d":f=
parseInt(f,10);break;case "e":f=l[7]?f.toExponential(l[7]):f.toExponential();break;case "f":f=l[7]?parseFloat(f).toFixed(l[7]):parseFloat(f);break;case "o":f=f.toString(8);break;case "s":f=(f=String(f))&&l[7]?f.substring(0,l[7]):f;break;case "u":f=Math.abs(f);break;case "x":f=f.toString(16);break;case "X":f=f.toString(16).toUpperCase()}f=/[def]/.test(l[8])&&l[3]&&0<=f?"+"+f:f;k=l[4]?"0"==l[4]?"0":l[4].charAt(1):" ";m=l[6]-String(f).length;if(l[6]){for(var n=[];0<m;n[--m]=k);k=n.join("")}else k="";
g.push(l[5]?f+k:k+f)}return g.join("")};b.cache={};b.parse=function(a){for(var b=[],c=[],d=0;a;){if(null!==(b=/^[^\x25]+/.exec(a)))c.push(b[0]);else if(null!==(b=/^\x25{2}/.exec(a)))c.push("%");else if(null!==(b=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(a))){if(b[2]){var d=d|1,e=[],f=b[2],g=[];if(null!==(g=/^([a-z_][a-z_\d]*)/i.exec(f)))for(e.push(g[1]);""!==(f=f.substring(g[0].length));)if(null!==(g=/^\.([a-z_][a-z_\d]*)/i.exec(f)))e.push(g[1]);else if(null!==
(g=/^\[(\d+)\]/.exec(f)))e.push(g[1]);else throw"[sprintf] huh?";else throw"[sprintf] huh?";b[2]=e}else d|=2;if(3===d)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";c.push(b)}else throw"[sprintf] huh?";a=a.substring(b[0].length)}return c};return b}();p("sprintf",function(a,b,c){return c.sprintf?"[object Array]"===Object.prototype.toString.apply(c.sprintf)?(b=c.sprintf,b.unshift(a),P.apply(null,b)):"object"===typeof c.sprintf?P(a,c.sprintf):a:a});Autodesk.Viewing.i18n.init=
e;Autodesk.Viewing.i18n.setLng=function(a,b,c){"function"===typeof b?(c=b,b={}):b||(b={});b.lng=a;return e(b,c)};Autodesk.Viewing.i18n.preload=function(a,b){"string"===typeof a&&(a=[a]);for(var c=0,d=a.length;c<d;c++)0>v.preload.indexOf(a[c])&&v.preload.push(a[c]);return e(b)};Autodesk.Viewing.i18n.addResourceBundle=function(a,b,c){"string"!==typeof b?(c=b,b=v.ns.defaultNs):0>v.ns.namespaces.indexOf(b)&&v.ns.namespaces.push(b);s[a]=s[a]||{};s[a][b]=s[a][b]||{};G.extend(s[a][b],c)};Autodesk.Viewing.i18n.removeResourceBundle=
function(a,b){"string"!==typeof b&&(b=v.ns.defaultNs);s[a]=s[a]||{};s[a][b]={}};Autodesk.Viewing.i18n.loadNamespace=function(a,b){d([a],b)};Autodesk.Viewing.i18n.loadNamespaces=d;Autodesk.Viewing.i18n.localize=function(){Array.prototype.forEach.call(document.querySelectorAll("[data-i18n]"),function(a){var b,c,d=a.getAttribute("data-i18n").split(/\[|\]/);1===d.length?(c=null,b=d[0]):3===d.length&&(c=d[1],b=d[2]);b=[c,b];c=b[0];b=b[1];(d=Autodesk.Viewing.i18n.translate(b))?c?a.setAttribute(c,d):a.textContent=
d:c?a.setAttribute(c,b):a.textContent=b})};Autodesk.Viewing.i18n.setDefaultNamespace=function(a){v.ns.defaultNs=a};Autodesk.Viewing.i18n.t=k;Autodesk.Viewing.i18n.translate=k;Autodesk.Viewing.i18n.exists=h;Autodesk.Viewing.i18n.detectLanguage=G.detectLanguage;Autodesk.Viewing.i18n.pluralExtensions=H;Autodesk.Viewing.i18n.sync=I;Autodesk.Viewing.i18n.functions=G;Autodesk.Viewing.i18n.lng=function(){return r};Autodesk.Viewing.i18n.addPostProcessor=p;Autodesk.Viewing.i18n.options=v})();AutodeskNamespace("Autodesk.Viewing.UI");
Autodesk.Viewing.UI.DockingPanel=function(a,b,c,e){this.visibilityCallbacks=[];this.movedSinceLastClick=!1;this.parentContainer=a;this.container=document.createElement("div");this.container.id=b;this.container.lastWidth="";this.container.dockRight=!1;this.container.dockBottom=!1;this.titleLabel=c;this.container.className=(e&&void 0!==e.shadow?e.shadow:1)?"dockingPanel shadow":"dockingPanel";a.appendChild(this.container);this.listeners=[];this.initialize();this.setVisible(!1)};
Autodesk.Viewing.UI.DockingPanel.prototype.initialize=function(){this.title=this.createTitleBar(this.titleLabel||this.container.id);this.container.appendChild(this.title);this.initializeMoveHandlers(this.title);this.closer=this.createCloseButton();this.container.appendChild(this.closer)};
Autodesk.Viewing.UI.DockingPanel.prototype.uninitialize=function(){for(var a=0;a<this.listeners.length;++a){var b=this.listeners[a];b.target.removeEventListener(b.eventId,b.callback)}this.listeners=[];this.visibilityCallbacks=[];this.parentContainer.removeChild(this.container);this.closer=this.title=this.container=this.parentContainer=null};Autodesk.Viewing.UI.DockingPanel.prototype.addVisibilityListener=function(a){this.visibilityCallbacks.push(a)};
Autodesk.Viewing.UI.DockingPanel.prototype.isVisible=function(){return"none"!==this.container.style.display&&""!==this.container.style.display};
Autodesk.Viewing.UI.DockingPanel.prototype.setVisible=function(a){this.container.style.display=a?"block":"none";if(a){if(this.container.dockRight){var b=this.parentContainer.getBoundingClientRect().width,c=this.container.style.width?this.container.style.width:this.container.getBoundingClientRect().width;c||(c=this.container.lastWidth);c=""===c?300:parseInt(c);this.container.style.left=b-c+"px"}this.container.dockBottom&&(b=this.parentContainer.getBoundingClientRect().height,c=this.container.style.height?
this.container.style.height:this.container.getBoundingClientRect().height,c||(c=this.container.lastHeight),c=""===c?300:parseInt(c),this.container.style.top=b-c+"px")}else this.container.lastWidth=this.parentContainer.style.width,this.container.lastHeight=this.parentContainer.style.height;for(b=0;b<this.visibilityCallbacks.length;b++)this.visibilityCallbacks[b](a)};Autodesk.Viewing.UI.DockingPanel.prototype.isVisible=function(){return Boolean("block"===this.container.style.display)};
Autodesk.Viewing.UI.DockingPanel.prototype.initializeMoveHandlers=function(a){function b(a){var b=p.parentContainer.getBoundingClientRect();m.style.maxWidth&&parseInt(m.style.width)>parseInt(m.style.maxWidth)&&(m.style.width=m.style.maxWidth);m.style.maxHeight&&parseInt(m.style.height)>parseInt(m.style.maxHeight)&&(m.style.height=m.style.maxHeight);100>parseInt(m.style.width)&&(m.style.width="100px");100>parseInt(m.style.height)&&(m.style.height="100px");l+=a.screenX-g;n+=a.screenY-f;e=h+l;d=k+n;
var c=parseInt(m.style.width),u=parseInt(m.style.height);isNaN(c)&&(c=p.container.getBoundingClientRect().width);isNaN(u)&&(u=p.container.getBoundingClientRect().height);5>e&&(e=0);5>d&&(d=0);m.dockRight=!1;m.dockBottom=!1;b.width-5<e+c&&(e=b.width-c,m.dockRight=!0);b.height-5<d+u&&(d=b.height-u,m.dockBottom=!0);m.style.left=e+"px";m.style.top=d+"px";m.style.maxWidth=b.width-e+"px";m.style.maxHeight=b.height-d+"px";g=a.screenX;f=a.screenY;p.onMove(a,e,d)}function c(a){window.removeEventListener("mousemove",
b);window.removeEventListener("mouseup",c);p.onEndMove(a,e,d)}var e,d,g,f,h,k,l,n,m=this.container,p=this;p.addEventListener(a,"mousedown",function(a){g=a.screenX;f=a.screenY;n=l=0;h=p.container.offsetLeft;k=p.container.offsetTop;window.addEventListener("mousemove",b,!1);window.addEventListener("mouseup",c,!1);a.preventDefault();p.onStartMove(a,h,k)})};
Autodesk.Viewing.UI.DockingPanel.prototype.initializeCloseHandler=function(a){var b=this;b.addEventListener(a,"click",function(a){b.setVisible(!1)},!1)};Autodesk.Viewing.UI.DockingPanel.prototype.createScrollContainer=function(a){var b=document.createElement("div");b.className=a&&a.left?"dockingPanelScroll left":"dockingPanelScroll right";a&&a.heightAdjustment&&(b.style.height="calc(100% - "+a.heightAdjustment+"px)");return b};
Autodesk.Viewing.UI.DockingPanel.prototype.createTitleBar=function(a){var b=document.createElement("div");b.className="dockingPanelTitle";b.textContent=Autodesk.Viewing.i18n.translate(a);var c=this;c.addEventListener(b,"click",function(a){if(!c.movedSinceLastClick)c.onTitleClick(a);c.movedSinceLastClick=!1});c.addEventListener(b,"dblclick",function(a){c.onTitleDoubleClick(a)});return b};
Autodesk.Viewing.UI.DockingPanel.prototype.createCloseButton=function(){var a=document.createElement("div");a.className="dockingPanelClose";a.innerHTML="&times;";this.initializeCloseHandler(a);return a};Autodesk.Viewing.UI.DockingPanel.prototype.onStartMove=function(a,b,c){};Autodesk.Viewing.UI.DockingPanel.prototype.onEndMove=function(a,b,c){};Autodesk.Viewing.UI.DockingPanel.prototype.onMove=function(a,b,c){this.movedSinceLastClick=!0};Autodesk.Viewing.UI.DockingPanel.prototype.onTitleClick=function(a){};
Autodesk.Viewing.UI.DockingPanel.prototype.onTitleDoubleClick=function(a){};Autodesk.Viewing.UI.DockingPanel.prototype.addEventListener=function(a,b,c){a.addEventListener(b,c);this.listeners.push({target:a,eventId:b,callback:c})};Autodesk.Viewing.UI.DockingPanel.prototype.removeEventListener=function(a,b,c){for(var e=0;e<this.listeners.length;++e){var d=this.listeners[e];if(d.target===a&&d.eventId===b&&d.callback===c)return a.removeEventListener(b,c),this.listeners.splice(e,1),!0}return!1};AutodeskNamespace("Autodesk.Viewing.UI");
Autodesk.Viewing.UI.ModelStructurePanel=function(a,b,c,e){Autodesk.Viewing.UI.DockingPanel.call(this,a,b,c,e);this.container.className=this.container.className?this.container.className+" modelStructurePanel":"modelStructurePanel";this.scrollContainer=this.createScrollContainer({left:!1,heightAdjustment:70});this.scrollContainer.style.marginTop="20px";this.container.appendChild(this.scrollContainer);this.scrollContainer.id=this.container.id+"-scroll-container";this.tree=this.modelRoot=null;this.selectedNodes=
[];this.options=e};Autodesk.Viewing.UI.ModelStructurePanel.prototype=Object.create(Autodesk.Viewing.UI.DockingPanel.prototype);Autodesk.Viewing.UI.ModelStructurePanel.prototype.constructor=Autodesk.Viewing.UI.ModelStructurePanel;
Autodesk.Viewing.UI.ModelStructurePanel.prototype.setModel=function(a,b){var c=this,e=function(){var a=new Autodesk.Viewing.UI.TreeDelegate;a.getTreeNodeId=function(a){return a.dbId};a.getTreeNodeLabel=function(a){return c.getNodeLabel(a)};a.getTreeNodeClass=function(a){return c.getNodeClass(a)};a.isTreeNodeGroup=function(a){return c.isGroupNode(a)};a.shouldCreateTreeNode=function(a){return c.shouldInclude(a)};a.onTreeNodeHover=function(a,b,d){c.onHover(b,d)};a.onTreeNodeClick=function(a,b,d){c.onClick(b,
d)};a.onTreeNodeRightClick=function(a,b,d){c.onRightClick(b,d)};a.onTreeNodeDoubleClick=function(a,b,d){c.onDoubleClick(b,d)};return a};c.selectedNodes=[];var d=b;d||(c.options&&c.options.defaultTitle?d=c.options.defaultTitle:a&&(d=a.name));d||(d="Model Structure");c.setTitle(d);if(c.tree){for(;c.scrollContainer.hasChildNodes();)c.scrollContainer.removeChild(c.scrollContainer.lastChild);c.title.removeEventListener("click",c.onTitleClick);c.title.removeEventListener("dblclick",c.onTitleDoubleClick)}if(c.modelRoot=
a)e=e(),c.tree=new Autodesk.Viewing.UI.Tree(e,a,c.scrollContainer,{}),c.options&&c.options.hasOwnProperty("startCollapsed")&&!c.options.startCollapsed||(c.tree.setAllCollapsed(!0),c.tree.setCollapsed(e.getTreeNodeId(a),!1)),c.options&&c.options.hasOwnProperty("excludeRoot")&&!c.options.excludeRoot||c.tree.addClass(e.getTreeNodeId(a),"exclude")};Autodesk.Viewing.UI.ModelStructurePanel.prototype.setTitle=function(a){this.title.textContent=Autodesk.Viewing.i18n.translate(a)};
Autodesk.Viewing.UI.ModelStructurePanel.prototype.getNodeLabel=function(a){return a.name&&""!==a.name?a.name:"Object "+a.dbId};Autodesk.Viewing.UI.ModelStructurePanel.prototype.getNodeClass=function(a){return""};Autodesk.Viewing.UI.ModelStructurePanel.prototype.isGroupNode=function(a){return a.children&&Array.isArray(a.children)&&0<a.children.length};Autodesk.Viewing.UI.ModelStructurePanel.prototype.shouldInclude=function(a){return!0};
Autodesk.Viewing.UI.ModelStructurePanel.prototype.onHover=function(a,b){};Autodesk.Viewing.UI.ModelStructurePanel.prototype.onClick=function(a,b){this.setSelection([a])};Autodesk.Viewing.UI.ModelStructurePanel.prototype.onDoubleClick=function(a,b){};Autodesk.Viewing.UI.ModelStructurePanel.prototype.onRightClick=function(a,b){};Autodesk.Viewing.UI.ModelStructurePanel.prototype.onTitleClick=function(a){this.onClick(this.modelRoot,a)};
Autodesk.Viewing.UI.ModelStructurePanel.prototype.onTitleDoubleClick=function(a){this.onDoubleClick(this.modelRoot,a)};
Autodesk.Viewing.UI.ModelStructurePanel.prototype.setSelection=function(a){if(this.tree){for(var b=0;b<this.selectedNodes.length;++b)for(var c=this.selectedNodes[b].parent;c;)this.tree.removeClass(this.tree.delegate().getTreeNodeId(c),"ancestor-selected"),c=c.parent;for(var e=[],b=0;b<a.length;++b)for(e.push(a[b].dbId),c=a[b].parent;c;)this.tree.addClass(this.tree.delegate().getTreeNodeId(c),"ancestor-selected"),c=c.parent;this.selectedNodes=a;this.tree.setSelection(e)}};
Autodesk.Viewing.UI.ModelStructurePanel.prototype.addClass=function(a,b){return null!==this.tree&&this.tree.addClass(a,b)};Autodesk.Viewing.UI.ModelStructurePanel.prototype.removeClass=function(a,b){return null!==this.tree&&this.tree.removeClass(a,b)};AutodeskNamespace("Autodesk.Viewing.UI");
Autodesk.Viewing.UI.PropertyPanel=function(a,b,c,e){Autodesk.Viewing.UI.DockingPanel.call(this,a,b,c,e);this.container.className=this.container.className?this.container.className+" propertyPanel":"propertyPanel";this.container.dockRight=!0;this.scrollContainer=this.createScrollContainer({left:!1,heightAdjustment:65});this.scrollContainer.style.marginTop="20px";this.container.appendChild(this.scrollContainer);this.scrollContainer.id=this.container.id+"-scroll-container";this.properties={};var d=this;
a=function(){function a(b){return"category"===b.type}var b=new Autodesk.Viewing.UI.TreeDelegate;b.getTreeNodeId=function(a){return a.name+(a.hasOwnProperty("value")?a.value:"")+(a.hasOwnProperty("category")?a.category:"")};b.getTreeNodeClass=function(b){return a(b)?d.getCategoryClass(b):d.getPropertyClass(b)};b.isTreeNodeGroup=function(b){return a(b)};b.onTreeNodeHover=function(b,c,e){if(a(c))d.onCategoryHover(c,e);else d.onPropertyHover(c,e)};b.onTreeNodeClick=function(b,c,e){if(a(c))d.onCategoryClick(c,
e);else d.onPropertyClick(c,e)};b.onTreeNodeRightClick=function(b,c,e){if(a(c))d.onCategoryRightClick(c,e);else d.onPropertyRightClick(c,e)};b.onTreeNodeDoubleClick=function(b,c,e){if(a(c))d.onCategoryDoubleClick(c,e);else d.onPropertyDoubleClick(c,e)};b.createTreeNode=function(b,c){a(b)?d.displayCategory(b,c):d.displayProperty(b,c)};return b}();this.tree=new Autodesk.Viewing.UI.Tree(a,null,this.scrollContainer,{})};Autodesk.Viewing.UI.PropertyPanel.prototype=Object.create(Autodesk.Viewing.UI.DockingPanel.prototype);
Autodesk.Viewing.UI.PropertyPanel.prototype.constructor=Autodesk.Viewing.UI.PropertyPanel;
Autodesk.Viewing.UI.PropertyPanel.prototype.setProperties=function(a,b){this.removeAllProperties();for(var c=[],e=[],d=0;d<a.length;d++){var g=a[d];if(!g.hidden){var g=a[d],f=a[d].displayCategory;f&&"string"===typeof f&&""!==f?c.push(g):e.push(g)}}if(0===c.length+e.length)e=document.getElementById(this.tree.myRootContainerId),d=document.createElement("div"),d.className="noProperties",d.setAttribute("data-i18n","No properties to display"),d.textContent=Autodesk.Viewing.i18n.translate("No properties to display"),
e.appendChild(d);else{for(d=0;d<c.length;d++)g=c[d],this.addProperty(g.displayName,g.displayValue,g.displayCategory);c=0<c.length;for(d=0;d<e.length;d++)g=e[d],f=Autodesk.Viewing.i18n.translate("Other"),this.addProperty(g.displayName,g.displayValue,c?f:"")}};Autodesk.Viewing.UI.PropertyPanel.prototype.setDefaultProperties=function(){};
Autodesk.Viewing.UI.PropertyPanel.prototype.addProperty=function(a,b,c,e){if(this.tree.getElementByNode({name:a,value:b,category:c}))return!1;e=null;a={name:a,value:b,type:"property"};c?((e=this.tree.getElementByNode({name:c}))||(e=this.tree.createElement_({name:c,type:"category"},document.getElementById(this.tree.myRootContainerId))),a.category=c):e=document.getElementById(this.tree.myRootContainerId);this.properties[this.tree.delegate().getTreeNodeId(a)]=a;this.tree.createElement_(a,e);return!0};
Autodesk.Viewing.UI.PropertyPanel.prototype.hasProperties=function(){for(var a in this.properties)return!0;return!1};Autodesk.Viewing.UI.PropertyPanel.prototype.removeProperty=function(a,b,c,e){a={name:a,value:b,category:c};return(b=this.tree.getElementByNode(a))?(delete this.properties[this.tree.delegate().getTreeNodeId(a)],b.parentNode.removeChild(b),!0):!1};Autodesk.Viewing.UI.PropertyPanel.prototype.removeAllProperties=function(){this.properties={};for(var a=document.getElementById(this.tree.myRootContainerId);a.hasChildNodes();)a.removeChild(a.lastChild)};
Autodesk.Viewing.UI.PropertyPanel.prototype.setCategoryCollapsed=function(a,b){var c=this.tree.delegate().getTreeNodeId(a);this.tree.setCollapsed(c,b)};Autodesk.Viewing.UI.PropertyPanel.prototype.isCategoryCollapsed=function(a){a=this.tree.delegate().getTreeNodeId(a);return this.tree.isCollapsed(a)};
Autodesk.Viewing.UI.PropertyPanel.prototype.resizeToContent=function(a){var b=document.getElementById(this.tree.myRootContainerId).clientHeight+75;if(a&&a.maxHeight){var c=this.container.getBoundingClientRect();a=a.maxHeight-c.top;b>a&&(b=a)}this.container.style.height=b.toString()+"px"};
Autodesk.Viewing.UI.PropertyPanel.prototype.highlight=function(a,b){for(var c in this.properties){var e=this.tree.getElementByNode(this.properties[c]),d=e.innerHTML.replace(/(<highlight>|<\/highlight>)/igm,"");e.innerHTML=d;""!==a&&(d=d.replace(RegExp("(\\b"+a+"\\b)","gim"),"<highlight>$1</highlight>"),e.innerHTML=d)}};Autodesk.Viewing.UI.PropertyPanel.prototype.displayCategory=function(a,b){var c=document.createElement("div");c.textContent=a.name;c.title=a.name;c.className="categoryName";b.appendChild(c)};
Autodesk.Viewing.UI.PropertyPanel.prototype.displayProperty=function(a,b){var c=document.createElement("div");c.textContent=a.name;c.title=a.name;c.className="propertyName";var e=document.createElement("div");e.textContent=a.value;e.title=a.value;e.className="propertyValue";b.appendChild(c);b.appendChild(e)};Autodesk.Viewing.UI.PropertyPanel.prototype.getCategoryClass=function(a){return"category"};Autodesk.Viewing.UI.PropertyPanel.prototype.getPropertyClass=function(a){return"property"};
Autodesk.Viewing.UI.PropertyPanel.prototype.onCategoryHover=function(a,b){};Autodesk.Viewing.UI.PropertyPanel.prototype.onPropertyHover=function(a,b){};Autodesk.Viewing.UI.PropertyPanel.prototype.onCategoryClick=function(a,b){this.setCategoryCollapsed(a,!this.isCategoryCollapsed(a))};Autodesk.Viewing.UI.PropertyPanel.prototype.onPropertyClick=function(a,b){};Autodesk.Viewing.UI.PropertyPanel.prototype.onCategoryDoubleClick=function(a,b){};
Autodesk.Viewing.UI.PropertyPanel.prototype.onPropertyDoubleClick=function(a,b){};Autodesk.Viewing.UI.PropertyPanel.prototype.onCategoryRightClick=function(a,b){};Autodesk.Viewing.UI.PropertyPanel.prototype.onPropertyRightClick=function(a,b){};AutodeskNamespace("Autodesk.Viewing.Private");Autodesk.Viewing.Private.ContextMenu=function(a){this.viewer=a;this.menus=[];this.open=!1;this.itemWidth=100;this.itemHeight=25};Autodesk.Viewing.Private.ContextMenu.prototype.constructor=Autodesk.Viewing.Private.ContextMenu;
Autodesk.Viewing.Private.ContextMenu.prototype.show=function(a,b){var c=this.viewer.container.getBoundingClientRect(),e=a.clientX-c.left,c=a.clientY-c.top;if(!this.open){var d=this;this.showMenu(b,0,e,c);this.open=!0;this.hideEventListener=function(a){"menuItem"!==a.target.className&&d.hide(a)};document.body.addEventListener("mousedown",this.hideEventListener,!0)}};
Autodesk.Viewing.Private.ContextMenu.prototype.showMenu=function(a,b,c,e){0>c&&(c=0);0>e&&(e=0);var d=a.length,g=this.viewer.impl.canvas.width,f=this.viewer.impl.canvas.height;c+this.itemWidth+10>g&&(c=g-this.itemWidth-10);e+d*this.itemHeight>f&&(e=f-d*this.itemHeight);g=document.createElement("div");g.width=this.itemWidth;g.className="menu";g.style.top=e+"px";g.style.left=c+"px";g.style.zIndex=10;this.viewer.container.appendChild(g);for(var h=f=0;h<d;++h){var k=a[h],l=k.title,k=k.target,n=this.createMenuItem(g,
l,f),f=f+this.itemHeight;"object"===typeof k?this.addSubMenuClickToMenuItem(n,b,k,c+this.itemWidth+24,e+f-this.itemHeight):"function"===typeof k?this.addCallbackToMenuItem(n,k):console.warn("Invalid context menu option:",l,k)}g.style.height=f+"px";null!=this.menus[b]&&this.menus[b].parentNode.removeChild(this.menus[b]);this.menus[b]=g};
Autodesk.Viewing.Private.ContextMenu.prototype.createMenuItem=function(a,b,c){c=document.createElement("div");c.className="menuItem";c.setAttribute("data-i18n",b);c.textContent=Autodesk.Viewing.i18n.translate(b);a.appendChild(c);return c};Autodesk.Viewing.Private.ContextMenu.prototype.addSubMenuClickToMenuItem=function(a,b,c,e,d){var g=this;a.addEventListener("click",function(){g.showMenu(c,b+1,e,d)})};
Autodesk.Viewing.Private.ContextMenu.prototype.addCallbackToMenuItem=function(a,b){var c=this;a.addEventListener("click",function(a){c.hide();b();a.preventDefault();return!1})};Autodesk.Viewing.Private.ContextMenu.prototype.hide=function(){if(this.open){for(var a=0;a<this.menus.length;++a)this.menus[a]&&this.menus[a].parentNode.removeChild(this.menus[a]);this.menus=[];this.open=!1;document.body.removeEventListener("mousedown",this.hideEventListener);return!0}return!1};AutodeskNamespace("Autodesk.Viewing.UI");
Autodesk.Viewing.UI.ObjectContextMenu=function(a){this.viewer=a;this.contextMenu=new Autodesk.Viewing.Private.ContextMenu(a)};Autodesk.Viewing.UI.ObjectContextMenu.prototype.constructor=Autodesk.Viewing.UI.ObjectContextMenu;
Autodesk.Viewing.UI.ObjectContextMenu.prototype.show=function(a){var b=this.viewer.getSelectionCount(),c=this.viewer.getSelectionVisibility();(b=this.buildMenu(a,{numSelected:b,hasSelected:0<b,hasVisible:c.hasVisible,hasHidden:c.hasHidden}))&&0<b.length&&this.contextMenu.show(a,b)};Autodesk.Viewing.UI.ObjectContextMenu.prototype.hide=function(){return this.contextMenu.hide()};Autodesk.Viewing.UI.ObjectContextMenu.prototype.buildMenu=function(a,b){return null};AutodeskNamespace("Autodesk.Viewing.Private");
Autodesk.Viewing.Private.addClass=function(a,b){if(a){for(var c=!1,e=a.className.split(/\s+/).filter(Boolean),d=0;d<e.length;++d)if(e[d]===b){c=!0;break}if(!c)return e.push(b),a.className=e.join(" "),!0}return!1};Autodesk.Viewing.Private.removeClass=function(a,b){if(a)for(var c=a.className.split(/\s+/).filter(Boolean),e=0;e<c.length;++e)if(c[e]===b)return c.splice(e,1),a.className=c.join(" "),!0;return!1};
Autodesk.Viewing.Private.hasClass=function(a,b){if(a)for(var c=a.className.split(/\s+/).filter(Boolean),e=0;e<c.length;++e)if(c[e]===b)return!0;return!1};Autodesk.Viewing.Private.toggleClass=function(a,b){Autodesk.Viewing.Private.hasClass(a,b)?Autodesk.Viewing.Private.removeClass(a,b):Autodesk.Viewing.Private.addClass(a,b)};
Autodesk.Viewing.Private.Preferences=function(a,b){function c(a,c){if("undefined"!==typeof localStorage&&"string"===typeof a)return a=b+a,"undefined"!==typeof c?localStorage[a]=c:c=localStorage[a],c}b||(b="Autodesk.Viewing.Preferences.");var e={},d={},g={},f=this;a.addEventListener("PrefChanged",function(a){var b=d[a.name];b&&(b=b.changed)&&b(a.value)});a.addEventListener("PrefReset",function(a){for(var b in d)d.hasOwnProperty(b)&&(a=d[b].reset)&&a(f[b])});this.load=function(a){e=a;for(var b in e)if(e.hasOwnProperty(b))if("function"===
typeof this[b])stderr("Preferences: invalid name="+b);else{a=c(b);var d=!1;if(void 0!==a)try{a=JSON.parse(a),d=!0}catch(f){}this[b]=d?a:e[b];g[b]={}}};this.tag=function(a,b){if(a){b?Array.isArray(b)||(b=[b]):b=Object.keys(e);for(var c=0;c<b.length;++c)g[b[c]][a]=!0}};this.untag=function(a,b){if(a){b?Array.isArray(b)||(b=[b]):b=Object.keys(e);for(var c=0;c<b.length;++c)g[b[c]][a]=!1}};this.reset=function(b,c){b&&void 0===c&&(c=!0);for(var d in e)if(e.hasOwnProperty(d)){if(b){var f=!!g[d][b];if(c&&
!f||!c&&f)continue}this.set(d,e[d],!1)&&a.fireEvent({type:"PrefReset",name:d,value:this[d]})}};this.get=function(a){return this[a]};this.set=function(b,d,e){return this[b]!==d?(this[b]=d,c(b,d),(void 0===e||e)&&a.fireEvent({type:"PrefChanged",name:b,value:d}),!0):!1};this.addListeners=function(a,b,c){d[a]={changed:b,reset:c}}};AutodeskNamespace("Autodesk.Viewing.Private");
Autodesk.Viewing.Private.OptionSlider=function(a,b,c,e){function d(a){a.target!=g.stepperElement&&(g.stepperElement.value=g.sliderElement.value);g.fireChangeEvent()}var g=this;this.tbody=e;this.sliderRow=this.tbody.insertRow(-1);e=this.sliderRow.insertCell(0);this.caption=document.createElement("div");this.caption.setAttribute("data-i18n",a);this.caption.textContent=Autodesk.Viewing.i18n.translate(a);this.sliderElement=document.createElement("input");this.sliderElement.type="range";this.sliderElement.id=
a+"_slider";this.sliderElement.min=b;this.sliderElement.max=c;e.appendChild(this.caption);e.appendChild(this.sliderElement);e=this.sliderRow.insertCell(1);this.stepperElement=document.createElement("input");this.stepperElement.type="number";this.stepperElement.id=a+"_stepper";this.stepperElement.min=b;this.stepperElement.max=c;this.stepperElement.step=1;this.stepperElement.style.width="64px";e.appendChild(this.stepperElement);this.blockEvent=!1;this.stepperElement.addEventListener("change",function(a){a.target!=
g.sliderElement&&(g.sliderElement.value=g.stepperElement.value);g.fireChangeEvent()},!1);this.sliderElement.addEventListener("change",d,!1);this.sliderElement.addEventListener("input",d,!1)};Autodesk.Viewing.Private.OptionSlider.prototype=Object.create(THREE.EventDispatcher.prototype);
Autodesk.Viewing.Private.OptionSlider.prototype.fireChangeEvent=function(){if(!this.blockEvent){this.value=this.sliderElement.value;var a=new CustomEvent("change",{detail:{target:this,value:this.sliderElement.value}});this.dispatchEvent(a)}};Autodesk.Viewing.Private.OptionSlider.prototype.setValue=function(a){this.blockEvent=!0;this.value=a;this.sliderElement.value=a;this.stepperElement.value=a;this.blockEvent=!1};
Autodesk.Viewing.Private.OptionSlider.prototype.setDisabled=function(a){this.sliderElement.disabled=a;this.stepperElement.disabled=a;this.caption.disabled=a};
Autodesk.Viewing.Private.OptionCheckbox=function(a,b,c){THREE.EventDispatcher.call(this.prototype);var e=this;this.tbody=b;this.sliderRow=this.tbody.insertRow(-1);b=this.sliderRow.insertCell(0);this.caption=document.createElement("div");this.caption.setAttribute("data-i18n",a);this.caption.textContent=Autodesk.Viewing.i18n.translate(a);b.appendChild(this.caption);b=this.sliderRow.insertCell(1);this.checkElement=document.createElement("input");this.checkElement.type="checkbox";this.checkElement.id=
a+"_check";this.checkElement.checked=c;b.appendChild(this.checkElement);this.blockEvent=!1;this.checked=c;this.checkElement.addEventListener("change",function(a){e.fireChangeEvent()},!1);this.checkElement.addEventListener("click",function(a){a.stopPropagation()},!1);this.sliderRow.addEventListener("click",function(a){e.checkElement.checked=!e.checkElement.checked;e.fireChangeEvent()},!1)};Autodesk.Viewing.Private.OptionCheckbox.prototype=Object.create(THREE.EventDispatcher.prototype);
Autodesk.Viewing.Private.OptionCheckbox.prototype.fireChangeEvent=function(){if(!this.blockEvent){this.checked=this.checkElement.checked;var a=new CustomEvent("change",{detail:{target:this,value:this.checkElement.checked}});this.dispatchEvent(a)}};Autodesk.Viewing.Private.OptionCheckbox.prototype.setValue=function(a){this.blockEvent=!0;this.checked=a;this.checkElement.checked=a;this.blockEvent=!1};
Autodesk.Viewing.Private.OptionCheckbox.prototype.setDisabled=function(a){this.checkElement.disabled=a;this.caption.disabled=a};Autodesk.Viewing.Private.OptionCheckbox.prototype.setVisibility=function(a){this.sliderRow.style.display=a?"table-row":"none"};
Autodesk.Viewing.Private.OptionDropDown=function(a,b,c,e){THREE.EventDispatcher.call(this.prototype);var d=this;this.tbody=b;this.sliderRow=this.tbody.insertRow(-1);b=this.sliderRow.insertCell(0);this.caption=document.createElement("div");this.caption.setAttribute("data-i18n",a);this.caption.textContent=Autodesk.Viewing.i18n.translate(a);b.appendChild(this.caption);b=this.sliderRow.insertCell(1);this.dropdownElement=document.createElement("select");this.dropdownElement.id=a+"_dropdown";this.dropdownElement.className=
"optionDropDown";for(a=0;a<c.length;a++){var g=document.createElement("option");g.value=a;g.setAttribute("data-i18n",c[a]);g.textContent=Autodesk.Viewing.i18n.translate(c[a]);this.dropdownElement.add(g)}this.selectedIndex=this.dropdownElement.selectedIndex=e;b.appendChild(this.dropdownElement);this.blockEvent=!1;this.dropdownElement.addEventListener("change",function(a){d.fireChangeEvent()},!1)};Autodesk.Viewing.Private.OptionDropDown.prototype=Object.create(THREE.EventDispatcher.prototype);
Autodesk.Viewing.Private.OptionDropDown.prototype.setSelectedIndex=function(a){this.blockEvent=!0;this.selectedIndex=this.dropdownElement.selectedIndex=a;this.blockEvent=!1};Autodesk.Viewing.Private.OptionDropDown.prototype.setSelectedValue=function(a){this.blockEvent=!0;this.dropdownElement.selectedValue=a;this.selectedIndex=this.dropdownElement.selectedIndex;this.blockEvent=!1};
Autodesk.Viewing.Private.OptionDropDown.prototype.fireChangeEvent=function(){if(!this.blockEvent){this.selectedIndex=this.dropdownElement.selectedIndex;var a=new CustomEvent("change",{detail:{target:this,value:this.selectedIndex}});this.dispatchEvent(a)}};Autodesk.Viewing.Private.OptionDropDown.prototype.setDisabled=function(a){this.dropdownElement.disabled=a;this.caption.disabled=a};AutodeskNamespace("Autodesk.Viewing.Private");
Autodesk.Viewing.Private.ProgressBar=function(a){this.bg=document.createElement("div");this.bg.className="progressbg";this.fg=document.createElement("div");this.fg.className="progressfg";this.bg.appendChild(this.fg);a.appendChild(this.bg);this.widthScale=this.fg.clientWidth};Autodesk.Viewing.Private.ProgressBar.prototype.setPercent=function(a){99<=a?this.bg.style.visibility="hidden":(this.bg.style.visibility="visible",this.fg.style.width=this.widthScale*a*0.01+"px")};AutodeskNamespace("Autodesk.Viewing.Private");
Autodesk.Viewing.Private.RenderOptionsPanel=function(a){var b=this,c=Autodesk.Viewing.Private;this.viewer=a;Autodesk.Viewing.UI.DockingPanel.call(this,a.container,"RenderOptionsPanel","Rendering Options");this.table=document.createElement("table");this.table.className="tftable";this.tbody=document.createElement("tbody");this.table.appendChild(this.tbody);this.scrollpanel=this.createScrollContainer({heightAdjustment:70});this.scrollpanel.style.marginTop="20px";this.container.appendChild(this.scrollpanel);
this.scrollpanel.appendChild(this.table);this.container.style.width="364px";this.container.style.top="260px";this.container.style.left="220px";this.container.style.height="460px";this.container.dockRight=!0;var e=[],d;for(d in a.impl.BackgroundPresets)e.push(d);this.bgSelect=new c.OptionDropDown("Background Color",this.tbody,e,-1);this.updateBgColorIndex();this.addEventListener(this.bgSelect,"change",function(c){c=a.BackgroundPresets[b.bgSelect.value];a.prefs.set("backgroundColorPreset",JSON.stringify(c));
a.impl.setClearColors(c[0],c[1],c[2],c[3],c[4],c[5])});this.saoToggle=new c.OptionCheckbox("AO Enabled",this.tbody,!0);this.addEventListener(this.saoToggle,"change",function(c){c=b.saoToggle.checked;a.prefs.set("ambientShadows",c);a.setQualityLevel(c,a.impl.renderer().settings.antialias)});this.saoRadius=new c.OptionSlider("AO Radius",0,100,this.tbody);this.saoRadius.setValue(10);this.saoRadius.sliderElement.step=this.saoRadius.stepperElement.step=1;this.addEventListener(this.saoRadius,"change",function(c){a.impl.renderer().setAOOptions(parseInt(b.saoRadius.value),
parseFloat(b.saoIntensity.value));a.impl.renderer().composeFinalFrame(!1)});this.saoIntensity=new c.OptionSlider("AO Intensity",0,3,this.tbody);this.saoIntensity.setValue(0.75);this.saoIntensity.sliderElement.step=this.saoIntensity.stepperElement.step=0.1;this.addEventListener(this.saoIntensity,"change",function(c){a.impl.renderer().setAOOptions(parseInt(b.saoRadius.value),parseFloat(b.saoIntensity.value));a.impl.renderer().composeFinalFrame(!1)});e=[];for(d=0;d<c.LightPresets.length;d++)e.push(c.LightPresets[d].name);
this.envSelect=new c.OptionDropDown("Environment",this.tbody,e,a.impl.currentLightPreset());this.addEventListener(this.envSelect,"change",function(c){a.setLightPreset(b.envSelect.selectedIndex)});e=a.impl.renderer().getToneMapMethod();this.toneMapMethod=new c.OptionDropDown("Tonemap Method",this.tbody,["None","Canon-RGB","Canon-Lum"],e);this.addEventListener(this.toneMapMethod,"change",function(){a.setTonemapMethod(b.toneMapMethod.selectedIndex)});this.exposureBias=new c.OptionSlider("Exposure Bias",
-30,30,this.tbody);this.exposureBias.setValue(a.impl.renderer().getExposureBias());this.exposureBias.sliderElement.step=this.exposureBias.stepperElement.step=0.1;this.addEventListener(this.exposureBias,"change",function(c){a.impl.renderer().setExposureBias(b.exposureBias.value,b.whiteScale.value);a.impl.invalidate(!0)});this.exposureBias.setDisabled(0==e);this.whiteScale=new c.OptionSlider("Light Intensity",-5,20,this.tbody);e=0;a.impl.dir_light1&&(e=0!=a.impl.dir_light1.intensity?Math.log(a.impl.dir_light1.intensity)/
Math.log(2):-1E-20);this.whiteScale.setValue(e);this.whiteScale.sliderElement.step=this.whiteScale.stepperElement.step=0.1;this.addEventListener(this.whiteScale,"change",function(c){a.impl.dir_light1.intensity=Math.pow(2,b.whiteScale.value);a.impl.renderer().setExposureBias(b.exposureBias.value,b.whiteScale.value);a.impl.invalidate(!0)});this.fovAngle=new c.OptionSlider("FOV-degrees",6.88,100,this.tbody);this.fovAngle.setValue(a.getFOV());this.addEventListener(this.fovAngle,"change",function(c){a.setFOV(parseFloat(b.fovAngle.value))});
this.addEventListener(this.viewer,Autodesk.Viewing.CAMERA_CHANGE_EVENT,function(c){c=parseFloat(b.fovAngle.value);var d=a.getFOV();c!=d&&b.fovAngle.setValue(d)});this.addEventListener(this.viewer,Autodesk.Viewing.RENDER_OPTION_CHANGED_EVENT,function(a){b.syncUI()})};Autodesk.Viewing.Private.RenderOptionsPanel.prototype=Object.create(Autodesk.Viewing.UI.DockingPanel.prototype);Autodesk.Viewing.Private.RenderOptionsPanel.prototype.constructor=Autodesk.Viewing.Private.RenderOptionsPanel;
Autodesk.Viewing.Private.RenderOptionsPanel.prototype.updateBgColorIndex=function(){var a=this.viewer.impl,b=a.clearColorTop,a=a.clearColorBottom,b=[255*b.x|0,255*b.y|0,255*b.z|0,255*a.x|0,255*a.y|0,255*a.z|0],c,e;for(e in Autodesk.Viewing.Private.BackgroundPresets){var a=Autodesk.Viewing.Private.BackgroundPresets[e],d;for(d=0;6>d&&a[d]==b[d];d++);if(6==d){c=e;break}}if(!c)for(c="Custom",e=Autodesk.Viewing.Private.BackgroundPresets[c],a=0;6>a;a++)e[a]=b[a];this.bgSelect.setSelectedValue(c)};
Autodesk.Viewing.Private.RenderOptionsPanel.prototype.syncUI=function(){var a=this.viewer.impl,b=0;a.dir_light1&&(b=0!=a.dir_light1.intensity?Math.log(a.dir_light1.intensity)/Math.log(2):-1E-20);this.whiteScale.setValue(b);this.exposureBias.setValue(a.renderer().getExposureBias());this.updateBgColorIndex();b=a.renderer().getToneMapMethod();this.toneMapMethod.setSelectedIndex(b);this.envSelect.setSelectedIndex(a.currentLightPreset());this.exposureBias.setDisabled(0==b);this.saoToggle.setValue(a.renderer().settings.sao);
this.saoRadius.setDisabled(!a.renderer().settings.sao);this.saoIntensity.setDisabled(!a.renderer().settings.sao);this.saoRadius.setValue(a.renderer().getAORadius());this.saoIntensity.setValue(a.renderer().getAOIntensity());this.fovAngle.setValue(this.viewer.getFOV())};
Autodesk.Viewing.Private.RenderOptionsPanel.prototype.uninitialize=function(){Autodesk.Viewing.UI.DockingPanel.prototype.uninitialize.call(this);this.viewer=this.fovAngle=this.whiteScale=this.exposureBias=this.toneMapMethod=this.envSelect=this.saoIntensity=this.saoRadius=this.saoToggle=this.bgSelect=this.tbody=this.table=null};AutodeskNamespace("Autodesk.Viewing.Private");
Autodesk.Viewing.Private.LayersPanel=function(a){this.viewer=a;this.layersRoot=this.tree=null;this.visibilityImages={};this.isMac=-1!==navigator.userAgent.search("Mac OS");this.LAYER_VISIBLE="layer_visible.png";this.LAYER_HIDDEN="layer_hidden.png";this.LAYER_MIXED="layer_mixed.png";this.LAYER_FILTER_IMAGE_ID="layerFilterImageId";var b="Layer Manager",c=a.config.viewableName;c&&(b=Autodesk.Viewing.i18n.translate(b)+": "+c);Autodesk.Viewing.UI.DockingPanel.call(this,a.container,"LayersPanel",b);this.container.className=
this.container.className?this.container.className+" layersPanel":"layersPanel";this.filterContainer=document.createElement("div");this.filterContainer.className="filterBox";this.filterContainer.id=this.container.id+"-search-container";this.container.appendChild(this.filterContainer);this.scrollContainer=this.createScrollContainer({heightAdjustment:125});this.scrollContainer.style.marginTop="5px";this.container.appendChild(this.scrollContainer);this.scrollContainer.id=this.container.id+"-scroll-container";
this.container.style.width="340px";this.container.style.top="180px";this.container.style.left="0";this.container.style.height="470px";var e=this;a.model?e.build():e.addEventListener(a,Autodesk.Viewing.GEOMETRY_LOADED_EVENT,function(){e.build()})};Autodesk.Viewing.Private.LayersPanel.prototype=Object.create(Autodesk.Viewing.UI.DockingPanel.prototype);Autodesk.Viewing.Private.LayersPanel.prototype.constructor=Autodesk.Viewing.Private.LayersPanel;
Autodesk.Viewing.Private.LayersPanel.prototype.uninitialize=function(){Autodesk.Viewing.UI.DockingPanel.prototype.uninitialize.call(this);this.scrollContainer=this.visibilityImages=this.layersRoot=this.tree=this.viewer=null};
Autodesk.Viewing.Private.LayersPanel.prototype.build=function(){var a=this,b=function(){var b=new Autodesk.Viewing.UI.TreeDelegate;b.getTreeNodeId=function(a){return a.id};b.getTreeNodeLabel=function(b){return a.getNodeLabel(b)};b.getTreeNodeClass=function(b){return a.getNodeClass(b)};b.isTreeNodeGroup=function(b){return a.isGroupNode(b)};b.shouldCreateTreeNode=function(b){return a.shouldInclude(b)};b.onTreeNodeHover=function(b,c,e){a.onHover(c,e)};b.onTreeNodeClick=function(b,c,e){a.onClick(c,e)};
b.onTreeNodeRightClick=function(b,c,e){a.onRightClick(c,e)};b.onTreeNodeDoubleClick=function(b,c,e){a.onDoubleClick(c,e)};b.createTreeNode=function(b,c){a.createNode(b,c)};return b}(),c=a.layersRoot=a.viewer.model.getLayersRoot();(function(){function b(){if(f.value){var c=f.value.toLowerCase(),d=function(a){var b=[];if(-1!==a.name.toLowerCase().indexOf(c))b.push(a);else if(!a.isLayer){a=a.children;for(var e=0;e<a.length;++e)b=b.concat(d(a[e]))}return b},e=a.layersRoot;e&&k.setLayerVisible(d(e),!0,
!0)}else k.setLayerVisible(null,!0);h=null}var c=document.createElement("div");c.className="filterTitle";var g=document.createElement("div");g.textContent="Layers";g.setAttribute("data-i18n","Layers");c.appendChild(g);a.filterContainer.appendChild(c);c=document.createElement("div");c.className="filterSearch";a.filterContainer.appendChild(c);g=document.createElement("img");g.className="filterImage";g.id=a.LAYER_FILTER_IMAGE_ID;g.src="";c.appendChild(g);a.visibilityImages[a.LAYER_FILTER_IMAGE_ID]=g;
a.addEventListener(g,"click",function(b){var c=-1===a.visibilityImages[a.LAYER_FILTER_IMAGE_ID].src.indexOf(a.LAYER_VISIBLE);a.viewer.setLayerVisible(null,c);b.stopPropagation()});var f=document.createElement("input");f.className="filterInput";f.placeholder=Autodesk.Viewing.i18n.translate("Enter filter term");f.setAttribute("data-i18n","[placeholder]Enter filter term");f.type="search";f.incremental="incremental";c.appendChild(f);var h=null,k=a.viewer;f.addEventListener("keyup",function(a){h&&clearTimeout(h);
h=setTimeout(b,500)});f.addEventListener("click",function(a){""===f.value?k.setLayerVisible(null,!0):setTimeout(function(){""===f.value&&(k.setLayerVisible(null,!0),a.preventDefault())},1)})})();a.tree=new Autodesk.Viewing.UI.Tree(b,c,a.scrollContainer,{});a.tree.addClass(b.getTreeNodeId(c),"exclude");a.update();a.addEventListener(a.viewer,Autodesk.Viewing.LAYER_VISIBILITY_CHANGED_EVENT,function(){a.update()})};
Autodesk.Viewing.Private.LayersPanel.prototype.update=function(){function a(a,b){a.src=RESOURCE_ROOT+"icons/"+(1===b?d.LAYER_VISIBLE:0===b?d.LAYER_HIDDEN:d.LAYER_MIXED)}function b(a,b){0===b?d.tree.addClass(a.id,"dim"):d.tree.removeClass(a.id,"dim")}function c(a){for(var b,c=0;c<a.length;++c){var d=a[c];void 0===b?b=d:0===d&&1===b?b=-1:1===d&&0===b&&(b=-1);if(-1===b)break}return b}function e(f){var g=d.visibilityImages[f.id];if(!f.isLayer){for(var k=f.children,l=[],n=0;n<k.length;++n)l=l.concat(e(k[n]));
k=c(l);a(g,k);b(f,k);return l}l=d.viewer.isLayerVisible(f)?1:0;a(g,l);b(f,l);return[l]}var d=this,g=e(d.layersRoot);a(d.visibilityImages[d.LAYER_FILTER_IMAGE_ID],c(g))};Autodesk.Viewing.Private.LayersPanel.prototype.getNodeLabel=function(a){return a.isLayer||0===a.childCount?a.name:a.name+" ("+a.childCount+")"};Autodesk.Viewing.Private.LayersPanel.prototype.getNodeClass=function(a){return""};Autodesk.Viewing.Private.LayersPanel.prototype.isGroupNode=function(a){return!a.isLayer};
Autodesk.Viewing.Private.LayersPanel.prototype.shouldInclude=function(a){return!0};Autodesk.Viewing.Private.LayersPanel.prototype.onHover=function(a,b){};Autodesk.Viewing.Private.LayersPanel.prototype.onClick=function(a,b){var c=this.isMac&&b.metaKey||!this.isMac&&b.ctrlKey,e=-1===this.visibilityImages[a.id].src.indexOf(this.LAYER_VISIBLE);this.viewer.setLayerVisible(a,e,!c)};Autodesk.Viewing.Private.LayersPanel.prototype.onDoubleClick=function(a,b){};
Autodesk.Viewing.Private.LayersPanel.prototype.onRightClick=function(a,b){};Autodesk.Viewing.Private.LayersPanel.prototype.onTitleClick=function(a){this.viewer.setLayerVisible(null,!0)};Autodesk.Viewing.Private.LayersPanel.prototype.onTitleDoubleClick=function(a){this.viewer.fitToView()};
Autodesk.Viewing.Private.LayersPanel.prototype.createNode=function(a,b){var c=document.createElement("img");b.children&&0<b.children.length?b.insertBefore(c,b.children[0]):b.appendChild(c);c.src="";this.visibilityImages[a.id]=c;var e=document.createElement("label");e.textContent=this.getNodeLabel(a);b.appendChild(e);var d=this;this.addEventListener(c,"click",function(b){var c=-1===d.visibilityImages[a.id].src.indexOf(d.LAYER_VISIBLE);d.viewer.setLayerVisible(a,c);b.stopPropagation()})};AutodeskNamespace("Autodesk.Viewing.Private");
Autodesk.Viewing.Private.NavigationTab=1;Autodesk.Viewing.Private.PerformanceTab=2;
Autodesk.Viewing.Private.Viewer3dSettingsPanel=function(a,b){this.viewer=a;this.mode=b;Autodesk.Viewing.UI.DockingPanel.call(this,a.container,"Viewer3dSettingsPanel","Settings");this.container.style.minWidth="425px";this.container.style.maxWidth="800px";this.container.style.height="385px";this.container.style.top="200px";this.container.style.left="220px";this.container.style.resize="none";this.container.style.position="absolute";this.container.dockRight=!0;this.main=document.createElement("div");
this.main.className="viewer-tabs";this.container.appendChild(this.main);this.tabs=document.createElement("ul");this.tab1=document.createElement("li");this.tab1.id="navigationtab";this.tab2=document.createElement("li");this.tab2.id="performancetab";var c=document.createElement("a"),e=document.createElement("span");e.setAttribute("data-i18n","Navigation and seletion");e.textContent=Autodesk.Viewing.i18n.translate("Navigation and seletion");c.appendChild(e);var e=document.createElement("a"),d=document.createElement("span");
d.setAttribute("data-i18n","Performance and appearance");d.textContent=Autodesk.Viewing.i18n.translate("Performance and appearance");e.appendChild(d);this.tab1.appendChild(c);this.tab2.appendChild(e);this.tabs.appendChild(this.tab1);this.tabs.appendChild(this.tab2);this.main.appendChild(this.tabs);this.table1=document.createElement("table");this.table1.className="viewer-table tftable";this.tbody1=document.createElement("tbody");this.table1.appendChild(this.tbody1);this.table2=document.createElement("table");
this.table2.className="viewer-table tftable";this.tbody2=document.createElement("tbody");this.table2.appendChild(this.tbody2);this.container.appendChild(this.table1);this.container.appendChild(this.table2);c=document.createElement("div");c.className="viewer-restore-defaults";e=document.createElement("label");e.setAttribute("data-i18n","Restore settings defaults");e.textContent=Autodesk.Viewing.i18n.translate("Restore settings defaults");c.appendChild(e);this.addEventListener(c,"click",function(){var b=
a.model.is2d()?"2d":"3d";a.prefs.reset(b)},!1);this.container.appendChild(c);this.mouseOver=!1;this.selectTab(Autodesk.Viewing.Private.NavigationTab);var g=this;this.addEventListener(this.tab1,"click",function(a){g.selectTab(Autodesk.Viewing.Private.NavigationTab)});this.addEventListener(this.tab2,"click",function(a){g.selectTab(Autodesk.Viewing.Private.PerformanceTab)});this.createNavigationPanel(this.tbody1);this.createPerformancePanel(this.tbody2);this.addEventListener(this.container,"mouseover",
function(a){a=a.toElement||a.relatedTarget;if(g.mouseOver)return!0;for(;a&&a.parentNode&&a.parentNode!=window;){if(a.parentNode==this||a==this)return a.preventDefault&&a.preventDefault(),g.mouseOver=!0,Autodesk.Viewing.Private.removeClass(g.tab1,"selectedmouseout"),Autodesk.Viewing.Private.removeClass(g.tab2,"selectedmouseout"),!0;a=a.parentNode}});this.addEventListener(this.container,"mouseout",function(a){a=a.toElement||a.relatedTarget;if(g.mouseOver){for(;a&&a.parentNode&&a.parentNode!=window;){if(a.parentNode==
this||a==this)return a.preventDefault&&a.preventDefault(),!1;a=a.parentNode}g.mouseOver=!1;a=Autodesk.Viewing.Private.hasClass(g.tab1,"tabselected")?g.tab1:g.tab2;Autodesk.Viewing.Private.addClass(a,"selectedmouseout")}})};Autodesk.Viewing.Private.Viewer3dSettingsPanel.prototype=Object.create(Autodesk.Viewing.UI.DockingPanel.prototype);Autodesk.Viewing.Private.Viewer3dSettingsPanel.prototype.constructor=Autodesk.Viewing.Private.Viewer3dSettingsPanel;
Autodesk.Viewing.Private.Viewer3dSettingsPanel.prototype.uninitialize=function(){this.viewer=null;Autodesk.Viewing.UI.DockingPanel.prototype.uninitialize.call(this)};Autodesk.Viewing.Private.Viewer3dSettingsPanel.prototype.setVisible=function(a){a&&(this.container.style.display="block");Autodesk.Viewing.UI.DockingPanel.prototype.setVisible.call(this,a)};
Autodesk.Viewing.Private.Viewer3dSettingsPanel.prototype.selectTab=function(a){var b="3d"===this.mode;a===Autodesk.Viewing.Private.NavigationTab?(this.container.style.height=b?"385px":"235px",this.container.style.maxHeight=b?"385px":"235px",this.table1.style.display="table",this.table2.style.display="none",Autodesk.Viewing.Private.addClass(this.tab1,"tabselected"),Autodesk.Viewing.Private.removeClass(this.tab2,"tabselected"),this.mouseOver||(Autodesk.Viewing.Private.addClass(this.tab1,"selectedmouseout"),
Autodesk.Viewing.Private.removeClass(this.tab2,"selectedmouseout"))):a===Autodesk.Viewing.Private.PerformanceTab&&(this.container.style.height=b?"295px":"175px",this.container.style.maxHeight=b?"295px":"175px",this.table1.style.display="none",this.table2.style.display="table",Autodesk.Viewing.Private.addClass(this.tab2,"tabselected"),Autodesk.Viewing.Private.removeClass(this.tab1,"tabselected"),this.mouseOver||(Autodesk.Viewing.Private.addClass(this.tab2,"selectedmouseout"),Autodesk.Viewing.Private.removeClass(this.tab1,
"selectedmouseout")))};Autodesk.Viewing.Private.Viewer3dSettingsPanel.prototype.addOptionCheckbox=function(a,b,c,e,d){var g=this.viewer,f=g.prefs[d],h=new Autodesk.Viewing.Private.OptionCheckbox(a,b,"boolean"===typeof f?f:c);this.addEventListener(h,"change",function(a){a=a.detail.target.checked;g.prefs.set(d,a);e(a)});g.prefs.addListeners(d,function(a){h.setValue(a)},function(a){h.setValue(a);e(a)});return h};
Autodesk.Viewing.Private.Viewer3dSettingsPanel.prototype.createNavigationPanel=function(a){var b=this.viewer,c="3d"===this.mode;c&&(this.viewcube=this.addOptionCheckbox("Show ViewCube",a,!0,function(a){b.displayViewCube(a)},"viewCube"),this.viewcubeonpivot=this.addOptionCheckbox("ViewCube acts on pivot",a,!1,function(a){b.setUsePivotAlways(a)},"alwaysUsePivot"));this.reverse=this.addOptionCheckbox("Reverse mouse zoom direction",a,!1,function(a){b.setReverseZoomDirection(a)},"reverseMouseZoomDir");
c&&(this.zoom=this.addOptionCheckbox("Zoom towards pivot",a,!1,function(a){b.setZoomTowardsPivot(a)},"zoomTowardsPivot"),this.orbit=this.addOptionCheckbox("Orbit past world poles",a,!0,function(a){b.setOrbitPastWorldPoles(a)},"orbitPastWorldPoles"),this.setpivot=this.addOptionCheckbox("Set pivot with left mouse button",a,!1,function(a){b.setClickToSetCOI(a)},"clickToSetCOI"));this.propertiesOnSelect=this.addOptionCheckbox("Open properties on select",a,!0,function(a){b.setPropertiesOnSelect(a)},"openPropertiesOnSelect");
this.leftHanded=this.addOptionCheckbox("Left handed mouse setup",a,!1,function(a){b.setUseLeftHandedInput(a)},"leftHandedMouseSetup")};
Autodesk.Viewing.Private.Viewer3dSettingsPanel.prototype.createPerformancePanel=function(a){var b=this.viewer;"3d"===this.mode&&(this.ghosthidden=this.addOptionCheckbox("Ghost hidden objects",a,!0,function(a){b.setGhosting(a)},"ghosting"),this.optimizeNavigation=this.addOptionCheckbox("Smooth navigation",a,!1,function(a){b.setOptimizeNavigation(a)},"optimizeNavigation"),this.ambientshadows=this.addOptionCheckbox("Ambient shadows",a,!0,function(a){b.setQualityLevel(a,b.prefs.antialiasing)},"ambientShadows"),
this.antialiasing=this.addOptionCheckbox("Anti-aliasing",a,!0,function(a){b.setQualityLevel(b.prefs.ambientShadows,a)},"antialiasing"));this.progressiveRender=this.addOptionCheckbox("Progressive model display",a,!0,function(a){b.setProgressiveRendering(a)},"progressiveRendering")};
Autodesk.Viewing.Private.Viewer3dSettingsPanel.prototype.syncUI=function(){var a=this.viewer;this.antialiasing.setValue(a.prefs.antialiasing);this.ambientshadows.setValue(a.prefs.ambientShadows);this.progressiveRender.setValue(a.prefs.progressiveRendering);this.ghosthidden.setValue(a.prefs.ghosting)};AutodeskNamespace("Autodesk.Viewing.Private");Autodesk.Viewing.Private.AlertBox=function(){};Autodesk.Viewing.Private.AlertBox.instances=[];
Autodesk.Viewing.Private.AlertBox.displayError=function(a,b,c,e,d){var g=document.createElement("div");g.className="alertBox error";a.appendChild(g);e||(e=RESOURCE_ROOT+"icons/error_item_not_found.png");var f=document.createElement("img");f.className="alertBoxImage";f.src=e;g.appendChild(f);e=document.createElement("div");e.className="alertBoxMsg";g.appendChild(e);c||(c=Autodesk.Viewing.i18n.translate("Error Occurred",{defaultValue:"Error Occurred"}));f=document.createElement("div");f.className="alertBoxTitle";
f.textContent=c;e.appendChild(f);c=document.createElement("div");c.className="alertBoxText";c.textContent=b;e.appendChild(c);if(d){b=document.createElement("div");b.className="alertBoxContent";e.appendChild(b);e=document.createElement("ul");e.className="alertBoxContent";for(c=0;c<d.length;c++){var h=d[c];if(h){f=document.createElement("li");e.appendChild(f);h=this.extractList(h);if(h.list.length){var k=this.generateListElement(list);e.appendChild(k)}f.innerHTML=h.msg}}b.appendChild(e)}d=document.createElement("div");
d.className="alertBoxOK";d.textContent=Autodesk.Viewing.i18n.translate("OK",{defaultValue:"OK"});var l={alertBox:g,container:a};d.addEventListener("click",function(b){g.style.visibility="hidden";a.removeChild(g);Autodesk.Viewing.Private.AlertBox.instances.splice(Autodesk.Viewing.Private.AlertBox.instances.indexOf(l),1)});g.appendChild(d);g.style.visibility="visible";Autodesk.Viewing.Private.AlertBox.instances.push(l)};
Autodesk.Viewing.Private.AlertBox.displayErrors=function(a,b,c){var e=document.createElement("div");e.className="alertBox errors";a.appendChild(e);b||(b=RESOURCE_ROOT+"icons/error_item_not_found.png");var d=document.createElement("img");d.className="alertBoxImage";d.src=b;e.appendChild(d);b=document.createElement("div");b.className="alertBoxMsg errors";e.appendChild(b);for(d=0;d<c.length;d++){var g=c[d].header;g||(g=Autodesk.Viewing.i18n.translate("Error",{defaultValue:"Error"}));var f=document.createElement("div");
f.className="alertBoxTitle errors";f.textContent=g;b.appendChild(f);var h=document.createElement("div");h.className="alertBoxText errors";f=c[d].msg;g=this.extractList(f);if(g.list.length){var k=document.createElement("div"),f=this.generateListElement(g.list);k.appendChild(f);h.textContent=g.msg;h.appendChild(k)}else h.textContent=f;b.appendChild(h);if(c[d].hints){h=document.createElement("ul");h.className="alertBoxContent";for(var k=c[d].hints,l=0;l<k.length;l++)if(g=k[l]){var n=document.createElement("li");
h.appendChild(n);g=this.extractList(g);g.list.length&&(f=this.generateListElement(g.list),h.appendChild(f));n.innerHTML=g.msg}b.appendChild(h)}}c=document.createElement("div");c.className="alertBoxOK";c.textContent=Autodesk.Viewing.i18n.translate("OK",{defaultValue:"OK"});var m={alertBox:e,container:a};c.addEventListener("click",function(b){e.style.visibility="hidden";a.removeChild(e);Autodesk.Viewing.Private.AlertBox.instances.splice(Autodesk.Viewing.Private.AlertBox.instances.indexOf(m),1)});e.appendChild(c);
e.style.visibility="visible";Autodesk.Viewing.Private.AlertBox.instances.push(m)};Autodesk.Viewing.Private.AlertBox.extractList=function(a){var b={msg:a,list:[]};a&&-1!=a.indexOf("<ul>")&&(a=a.split("<ul>"),b.msg=a[0],a=a[1].split("</ul>"),b.list=a[0].split(", "),1===b.list.length&&(b.list=a[0].split(",")));return b};Autodesk.Viewing.Private.AlertBox.generateListElement=function(a){for(var b=document.createElement("ul"),c=0;c<a.length;c++){var e=document.createElement("li");e.textContent=a[c];b.appendChild(e)}return b};
Autodesk.Viewing.Private.AlertBox.dismiss=function(){if(0<Autodesk.Viewing.Private.AlertBox.instances.length){var a=Autodesk.Viewing.Private.AlertBox.instances.pop();a.alertBox.style.visibility="hidden";a.container.removeChild(a.alertBox);return!0}return!1};AutodeskNamespace("Autodesk.Viewing.Private");Autodesk.Viewing.Private.HudMessage=function(){};Autodesk.Viewing.Private.HudMessage.instances=[];
Autodesk.Viewing.Private.HudMessage.displayMessage=function(a,b,c,e,d){if(!(0<Autodesk.Viewing.Private.HudMessage.instances.length)){var g=b.msgTitle,f=b.message;b=b.buttonText;var h=document.createElement("div");h.className="hud";a.appendChild(h);var k=document.createElement("div");k.className="hudTitle";k.textContent=Autodesk.Viewing.i18n.translate(g,{defaultValue:g});k.setAttribute("data-i18n",g);h.appendChild(k);c&&(g=document.createElement("div"),g.className="hudClose",g.innerHTML="&times;",
g.addEventListener("click",function(b){a.removeChild(h);c&&c(b)}),h.appendChild(g));g=document.createElement("div");g.className="hudMessage";g.textContent=Autodesk.Viewing.i18n.translate(f,{defaultValue:f});g.setAttribute("data-i18n",f);h.appendChild(g);e&&(f=document.createElement("div"),f.className="hudButton",f.textContent=Autodesk.Viewing.i18n.translate(b,{defaultValue:b}),f.setAttribute("data-i18n",b),f.addEventListener("click",e),h.appendChild(f));d&&(e=document.createElement("div"),f=document.createElement("input"),
f.className="hudCheckbox",f.type="checkbox",e.appendChild(f),b=document.createElement("label"),b.setAttribute("for","Do not show this message again"),b.setAttribute("data-i18n","Do not show this message again"),b.textContent=Autodesk.Viewing.i18n.translate("Do not show this message again",{defaultValue:"Do not show this message again"}),e.appendChild(b),f.addEventListener("change",d),h.appendChild(e));Autodesk.Viewing.Private.HudMessage.instances.push({hudMessage:h,container:a})}};
Autodesk.Viewing.Private.HudMessage.dismiss=function(){if(0<Autodesk.Viewing.Private.HudMessage.instances.length){var a=Autodesk.Viewing.Private.HudMessage.instances.pop();a.hudMessage.style.visibility="hidden";a.container.removeChild(a.hudMessage);return!0}return!1};"use strict";AutodeskNamespace("Autodesk.Viewing.UI");Autodesk.Viewing.UI.TreeDelegate=function(){};Autodesk.Viewing.UI.TreeDelegate.prototype.constructor=Autodesk.Viewing.UI.TreeDelegate;
Autodesk.Viewing.UI.TreeDelegate.prototype.isTreeNodeGroup=function(a){throw"isTreeNodeGroup is not implemented.";};Autodesk.Viewing.UI.TreeDelegate.prototype.getTreeNodeId=function(a){throw"getTreeNodeId is not implemented.";};Autodesk.Viewing.UI.TreeDelegate.prototype.getTreeNodeLabel=function(a){return a.name};Autodesk.Viewing.UI.TreeDelegate.prototype.shouldCreateTreeNode=function(a){return!0};
Autodesk.Viewing.UI.TreeDelegate.prototype.createTreeNode=function(a,b){var c=document.createElement("label");b.appendChild(c);c.textContent=this.getTreeNodeLabel(a)};Autodesk.Viewing.UI.TreeDelegate.prototype.onTreeNodeClick=function(a,b,c){};Autodesk.Viewing.UI.TreeDelegate.prototype.onTreeNodeDoubleClick=function(a,b,c){};Autodesk.Viewing.UI.TreeDelegate.prototype.onTreeNodeRightClick=function(a,b,c){};Autodesk.Viewing.UI.TreeDelegate.prototype.onTreeNodeEnter=function(a,b,c){};
Autodesk.Viewing.UI.TreeDelegate.prototype.onTreeNodeLeave=function(a,b,c){};Autodesk.Viewing.UI.TreeDelegate.prototype.onTreeNodeHover=function(a,b,c){};Autodesk.Viewing.UI.TreeDelegate.prototype.getTreeNodeClass=function(a){return""};
Autodesk.Viewing.UI.Tree=function(a,b,c,e){this.myDelegate=a;this.mySelectedIds=[];this.myOptions=e;"string"===typeof c?(a=c,c=document.getElementById(a)):a=c.id;this.myRootContainerId=a+"-treeview";this.myInternalIds={};this.myInternalIdCounter=0;this.myGroupNodes=[];c=this.createHtmlElement_(c,"div",this.myRootContainerId,"treeview");this.createElement_(b,c)};Autodesk.Viewing.UI.Tree.prototype.constructor=Autodesk.Viewing.UI.Tree;
Autodesk.Viewing.UI.Tree.prototype.show=function(a){document.getElementById(this.myRootContainerId).style.display=a?"block":"none"};Autodesk.Viewing.UI.Tree.prototype.getRootContainerId=function(){return this.myRootContainerId};Autodesk.Viewing.UI.Tree.prototype.delegate=function(){return this.myDelegate};Autodesk.Viewing.UI.Tree.prototype.isCollapsed=function(a){return this.hasClass(a,"collapsed")};
Autodesk.Viewing.UI.Tree.prototype.setCollapsed=function(a,b){var c=this.isCollapsed(a);if(b){if(!c)return this.addClass(a,"collapsed"),this.removeClass(a,"expanded"),!0}else if(c)return this.addClass(a,"expanded"),this.removeClass(a,"collapsed"),!0;return!1};
Autodesk.Viewing.UI.Tree.prototype.setAllCollapsed=function(a){var b;a?(a=function(a){return Autodesk.Viewing.Private.hasClass(a,"expanded")},b=function(a){Autodesk.Viewing.Private.addClass(a,"collapsed");Autodesk.Viewing.Private.removeClass(a,"expanded")}):(a=function(a){return Autodesk.Viewing.Private.hasClass(a,"collapsed")},b=function(a){Autodesk.Viewing.Private.addClass(a,"expanded");Autodesk.Viewing.Private.removeClass(a,"collapsed")});for(var c=0;c<this.myGroupNodes.length;++c){var e=this.myGroupNodes[c];
a(e)&&b(e)}};Autodesk.Viewing.UI.Tree.prototype.addToSelection=function(a){for(var b=a.length,c=0;c<b;++c){var e=a[c],d;d=e;-1===this.mySelectedIds.indexOf(d)?(this.mySelectedIds.push(d),d=!0):d=!1;d&&this.addClass(e,"selected")}};Autodesk.Viewing.UI.Tree.prototype.removeFromSelection=function(a){for(var b=a.length-1;0<=b;--b){var c=a[b],e;e=this.mySelectedIds.indexOf(c);-1!==e?(this.mySelectedIds.splice(e,1),e=!0):e=!1;e&&this.removeClass(c,"selected")}};
Autodesk.Viewing.UI.Tree.prototype.setSelection=function(a){this.removeFromSelection(this.mySelectedIds);this.addToSelection(a);return this.mySelectedIds};Autodesk.Viewing.UI.Tree.prototype.clearSelection=function(){this.removeFromSelection(this.mySelectedIds)};Autodesk.Viewing.UI.Tree.prototype.isSelected=function(a){return this.hasClass(a,"selected")};
Autodesk.Viewing.UI.Tree.prototype.addClass=function(a,b){var c=this.getInternalId_(a,!1);return c?(c=document.getElementById(c),Autodesk.Viewing.Private.addClass(c,b)):!1};Autodesk.Viewing.UI.Tree.prototype.removeClass=function(a,b){var c=this.getInternalId_(a,!1);return c?(c=document.getElementById(c),Autodesk.Viewing.Private.removeClass(c,b)):!1};
Autodesk.Viewing.UI.Tree.prototype.hasClass=function(a,b){var c=this.getInternalId_(a,!1);return c?(c=document.getElementById(c),Autodesk.Viewing.Private.hasClass(c,b)):!1};Autodesk.Viewing.UI.Tree.prototype.getInternalId_=function(a,b){void 0===this.myInternalIds[a]&&b&&(this.myInternalIds[a]=this.myRootContainerId+"-node-"+this.myInternalIdCounter,this.myInternalIdCounter++);return this.myInternalIds[a]};
Autodesk.Viewing.UI.Tree.prototype.createElement_=function(a,b){function c(b){d.myDelegate.onTreeNodeEnter(d,a,b);d.myDelegate.onTreeNodeHover(d,a,b);b.stopPropagation();b.preventDefault()}function e(b){d.myDelegate.onTreeNodeLeave(d,a,b);d.myDelegate.onTreeNodeHover(d,a,b);b.stopPropagation();b.preventDefault()}if(!a||!this.myDelegate.shouldCreateTreeNode(a))return null;var d=this,g=d.myDelegate.getTreeNodeId(a),g=this.getInternalId_(g,!0),f,h;if(d.myDelegate.isTreeNodeGroup(a))for(f=d.createHtmlElement_(b,
"group",g,"expanded"),d.myGroupNodes.push(f),g=d.createHtmlElement_(f,"header","header"+g),h=d.createHtmlElement_(g,"icon"),h.addEventListener("click",function(a){Autodesk.Viewing.Private.toggleClass(f,"collapsed");Autodesk.Viewing.Private.toggleClass(f,"expanded");a.stopPropagation();a.preventDefault()},!1),d.myDelegate.createTreeNode(a,g),g=a.children?a.children.length:0,h=0;h<g;++h)d.createElement_(a.children[h],f);else f=d.createHtmlElement_(b,"leaf",g),g=d.createHtmlElement_(f,"header","header"+
g),h=d.createHtmlElement_(g,"icon"),d.myDelegate.createTreeNode(a,g);f.addEventListener("click",function(b){d.myDelegate.onTreeNodeClick(d,a,b);b.stopPropagation();b.preventDefault()},!1);f.addEventListener("dblclick",function(b){d.myDelegate.onTreeNodeDoubleClick(d,a,b);b.stopPropagation();b.preventDefault()},!1);f.addEventListener("contextmenu",function(b){d.myDelegate.onTreeNodeRightClick(d,a,b);b.stopPropagation();b.preventDefault()},!1);f.addEventListener("mouseenter",function(a){c(a)},!1);f.addEventListener("mouseleave",
function(a){e(a)},!1);f.addEventListener("mouseover",function(a){c(a)},!1);f.addEventListener("mouseout",function(a){e(a)},!1);Autodesk.Viewing.Private.addClass(f,d.myDelegate.getTreeNodeClass(a));return f};Autodesk.Viewing.UI.Tree.prototype.createHtmlElement_=function(a,b,c,e){b=document.createElement(b);a.appendChild(b);c&&(b.id=c);e&&(b.className=e);return b};
Autodesk.Viewing.UI.Tree.prototype.getElementByNode=function(a){return document.getElementById(this.getInternalId_(this.delegate().getTreeNodeId(a),!1))};AutodeskNamespace("Autodesk.Viewing.Private");Autodesk.Viewing.Private.TreeDelegate=Autodesk.Viewing.UI.TreeDelegate;Autodesk.Viewing.Private.TreeDelegate.prototype=Autodesk.Viewing.UI.TreeDelegate.prototype;Autodesk.Viewing.Private.Tree=Autodesk.Viewing.UI.Tree;Autodesk.Viewing.Private.Tree.prototype=Autodesk.Viewing.UI.Tree.prototype;"use strict";
AutodeskNamespace("Autodesk.Viewing.Private");Autodesk.Viewing.Private.BrowserDelegate=function(){};Autodesk.Viewing.Private.BrowserDelegate.prototype.constructor=Autodesk.Viewing.Private.BrowserDelegate;Autodesk.Viewing.Private.BrowserDelegate.prototype.getNodeId=function(a){throw"getId is not implemented.";};Autodesk.Viewing.Private.BrowserDelegate.prototype.getNodeLabel=function(a){return a.name};Autodesk.Viewing.Private.BrowserDelegate.prototype.getNodeClass=function(a){return""};
Autodesk.Viewing.Private.BrowserDelegate.prototype.hasThumbnail=function(a){return!1};Autodesk.Viewing.Private.BrowserDelegate.prototype.getThumbnail=function(a){return null};Autodesk.Viewing.Private.BrowserDelegate.prototype.onNodeClick=function(a,b,c){};Autodesk.Viewing.Private.BrowserDelegate.prototype.onNodeHover=function(a,b,c){};Autodesk.Viewing.Private.BrowserDelegate.prototype.hasContent=function(a){return!1};Autodesk.Viewing.Private.BrowserDelegate.prototype.addContent=function(a,b){};
Autodesk.Viewing.Private.Browser=function(a,b,c,e){this.myDelegate=a;this.mySelectedIds=[];this.myParentContainderId=c;this.myRootContainerId=c+"-browserview";this.myInternalIds=[];this.myInternalIdCounter=0;this.jQuery=(this.myOptions=e)&&e.jQuery?e.jQuery:$;this.jQuery('<div id="'+this.myRootContainerId+'" class="browserview"></div>').appendTo("#"+this.myParentContainderId);this.createElements(b,this.myRootContainerId)};Autodesk.Viewing.Private.Browser.prototype.constructor=Autodesk.Viewing.Private.Browser;
Autodesk.Viewing.Private.Browser.prototype.show=function(a){a?this.jQuery("#"+this.myRootContainerId).fadeIn():this.jQuery("#"+this.myRootContainerId).hide()};Autodesk.Viewing.Private.Browser.prototype.getRootContainerId=function(){return this.myRootContainerId};Autodesk.Viewing.Private.Browser.prototype.delegate=function(){return this.myDelegate};
Autodesk.Viewing.Private.Browser.prototype.addToSelection=function(a){for(var b in a){var c=a[b],e;e=c;-1==this.mySelectedIds.indexOf(e)?(this.mySelectedIds.push(e),e=!0):e=!1;e&&(c=this.getInternalId(c,!1),this.jQuery("#"+c).addClass("selected"))}};Autodesk.Viewing.Private.Browser.prototype.removeFromSelection=function(a){for(var b in a){var c=a[b],e;e=this.mySelectedIds.indexOf(c);-1!=e?(this.mySelectedIds.splice(e,1),e=!0):e=!1;e&&(c=this.getInternalId(c,!1),this.jQuery("#"+c).removeClass("selected"))}};
Autodesk.Viewing.Private.Browser.prototype.setSelection=function(a){this.removeFromSelection(this.mySelectedIds);this.addToSelection(a);return this.mySelectedIds};Autodesk.Viewing.Private.Browser.prototype.clearSelection=function(){this.removeFromSelection(this.mySelectedIds)};Autodesk.Viewing.Private.Browser.prototype.getInternalId=function(a,b){void 0===this.myInternalIds[a]&&b&&(this.myInternalIds[a]=this.myRootContainerId+"-node-"+this.myInternalIdCounter,this.myInternalIdCounter++);return this.myInternalIds[a]};
Autodesk.Viewing.Private.Browser.prototype.createElements=function(a,b){if(a)for(var c=0;c<a.length;c++)this.createElement(a[c],b)};
Autodesk.Viewing.Private.Browser.prototype.createElement=function(a,b){var c=this,e=c.myDelegate.getNodeId(a),e=c.getInternalId(e,!0),d="#"+e;this.jQuery('<item id="'+e+'"></item>').appendTo(this.jQuery("#"+b)).hover(function(){c.myDelegate.onNodeHover(c,a)});this.jQuery("#"+e).click(function(b){c.jQuery(".flipped").removeClass("flipped");c.myDelegate.onNodeClick(c,a,b)});var g=this.jQuery('<div id="card'+e+'" class="card"></div>');g.appendTo(this.jQuery(d));var f=this.jQuery('<div class="browserElement"></div>');
f.appendTo(g);g=c.myDelegate.getNodeLabel(a);this.jQuery("<label>"+g+"</label>").appendTo(f).click(function(b){c.myDelegate.onNodeClick(c,a,b)});(g=c.myDelegate.getThumbnail(a))&&this.jQuery('<img class="thumb" src="'+g+'" ></img>').appendTo(f).click(function(b){c.myDelegate.onNodeClick(c,a,b)});c.myDelegate.hasContent(a)&&c.myDelegate.addContent(a,e);this.jQuery(d).addClass(c.myDelegate.getNodeClass(a))};AutodeskNamespace("Autodesk.Viewing.Private");
Autodesk.Viewing.Private.ErrorInfoData={1:{img:"icons/error_reload_in_viewer.png","globalized-msg":"Viewer-UnknownFailure","default-msg":"<title> Sorry </title><message>We seem to have some technical difficulties and couldn't complete your request.</message> <hint>Try loading the item again. </hint><hint>Please verify your Internet connection, and refresh the browser to see if that fixes the problem.</hint>"},2:{img:"icons/error_unsupported_file_type.png","globalized-msg":"Viewer-BadData","default-msg":"<title> Sorry </title><message>The item you are trying to view was not processed completely. </message><hint>Try loading the item again.</hint><hint>Please upload the file again to see if that fixes the issue.</hint>"},
3:{img:"icons/error_reload_in_viewer.png","globalized-msg":"Viewer-NetworkError","default-msg":"<title> Sorry </title><message>We seem to have some technical difficulties and couldn't complete your request.</message><hint> Try loading the item again.</hint><hint> Please verify your Internet connection, and refresh the browser to see if that fixes the problem.</hint>"},4:{img:"icons/error_unlock_upload.png","globalized-msg":"Viewer-AccessDenied","default-msg":"<title> No access </title><message>Sorry. You don\u2019t have the required privileges to access this item.</message><hint> Please contact the author</hint>"},
5:{img:"icons/error_item_not_found.png","globalized-msg":"Viewer-FileNotFound","default-msg":'<title> Sorry </title><message>We can\u2019t display the item you are looking for. It may not have been processed yet. It may have been moved, deleted, or you may be using a corrupt file or unsupported file format.</message><hint> Try loading the item again.</hint><hint> Please upload the file again to see if that fixes the issue.</hint><hint> <a href="http://help.autodesk.com/view/ADSK360/ENU/?guid=GUID-488804D0-B0B0-4413-8741-4F5EE0FACC4A" target="_blank">See a list of supported formats.</a></hint>'},
6:{img:"icons/error_reload_in_viewer.png","globalized-msg":"Viewer-ServerError","default-msg":"<title> Sorry </title><message>We seem to have some technical difficulties and couldn't complete your request.</message><hint> Try loading the item again.</hint><hint> Please verify your Internet connection, and refresh the browser to see if that fixes the problem.</hint>"},7:{img:"icons/error_reload_in_viewer.png","globalized-msg":"Viewer-UnhandledResponseCode","default-msg":"<title> Network problem </title><message>Sorry. We seem to have some technical difficulties and couldn't complete your request.</message><hint> Try loading the item again.</hint><hint> Please verify your Internet connection, and refresh the browser to see if that fixes the problem.</hint>"},
8:{img:"icons/error_unsupported_file_type.png","globalized-msg":"Viewer-WebGlNotSupported","default-msg":'<title> Sorry </title><message>We couldn\u2019t show the item because your browser doesn\u2019t support 3D viewing.</message><hint> Please use Google Chrome, Firefox or another browser that supports WebGL 3D graphics.</hint><hint> <a href="http://help.autodesk.com/view/ADSK360/ENU/?guid=GUID-6BD255B4-FB67-4909-9332-3A5905076E0A" target="_blank">See a list of browsers supporting WebGL 3D graphics.</a></hint>'},
9:{img:"icons/error_item_not_found.png","globalized-msg":"Viewer-NoViewable","default-msg":"<title> No viewable content </title><message>here\u2019s nothing to display for this item. It may not have been processed or it may not have content we can display.</message><hint> Please contact the author.</hint><hint> Please upload the file again to see if that fixes the issue.</hint>"}};Autodesk.Viewing.Private.ErrorHandler=function(){};Autodesk.Viewing.Private.ErrorHandler.prototype.constructor=Autodesk.Viewing.Private.ErrorHandler;
Autodesk.Viewing.Private.ErrorHandler.getErrorCode=function(a){return 403===a||401===a?Autodesk.Viewing.ErrorCodes.NETWORK_ACCESS_DENIED:404===a?Autodesk.Viewing.ErrorCodes.NETWORK_FILE_NOT_FOUND:500<=a?Autodesk.Viewing.ErrorCodes.NETWORK_SERVER_ERROR:Autodesk.Viewing.ErrorCodes.NETWORK_UNHANDLED_RESPONSE_CODE};
Autodesk.Viewing.Private.ErrorHandler.reportError=function(a,b,c,e){if(b){var d=Autodesk.Viewing.Private.ErrorInfoData[b];if(d){var g={defaultValue:""};g.defaultValue=d["default-msg"];var f=RESOURCE_ROOT+d.img;b=this.parseErrorString(d["globalized-msg"],g)}else f=RESOURCE_ROOT+"icons/error_unsupported_file_type.png",g={defaultValue:"",interpolationPrefix:"{",interpolationSuffix:"}"},this.parseArguments(c,g),b=this.parseErrorString(b,g),b.header||(b.header="warning"===e?Autodesk.Viewing.i18n.translate("header-warning"):
"");Autodesk.Viewing.Private.AlertBox.displayError(a,b.msg,b.header,f,b.hints)}};
Autodesk.Viewing.Private.ErrorHandler.reportErrors=function(a,b){if(b){for(var c={defaultValue:"",interpolationPrefix:"{",interpolationSuffix:"}"},e=[],d=0;d<b.length;d++)if(b[d].code){this.parseArguments(b[d].message,c);var g=this.parseErrorString(b[d].code,c);g.header||(g.header="warning"===b[0].type?Autodesk.Viewing.i18n.translate("header-warning",{defaultValue:"Warning"}):"");e.push(g)}e.length&&Autodesk.Viewing.Private.AlertBox.displayErrors(a,RESOURCE_ROOT+"icons/error_unsupported_file_type.png",
e)}};Autodesk.Viewing.Private.ErrorHandler.parseArguments=function(a,b){if(a)if("string"===typeof a)b.defaultValue=a;else{b.defaultValue=a[0];for(var c=1;c<a.length;c++)b[(c-1).toString()]=a[c]}};
Autodesk.Viewing.Private.ErrorHandler.parseErrorString=function(a,b){var c={msg:null,msgList:null,header:null,hints:null};if(!a)return c;var e=Autodesk.Viewing.i18n.translate(a,b);if(!e)return c;-1!=e.indexOf("<title>")&&(e=e.split("<title>")[1].split("</title>"),c.header=e[0],e=e[1]);e&&-1!=e.indexOf("<message>")?(e=e.split("<message>")[1].split("</message>"),c.msg=e[0],e=e[1]):c.msg=e;if(e&&-1!=e.indexOf("<hint>")){c.hints=[];for(var e=e.split("<hint>"),d=0;d<e.length;d++){var g=e[d].split("</hint")[0];
c.hints.push(g)}}return c};"use strict";Autodesk.Viewing.Extension=function(a,b){this.viewer=a;this.options=b};Autodesk.Viewing.Extension.prototype.load=function(){return!0};Autodesk.Viewing.Extension.prototype.unload=function(){return!0};"use strict";AutodeskNamespace("Autodesk.Viewing.Private");
Autodesk.Viewing.ExtensionManager=function(){var a={};return{registerExtension:function(b,c){return a.hasOwnProperty(b)?!1:(a[b]=c,!0)},getExtension:function(b){return a.hasOwnProperty(b)?a[b]:null},unregisterExtension:function(b){return a.hasOwnProperty(b)?(delete a[b],!0):!1}}};Autodesk.Viewing.theExtensionManager=new Autodesk.Viewing.ExtensionManager;AutodeskNamespace("Autodesk.Viewing.Private");
Autodesk.Viewing.Private.getGUID=function(){var a=Math.round(4294967295*Math.random()),b=Date.now();return a.toString(16)+b.toString(16)};AutodeskNamespace("Autodesk.Viewing");
Autodesk.Viewing.UnifiedCamera=function(a,b){THREE.Camera.call(this);this.fov=45;this.near=0.1;this.far=1E5;this.aspect=a/b;this.left=-a/2;this.right=a/2;this.top=b/2;this.bottom=-b/2;this.target=new THREE.Vector3(0,0,-1);this.worldup=new THREE.Vector3(0,1,0);this.orthographicCamera=new THREE.OrthographicCamera(this.left,this.right,this.top,this.bottom,this.near,this.far);this.perspectiveCamera=new THREE.PerspectiveCamera(this.fov,this.aspect,this.near,this.far);this.zoom=1;this.toPerspective()};
Autodesk.Viewing.UnifiedCamera.ORTHO_FOV=THREE.Math.radToDeg(2*Math.atan(0.5));Autodesk.Viewing.UnifiedCamera.prototype=Object.create(THREE.Camera.prototype);
Autodesk.Viewing.UnifiedCamera.prototype.clone=function(){var a=new Autodesk.Viewing.UnifiedCamera(2*this.right,2*this.top);THREE.Camera.prototype.clone.call(this,a);a.position.copy(this.position);a.up.copy(this.up);this.target&&(a.target=this.target.clone());this.worldup&&(a.worldup=this.worldup.clone());a.left=this.left;a.right=this.right;a.top=this.top;a.bottom=this.bottom;a.near=this.near;a.far=this.far;a.fov=this.fov;a.aspect=this.aspect;a.zoom=this.zoom;a.isPerspective=this.isPerspective;this.updateProjectionMatrix();
return a};Autodesk.Viewing.UnifiedCamera.prototype.__computeFovPosition=function(a){if(1E-4>=Math.abs(this.fov-a))return this.position.clone();var b=this.target.clone().sub(this.position),c=THREE.Math.degToRad(this.fov);a=THREE.Math.degToRad(a);c=b.length()*Math.tan(0.5*c)/Math.tan(0.5*a);b=b.normalize().multiplyScalar(-c);return this.target.clone().add(b)};
Autodesk.Viewing.UnifiedCamera.prototype.toPerspective=function(){!this.isPerspective&&this.saveFov&&(this.position.copy(this.__computeFovPosition(this.saveFov)),this.fov=this.saveFov);this.perspectiveCamera.aspect=this.aspect;this.perspectiveCamera.near=this.near;this.perspectiveCamera.far=this.far;this.perspectiveCamera.fov=this.fov/this.zoom;this.perspectiveCamera.updateProjectionMatrix();this.projectionMatrix=this.perspectiveCamera.projectionMatrix;this.isPerspective=!0};
Autodesk.Viewing.UnifiedCamera.prototype.toOrthographic=function(){if(this.isPerspective){this.saveFov=this.fov;var a=Autodesk.Viewing.UnifiedCamera.ORTHO_FOV;this.position.copy(this.__computeFovPosition(a));this.fov=a}this.orthoScale=this.target.clone().sub(this.position).length();var a=0.5*this.orthoScale,b=a*this.aspect;this.left=this.orthographicCamera.left=-b;this.right=this.orthographicCamera.right=b;this.top=this.orthographicCamera.top=a;this.bottom=this.orthographicCamera.bottom=-a;this.orthographicCamera.near=
this.near;this.orthographicCamera.far=this.far;this.orthographicCamera.updateProjectionMatrix();this.projectionMatrix=this.orthographicCamera.projectionMatrix;this.isPerspective=!1};Autodesk.Viewing.UnifiedCamera.prototype.updateProjectionMatrix=function(){this.isPerspective?this.toPerspective():this.toOrthographic()};Autodesk.Viewing.UnifiedCamera.prototype.setSize=function(a,b){this.aspect=a/b;this.left=-a/2;this.right=a/2;this.top=b/2;this.bottom=-b/2};
Autodesk.Viewing.UnifiedCamera.prototype.setFov=function(a){this.fov=a;this.updateProjectionMatrix()};Autodesk.Viewing.UnifiedCamera.prototype.setLens=function(a,b){void 0===b&&(b=24);var c=2*THREE.Math.radToDeg(Math.atan(b/(2*a)));this.setFov(c);return c};Autodesk.Viewing.UnifiedCamera.prototype.getCameraChangedEvent=function(){return{type:Autodesk.Viewing.CAMERA_CHANGE_EVENT,camera:this}};AutodeskNamespace("Autodesk.Viewing.UI");
Autodesk.Viewing.UI.Toolbar=function(a){this.parentContainer=a;this.container=document.createElement("div");this.container.className="toolbar-menuplacer";this.menu=document.createElement("ul");this.menu.className="toolbar-menu";this.container.appendChild(this.menu);this.parentContainer.appendChild(this.container);this.subToolbars={}};Autodesk.Viewing.UI.Toolbar.prototype.constructor=Autodesk.Viewing.UI.Toolbar;
Autodesk.Viewing.UI.Toolbar.createMenuButton=function(a,b,c,e){var d=document.createElement("li");d.className="toolbar-generic-button";d.id=a;var g=null;if(b){var f=b;e&&e.defaultTooltipValue&&(f=e.defaultTooltipValue);g=document.createElement("div");g.className="toolbar-tooltip";g.setAttribute("data-i18n",b);g.setAttribute("tooltipText",b);g.appendChild(document.createTextNode(f));d.appendChild(g)}var h=document.createElement("div");h.className="toolbar-button";h.id=a+"Button";d.appendChild(h);c&&
d.addEventListener("click",c);g&&(d.addEventListener("mouseover",function(a){if(a.target===d||a.target===h)g.style.visibility="visible"}),d.addEventListener("mouseout",function(a){if(a.target===d||a.target===h)g.style.visibility="hidden"}));return d};Autodesk.Viewing.UI.Toolbar.prototype.addSubToolbar=function(a,b){var c=new Autodesk.Viewing.UI.SubToolbar(this.menu,a,b);return this.subToolbars[a]=c};Autodesk.Viewing.UI.Toolbar.prototype.getSubToolbars=function(){return this.subToolbars};
Autodesk.Viewing.UI.Toolbar.prototype.getSubToolbarById=function(a){return this.subToolbars[a]};Autodesk.Viewing.UI.Toolbar.prototype.removeSubToolbar=function(a){if("string"===typeof a){var b=this.subToolbars[a];b&&(this.menu.removeChild(b.subtoolbar),delete this.subToolbars[a])}else a&&(this.menu.removeChild(a.subtoolbar),a.id&&delete this.subToolbars[a.id])};
Autodesk.Viewing.UI.Toolbar.prototype.removeAllSubToolbars=function(){for(;this.menu.firstChild;)this.menu.removeChild(this.menu.firstChild);this.subToolbars={}};Autodesk.Viewing.UI.Toolbar.prototype.addToSubToolbar=function(a,b){this.subToolbars[a]&&this.subToolbars[a].addTool(b)};Autodesk.Viewing.UI.Toolbar.prototype.removeFromSubToolbar=function(a,b){this.subToolbars[a]&&this.subToolbars[a].removeTool(b)};Autodesk.Viewing.UI.Toolbar.prototype.attachSubMenu=function(a,b){a.appendChild(b)};
Autodesk.Viewing.UI.Toolbar.prototype.collapse=function(a){a?Autodesk.Viewing.Private.addClass(this.container,"toolbar-menu-collapsed"):Autodesk.Viewing.Private.removeClass(this.container,"toolbar-menu-collapsed")};Autodesk.Viewing.UI.Toolbar.prototype.isCollapsed=function(){return Autodesk.Viewing.Private.hasClass(this.container,"toolbar-menu-collapsed")};Autodesk.Viewing.UI.Toolbar.prototype.addEventListener=function(a,b){this.menu.addEventListener(a,b)};
Autodesk.Viewing.UI.Toolbar.prototype.removeEventListener=function(a,b){this.menu.removeEventListener(a,b)};Autodesk.Viewing.UI.SubToolbar=function(a,b,c){this.parentContainer=a;this.subtoolbar=document.createElement("div");this.subtoolbar.className="toolbar-subtoolbar";this.id=this.subtoolbar.id=b;this.parentContainer.appendChild(this.subtoolbar);this.buttons={};this.isRadio=c};Autodesk.Viewing.UI.SubToolbar.prototype.constructor=Autodesk.Viewing.SubToolbar;
Autodesk.Viewing.UI.SubToolbar.prototype.addTool=function(a){this.buttons[a.id]=a;this.subtoolbar.appendChild(a)};Autodesk.Viewing.UI.SubToolbar.prototype.insertToolBefore=function(a,b){this.buttons[a.id]=a;this.subtoolbar.insertBefore(a,b)};Autodesk.Viewing.UI.SubToolbar.prototype.insertToolAtIndex=function(a,b){this.buttons[a.id]=a;b<this.getToolCount()?this.subtoolbar.insertBefore(a,this.subtoolbar.children[b]):this.subtoolbar.appendChild(a)};
Autodesk.Viewing.UI.SubToolbar.prototype.setToolImage=function(a,b){var c=document.getElementById(a+"Button");c&&(c.style.backgroundImage="url('"+b+"')")};Autodesk.Viewing.UI.SubToolbar.prototype.setToolText=function(a,b){var c=document.getElementById(a+"Button");if(c){var e=document.createElement("span");e.textContent=b;e.style.fontSize="12px";e.style.color="black";e.style.zIndex="10";e.setAttribute("data-i18n",b);c.appendChild(e)}};
Autodesk.Viewing.UI.SubToolbar.prototype.removeTool=function(a){if("string"===typeof a){var b=this.buttons[a];b&&(this.subtoolbar.removeChild(b),delete this.buttons[a])}else a&&(this.subtoolbar.removeChild(a),a.id&&delete this.buttons[a.id])};Autodesk.Viewing.UI.SubToolbar.prototype.getTool=function(a){return this.buttons[a]};
Autodesk.Viewing.UI.SubToolbar.prototype.getAllToolIds=function(){for(var a=[],b=this.subtoolbar.children?this.subtoolbar.children.length:0,c=0;c<b;c++)a.push(this.subtoolbar.children[c].id);return a};Autodesk.Viewing.UI.SubToolbar.prototype.getToolCount=function(){return this.subtoolbar.children?this.subtoolbar.children.length:0};
Autodesk.Viewing.UI.SubToolbar.prototype.select=function(a){a in this.buttons&&(this.isRadio&&this.deselectAll(),a=this.buttons[a],Autodesk.Viewing.Private.removeClass(a.childNodes[a.childNodes.length-1],"disabled-button"))};Autodesk.Viewing.UI.SubToolbar.prototype.deselect=function(a){a in this.buttons&&(a=this.buttons[a],Autodesk.Viewing.Private.addClass(a.childNodes[a.childNodes.length-1],"disabled-button"))};
Autodesk.Viewing.UI.SubToolbar.prototype.deselectAll=function(){for(var a in this.buttons)this.buttons.hasOwnProperty(a)&&this.deselect(a)};Autodesk.Viewing.UI.SubToolbar.prototype.setToolVisibility=function(a,b){a in this.buttons&&(this.buttons[a].style.display=b?"list-item":"none")};Autodesk.Viewing.UI.SubToolbar.prototype.isToolVisible=function(a){return a in this.buttons?!(this.buttons[a].style.display&&"none"===this.buttons[a].style.display):!1};
Autodesk.Viewing.UI.SubToolbar.prototype.setVisibility=function(a){this.subtoolbar.style.display=a?"":"none"};Autodesk.Viewing.UI.SubToolbar.prototype.isVisible=function(){return!(this.subtoolbar.style.display&&"none"===this.subtoolbar.style.display)};Autodesk.Viewing.UI.ToolBar=Autodesk.Viewing.UI.Toolbar;Autodesk.Viewing.UI.ToolBar.prototype=Autodesk.Viewing.UI.Toolbar.prototype;AutodeskNamespace("Autodesk.Viewing");Autodesk.Viewing.GEOMETRY_LOADED_EVENT="geometry_loaded";
Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT="frag->node array created";Autodesk.Viewing.SELECTION_CHANGED_EVENT="selection";Autodesk.Viewing.ISOLATE_EVENT="isolate";Autodesk.Viewing.HIDE_EVENT="hide";Autodesk.Viewing.SHOW_EVENT="show";Autodesk.Viewing.HIGHLIGHT_EVENT="highlight";Autodesk.Viewing.CAMERA_CHANGE_EVENT="cameraChanged";Autodesk.Viewing.EXPLODE_CHANGE_EVENT="explodeChanged";Autodesk.Viewing.TOOL_CHANGE_EVENT="toolChanged";Autodesk.Viewing.RENDER_OPTION_CHANGED_EVENT="renderOptionChanged";
Autodesk.Viewing.LAYER_VISIBILITY_CHANGED_EVENT="layerVisibility";Autodesk.Viewing.NAVIGATION_MODE={ORBIT:0,PAN:1,DOLLY:2,ROLL:3,FOV:4,TOUCH_PAN_DOLLY:5,TOUCH_ROLL:6,OTHER:7};
Autodesk.Viewing.Viewer3D=function(a,b){Autodesk.Viewing.Viewer.call(this,a,b);if("CANVAS"===this.container.nodeName)throw"Viewer must be initialized on a div [temporary]";this.canvas=document.createElement("canvas");this.canvas.tabIndex=0;var c=this.getDimensions();this.canvas.width=c.width;this.canvas.height=c.height;this.container.appendChild(this.canvas);this.canvas.viewer=this;this.layersPanel=this.modelstructure=null;this.running=!1;this.prefs=new Autodesk.Viewing.Private.Preferences(this,"Autodesk.Viewing.Private.GuiViewer3D.SavedSettings.")};
Autodesk.Viewing.Viewer3D.prototype=Object.create(Autodesk.Viewing.Viewer.prototype);Autodesk.Viewing.Viewer3D.prototype.constructor=Autodesk.Viewing.Viewer3D;Autodesk.Viewing.Viewer3D.kDefaultCanvasConfig={click:{onObject:["selectOnly"],offObject:["deselectAll"]},clickAlt:{onObject:["setCOI"],offObject:["setCOI"]},clickCtrl:{onObject:["selectToggle"],offObject:["deselectAll"]},clickShift:{onObject:["selectToggle"],offObject:["deselectAll"]}};
Autodesk.Viewing.Viewer3D.prototype.initialize=function(){var a=this;if(0>=this.detectWebGL())return Autodesk.Viewing.ErrorCodes.BROWSER_WEBGL_NOT_SUPPORTED;Autodesk.Viewing.Viewer.prototype.initialize.call(this);this.impl=new Autodesk.Viewing.Private.Viewer3DImpl(this.canvas,this,function(b){a.navigation=new Autodesk.Viewing.Navigation(b.camera);a.__initAutoCam(b);a.utilities=new Autodesk.Viewing.ViewingUtilities(b,a.autocam,a.navigation);a.clickHandler=new Autodesk.Viewing.DefaultHandler(b,a.navigation,
a.utilities);a.toolController=new Autodesk.Viewing.ToolController(b,a,a.autocam,a.utilities,a.clickHandler);a.toolController.registerTool(new Autodesk.Viewing.OrbitDollyPanTool(b,a));a.toolController.activateTool("orbit");a._navigationMode=Autodesk.Viewing.NAVIGATION_MODE.ORBIT;return a.toolController});this.model=null;this.impl.controls&&this.impl.controls.setAutocam(a.autocam);this.setCanvasClickBehavior(this.config&&this.config.canvasConfig?this.config.canvasConfig:Autodesk.Viewing.Viewer3D.kDefaultCanvasConfig);
this.loader=document.createElement("div");this.loader.id="loader";this.loader.className="spinner";this.container.appendChild(this.loader);for(var b=1;3>=b;b++){var c=document.createElement("div");c.className="bounce"+b;this.loader.appendChild(c)}this.initSettings();this.viewerState=new Autodesk.Viewing.Private.ViewerState(this);this.config&&this.config.hasOwnProperty("startOnInitialize")&&!this.config.startOnInitialize||this.run();return 0};
Autodesk.Viewing.Viewer3D.prototype.run=function(){this.running||(this.resize(),this.running=!0,this.impl.run())};
Autodesk.Viewing.Viewer3D.prototype.__initAutoCam=function(a){var b=this,c=a.camera;c.pivot||(c.pivot=new THREE.Vector3(0,0,0));c.target||(c.target=new THREE.Vector3(0,0,0));c.worldup||(c.worldup=c.up.clone());b.autocamCamera=c.clone();b.autocamCamera.target=c.target.clone();b.autocamCamera.pivot=c.pivot.clone();b.autocamCamera.worldup=c.worldup.clone();b.autocam=new Autocam(b.autocamCamera,b.navigation,b.canvas,function(a){b.autocamCamera.isPerspective!==c.isPerspective&&(b.autocamCamera.isPerspective?
b.navigation.toPerspective():b.navigation.toOrthographic());b.navigation.setVerticalFov(b.autocamCamera.fov,!1);b.navigation.setView(b.autocamCamera.position,b.autocamCamera.target);b.navigation.setPivotPoint(b.autocamCamera.pivot);b.navigation.setCameraUpVector(b.autocamCamera.up);a&&b.navigation.setWorldUpVector(b.autocamCamera.worldup);b.impl.syncCamera(a)},function(a){b.utilities?b.utilities.pivotActive(a,!1):b.impl.controls.pivotActive(a,!1)});b.addEventListener("cameraChanged",function(a){b.autocam.sync(a.camera)});
b.autocam.sync(c)};Autodesk.Viewing.Viewer3D.prototype.load=function(a,b,c,e){var d=this;return this.loadModel(a,null,b,function(){var a;d.modelstructure&&(a=function(a){d.modelstructure.setModel(a,d.config.defaultModelStructureTitle?d.config.defaultModelStructureTitle:"")});d.model.getObjectTree(a);c&&c()},e)};
Autodesk.Viewing.Viewer3D.prototype.uninitialize=function(a){this.canvas.parentNode.removeChild(this.canvas);this.viewerState=this.canvas=this.canvas.viewer=null;this.toolController&&(this.toolController.uninitialize(),this.utilities=this.clickHandler=this.toolController=null);this.navigation&&(this.navigation.uninitialize(),this.navigation=null);this.impl&&(this.impl.uninitialize(),this.impl=null);this.prefs=this.model=this.loader=null;Autodesk.Viewing.Viewer.prototype.uninitialize.call(this)};
Autodesk.Viewing.Viewer3D.prototype.detectWebGL=function(){if(window.WebGLRenderingContext){for(var a=document.createElement("canvas"),b=["webgl","experimental-webgl","moz-webgl","webkit-3d"],c=!1,e=0;4>e;e++)try{if((c=a.getContext(b[e]))&&"function"===typeof c.getParameter)return 1}catch(d){}return 0}return-1};
Autodesk.Viewing.Viewer3D.prototype.loadModel=function(a,b,c,e,d){var g=this;this.addEventListener(Autodesk.Viewing.GEOMETRY_LOADED_EVENT,function(a){this.impl.needsRender=!0;g.removeEventListener(Autodesk.Viewing.GEOMETRY_LOADED_EVENT)});return this.impl.loadSvf(a,b,c,function(a){g.model=new Autodesk.Viewing.Model(a);g.impl.setModel(g.model);g.loader.style.display="None";e&&e()},function(a,b){g.loader.style.display="None";d&&d(a,b)})};
Autodesk.Viewing.Viewer3D.prototype.resize=function(){Autodesk.Viewing.Viewer.prototype.resize.call(this);return this.impl.resize(this.container.clientWidth,this.container.clientHeight)};Autodesk.Viewing.Viewer3D.prototype.getCamera=function(){return this.impl.camera};Autodesk.Viewing.Viewer3D.prototype.getState=function(a){return this.viewerState.getState(a)};
Autodesk.Viewing.Viewer3D.prototype.restoreState=function(a,b,c){(a=this.viewerState.restoreState(a,b,c))&&this.fireEvent({type:Autodesk.Viewing.VIEWER_STATE_RESTORED_EVENT,value:a});return a};
Autodesk.Viewing.Viewer3D.prototype.setViewFromArray=function(a){this.setNavigationMode(Autodesk.Viewing.NAVIGATION_MODE.ORBIT);a={position:new THREE.Vector3(a[0],a[1],a[2]),target:new THREE.Vector3(a[3],a[4],a[5]),up:new THREE.Vector3(a[6],a[7],a[8]),aspect:a[9],fov:THREE.Math.radToDeg(a[10]),orthoScale:a[11],isPerspective:!a[12]};this.impl.setViewFromCamera(a)};Autodesk.Viewing.Viewer3D.prototype.setViewFromFile=function(){this.setNavigationMode(Autodesk.Viewing.NAVIGATION_MODE.ORBIT);this.impl.setViewFromFile(this.model)};
Autodesk.Viewing.Viewer3D.prototype.getProperties=function(a,b,c){this.model?this.model.getProperties(a,b,c):c&&c(Autodesk.Viewing.ErrorCodes.BAD_DATA,"Properties failed to load since model does not exist.")};Autodesk.Viewing.Viewer3D.prototype.getObjectTree=function(a,b){this.model?this.model.getObjectTree(a,b):b&&b(Autodesk.Viewing.ErrorCodes.BAD_DATA,"ObjectTree failed to load since model does not exist.")};
Autodesk.Viewing.Viewer3D.prototype.setCanvasClickBehavior=function(a){this.impl.controls.hasOwnProperty("setClickBehavior")&&this.impl.controls.setClickBehavior(a);this.clickHandler&&this.clickHandler.setClickBehavior(a)};Autodesk.Viewing.Viewer3D.prototype.search=function(a,b,c){this.searchText=a;this.model?this.model.search(a,b,c):c&&c(Autodesk.Viewing.ErrorCodes.BAD_DATA,"Search failed since model does not exist.")};Autodesk.Viewing.Viewer3D.prototype.getIsolatedNodes=function(){return this.impl.visibilityManager.getIsolatedNodes()};
Autodesk.Viewing.Viewer3D.prototype.isolate=function(a){Array.isArray(a)?this.impl.visibilityManager.isolateMultiple(a):this.impl.visibilityManager.isolate(a)};
Autodesk.Viewing.Viewer3D.prototype.isolateById=function(a){function b(b){(e=d.model.getNodesByIds(Array.isArray(a)?a:[a]))&&d.isolate(e)}function c(a){d.getObjectTree(b);d.removeEventListener(Autodesk.Viewing.GEOMETRY_LOADED_EVENT,c)}var e=[],d=this;this.model&&this.model.isLoadDone()?this.getObjectTree(b):this.addEventListener(Autodesk.Viewing.GEOMETRY_LOADED_EVENT,c)};Autodesk.Viewing.Viewer3D.prototype.setBackgroundColor=function(a,b,c,e,d,g){this.impl.setClearColors(a,b,c,e,d,g)};
Autodesk.Viewing.Viewer3D.prototype.toggleSelect=function(a){this.impl.selector.toggleSelectionId(a)};Autodesk.Viewing.Viewer3D.prototype.select=function(a){"number"===typeof a&&(a=[a]);this.impl.selector.setSelectionIds(a)};Autodesk.Viewing.Viewer3D.prototype.deselect=function(a){throw Error("not implemented yet");};Autodesk.Viewing.Viewer3D.prototype.clearSelection=function(){this.impl.selector.clearSelection()};Autodesk.Viewing.Viewer3D.prototype.getSelectionVisibility=function(){return this.impl.selector.getSelectionVisibility()};
Autodesk.Viewing.Viewer3D.prototype.getSelectionCount=function(){return this.impl.selector.getSelectionLength()};Autodesk.Viewing.Viewer3D.prototype.getSelection=function(){return this.impl.selector.getSelection()};Autodesk.Viewing.Viewer3D.prototype.hide=function(a){Array.isArray(a)?this.impl.visibilityManager.hideMultiple(a):this.impl.visibilityManager.hide(a)};Autodesk.Viewing.Viewer3D.prototype.show=function(a){Array.isArray(a)?this.impl.visibilityManager.showMultiple(a):this.impl.visibilityManager.show(a)};
Autodesk.Viewing.Viewer3D.prototype.showAll=function(){this.impl.visibilityManager.isolateNone();this.model.is2d()&&this.setLayerVisible(null,!0)};Autodesk.Viewing.Viewer3D.prototype.hideAll=function(){throw Error("not implemented yet");};Autodesk.Viewing.Viewer3D.prototype.toggleVisibility=function(a){this.impl.visibilityManager.toggleVisibility(a)};Autodesk.Viewing.Viewer3D.prototype.areAllVisible=function(){return this.impl.visibilityManager.areAllVisible()};
Autodesk.Viewing.Viewer3D.prototype.explode=function(a){this.impl.explode(a)};Autodesk.Viewing.Viewer3D.prototype.getExplodeScale=function(){return this.impl.getExplodeScale()};Autodesk.Viewing.Viewer3D.prototype.setQualityLevel=function(a,b){this.prefs.set("ambientShadows",a);this.prefs.set("antialiasing",b);this.impl.togglePostProcess(a,b)};Autodesk.Viewing.Viewer3D.prototype.setEnvironmentMap=function(a){this.impl.setCubeMap(a)};
Autodesk.Viewing.Viewer3D.prototype.setGhosting=function(a){this.prefs.set("ghosting",a);this.impl.toggleGhosting(a)};Autodesk.Viewing.Viewer3D.prototype.setProgressiveRendering=function(a){this.prefs.set("progressiveRendering",a);this.impl.toggleProgressive(a)};Autodesk.Viewing.Viewer3D.prototype.setOptimizeNavigation=function(a){this.prefs.set("optimizeNavigation",a);this.impl.setOptimizeNavigation(a)};
Autodesk.Viewing.Viewer3D.prototype.getNavigationMode=function(){return"getNavigationMode"in this.impl.controls?this.impl.controls.getNavigationMode():this._navigationMode};
Autodesk.Viewing.Viewer3D.prototype.setNavigationMode=function(a){if("setNavigationMode"in this.impl.controls)this.impl.controls.setNavigationMode(a);else if("activateTool"in this.impl.controls){var b=null;switch(a){case Autodesk.Viewing.NAVIGATION_MODE.ORBIT:b="orbit";break;case Autodesk.Viewing.NAVIGATION_MODE.PAN:b="pan";break;case Autodesk.Viewing.NAVIGATION_MODE.DOLLY:b="dolly"}this.switchNavTool(b,a)}};
Autodesk.Viewing.Viewer3D.prototype.switchNavTool=function(a,b){!a||this._pushedTool&&a===this._pushedTool||(this._pushedTool&&(this.impl.controls.deactivateTool(this._pushedTool),this._pushedTool=null,this._navigationMode=Autodesk.Viewing.NAVIGATION_MODE.ORBIT),"orbit"!==a&&this.impl.controls.activateTool(a)&&(this._pushedTool=a,this._navigationMode=b),this.fireEvent({type:Autodesk.Viewing.NAVIGATION_MODE_CHANGED_EVENT,value:this._navigationMode}))};Autodesk.Viewing.Viewer3D.prototype.getFOV=function(){return this.navigation.getVerticalFov()};
Autodesk.Viewing.Viewer3D.prototype.setFOV=function(a){this.navigation.setVerticalFov(a,!0)};Autodesk.Viewing.Viewer3D.prototype.getFocalLength=function(){return this.navigation.getFocalLength()};Autodesk.Viewing.Viewer3D.prototype.setFocalLength=function(a){this.navigation.setFocalLength(a,!0)};
Autodesk.Viewing.Viewer3D.prototype.hideLines=function(a){this.prefs.set("lineRendering",!a);if(!this.impl.hideLines(a)){var b=this,c=function(){b.impl.hideLines(a);b.removeEventListener(Autodesk.Viewing.GEOMETRY_LOADED_EVENT,c)};this.addEventListener(Autodesk.Viewing.GEOMETRY_LOADED_EVENT,c)}};Autodesk.Viewing.Viewer3D.prototype.applyCamera=function(a,b){this.impl.applyCamera(a,b)};
Autodesk.Viewing.Viewer3D.prototype.fitToView=function(a){var b=this,c=!0,e=function(){var g=null;if(Array.isArray(a)&&0<a.length){for(var f=new THREE.Box3,h=new THREE.Box3,k=[],l=0;l<a.length;l++)b.model.getNodeFragments(a[l],k);for(l=0;l<k.length;l++)if(void 0!==k[l]){var n=b.impl.getRenderProxy(b.model,k[l]);n.geometry.boundingBox.getTransformedBox(n.matrixWorld,h);f.union(h)}f.empty()||(g=f)}if(!g||g.empty())g=b.impl.getFitBounds();b.navigation.fitBounds(!1,g);b.removeEventListener(Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT,
d);b.removeEventListener(Autodesk.Viewing.GEOMETRY_LOADED_EVENT,e);return c},d=function(){b.model&&b.model.isLoadDone()?e():(c=!1,b.addEventListener(Autodesk.Viewing.GEOMETRY_LOADED_EVENT,e))};this.model&&this.model.isObjectTreeCreated()?d():(c=!1,this.addEventListener(Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT,d))};
Autodesk.Viewing.Viewer3D.prototype.setClickConfig=function(a,b,c){var e=this.clickHandler?this.clickHandler.getClickBehavior():this.impl.controls.getClickBehavior();return a in e&&(a=e[a],b in a)?(a[b]=c,!0):!1};Autodesk.Viewing.Viewer3D.prototype.getClickConfig=function(a,b){var c=this.clickHandler?this.clickHandler.getClickBehavior():this.impl.controls.getClickBehavior();return a in c&&(c=c[a],b in c)?c[b]:null};
Autodesk.Viewing.Viewer3D.prototype.setClickToSetCOI=function(a){this.prefs.set("clickToSetCOI",a);var b=this.getClickConfig("click","onObject");a?-1===b.indexOf("setCOI")&&this.setClickConfig("click","onObject",["setCOI"]):0<=b.indexOf("setCOI")&&this.setClickConfig("click","onObject",["selectOnly"])};
Autodesk.Viewing.Viewer3D.prototype.setModelStructurePanel=function(a){var b=this;if(a instanceof Autodesk.Viewing.UI.ModelStructurePanel||null===a){this.modelstructure&&(this.modelstructure.setVisible(!1),this.removePanel(this.modelstructure),this.modelstructure.uninitialize());if(this.modelstructure=a)this.addPanel(this.modelstructure),b.model&&b.model.getObjectTree(function(a){b.modelstructure.setModel(a)});return!0}return!1};
Autodesk.Viewing.Viewer3D.prototype.setLayersPanel=function(a){return a instanceof Autodesk.Viewing.Private.LayersPanel||!a?(this.layersPanel&&(this.layersPanel.setVisible(!1),this.removePanel(this.layersPanel),this.layersPanel.uninitialize()),(this.layersPanel=a)&&this.addPanel(a),!0):!1};
Autodesk.Viewing.Viewer3D.prototype.initSettings=function(){var a=window.navigator,b=-1!=a.platform.indexOf("armv")||a.appVersion&&-1!=a.appVersion.indexOf("Android"),a=a.appVersion&&-1!==a.appVersion.indexOf("iPad");this.prefs.load({ambientShadows:!(b||a),antialiasing:!(b||a),progressiveRendering:!0,environmentMap:!1,openPropertiesOnSelect:!0,ghosting:!0,viewCube:!0,lineRendering:!0,lightPreset:b||a||_isIE11?0:Autodesk.Viewing.Private.DefaultLightPreset,backgroundColorPreset:null,reverseMouseZoomDir:!1,
alwaysUsePivot:!1,zoomTowardsPivot:!1,orbitPastWorldPoles:!0,leftHandedMouseSetup:!1,clickToSetCOI:!1,optimizeNavigation:!1});this.prefs.tag("3d");this.prefs.tag("2d");this.prefs.untag("2d","viewCube alwaysUsePivot zoomTowardsPivot orbitPastWorldPoles clickToSetCOI ghosting optimizeNavigation ambientShadows antialiasing lineRendering lightPreset".split(" "));this.setQualityLevel(this.prefs.ambientShadows,this.prefs.antialiasing);this.setGhosting(this.prefs.ghosting);this.setProgressiveRendering(this.prefs.progressiveRendering);
this.setClickToSetCOI(this.prefs.clickToSetCOI);this.setOptimizeNavigation(this.prefs.optimizeNavigation);this.hideLines(!this.prefs.lineRendering);this.navigation.setUsePivotAlways(this.prefs.alwaysUsePivot);this.navigation.setReverseZoomDirection(this.prefs.reverseMouseZoomDir);this.navigation.setZoomTowardsPivot(this.prefs.zoomTowardsPivot);this.navigation.setOrbitPastWorldPoles(this.prefs.orbitPastWorldPoles);this.navigation.setUseLeftHandedInput(this.prefs.leftHandedMouseSetup);if(b=this.prefs.backgroundColorPreset)try{var c=
JSON.parse(b);this.impl.setClearColors(c[0],c[1],c[2],c[3],c[4],c[5])}catch(e){this.prefs.set("backgroundColorPreset",null)}this.impl.setLightPreset(this.prefs.lightPreset)};Autodesk.Viewing.Viewer3D.prototype.setLightPreset=function(a){this.prefs.set("lightPreset",a);this.impl.setLightPreset(a)};Autodesk.Viewing.Viewer3D.prototype.setTonemapMethod=function(a){this.impl.renderer().getToneMapMethod()!=a&&(this.impl.renderer().setTonemapMethod(a),this.impl.fireRenderOptionChanged(),this.impl.invalidate(!0))};
Autodesk.Viewing.Viewer3D.prototype.setUsePivotAlways=function(a){this.prefs.set("alwaysUsePivot",a);this.navigation.setUsePivotAlways(a)};Autodesk.Viewing.Viewer3D.prototype.setReverseZoomDirection=function(a){this.prefs.set("reverseMouseZoomDir",a);this.navigation.setReverseZoomDirection(a)};Autodesk.Viewing.Viewer3D.prototype.setZoomTowardsPivot=function(a){this.prefs.set("zoomTowardsPivot",a);this.navigation.setZoomTowardsPivot(a)};
Autodesk.Viewing.Viewer3D.prototype.setOrbitPastWorldPoles=function(a){this.prefs.set("orbitPastWorldPoles",a);this.navigation.setOrbitPastWorldPoles(a)};Autodesk.Viewing.Viewer3D.prototype.setUseLeftHandedInput=function(a){this.prefs.set("leftHandedMouseSetup",a);this.navigation.setUseLeftHandedInput(a)};
Autodesk.Viewing.Viewer3D.prototype.preContextMenuShow=function(a){var b=this.impl.castRay(a.clientX,a.clientY);if(b.node&&!this.impl.selector.isSelectedOrParentIsSelected(b.node)){var c=-1!==navigator.userAgent.search("Mac OS");c&&a.metaKey||!c&&a.ctrlKey||this.impl.selector.setSelection([b.node])}return!0};
Autodesk.Viewing.Viewer3D.prototype.setLayerVisible=function(a,b,c){function e(a,b){var c=[];if(a.isLayer)c.push(a.index);else for(var d=a.children,l=0;l<d.length;++l)c=c.concat(e(d[l]));return c}var d=this.model.getLayersRoot();if(d){null===a&&(a=[d]);Array.isArray(a)||(a=[a]);c&&(this.impl.setLayerVisible(e(d),!1),b=!0);c=[];for(d=0;d<a.length;++d)c=c.concat(e(a[d]));this.impl.setLayerVisible(c,b);this.fireEvent({type:Autodesk.Viewing.LAYER_VISIBILITY_CHANGED_EVENT})}};
Autodesk.Viewing.Viewer3D.prototype.isLayerVisible=function(a){return a&&a.isLayer&&this.impl.isLayerVisible(a.index)};Autodesk.Viewing.Viewer3D.prototype.anyLayerHidden=function(){function a(c){if(c.isLayer)return!b.impl.isLayerVisible(c.index);c=c.children;for(var d=0;d<c.length;++d)if(a(c[d]))return!0;return!1}var b=this,c=b.model.getLayersRoot();return c&&a(c)};Autodesk.Viewing.BaseViewer3D=Autodesk.Viewing.Viewer3D;AutodeskNamespace("Autodesk.Viewing");
Autodesk.Viewing.ErrorCodes={UNKNOWN_FAILURE:1,BAD_DATA:2,NETWORK_FAILURE:3,NETWORK_ACCESS_DENIED:4,NETWORK_FILE_NOT_FOUND:5,NETWORK_SERVER_ERROR:6,NETWORK_UNHANDLED_RESPONSE_CODE:7,BROWSER_WEBGL_NOT_SUPPORTED:8,BAD_DATA_NO_VIEWABLE_CONTENT:9};AutodeskNamespace("Autodesk.Viewing");Autodesk.Viewing.Viewer2D=function(a,b){Autodesk.Viewing.Viewer.call(this,a,b);b||(b={});b.domElement=this.container;this.impl=new Autodesk.Viewing.Private.Viewer2DImpl(this,b)};Autodesk.Viewing.Viewer2D.prototype=Object.create(Autodesk.Viewing.Viewer.prototype);
Autodesk.Viewing.Viewer2D.prototype.constructor=Autodesk.Viewing.Viewer2D;Autodesk.Viewing.Viewer2D.prototype.initialize=function(){Autodesk.Viewing.Viewer.prototype.initialize.call(this);return this.impl.initialize()};Autodesk.Viewing.Viewer2D.prototype.load=function(a,b,c,e){if(this.impl.load(a))return c&&c(),!0;e&&e();return!1};Autodesk.Viewing.Viewer2D.prototype.uninitialize=function(){this.impl.uninitialize();Autodesk.Viewing.Viewer.prototype.uninitialize.call(this)};
Autodesk.Viewing.Viewer2D.prototype.resize=function(){Autodesk.Viewing.Viewer.prototype.resize.call(this);this.impl.resize()};Autodesk.Viewing.Viewer2D.prototype.setViewFromFile=function(){this.impl.goHome()};AutodeskNamespace("Autodesk.Viewing");
Autodesk.Viewing.Document=function(a,b){function c(a){if(a){var b=a.children?a.children.length:0;if("geometry"===a.type&&"3d"===a.role&&b){for(var e=0,k=0;k<b;k++){var l=a.children[k];l&&"view"===l.type&&"3d"===l.role&&(d.myViewGeometry[l.guid]=a,e++)}d.myNumViews[a.guid]=e}else if("application/autodesk-db"==a.mime&&a.urn)d.myPropertyDb=a.urn.substr(0,a.urn.lastIndexOf("/")+1);else if(0<b)for(k=0;k<b;k++)c(a.children[k])}}function e(a,b,c){if(a){var d=a.guid;if(d){c.apply(this,[d,b]);b=a.children?
a.children.length:0;for(var l=0;l<b;l++)e(a.children[l],d,c)}}}this.myPath=b;this.myData=a;this.myViewGeometry={};this.myNumViews={};this.myPropertyDb=null;var d=this;c(a);this.parents={};e(this.myData,null,function(a,b){d.parents[a]=b})};Autodesk.Viewing.Document.prototype.constructor=Autodesk.Viewing.Document;
Autodesk.Viewing.Document.load=function(a,b,c,e){function d(a){var b=[],c=null;if(!a||!a.children)return b;if(a=1===a.children.length?a.children[0]:null)c=a.messages;a=c?c.length:0;for(var d=0;d<a;d++)b.push(c[d]);return b}"function"!==typeof b&&(console.log("Autodesk.Viewing.Document.load called with deprecated (auth) parameter"),"function"===typeof c&&(b=c),"function"===typeof e&&(c=e));var g=function(a){return-1===a.indexOf("urn:")?(0!==a.indexOf("/")&&(a="/"+a),window.location.protocol+"//"+window.location.host+
a):a}(a);try{(new Autodesk.Viewing.Private.ViewingServiceXhr(VIEWING_URL,"bubbles",{encodeUrn:!1})).get(g,function(a){if(/<[^>]*script/.test(a))c&&c(Autodesk.Viewing.ErrorCodes.BAD_DATA,"Malicious document content detected. Abort loading.");else{a="string"===typeof a?JSON.parse(a):a;a=new Autodesk.Viewing.Document(a,g);var e=Autodesk.Viewing.Document.getSubItemsWithProperties(a.getRootItem(),{type:"folder",role:"viewable"},!0)[0];0<Autodesk.Viewing.Document.getSubItemsWithProperties(e,{type:"geometry"},
!0).length?(e=d(a.getRootItem()),b&&b(a,e)):c&&(e=d(a.getRootItem()),c(Autodesk.Viewing.ErrorCodes.BAD_DATA_NO_VIEWABLE_CONTENT,"No viewable content.",e))}},function(a,b,e){"string"===typeof e&&JSON.parse(e);e=d(e);c&&(b="Error: "+a+" ("+b+")",a=Autodesk.Viewing.Private.ErrorHandler.getErrorCode(a),c(a,b,e))})}catch(f){c&&c(Autodesk.Viewing.ErrorCodes.UNKNOWN_FAILURE,"An exception occurred while loading the document: "+f.toString(),null)}};
Autodesk.Viewing.Document.prototype.getFullPath=function(a){var b=a;0===a.indexOf("urn")?b=VIEWING_URL+"/items/"+a:0===a.indexOf("$file$")&&-1!==this.myPath.indexOf("/output/bubble.json")&&(b=this.myPath.replace("/output/bubble.json","")+a.replace("$file$",""));return b};Autodesk.Viewing.Document.prototype.getThumbnailPath=function(a,b,c){b=b?b:200;c=c?c:200;return VIEWING_URL+"/thumbnails/"+this.myData.urn+"?guid="+encodeURIComponent(a.guid)+"&width="+b+"&height="+c};
Autodesk.Viewing.Document.prototype.getViewablePath=function(a){if("geometry"===a.type){var b=[];"3d"===a.role?b=Autodesk.Viewing.Document.getSubItemsWithProperties(a,{mime:"application/autodesk-svf"},!1):"2d"===a.role&&(b=Autodesk.Viewing.Document.getSubItemsWithProperties(a,{mime:"application/autodesk-f2d"},!1),0==b.length&&(b=Autodesk.Viewing.Document.getSubItemsWithProperties(a,{role:"tileRoot"},!0)));if(0<b.length)return this.getFullPath(b[0].urn)}else if("view"===a.type&&(a=this.getViewGeometry(a)))return this.getViewablePath(a);
return""};Autodesk.Viewing.Document.prototype.getPropertyDbPath=function(){return this.myPropertyDb};Autodesk.Viewing.Document.prototype.getRootItem=function(){return this.myData};Autodesk.Viewing.Document.prototype.getPath=function(){return this.myPath};Autodesk.Viewing.Document.prototype.getItemById=function(a){function b(c){if(!c)return null;for(var e in c){var d=c[e];if("guid"===e&&d===a)return c;if(null!==d&&"object"===typeof d&&(d=b(d)))return d}return null}return b(this.myData)};
Autodesk.Viewing.Document.getSubItemsWithProperties=function(a,b,c){var e=[];if(!a)return[];for(var d=a.children?a.children.length:0,g=0;g<d;g++){var f=a.children[g],h;a:{h=b;var k=void 0;for(k in h)if(!(k in f)||h[k]!==f[k]){h=!1;break a}h=!0}h&&e.push(f);c&&e.push.apply(e,Autodesk.Viewing.Document.getSubItemsWithProperties(f,b,c))}return e};Autodesk.Viewing.Document.prototype.getViewGeometry=function(a){return this.myViewGeometry[a.guid]};
Autodesk.Viewing.Document.prototype.getNumViews=function(a){return this.myNumViews[a.guid]||0};Autodesk.Viewing.Document.prototype.getParentId=function(a){return this.parents[a]};Autodesk.Viewing.Document.prototype.getMessages=function(a,b){var c=[];if(!a)return c;var e=null;b&&(e=this.getRootItem().guid);for(var d=a,g=this.parents[d];d&&(!b||g!==e);){if((d=this.getItemById(d))&&d.messages)for(var f=0;f<d.messages.length;f++)c.push(d.messages[f]);d=g;g=this.parents[d]}return c};AutodeskNamespace("Autodesk.Viewing");
Autodesk.Viewing.ModelUnits={METER:"m",CENTIMETER:"cm",MILLIMETER:"mm",FOOT:"ft",INCH:"in"};Autodesk.Viewing.Model=function(a){this.myData=a;this.myLoader=this.propWorker=this.sharedPath=null};Autodesk.Viewing.Model.prototype=Object.create(THREE.EventDispatcher.prototype);Autodesk.Viewing.Model.prototype.constructor=Autodesk.Viewing.Model;Autodesk.Viewing.Model.prototype.setData=function(a){this.myData=a};Autodesk.Viewing.Model.prototype.getData=function(){return this.myData};
Autodesk.Viewing.Model.prototype.setLoader=function(a){this.myLoader=a};Autodesk.Viewing.Model.prototype.getRoot=function(){return this.myData?this.myData.instanceTree:null};Autodesk.Viewing.Model.prototype.getRootId=function(){return this.myData&&this.myData.instanceTree?this.myData.instanceTree.dbId:null};Autodesk.Viewing.Model.prototype.getBoundingBox=function(){return this.myData?this.myData.bbox:null};
Autodesk.Viewing.Model.prototype.getUnitScale=function(){switch(this.getMetadata("distance unit","value",null)){case "meter":case "m":return 1;case "foot":case "ft":return 0.3048;case "inch":case "in":return 0.0254;case "centimeter":case "cm":return 0.01;case "millimeter":case "mm":return 0.001;default:return 1}};
Autodesk.Viewing.Model.prototype.getUnitString=function(){switch(this.getMetadata("distance unit","value",null)){case "meter":case "m":return Autodesk.Viewing.ModelUnits.METER;case "foot":case "ft":return Autodesk.Viewing.ModelUnits.FOOT;case "inch":case "in":return Autodesk.Viewing.ModelUnits.INCH;case "centimeter":case "cm":return Autodesk.Viewing.ModelUnits.CENTIMETER;case "millimeter":case "mm":return Autodesk.Viewing.ModelUnits.MILLIMETER;default:return null}};
Autodesk.Viewing.Model.prototype.getNodeById=function(a){function b(c){if(!c)return null;if(c.dbId&&c.dbId===a)return c;if(c.children&&0<c.children.length)for(var e=0;e<c.children.length;e++){var d=b(c.children[e]);if(d)return d}return null}return b(this.getRoot())};
Autodesk.Viewing.Model.prototype.getNodesByIds=function(a){function b(a,e,d){if(0===a.length)return d;var g=a.indexOf(e.dbId);-1!==g&&(d.push(e),a.splice(g,1));if(e.children)for(g=0;g<e.children.length;g++)b(a,e.children[g],d);return d}a=a.slice(0);return b(a,this.getRoot(),[])};
Autodesk.Viewing.Model.prototype.getNodeFragments=function(a,b){function c(a,b){var e=a.fragIds;Array.isArray(e)||(e=[e]);for(var h=0;h<e.length;++h)b.push(e[h]);if(a.children)for(e=0;e<a.children.length;e++)c(a.children[e])}var e=this.getNodeById(a);c(e,b)};Autodesk.Viewing.Model.prototype.getMetadata=function(a,b,c){if(this.myData){var e=this.myData.metadata;if(e&&(a=e[a],void 0!==a))if(b){if(b=a[b],void 0!==b)return b}else return a}return c};
Autodesk.Viewing.Model.prototype.getDefaultCamera=function(){var a=this.myData;if(!a)return null;var b=null,c=a.cameras?a.cameras.length:0;if(0<c){var e=this.getMetadata("default camera","index",null);if(null!==e&&a.cameras[e])b=a.cameras[e];else{for(e=0;e<c;e++){var d=a.cameras[e];if(d.isPerspective){b=d;break}}b||(b=a.cameras[0])}}return b};Autodesk.Viewing.Model.prototype.getUpVector=function(){return this.getMetadata("world up vector","XYZ",null)};
Autodesk.Viewing.Model.prototype.geomPolyCount=function(){return this.myData?this.myData.geomPolyCount:null};Autodesk.Viewing.Model.prototype.instancePolyCount=function(){return this.myData?this.myData.instancePolyCount:null};Autodesk.Viewing.Model.prototype.getLayersRoot=function(){return this.myData?this.myData.layersRoot:null};Autodesk.Viewing.Model.prototype.is2d=function(){return this.myData&&this.myData.is2d};Autodesk.Viewing.Model.prototype.isLoadDone=function(){return this.myData&&this.myData.loadDone};
Autodesk.Viewing.Model.prototype.isObjectTreeCreated=function(){return this.myData&&this.myData.fragToNodeDone};Autodesk.Viewing.Model.prototype.getProperties=function(a,b,c){this.myData&&this.myLoader&&this.myLoader.getProperties(a,b,c)};Autodesk.Viewing.Model.prototype.getObjectTree=function(a,b){this.myData&&this.myLoader&&this.myLoader.getObjectTree(a,b)};
Autodesk.Viewing.Model.prototype.search=function(a,b,c){var e=this;this.isLoadDone()?this.myLoader.searchProperties(a,b,c):this.getObjectTree(function(d){e.myLoader.searchProperties(a,b,c)})};AutodeskNamespace("Autodesk.Viewing");
Autodesk.Viewing.Navigation=function(a){this.__options={dollyToPivot:!1,orbitPastPoles:!0,reverseDolly:!1,useLeftHandedInput:!1,usePivotAlways:!1,lockNavigation:!1};this.__transitionActive=this.__homeViewRequested=this.__fitToViewRequested=this.__pivotIsSetFlag=!1;this.__destinationView=null;this.__is2D=!1;this.__kEpsilon=1E-6;var b=null,c=new THREE.Projector,e={left:0,top:0,width:1,height:1};this.uninitialize=function(){this.setCamera(null)};this.setCamera=function(a){a!==b&&(b=a)&&(a.hasOwnProperty("target")||
(a.target=new THREE.Vector3(0,0,0)),a.hasOwnProperty("pivot")||(a.pivot=new THREE.Vector3(0,0,0)),a.worldup=a.up.clone(),a.dirty=!0)};this.getCamera=function(){return b};this.setScreenViewport=function(a){e=a};this.getScreenViewport=function(){return e};this.__setUp=function(a){return a&&b&&0!==a.clone().normalize().sub(b.worldup).lengthSq()?(b.worldup.copy(a).normalize(),b.dirty=!0):!1};this.__getUp=function(){return b?b.worldup:new THREE.Vector3(0,1,0)};this.__getProjector=function(){return c};
this.setView=function(a,c){b&&a&&c&&!this.__options.lockNavigation&&(b.position.copy(a),b.target.copy(c),b.dirty=!0)};this.orientCameraUp=function(){b&&!this.__options.lockNavigation&&(b.up.copy(this.getAlignedUpVector()),b.dirty=!0)};this.getPivotPoint=function(){return b?b.pivot.clone():new THREE.Vector3(0,0,0)};this.setPivotPoint=function(a){b&&a&&!this.__options.lockNavigation&&(b.pivot.copy(a),b.dirty=!0)};this.getPosition=function(){return b?b.position.clone():new THREE.Vector3(0,0,1)};this.setPosition=
function(a){b&&a&&!this.__options.lockNavigation&&(b.position.copy(a),b.dirty=!0)};this.setTarget=function(a){b&&a&&!this.__options.lockNavigation&&(b.target.copy(a),b.dirty=!0)};this.getTarget=function(){return b?b.target.clone():new THREE.Vector3(0,0,0)};this.getEyeVector=function(){return b?b.target.clone().sub(b.position):new THREE.Vector3(0,0,-1)};this.getFovMin=function(){return 6.88};this.getFovMax=function(){return 100};this.setVerticalFov=function(a,c){if(!b||b.isPerspective)if(6.88>a?a=
6.88:100<a&&(a=100),b&&!this.__options.lockNavigation&&!(1E-6>=Math.abs(b.fov-a))){if(c){var e=this.getEyeVector(),h=THREE.Math.degToRad(b.fov),k=THREE.Math.degToRad(a),h=e.length()*Math.tan(0.5*h)/Math.tan(0.5*k),e=e.multiplyScalar(-1).normalize();this.setPosition(this.getTarget().add(e.multiplyScalar(h)))}b.setFov(a);b.dirty=!0}};this.computeFit=function(a,b,c,e){if(!e||e.empty())return{position:a,target:b};var k=e.center();e=e.size();e=0.5*Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z);0===e&&(e=1);if(!this.getIs2D()){var l=
Math.max(1,0.9+c/100*0.5);e*=l}a=a.clone().sub(b).normalize();c=e/Math.tan(THREE.Math.degToRad(0.5*c));a.multiplyScalar(c);return{position:k.clone().add(a),target:k}};this.computeOrthogonalUp=function(a,b){var c=this.__getUp(),e=b.clone().sub(a);if(0===e.lengthSq())return e.copy(c);var k=e.clone().cross(c);0===k.lengthSq()&&(c.z>c.y?e.y-=1E-4:e.z-=1E-4,k.crossVectors(e,c));return k.cross(e).normalize()};this.fitBounds=function(a,c,e){var h=this.getTarget(),k=this.getPosition();if(this.__options.lockNavigation||
!c||c.empty())return{position:k,target:h};var l=this.getVerticalFov();c=this.computeFit(k,h,l,c);e=e?this.computeOrthogonalUp(k,h):b.up;a?(b.up=e,this.setView(c.position,c.target)):this.setRequestTransitionWithUp(!0,c.position,c.target,l,e);this.setPivotPoint(c.target);this.setPivotSetFlag(!0);return c};this.updateCamera=function(){b&&(b.updateProjectionMatrix(),this.orient(b,b.target,b.position,b.up),b.dirty=!1)};this.setCamera(a)};Autodesk.Viewing.Navigation.prototype.constructor=Autodesk.Viewing.Navigation;
Autodesk.Viewing.Navigation.prototype.setIs2D=function(a){this.__is2D=!!a};Autodesk.Viewing.Navigation.prototype.getIs2D=function(){return this.__is2D};
Autodesk.Viewing.Navigation.prototype.orient=function(){var a=new THREE.Matrix4,b=new THREE.Vector3,c=new THREE.Vector3,e=new THREE.Vector3;return function(d,g,f,h){var k=a.elements;e.subVectors(f,g).normalize();0===e.lengthSq()&&(e.z=1);b.crossVectors(h,e).normalize();0===b.lengthSq()&&(h.z>h.y?e.y-=1E-4:e.z+=1E-4,b.crossVectors(h,e).normalize());c.crossVectors(e,b);k[0]=b.x;k[4]=c.x;k[8]=e.x;k[1]=b.y;k[5]=c.y;k[9]=e.y;k[2]=b.z;k[6]=c.z;k[10]=e.z;d.setRotationFromMatrix(a)}}();
Autodesk.Viewing.Navigation.prototype.fov2fl=function(a){a=THREE.Math.degToRad(a);0>=a&&(a=1E-4);return Math.round(12/Math.tan(0.5*a))};Autodesk.Viewing.Navigation.prototype.fl2fov=function(a){0>=a&&(a=1E-4);a=2*Math.atan(12/a);return THREE.Math.radToDeg(a)};Autodesk.Viewing.Navigation.prototype.setCameraUpVector=function(a){if(!this.__options.lockNavigation){var b=this.getCamera();b.up.copy(a);b.dirty=!0}};
Autodesk.Viewing.Navigation.prototype.getCameraUpVector=function(){var a=this.getCameraRightVector(!1),b=this.getEyeVector();return a.cross(b).normalize()};Autodesk.Viewing.Navigation.prototype.getAlignedUpVector=function(){var a=this.getCameraRightVector(!0),b=this.getEyeVector();return a.cross(b).normalize()};
Autodesk.Viewing.Navigation.prototype.getCameraRightVector=function(a){var b=new THREE.Vector3;a=a?this.getWorldUpVector():this.getCamera().up;var c=this.getEyeVector();b.crossVectors(c,a);0===b.lengthSq()&&(a.z>a.y?c.y-=1E-4:c.z+=1E-4,b.cross(a));return b.normalize()};Autodesk.Viewing.Navigation.prototype.setWorldUpVector=function(a,b){this.__options.lockNavigation||(this.__setUp(a),b&&this.orientCameraUp())};Autodesk.Viewing.Navigation.prototype.getWorldUpVector=function(){return this.__getUp().clone()};
Autodesk.Viewing.Navigation.prototype.getWorldRightVector=function(){var a=new THREE.Vector3;a.copy(this.__getUp());Math.abs(a.z)<=Math.abs(a.y)?a.set(a.y,-a.x,0):0<=a.z?a.set(a.z,0,-a.x):a.set(-a.z,0,a.x);return a.normalize()};Autodesk.Viewing.Navigation.prototype.getVerticalFov=function(){return this.getCamera().fov};Autodesk.Viewing.Navigation.prototype.getHorizontalFov=function(){var a=this.getScreenViewport();return this.getCamera().fov*(a.width/a.height)};
Autodesk.Viewing.Navigation.prototype.getFocalLength=function(){return this.fov2fl(this.getVerticalFov())};Autodesk.Viewing.Navigation.prototype.setFocalLength=function(a,b){this.setVerticalFov(this.fl2fov(a),b)};Autodesk.Viewing.Navigation.prototype.setReverseZoomDirection=function(a){this.__options.reverseDolly=!!a};Autodesk.Viewing.Navigation.prototype.getReverseZoomDirection=function(){return this.__options.reverseDolly};
Autodesk.Viewing.Navigation.prototype.setZoomTowardsPivot=function(a){this.__options.dollyToPivot=!!a};Autodesk.Viewing.Navigation.prototype.getZoomTowardsPivot=function(){return this.__options.dollyToPivot};Autodesk.Viewing.Navigation.prototype.setOrbitPastWorldPoles=function(a){this.__options.orbitPastPoles=!!a};Autodesk.Viewing.Navigation.prototype.getOrbitPastWorldPoles=function(){return this.__options.orbitPastPoles};
Autodesk.Viewing.Navigation.prototype.setUsePivotAlways=function(a){this.__options.usePivotAlways=!!a};Autodesk.Viewing.Navigation.prototype.getUsePivotAlways=function(){return this.__options.usePivotAlways};Autodesk.Viewing.Navigation.prototype.setUseLeftHandedInput=function(a){this.__options.useLeftHandedInput=!!a};Autodesk.Viewing.Navigation.prototype.getUseLeftHandedInput=function(){return this.__options.useLeftHandedInput};
Autodesk.Viewing.Navigation.prototype.setIsLocked=function(a){this.__options.lockNavigation=!!a};Autodesk.Viewing.Navigation.prototype.getIsLocked=function(){return this.__options.lockNavigation};Autodesk.Viewing.Navigation.prototype.setPivotSetFlag=function(a){this.__options.lockNavigation||(this.__pivotIsSetFlag=!!a)};Autodesk.Viewing.Navigation.prototype.getPivotSetFlag=function(){return this.__pivotIsSetFlag};
Autodesk.Viewing.Navigation.prototype.setRequestFitToView=function(a){this.__options.lockNavigation||(this.__fitToViewRequested=!!a)};Autodesk.Viewing.Navigation.prototype.getRequestFitToView=function(){return this.__fitToViewRequested};Autodesk.Viewing.Navigation.prototype.setRequestHomeView=function(a){this.__options.lockNavigation||(this.__homeViewRequested=!!a)};Autodesk.Viewing.Navigation.prototype.getRequestHomeView=function(){return this.__homeViewRequested};
Autodesk.Viewing.Navigation.prototype.setRequestTransition=function(a,b,c,e,d){this.__destinationView=a?{position:b.clone(),coi:c.clone(),fov:e,up:this.getCamera().up.clone(),worldUp:this.getWorldUpVector(),reorient:d}:null};Autodesk.Viewing.Navigation.prototype.setRequestTransitionWithUp=function(a,b,c,e,d,g){this.__destinationView=a?{position:b.clone(),coi:c.clone(),fov:e,up:d.clone(),worldUp:g?g:this.getWorldUpVector(),reorient:!1}:null};
Autodesk.Viewing.Navigation.prototype.getRequestTransition=function(){return this.__destinationView};Autodesk.Viewing.Navigation.prototype.setTransitionActive=function(a){this.__transitionActive=!!a};Autodesk.Viewing.Navigation.prototype.getTransitionActive=function(){return this.__transitionActive};
Autodesk.Viewing.Navigation.prototype.getWorldSize=function(a){var b=this.getScreenViewport(),b=b.width/b.height;a=2*a*Math.tan(THREE.Math.degToRad(0.5*this.getCamera().fov));return new THREE.Vector2(a*b,a)};
Autodesk.Viewing.Navigation.prototype.getWorldPoint=function(a,b){b=2*(1-b)-1;var c=new THREE.Vector3(2*a-1,b,0.5);this.__getProjector().unprojectVector(c,this.getCamera());var e=this.getPosition(),c=c.sub(e).normalize(),d=this.getPivotPoint(),g=this.getEyeVector(),f=c.dot(g),d=0!==f?d.sub(e).dot(g)/f:d.sub(e).length();return c.multiplyScalar(d).add(e)};Autodesk.Viewing.Navigation.prototype.getPivotPlaneDistance=function(){var a=this.getPivotPoint(),b=this.getEyeVector(),c=this.getPosition();return a.sub(c).dot(b.normalize())};
Autodesk.Viewing.Navigation.prototype.panRelative=function(a,b,c){c=this.getWorldSize(c);a*=c.x;b*=c.y;a=this.getCameraRightVector(!1).multiplyScalar(a);b=this.getCameraUpVector().multiplyScalar(b);b=a.add(b);this.setView(this.getPosition().add(b),this.getTarget().add(b));this.getPivotSetFlag()||this.setPivotPoint(this.getTarget())};
Autodesk.Viewing.Navigation.prototype.dollyFromPoint=function(a,b){if(!(Math.abs(a)<=this.__kEpsilon)){var c=this.getPosition(),c=b.clone().sub(c),e=c.length(),d=e+a,g=10*this.__kEpsilon;d<g&&(d=g);e=d/e;Math.abs(e-1)>this.__kEpsilon&&(c.multiplyScalar(e),c.set(-c.x,-c.y,-c.z),c=c.add(b),d=this.getEyeVector(),d.multiplyScalar(e),this.setView(c,d.add(c)))}};
Autodesk.Viewing.Navigation.prototype.toPerspective=function(){var a=this.getCamera();this.__options.lockNavigation||a.isPerspective||(a.toPerspective(),a.dirty=!0)};Autodesk.Viewing.Navigation.prototype.toOrthographic=function(){var a=this.getCamera();!this.__options.lockNavigation&&a.isPerspective&&(a.toOrthographic(),a.dirty=!0)};AutodeskNamespace("Autodesk.Viewing");Autodesk.Viewing.ScreenCapture=function(a){this.viewer=a;return this.viewer.impl.renderer().screenCaptureRenderer.domElement.toDataURL("image/png")};
"use strict";AutodeskNamespace("Autodesk.Viewing");Autodesk.Viewing.ViewingApplication=function(a,b){this.appContainerId=a;this.container=document.getElementById(a);this.options=b;this.myRegisteredViewers={};this.urn=this.myCurrentViewer=this.myDocument=null};Autodesk.Viewing.ViewingApplication.prototype.k3D="3D";Autodesk.Viewing.ViewingApplication.prototype.k2D="2D";
Autodesk.Viewing.ViewingApplication.prototype.registerViewer=function(a,b,c){this.myRegisteredViewers[a]={};this.myRegisteredViewers[a].class=b;this.myRegisteredViewers[a].config=c};Autodesk.Viewing.ViewingApplication.prototype.getViewerClass=function(a){return this.myRegisteredViewers.hasOwnProperty(a)?this.myRegisteredViewers[a].class:null};Autodesk.Viewing.ViewingApplication.prototype.getViewerContainer=function(){return document.getElementById(this.appContainerId)};
Autodesk.Viewing.ViewingApplication.prototype.getViewer=function(a,b,c){if(a in this.myRegisteredViewers){this.setCurrentViewer(null);var e=this.myRegisteredViewers[a].class,d={};a=this.myRegisteredViewers[a].config;for(var g in a)a.hasOwnProperty(g)&&(d[g]=a[g]);for(g in b)b.hasOwnProperty(g)&&(d[g]=b[g]);for(b=this.getViewerContainer();b.hasChildNodes();)b.removeChild(b.lastChild);e=new e(b,d);d=e.start();if(0===d)return this.setCurrentViewer(e),e;c&&c(d,"Viewer failed to initialize.")}return null};
Autodesk.Viewing.ViewingApplication.prototype.setCurrentViewer=function(a){this.myCurrentViewer&&this.myCurrentViewer.finish();this.myCurrentViewer=a};Autodesk.Viewing.ViewingApplication.prototype.getCurrentViewer=function(){return this.myCurrentViewer};Autodesk.Viewing.ViewingApplication.prototype.loadDocument=function(a,b,c){var e=this;Autodesk.Viewing.Document.load(a,function(a,c){e.myDocument=a;e.onDocumentLoaded(a,c);b&&b(a,c)},function(a,b,f){e.onDocumentFailedToLoad(b,a,f);c&&c(a,b,f)})};
Autodesk.Viewing.ViewingApplication.prototype.onDocumentLoaded=function(a,b){console.log(a,b)};Autodesk.Viewing.ViewingApplication.prototype.onDocumentFailedToLoad=function(a,b,c){console.log(a,b,c)};
Autodesk.Viewing.ViewingApplication.prototype.selectItem=function(a,b,c){var e=this.myDocument.getViewablePath(a);if(e){var d,g,f;if("geometry"===a.type&&"3d"===a.role)d=this.k3D,f=a.name;else if("view"===a.type&&"3d"===a.role){g=a;d=this.k3D;var h=this.myDocument.getViewGeometry(a);h&&(f=h.name)}else"geometry"===a.type&&"2d"===a.role&&(d=0<Autodesk.Viewing.Document.getSubItemsWithProperties(a,{mime:"application/autodesk-f2d"},!1).length?this.k3D:this.k2D,f=a.name);Autodesk.Viewing.Private.logger.log({viewer_current_time:Date.now(),
viewer_event_type:"switch sheet",viewer_sheet_title:f});var k=this.myDocument.getMessages(a.guid,!0);if(d){var l=this,n=this.myCurrentViewer&&this.urn===e,h=null,h=g&&g.camera?function(){l.myCurrentViewer.setViewFromArray(g.camera);b&&b(l.myCurrentViewer,a,k)}:n?function(){l.myCurrentViewer.setViewFromFile();b&&b(l.myCurrentViewer,a,k)}:function(){b&&b(l.myCurrentViewer,a,k)},m=function(a,b){c&&c(a,b,k)},p=!1;n?(h&&h(),p=!0):(this.urn=null,f={defaultModelStructureTitle:f,viewableName:f},a.hasOwnProperty("extensions")&&
(f.extensions=Array.isArray(a.extensions)?a.extensions:[a.extensions]),(d=this.getViewer(d,f,c))&&d.load(this.myDocument.getFullPath(e),this.myDocument.getPropertyDbPath(),h,m)&&(this.urn=e,p=!0));if(p)return this.onItemSelected(a),!0}}return!1};Autodesk.Viewing.ViewingApplication.prototype.onItemSelected=function(a){console.log("Selected URL: http://"+location.host+location.pathname+"?document=urn:"+this.myDocument.getRootItem().guid+"&item="+encodeURIComponent(a.guid))};
Autodesk.Viewing.ViewingApplication.prototype.selectItemById=function(a,b,c){return(a=this.myDocument.getItemById(a))?this.selectItem(a,b,c):!1};AutodeskNamespace("Autodesk.Viewing");Autodesk.Viewing.Initializer=function(a,b){Autodesk.Viewing.Private.initializeEnvironmentVariable(a);Autodesk.Viewing.Private.initializeServiceEndPoints();Autodesk.Viewing.Private.initializeAuth(b,a);Autodesk.Viewing.Private.initializeLocalization()};"use strict";AutodeskNamespace("Autodesk.Viewing.Private");
Autodesk.Viewing.Private.GuiViewer3D=function(a,b){b||(b={});b.startOnInitialize=!1;b.hasOwnProperty("docStructureConfig")||(b.docStructureConfig=Autodesk.Viewing.Private.GuiViewer3D.kDefaultDocStructureConfig);Autodesk.Viewing.Viewer3D.call(this,a,b)};Autodesk.Viewing.Private.GuiViewer3D.prototype=Object.create(Autodesk.Viewing.Viewer3D.prototype);Autodesk.Viewing.Private.GuiViewer3D.prototype.constructor=Autodesk.Viewing.Private.GuiViewer3D;
Autodesk.Viewing.Private.GuiViewer3D.prototype.resize=function(){Autodesk.Viewing.Viewer3D.prototype.resize.call(this);600>this.container.clientWidth?this.toolbar.collapse(!0):this.toolbar.collapse(!1)};Autodesk.Viewing.Private.GuiViewer3D.kDefaultDocStructureConfig={click:{onObject:["isolate"]},clickCtrl:{onObject:["toggleVisibility"]}};
Autodesk.Viewing.Private.GuiViewer3D.prototype.initialize=function(){var a=Autodesk.Viewing.Viewer3D.prototype.initialize.call(this);if(0<a)return a;if(this.toolController){var a=new Autodesk.Viewing.HotKeysTool(this),b=new Autodesk.Viewing.FovTool(this),c=new Autodesk.Viewing.WorldUpTool(this.impl,this);this.toolController.registerTool(a);this.toolController.registerTool(b);this.toolController.registerTool(c);this.toolController.activateTool(a.getName())}var e=this,a=e.container;Autodesk.Viewing.Extensions.Markers.ViewerMarkers&&
(this.markers=new Autodesk.Viewing.Extensions.Markers.ViewerMarkers(e),this.markers.load());Autodesk.Viewing.Extensions.SnapshotHotkeys&&(this.hotkeys=new Autodesk.Viewing.Extensions.SnapshotHotkeys(e),this.hotkeys.load());this.defaultNavigation=Autodesk.Viewing.NAVIGATION_MODE.ORBIT;this.initializeToolbar(a);this.initFocalLengthOverlay();this.addEventListener(Autodesk.Viewing.FULLSCREEN_MODE_EVENT,function(a){e.resizePanels({viewer:e});e.updateScreenModeButton(a.mode)});this.propertygrid=new Autodesk.Viewing.Extensions.ViewerPropertyPanel(e);
this.addPanel(this.propertygrid);this.propertygrid.addVisibilityListener(function(a){e.setPropertiesButtonEnabled(a)});this.contextMenu||this.setContextMenu(new Autodesk.Viewing.Extensions.ViewerObjectContextMenu(this));this.progressbar=new Autodesk.Viewing.Private.ProgressBar(this.container);this.addEventListener(Autodesk.Viewing.PROGRESS_UPDATE_EVENT,function(a){void 0!==a.percent&&e.progressbar.setPercent(a.percent)},!1);this.selectionActive=!1;this.addEventListener(Autodesk.Viewing.SELECTION_CHANGED_EVENT,
function(a){e.selectionActive=0<a.dbIdArray.length;e.prefs.openPropertiesOnSelect&&e.propertygrid.setVisible(e.selectionActive)});this.addEventListener(Autodesk.Viewing.VIEWER_STATE_RESTORED_EVENT,function(a){e.renderoptions.syncUI();e.vieweroptions.syncUI()});this.initEscapeHandlers();this.updateScreenModeButton(this.getScreenMode());this.localize();this.run();return 0};
Autodesk.Viewing.Private.GuiViewer3D.prototype.uninitialize=function(){this.vieweroptions&&(this.vieweroptions.uninitialize(),this.vieweroptions=null);this.modelstructure&&(this.modelstructure.uninitialize(),this.modelstructure=null);this.layersPanel&&(this.layersPanel.uninitialize(),this.layersPanel=null);this.propertygrid&&(this.propertygrid.uninitialize(),this.propertygrid=null);this.renderoptions&&(this.renderoptions.uninitialize(),this.renderoptions=null);this.raaSPanel&&(this.raaSPanel.uninitialize(),
this.raaSPanel=null);this.markers&&(this.markers.unload(),this.markers=null);this.hotkeys&&(this.hotkeys.unload(),this.hotkeys=null);this.toolbar=this.searchMenu=this.debugMenu=this.raaSTools=this.navTools=this.modelTools=this.minTools=this.progressbar=null;Autodesk.Viewing.Viewer3D.prototype.uninitialize.call(this)};
Autodesk.Viewing.Private.GuiViewer3D.prototype.initializeToolbar=function(a){this.toolbar=new Autodesk.Viewing.UI.Toolbar(a);if(this.canChangeScreenMode()){this.minToolsId="minTools";this.minTools=this.toolbar.addSubToolbar(this.minToolsId,!1);var b=this;this.minTools.minfullscreenbutton=this.addMenuButton(this.minToolsId,"toolbar-minfullscreenTool","Full screen",function(a){b.nextScreenMode()})}this.navToolsId="navTools";this.navTools=this.toolbar.addSubToolbar(this.navToolsId,!0);this.modelToolsId=
"modelTools";this.modelTools=this.toolbar.addSubToolbar(this.modelToolsId,!1)};
Autodesk.Viewing.Private.GuiViewer3D.prototype.loadModel=function(a,b,c,e,d){-1!=a.indexOf(".f2d")?(this.createUI("2d"),this.defaultNavigation=Autodesk.Viewing.NAVIGATION_MODE.PAN,this.navTools&&this.navTools.select(this.navTools.panbutton.id)):(this.createUI("3d"),this.defaultNavigation=Autodesk.Viewing.NAVIGATION_MODE.ORBIT,this.navTools&&this.navTools.select(this.navTools.orbitbutton.id));return Autodesk.Viewing.Viewer3D.prototype.loadModel.call(this,a,b,c,e,d)};
Autodesk.Viewing.Private.GuiViewer3D.prototype.setModelStructurePanel=function(a){var b=this;return Autodesk.Viewing.Viewer3D.prototype.setModelStructurePanel.call(b,a)&&a?(b.modelstructure.addVisibilityListener(function(a){if(a)b.onPanelVisible(b.modelstructure,b);b.setStructureButtonEnabled(a)}),!0):!1};
Autodesk.Viewing.Private.GuiViewer3D.prototype.createUI=function(a){var b="3d"===a;this.initNavTools(a);this.initCameraStateMachine(a);this.initModelTools(a);ENABLE_DEBUG&&this.initDebugTools();this.fireEvent({type:Autodesk.Viewing.TOOLBAR_CREATED_EVENT});this.initSearchBox();this.initHomeButton(a);b&&this.initViewCube()};
Autodesk.Viewing.Private.GuiViewer3D.prototype.addOptionToggle=function(a,b,c,e,d){var g=d?this.prefs[d]:null;c="boolean"===typeof g?g:c;g=document.createElement("li");g.className="toolbar-submenu-listitem";var f=document.createElement("input");f.className="toolbar-submenu-checkbox";f.type="checkbox";f.id=b;g.appendChild(f);var h=document.createElement("label");h.setAttribute("for",b);h.setAttribute("data-i18n",b);h.textContent=Autodesk.Viewing.i18n.translate(b);g.appendChild(h);a.appendChild(g);
f.checked=c;f.addEventListener("click",function(a){e(f.checked);a.stopPropagation()});h.addEventListener("click",function(a){a.stopPropagation()});g.addEventListener("click",function(a){e(!f.checked);a.stopPropagation()});d&&this.prefs.addListeners(d,function(a){f.checked=a},function(a){f.checked=a;e(a)});return f};
Autodesk.Viewing.Private.GuiViewer3D.prototype.addOptionList=function(a,b,c,e,d,g){var f=this.prefs[g];e="number"===typeof f?f:e;var h=document.createElement("select");h.className="optionDropDown";for(f=0;f<c.length;f++){var k=document.createElement("option");k.value=f;k.setAttribute("data-i18n",c[f]);k.textContent=Autodesk.Viewing.i18n.translate(c[f]);h.add(k)}c=document.createElement("li");c.className="toolbar-submenu-select";f=document.createElement("div");f.className="toolbar-submenu-selectlabel";
f.setAttribute("for",b);f.setAttribute("data-i18n",b);f.textContent=Autodesk.Viewing.i18n.translate(b);c.appendChild(f);c.appendChild(h);a.appendChild(c);h.selectedIndex=e;h.onchange=function(a){d(a.target.selectedIndex)};g&&this.prefs.addListeners(g,function(a){h.selectedIndex=a},function(a){h.selectedIndex=a;d(a)});return h};Autodesk.Viewing.Private.GuiViewer3D.prototype.addMenuButton=function(a,b,c,e){b=Autodesk.Viewing.UI.Toolbar.createMenuButton(b,c,e);this.toolbar.addToSubToolbar(a,b);return b};
Autodesk.Viewing.Private.GuiViewer3D.prototype.removeMenuButton=function(a,b){this.toolbar.removeFromSubToolbar(a,b)};
Autodesk.Viewing.Private.GuiViewer3D.prototype.initExplodeSlider=function(a){var b=this,c=this.container,e=document.createElement("style");e.appendChild(document.createTextNode(""));document.head.appendChild(e);var e=e.sheet,d=-1!=navigator.userAgent.search("Firefox")?"-moz-":"-webkit-";try{e.insertRule("@"+d+"keyframes explode-in {0% {bottom: calc(100% + 50px); width: 0; left: 50%;} 60% {bottom: calc(100% - 50px);} 75% {bottom: calc(100% - 15px); width: 200px; left: calc(50% - 100px);}  90% {bottom: calc(100% - 35px);} 100% {bottom: calc(100% - 30px);}}",0),
e.insertRule("@"+d+"keyframes explode-out {0% {bottom: calc(100% - 30px); width: 200px; left: calc(50% - 100px); opacity: 1;} 20% {bottom: calc(100% - 15px);} 35% {width: 200px; left: calc(50% - 100px);} 50% {bottom: calc(100% - 50px);} 100% {bottom: calc(100% + 50px); width: 0; left: 50%; opacity: 1;}}",0)}catch(g){try{e.insertRule("@keyframes explode-in {0% {bottom: calc(100% + 50px); width: 0; left: 50%;} 60% {bottom: calc(100% - 50px);} 75% {bottom: calc(100% - 15px); width: 200px; left: calc(50% - 100px);}  90% {bottom: calc(100% - 35px);} 100% {bottom: calc(100% - 30px);}}",
0),e.insertRule("@keyframes explode-out {0% {bottom: calc(100% - 30px); width: 200px; left: calc(50% - 100px); opacity: 1;} 20% {bottom: calc(100% - 15px);} 35% {width: 200px; left: calc(50% - 100px);} 50% {bottom: calc(100% - 50px);} 100% {bottom: calc(100% + 50px); width: 0; left: 50%; opacity: 1;}}",0)}catch(f){}}var h=this.explodeslider=document.createElement("input");h.className="slider-bottom";h.id="explode-slider";h.type="range";h.min="0";h.max="100";h.value="0";h.width="200";c.appendChild(h);
h.addEventListener("input",function(a){b.explode(h.value/100)});h.addEventListener("change",function(a){b.explode(h.value/100)});this.explodebutton=this.addMenuButton(a,"toolbar-explodeTool","Explode model",function(a){b.showExplodeSlider("slider-bottom"==h.className||"slider-anim-out"==h.className)});h.addEventListener("keyup",function(a){27===a.keyCode&&b.canvas.focus()})};
Autodesk.Viewing.Private.GuiViewer3D.prototype.showExplodeSlider=function(a){var b=this.explodebutton.getBoundingClientRect(),c=this.container.getBoundingClientRect(),e=b.left-c.left+b.width/4,b=b.top-c.top;try{for(var d in document.styleSheets){var g=document.styleSheets[d],f;for(f in g.cssRules){var h=g.cssRules[f];if("explode-in"===h.name){h.deleteRule("0%");h.deleteRule("60%");var k="0% {bottom: calc(100% - "+b+"px); width: 0; left: "+e+"px;}";void 0!==h.insertRule?h.insertRule(k):void 0!==h.appendRule&&
h.appendRule(k)}else"explode-out"===h.name&&(h.deleteRule("100%"),h.deleteRule("50%"),k="100% {bottom: calc(100% - "+b+"px); width: 0; left: "+e+"px; opacity: 1;}",void 0!==h.insertRule?h.insertRule(k):void 0!==h.appendRule&&h.appendRule(k))}}}catch(l){}a?(this.modelTools.deselect(this.explodebutton.id),this.explodeslider.className="slider-anim-in"):(this.modelTools.select(this.explodebutton.id),this.explodeslider.className="slider-anim-out")};
Autodesk.Viewing.Private.GuiViewer3D.prototype.showViewer3dOptions=function(a){this.vieweroptions.setVisible(a)};Autodesk.Viewing.Private.GuiViewer3D.prototype.showRenderingOptions=function(a){this.renderoptions.setVisible(a)};Autodesk.Viewing.Private.GuiViewer3D.prototype.showLayerManager=function(a){this.layersPanel.setVisible(a)};Autodesk.Viewing.Private.GuiViewer3D.prototype.showRaaSPanel=function(a){this.raaSPanel.setVisible(a)};
Autodesk.Viewing.Private.GuiViewer3D.prototype.initNavTools=function(a){var b=this;this.navigationMode=b.defaultNavigation;this.setNavigationMode(b.defaultNavigation);var c=this.navToolsId;"3d"===a&&(this.navTools.orbitbutton=this.addMenuButton(c,"toolbar-orbitTool","Orbit",function(a){b.setNavigationMode(b.getNavigationMode()===Autodesk.Viewing.NAVIGATION_MODE.ORBIT?b.defaultNavigation:Autodesk.Viewing.NAVIGATION_MODE.ORBIT)}));this.navTools.panbutton=this.addMenuButton(c,"toolbar-panTool","Pan",
function(a){b.setNavigationMode(b.getNavigationMode()===Autodesk.Viewing.NAVIGATION_MODE.PAN?b.defaultNavigation:Autodesk.Viewing.NAVIGATION_MODE.PAN)});this.navTools.dollybutton=this.addMenuButton(c,"toolbar-zoomTool","Zoom",function(a){b.setNavigationMode(b.getNavigationMode()===Autodesk.Viewing.NAVIGATION_MODE.DOLLY?b.defaultNavigation:Autodesk.Viewing.NAVIGATION_MODE.DOLLY)});c=this.addMenuButton(c,"toolbar-cameraSubmenuTool","Camera interactions",null);a=this.createCameraSubmenu(a);this.toolbar.attachSubMenu(c,
a);c.style.position="relative";b.canvas.style.cursor="url("+RESOURCE_ROOT+"icons/turntable_cur.cur), wait"};
Autodesk.Viewing.Private.GuiViewer3D.prototype.initRaaSTools=function(){var a=this;this.raaSTools=this.toolbar.addSubToolbar("raaSTools",!1);var b=this.raaSPanel=new Autodesk.Viewing.Extensions.RaaSPanel(this);this.addPanel(this.raaSPanel);this.raaSTools.renderButton=this.addMenuButton(this.raaSTools.id,"toolbar-raaSTool","RaaS",function(b){a.showRaaSPanel(!0);a.raaSPanel.addImage();a.impl.svfloader.svfToSpdTranslator(a)});this.raaSTools.galleryButton=this.addMenuButton(this.raaSTools.id,"toolbar-raaSThumbnailTool",
"Gallery",function(c){a.showRaaSPanel(!b.isVisible())})};Autodesk.Viewing.Private.GuiViewer3D.prototype.setNavigationMode=function(a){if(this.toolController){if(a===Autodesk.Viewing.NAVIGATION_MODE.FOV){this.switchNavTool("fov",a);return}if(a===Autodesk.Viewing.NAVIGATION_MODE.ROLL){this.switchNavTool("worldup",a);return}}Autodesk.Viewing.Viewer3D.prototype.setNavigationMode.call(this,a)};
Autodesk.Viewing.Private.GuiViewer3D.prototype.createCameraSubmenu=function(a){var b=document.createElement("ul");b.style.width="44px";b.style.position="absolute";b.style.right=0;var c=Autodesk.Viewing.UI.Toolbar.createMenuButton,e=this,d={defaultTooltipValue:"Fit to view (F)"};this.navTools.fittoviewbutton=c("toolbar-fitToViewTool","Fit to view",function(a){e.fitToView()},d);b.appendChild(this.navTools.fittoviewbutton);"3d"===a&&(d.defaultTooltipValue="Focal length (Ctrl+Shift drag)",this.navTools.fovbutton=
c("toolbar-focalLengthTool","Focal length",function(a){e.setNavigationMode(e.getNavigationMode()===Autodesk.Viewing.NAVIGATION_MODE.FOV?e.defaultNavigation:Autodesk.Viewing.NAVIGATION_MODE.FOV)},d),Autodesk.Viewing.Private.addClass(this.navTools.fovbutton.childNodes[this.navTools.fovbutton.childNodes.length-1],"disabled-button"),b.appendChild(this.navTools.fovbutton));d.defaultTooltipValue="Roll (Alt+Shift drag)";this.navTools.rollbutton=c("toolbar-rollTool","Roll",function(a){e.setNavigationMode(e.getNavigationMode()===
Autodesk.Viewing.NAVIGATION_MODE.ROLL?e.defaultNavigation:Autodesk.Viewing.NAVIGATION_MODE.ROLL)},d);Autodesk.Viewing.Private.addClass(this.navTools.rollbutton.childNodes[this.navTools.rollbutton.childNodes.length-1],"disabled-button");b.appendChild(this.navTools.rollbutton);return b};
Autodesk.Viewing.Private.GuiViewer3D.prototype.initCameraStateMachine=function(a){function b(a){Autodesk.Viewing.Private.addClass(a.childNodes[a.childNodes.length-1],"disabled-button")}function c(a){Autodesk.Viewing.Private.removeClass(a.childNodes[a.childNodes.length-1],"disabled-button")}var e=this;e.addEventListener(Autodesk.Viewing.NAVIGATION_MODE_CHANGED_EVENT,function(a){e.navTools.deselectAll();Autodesk.Viewing.Private.HudMessage.dismiss();e.navTools.fovbutton&&b(e.navTools.fovbutton);e.navTools.rollbutton&&
b(e.navTools.rollbutton);switch(a.value){case Autodesk.Viewing.NAVIGATION_MODE.ORBIT:e.navTools.select(e.navTools.orbitbutton.id);break;case Autodesk.Viewing.NAVIGATION_MODE.DOLLY:e.navTools.select(e.navTools.dollybutton.id);break;case Autodesk.Viewing.NAVIGATION_MODE.PAN:e.navTools.select(e.navTools.panbutton.id);break;case Autodesk.Viewing.NAVIGATION_MODE.FOV:c(e.navTools.fovbutton);break;case Autodesk.Viewing.NAVIGATION_MODE.ROLL:c(e.navTools.rollbutton)}e.navigationMode=a.value;e.showFocalLengthOverlay(e.navigationMode===
Autodesk.Viewing.NAVIGATION_MODE.FOV)})};
Autodesk.Viewing.Private.GuiViewer3D.prototype.initModelTools=function(a){var b=this,c=this.modelToolsId,e=null;"3d"===a?(this.modelTools.structurebutton=this.addMenuButton(c,"toolbar-modelStructureTool","Model structure",function(a){b.modelstructure||b.setModelStructurePanel(new Autodesk.Viewing.Extensions.ViewerModelStructurePanel(b,"Model Structure Loading",{docStructureConfig:b.config.docStructureConfig}));b.showModelStructurePanel(!b.modelstructure.isVisible())}),this.initExplodeSlider(c),e=
"Reset model"):(this.layersPanel=new Autodesk.Viewing.Private.LayersPanel(this),this.addPanel(this.layersPanel),this.modelTools.layerButton=this.addMenuButton(c,"toolbar-layersTool","Layer Manager",function(a){b.showLayerManager(!b.layersPanel.isVisible())}),e="Reset drawing");this.modelTools.resetModelButton=this.addMenuButton(c,"toolbar-resetTool",e,function(c){"3d"===a&&(b.explode(0),b.explodeslider.value=0);b.showAll()});this.modelTools.propertiesbutton=this.addMenuButton(c,"toolbar-propertiesTool",
"Properties",function(a){b.propertygrid.isVisible()?(b.propertygrid.setVisible(!1),b.modelTools.select(b.modelTools.propertiesbutton.id)):(b.propertygrid.hasProperties()||b.propertygrid.setDefaultProperties(),b.propertygrid.setVisible(!0),b.modelTools.deselect(b.modelTools.propertiesbutton.id))});this.modelTools.setToolVisibility(this.modelTools.propertiesbutton.id,!b.prefs.openPropertiesOnSelect);this.vieweroptions=new Autodesk.Viewing.Private.Viewer3dSettingsPanel(this,a);this.addPanel(this.vieweroptions);
this.viewerOptionButton=this.addMenuButton(c,"toolbar-settingsTool","",null);this.createViewerOptionsMenu(a);ENABLE_DEBUG&&"3d"===a&&(this.renderoptions=new Autodesk.Viewing.Private.RenderOptionsPanel(this),this.addPanel(this.renderoptions),this.renderoptionsbutton=this.addMenuButton(c,"toolbar-renderOptionsTool","Rendering options",function(a){b.showRenderingOptions(!b.renderoptions.isVisible())}));this.canChangeScreenMode()&&(this.modelTools.fullscreenbutton=this.addMenuButton(c,"toolbar-fullscreenTool",
"Full screen",function(a){b.nextScreenMode()}))};Autodesk.Viewing.Private.GuiViewer3D.prototype.setPropertiesOnSelect=function(a){a?this.modelTools.setToolVisibility(this.modelTools.propertiesbutton.id,!1):this.modelTools.setToolVisibility(this.modelTools.propertiesbutton.id,!0)};Autodesk.Viewing.Private.GuiViewer3D.prototype.addDivider=function(a){var b=document.createElement("li");b.className="toolbar-submenu-horizontal-divider";a.appendChild(b);return b};
Autodesk.Viewing.Private.GuiViewer3D.prototype.createViewerOptionsMenu=function(a){var b=this;this.viewerOptionButton.subMenu=document.createElement("ul");this.viewerOptionButton.subMenu.className="toolbar-submenu";this.viewerOptionButton.subMenu.style.minWidth="310px";this.viewerOptionButton.subMenu.mode=a;this.container.appendChild(this.viewerOptionButton.subMenu);if("3d"===a){a=[];for(var c=0;c<Autodesk.Viewing.Private.LightPresets.length;c++)a.push(Autodesk.Viewing.Private.LightPresets[c].name);
this.viewerOptionButton.envList=this.addOptionList(this.viewerOptionButton.subMenu,"Background and lighting",a,4,function(a){b.blockEvent||b.setLightPreset(a)},"lightPreset");this.selectLightPreset=function(a){b.blockEvent=!0;b.viewerOptionButton.envList&&(b.viewerOptionButton.envList.selectedIndex=b.impl.currentLightPreset());b.blockEvent=!1};b.addEventListener(Autodesk.Viewing.RENDER_OPTION_CHANGED_EVENT,this.selectLightPreset);this.viewerOptionButton.displayLines=this.addOptionToggle(this.viewerOptionButton.subMenu,
"Display Lines",!0,function(a){b.hideLines(!a)},"lineRendering");this.addDivider(this.viewerOptionButton.subMenu)}a=document.createElement("li");a.className="toolbar-submenu-listitem";c=document.createElement("label");c.setAttribute("data-i18n","Performance and appearance settings");c.textContent=Autodesk.Viewing.i18n.translate("Performance and appearance settings");a.appendChild(c);this.show3dOptiopnsPerformanceTab=function(a){b.showViewer3dOptions(!0);b.vieweroptions.selectTab(Autodesk.Viewing.Private.PerformanceTab)};
this.viewerOptionButton.performanceOption=a;this.viewerOptionButton.performanceOption.addEventListener("click",this.show3dOptiopnsPerformanceTab);this.viewerOptionButton.subMenu.appendChild(this.viewerOptionButton.performanceOption);this.addDivider(this.viewerOptionButton.subMenu);a=document.createElement("li");a.className="toolbar-submenu-listitem";c=document.createElement("label");c.setAttribute("data-i18n","Navigation and selection settings");c.textContent=Autodesk.Viewing.i18n.translate("Navigation and selection settings");
a.appendChild(c);this.show3dOptiopnsNavigationTab=function(a){b.showViewer3dOptions(!0);b.vieweroptions.selectTab(Autodesk.Viewing.Private.NavigationTab)};this.viewerOptionButton.navigationOption=a;this.viewerOptionButton.navigationOption.addEventListener("click",this.show3dOptiopnsNavigationTab);this.viewerOptionButton.subMenu.appendChild(a);this.viewerOptionButton.subMenu.style.width=this.viewerOptionButton.subMenu.getBoundingClientRect().width+"px";this.container.removeChild(this.viewerOptionButton.subMenu);
this.toolbar.attachSubMenu(this.viewerOptionButton,this.viewerOptionButton.subMenu)};
Autodesk.Viewing.Private.GuiViewer3D.prototype.removeViewerOptionsMenu=function(a){this.viewerOptionButton.removeChild(this.viewerOptionButton.subMenu);"3d"===a&&(this.removeEventListener(Autodesk.Viewing.RENDER_OPTION_CHANGED_EVENT,this.selectLightPreset),this.viewerOptionButton.envList=null);this.viewerOptionButton.navigationOption.removeEventListener("click",this.show3dOptiopnsNavigationTab);this.viewerOptionButton.navigationOption=null;this.viewerOptionButton.performanceOption.removeEventListener("click",
this.show3dOptiopnsPerformanceTab);this.viewerOptionButton.performanceOption=null};Autodesk.Viewing.Private.GuiViewer3D.prototype.initDebugTools=function(){this.debugMenu=this.toolbar.addSubToolbar("debugTools",!1);this.debugMenu.debugSubMenuButton=this.addMenuButton("debugTools","toolbar-debugTool","",null);this.createDebugSubmenu(this.debugMenu.debugSubMenuButton)};
Autodesk.Viewing.Private.GuiViewer3D.prototype.createDebugSubmenu=function(a){function b(){c.localize()}var c=this;this.debugMenu.subMenu=document.createElement("ul");this.debugMenu.subMenu.className="toolbar-submenu";this.debugMenu.subMenu.style.minWidth="180px";this.container.appendChild(this.debugMenu.subMenu);this.initFPSStats();this.addDivider(this.debugMenu.subMenu);this.initModelStats();this.addDivider(this.debugMenu.subMenu);this.addOptionToggle(this.debugMenu.subMenu,"Show search bar",!1,
function(a){c.searchMenu.setVisibility(a)});this.addDivider(this.debugMenu.subMenu);var e="en rus jpn kor chs sp".split(" ");this.addOptionList(this.debugMenu.subMenu,"Language","English Russian Japanese Korean Chinese Spanish(unsupported)".split(" "),c.selectedLanguage?c.selectedLanguage:0,function(a){var d=e[a];c.selectedLanguage=a;Autodesk.Viewing.Private.setLanguage(d,b)},null).parentNode.style.paddingBottom="15px";this.addDivider(this.debugMenu.subMenu);this.addOptionList(this.debugMenu.subMenu,
"Error","UNKNOWN FAILURE; BAD DATA;NETWORK ERROR;NETWORK ACCESS DENIED;NETWORK FILE NOT FOUND; NETWORK SERVER ERROR;NETWORK UNHANDLED RESPONSE CODE;BROWSER WEBGL NOT SUPPORTED;BAD DATA NO VIEWABLE CONTENT".split(";"),0,function(a){Autodesk.Viewing.Private.ErrorHandler.reportError(c.container,a+1,"")},null).parentNode.style.paddingBottom="15px";this.debugMenu.subMenu.style.width=this.debugMenu.subMenu.getBoundingClientRect().width+"px";this.container.removeChild(this.debugMenu.subMenu);this.toolbar.attachSubMenu(a,
this.debugMenu.subMenu);a=this.debugMenu.subMenu.getBoundingClientRect().right;var d=this.container.getBoundingClientRect().right;a>d&&(this.debugMenu.subMenu.style.left=-(a-d+10)+"px")};
Autodesk.Viewing.Private.GuiViewer3D.prototype.initFPSStats=function(){var a=this;this.addOptionToggle(this.debugMenu.subMenu,"FPS statistics",!1,function(b){if(b&&!a.impl.stats){var c=new Stats;c.setMode(1);c.domElement.style.position="absolute";c.domElement.style.bottom="0px";c.domElement.style.right="0px";c.domElement.style.visibility="hidden";c.domElement.style["z-index"]=1;a.container.appendChild(c.domElement);a.impl.stats=c}a.impl.stats.domElement.style.visibility=b?"visible":"hidden"})};
Autodesk.Viewing.Private.GuiViewer3D.prototype.initModelStats=function(){function a(a){var b=c.impl,g="",f=c.model;f&&(g+="Geom&nbsp;polys:&nbsp;"+f.geomPolyCount()+"<br>",g+="Instance&nbsp;polys:&nbsp;"+f.instancePolyCount()+"<br>",g+="Scenes:&nbsp;"+b.modelQueue().getSceneCount()+"<br>");c.modelStats.innerHTML=g+("# "+(a||""))}function b(){c.modelStats=document.createElement("div");c.modelStats.className="statspanel";c.container.appendChild(c.modelStats);c.addEventListener(Autodesk.Viewing.PROGRESS_UPDATE_EVENT,
function(b){b.message&&a(b.message)})}var c=this;this.addOptionToggle(this.debugMenu.subMenu,"Model statistics",!1,function(e){e&&!c.modelStats&&(b(),a(""));c.modelStats.style.visibility=e?"visible":"hidden"})};
Autodesk.Viewing.Private.GuiViewer3D.prototype.initEscapeHandlers=function(){var a=this;this.addEventListener(Autodesk.Viewing.ESCAPE_EVENT,function(b){if(a.renderoptions&&a.renderoptions.isVisible())a.renderoptions.setVisible(!1);else if(a.explodeslider&&"slider-anim-in"===a.explodeslider.className)a.showExplodeSlider(!1);else if(a.navigationMode!==a.defaultNavigation)a.toolController&&a.toolController.setIsLocked(!1),a.setNavigationMode(a.defaultNavigation),Autodesk.Viewing.Private.HudMessage.dismiss();
else if(a.selectionActive)a.clearSelection();else if(!a.areAllVisible())a.showAll();else if(!Autodesk.Viewing.Private.AlertBox.dismiss()){for(b=0;b<a.dockingPanels.length;++b){var c=a.dockingPanels[b];if("none"!==c.container.style.display&&""!==c.container.style.display){c.container===a.modelstructure?a.showModelStructurePanel(!1):c.setVisible(!1);return}}a.escapeScreenMode()}})};
Autodesk.Viewing.Private.GuiViewer3D.prototype.initHomeButton=function(a){var b=document.createElement("div");b.className="homeViewWrapper";var c=document.createElement("img");c.className="homeView";c.src=RESOURCE_ROOT+"icons/resetview_icon.png";c.style.cursor="pointer";b.appendChild(c);this.container.appendChild(b);this.homeViewContainer=b;var e=this;c.addEventListener("click",function(a){e.navigation.setRequestHomeView(!0);a.stopPropagation()});this.initHomeMenu(b,a)};
Autodesk.Viewing.Private.GuiViewer3D.prototype.initHomeMenu=function(a,b){function c(a){h.style.display="none";document.removeEventListener("click",c)}var e=this.autocam,d=this,g=document.createElement("div");g.className="homeViewMenuHandle";var f=document.createElement("img");f.src="data:image/png;base64,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";
g.appendChild(f);g.addEventListener("mouseover",function(a){f.src="data:image/png;base64,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yzy2Vfgxu2cYtuT9OudhxnDiYue0NXud+DP3KI+Vg39r8SFtJ23KntnI/6Myn/MuyH5b1il9R9/OumKP0VhF3Eyv59f92fvBmnDCluqVYdSDuaT7N+fy0TcYz/fnRnn1MNpA34tMGxM/856Vufe1S2hpvUA9vvS/UkoppZRSSimllFJKXU07EREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREZE75B+Hl45qN6ZdJgAAAVNta0JU+s7K/gB/VYkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHic7dbhaYNgFIZRB3ERB3EQF3EQB3ERB7G8gQu3piH/ignngUObT/vrTWzOU5IkSZIkSZIkSZIkSZIkSZIkSR/RcRznvu9P5znLtXf3v7pP929d13Mcx3OapsfP7Bj9LPfUvXUWy7I8XscwDH++h3TvsmOVfbNhdq3N+z21f9U3v/6N7l+263tWOeuf5XqdffvG2b+6XtP9y3O+71//1+d5fto/1+z/fWXbeu7X79u2/frM9+e//b+v+h7X96v3QK7Vd/ucRdWfHddrkiRJkiRJkiRJ+vcGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD4QD8K+ay4PVSpiAAADtdta0JU+s7K/gB/n3gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHic7Z2NkRwpDIUdiBNxIA7EiTgQB+JEHMhe6eo+17tnSUDPz/5Yr2pqZ7tpEBII0IOel5fBYDAYDAaDwWAwGAwGg8HgP/z69evl58+ff3ziOveq5+JzpawAZfj3wf9R6fmK/jN8//795dOnT3984jr3Mnz58uXfzy6+ffv2O++wN2UE9PtHRtT7tJ6Vnk/1vwI20f6u9l/1Ufp2laaT1+3f+Z1dVPKs5ARdGr1epcuuZ+28ez5wauereuvsH+Vr33W5tG97HpoPeQWq/q95ZfWO+58/f/73e+gt0v348eP3vXiGuqgvC0Q6vR7p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ZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iPgogICAgICAgICA8eG1wOkNyZWF0b3JUb29sPkFkb2JlIEZpcmV3b3JrcyBDUzUuMSAxMS4xLjAuMjA1IE1hY2ludG9zaDwveG1wOkNyZWF0b3JUb29sPgogICAgICAgICA8eG1wOkNyZWF0ZURhdGU+MjAxNC0wOS0yMlQyMDoxMDo0Mlo8L3htcDpDcmVhdGVEYXRlPgogICAgICAgICA8eG1wOk1vZGlmeURhdGU+MjAxNC0wOS0yNFQxNToyNzoyMlo8L3htcDpNb2RpZnlEYXRlPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIj4KICAgICAgICAgPGRjOmZvcm1hdD5pbWFnZS9wbmc8L2RjOmZvcm1hdD4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCjw/eHBhY2tldCBlbmQ9InciPz7OxBilAAABKUlEQVQ4jc3UsUrDQBzH8e9VoQ4OSkhKH8KtS8Y6CDYQiXT0AQQHVx8hU8FBRyfniMEqBXF1yVDwHVoaER0cTMGcQ5o210ZNJYM3JeT/+3D3I4mQUlLGqpSi/EtoNb2o7V0FfwFG105DgQBOjsylEPfscXFHANtbWmEkjsHN3CvQzuHNUjvKLpG+R0IIWDvY5aOyDnwC4puMBFaoxu9El3fTfBYybG+pwkN/v5HmZ0fTTzchKfy3rh6eXpSiVej5+DX0rZYLt0yw0VukDNc2qlMk9C9a+RAA3TD0I8uF7jymIucW3IdKVErJ4ofraIbtBZ3eMOgPxkF/MA46vWGQdOhoufl8CMA0UmyGmMb8VAEIoK0btjdB2nreREEIoFlPnjfrP0GirB/bFy2PpzKb9kV5AAAAAElFTkSuQmCC"});
g.addEventListener("mouseleave",function(a){f.src="data:image/png;base64,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"});
a.appendChild(g);var h=document.createElement("div");h.className="homeViewMenu";this.container.appendChild(h);var k=document.createElement("div");k.className="homeViewMenuItem";k.textContent=Autodesk.Viewing.i18n.translate("Set current view as Home");h.appendChild(k);k.addEventListener("click",function(a){e.setCurrentViewAsHome(!1);c(a)});k=document.createElement("div");k.className="homeViewMenuItem";k.textContent=Autodesk.Viewing.i18n.translate("Focus and set as Home");h.appendChild(k);k.addEventListener("click",
function(a){e.setCurrentViewAsHome(!0);c(a)});k=document.createElement("div");k.className="homeViewMenuItem";k.textContent=Autodesk.Viewing.i18n.translate("Reset Home");h.appendChild(k);k.addEventListener("click",function(a){e.resetHome();c(a)});a.addEventListener("mouseover",function(a){if("2d"===b||d.prefs&&!d.prefs.viewCube)g.style.display="block"});a.addEventListener("mouseleave",function(a){g.style.display="none"});g.addEventListener("click",function(a){if("2d"===b||d.prefs&&!d.prefs.viewCube)h.style.display=
"block",document.addEventListener("click",c);a.stopPropagation()});a.addEventListener("contextmenu",function(a){if("2d"===b||d.prefs&&!d.prefs.viewCube)h.style.display="block",document.addEventListener("click",c)})};
Autodesk.Viewing.Private.GuiViewer3D.prototype.initViewCube=function(){this.viewcube=document.createElement("div");this.viewcube.className="viewcube";this.container.appendChild(this.viewcube);this.cube=new Autocam.ViewCube("cube",this.autocam,this.viewcube,LOCALIZATION_RESOURCE_ROOT);this.displayViewCube(this.prefs.viewCube)};
Autodesk.Viewing.Private.GuiViewer3D.prototype.displayViewCube=function(a){this.prefs.set("viewCube",a);this.viewcube.style.display=a?"block":"none";this.homeViewContainer&&(this.homeViewContainer.style.right=a?"120px":"24px");a&&(this.impl.invalidate(!0),this.autocam.refresh())};
Autodesk.Viewing.Private.GuiViewer3D.prototype.initSearchBox=function(){this.searchMenu=this.toolbar.addSubToolbar("searchBox",!1);this.searchMenu.setVisibility(!1);var a=document.createElement("li"),b=document.createElement("input");b.type="search";b.results=5;b.placeholder=Autodesk.Viewing.i18n.translate("Search");b.incremental="incremental";b.autosave=this.container.id+"search_autosave";b.setAttribute("data-i18n","[placeholder]Search");a.appendChild(b);this.toolbar.addToSubToolbar("searchBox",
a);var c=this;this.searchbox=b;b.addEventListener("change",function(a){stderr("search "+b.value);c.search(b.value,function(a){c.isolateById(a)})});b.addEventListener("keypress",function(a){27===a.keyCode&&setTimeout(function(){""!==b.value&&(b.value="")},0)});this.toolbar.addEventListener("mouseleave",function(a){function d(){clearTimeout(g)}var g;c.toolbar.addEventListener("mouseenter",d);g=setTimeout(function(){c.toolbar&&c.toolbar.removeEventListener("mouseenter",d);document.activeElement===b&&
c.canvas.focus()},2E3)})};Autodesk.Viewing.Private.GuiViewer3D.prototype.setPropertiesButtonEnabled=function(a){a?this.modelTools.deselect(this.modelTools.propertiesbutton.id):this.modelTools.select(this.modelTools.propertiesbutton.id)};Autodesk.Viewing.Private.GuiViewer3D.prototype.setStructureButtonEnabled=function(a){a?this.modelTools.deselect(this.modelTools.structurebutton.id):this.modelTools.select(this.modelTools.structurebutton.id)};
Autodesk.Viewing.Private.GuiViewer3D.prototype.showModelStructurePanel=function(a){this.modelstructure.setVisible(a)};Autodesk.Viewing.Private.GuiViewer3D.prototype.onPanelVisible=function(a,b){b||(b=this);b.dockingPanels.splice(b.dockingPanels.indexOf(a),1);b.dockingPanels.splice(0,0,a)};
Autodesk.Viewing.Private.GuiViewer3D.prototype.initFocalLengthOverlay=function(){var a=this.focallength=document.createElement("div");a.className="focallength";var b=document.createElement("table"),c=document.createElement("tbody");b.appendChild(c);a.appendChild(b);this.container.appendChild(a);b=c.insertRow(-1);c=b.insertCell(0);c.setAttribute("data-i18n","Focal Length");c.textContent=Autodesk.Viewing.i18n.translate("Focal Length");c=b.insertCell(1);c.textContent="";c.style.width="4em";c.style.textAlign=
"right";this.fovCell=c;a.style.visibility="hidden"};
Autodesk.Viewing.Private.GuiViewer3D.prototype.showFocalLengthOverlay=function(a){function b(a){a?Autodesk.Viewing.Private.HudMessage.displayMessage(d.container,{msgTitle:"Orthographic View Set",message:"The view is set to Orthographic. Changing the focal length will switch to Perspective."}):Autodesk.Viewing.Private.HudMessage.dismiss()}function c(a){d.focallength&&(d.focallength.style.visibility=a?"visible":"hidden")}function e(a){a=d.getFocalLength();g!==a&&(g=a,d.fovCell.textContent=a.toString()+
" mm");d.navigationMode===Autodesk.Viewing.NAVIGATION_MODE.FOV&&(a=(a=d.navigation.getCamera())&&!a.isPerspective,c(!a),b(a))}var d=this,g=0,f=d.navigation.getCamera(),f=f&&!f.isPerspective;c(a&&!f);b(a&&f);a?this.addEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT,e):this.removeEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT,e)};
Autodesk.Viewing.Private.GuiViewer3D.prototype.updateScreenModeButton=function(a){this.container.classList.remove("screenMode-kFullBrowser");this.container.classList.remove("screenMode-kFullScreen");var b;switch(a){case Autodesk.Viewing.Viewer.prototype.ScreenMode.kNormal:this.isScreenModeSupported(Autodesk.Viewing.Viewer.prototype.ScreenMode.kFullBrowser)||(b="screenMode-kFullBrowser");break;case Autodesk.Viewing.Viewer.prototype.ScreenMode.kFullBrowser:b=this.isScreenModeSupported(Autodesk.Viewing.Viewer.prototype.ScreenMode.kFullScreen)?
"screenMode-kFullBrowser":"screenMode-kFullScreen";break;case Autodesk.Viewing.Viewer.prototype.ScreenMode.kFullScreen:b="screenMode-kFullScreen"}b&&this.container.classList.add(b)};
Autodesk.Viewing.Private.GuiViewer3D.prototype.localize=function(){Autodesk.Viewing.i18n.localize();if(this.viewerOptionButton&&this.viewerOptionButton.subMenu){var a=this.viewerOptionButton.subMenu.mode;this.removeViewerOptionsMenu(a);this.createViewerOptionsMenu(a)}this.debugMenu&&this.debugMenu.debugSubMenuButton&&(this.debugMenu.debugSubMenuButton.removeChild(this.debugMenu.subMenu),this.createDebugSubmenu(this.debugMenu.debugSubMenuButton))};"use strict";AutodeskNamespace("Autodesk.Viewing.Private");
Autodesk.Viewing.Private.GuiViewer2D=function(a,b){Autodesk.Viewing.Viewer2D.call(this,a,b)};Autodesk.Viewing.Private.GuiViewer2D.prototype=Object.create(Autodesk.Viewing.Viewer2D.prototype);Autodesk.Viewing.Private.GuiViewer2D.prototype.constructor=Autodesk.Viewing.Private.GuiViewer2D;
Autodesk.Viewing.Private.GuiViewer2D.prototype.initialize=function(){var a=Autodesk.Viewing.Viewer2D.prototype.initialize.call(this);if(0<a)return a;this.toolbar=new Autodesk.Viewing.UI.Toolbar(this.container);this.initNavTools();this.initModelTools();this.initEscapeHandlers();this.initHomeButton();var b=this;this.addEventListener(Autodesk.Viewing.FULLSCREEN_MODE_EVENT,function(a){b.updateScreenModeButton(a.mode)});this.updateScreenModeButton(Autodesk.Viewing.Viewer.prototype.ScreenMode.kNormal);
this.localize();this.fireEvent({type:Autodesk.Viewing.TOOLBAR_CREATED_EVENT});return 0};
Autodesk.Viewing.Private.GuiViewer2D.prototype.initNavTools=function(){var a=this;this.navTools=this.toolbar.addSubToolbar("navTools",!0);this.navTools.panbutton=this.addMenuButton("navTools","toolbar-panTool","Pan",function(b){a.impl.setNavigationMode(VIEWER2D_NAVIGATION_MODE.PAN)});this.navTools.dollybutton=this.addMenuButton("navTools","toolbar-zoomTool","Zoom",function(b){a.impl.setNavigationMode(VIEWER2D_NAVIGATION_MODE.ZOOM)});this.navTools.select(this.navTools.panbutton.id);this.addEventListener(Autodesk.Viewing.NAVIGATION_MODE_CHANGED_EVENT,
function(b){a.navTools.deselectAll();switch(b.value){case VIEWER2D_NAVIGATION_MODE.PAN:a.navTools.select(a.navTools.panbutton.id);a.impl.container.style.cursor="url("+RESOURCE_ROOT+"icons/pan_cur.cur), wait";break;case VIEWER2D_NAVIGATION_MODE.ZOOM:a.navTools.select(a.navTools.dollybutton.id);a.impl.container.style.cursor="url("+RESOURCE_ROOT+"icons/dolly_cur.cur), wait";break;default:a.impl.container.style.cursor="auto"}});this.impl.setNavigationMode(VIEWER2D_NAVIGATION_MODE.PAN)};
Autodesk.Viewing.Private.GuiViewer2D.prototype.uninitialize=function(){this.toolbar=this.navTools=this.modelTools=null;Autodesk.Viewing.Viewer2D.prototype.uninitialize.call(this)};Autodesk.Viewing.Private.GuiViewer2D.prototype.initModelTools=function(){if(this.canChangeScreenMode()){this.modelTools=this.toolbar.addSubToolbar("modelTools",!1);var a=this;this.modelTools.fullscreenbutton=this.addMenuButton("modelTools","toolbar-fullscreenTool","viewer-toolbar:Full screen",function(b){a.nextScreenMode()})}};
Autodesk.Viewing.Private.GuiViewer2D.prototype.initEscapeHandlers=function(){var a=this;this.addEventListener(Autodesk.Viewing.ESCAPE_EVENT,function(b){a.impl.setNavigationMode(VIEWER2D_NAVIGATION_MODE.PAN)||a.escapeScreenMode()},!1)};
Autodesk.Viewing.Private.GuiViewer2D.prototype.initHomeButton=function(){var a=this,b=this.homeViewContainer=document.createElement("div");b.className="homeViewWrapper";var c=document.createElement("img");c.className="homeView";c.src=RESOURCE_ROOT+"icons/resetview_icon.png";c.style.cursor="pointer";b.appendChild(c);b.style.width="auto";this.container.appendChild(b);c.addEventListener("click",function(){a.impl.goHome()})};
Autodesk.Viewing.Private.GuiViewer2D.prototype.addMenuButton=function(a,b,c,e){b=Autodesk.Viewing.UI.Toolbar.createMenuButton(b,c,e);this.toolbar.addToSubToolbar(a,b);return b};
Autodesk.Viewing.Private.GuiViewer2D.prototype.updateScreenModeButton=function(a){this.container.classList.remove("screenMode-kFullBrowser");this.container.classList.remove("screenMode-kFullScreen");var b;switch(a){case Autodesk.Viewing.Viewer.prototype.ScreenMode.kNormal:this.isScreenModeSupported(Autodesk.Viewing.Viewer.prototype.ScreenMode.kFullBrowser)||(b="screenMode-kFullBrowser");break;case Autodesk.Viewing.Viewer.prototype.ScreenMode.kFullBrowser:b=this.isScreenModeSupported(Autodesk.Viewing.Viewer.prototype.ScreenMode.kFullScreen)?
"screenMode-kFullBrowser":"screenMode-kFullScreen";break;case Autodesk.Viewing.Viewer.prototype.ScreenMode.kFullScreen:b="screenMode-kFullScreen"}b&&this.container.classList.add(b)};AutodeskNamespace("Autodesk.Viewing.Extensions");
Autodesk.Viewing.Extensions.ViewerModelStructurePanel=function(a,b,c){this.viewer=a;Autodesk.Viewing.UI.ModelStructurePanel.call(this,a.container,a.container.id+"ViewerModelStructurePanel",b,c);this.clickConfig=c&&c.docStructureConfig?c.docStructureConfig:null;this.isMac=-1!==navigator.userAgent.search("Mac OS");this.visibleNodes=[];this.hiddenNodes=[]};Autodesk.Viewing.Extensions.ViewerModelStructurePanel.prototype=Object.create(Autodesk.Viewing.UI.ModelStructurePanel.prototype);
Autodesk.Viewing.Extensions.ViewerModelStructurePanel.prototype.constructor=Autodesk.Viewing.Extensions.ViewerModelStructurePanel;
Autodesk.Viewing.Extensions.ViewerModelStructurePanel.prototype.initialize=function(){Autodesk.Viewing.UI.ModelStructurePanel.prototype.initialize.call(this);var a=this;a.addEventListener(a.viewer,Autodesk.Viewing.SELECTION_CHANGED_EVENT,function(b){a.setSelection(b.nodeArray.slice())});a.addEventListener(a.viewer,Autodesk.Viewing.ISOLATE_EVENT,function(b){a.setIsolation(b.nodeIdArray.slice())});a.addEventListener(a.viewer,Autodesk.Viewing.HIDE_EVENT,function(b){a.setHidden(b.nodeIdArray.slice(),
!0)});a.addEventListener(a.viewer,Autodesk.Viewing.SHOW_EVENT,function(b){a.setHidden(b.nodeIdArray.slice(),!1)})};Autodesk.Viewing.Extensions.ViewerModelStructurePanel.prototype.uninitialize=function(){this.viewer=null;Autodesk.Viewing.UI.ModelStructurePanel.prototype.uninitialize.call(this)};Autodesk.Viewing.Extensions.ViewerModelStructurePanel.prototype.setModel=function(a,b){this.visibleNodes=[];this.hiddenNodes=[];Autodesk.Viewing.UI.ModelStructurePanel.prototype.setModel.call(this,a,b)};
Autodesk.Viewing.Extensions.ViewerModelStructurePanel.prototype.handleAction=function(a,b){for(var c in a)switch(a[c]){case "selectOnly":this.viewer.select([b.dbId]);break;case "deselectAll":this.viewer.select([]);break;case "selectToggle":this.viewer.toggleSelect(b.dbId);break;case "isolate":this.viewer.isolate(b);break;case "showAll":this.viewer.isolate(null);break;case "focus":this.viewer.fitToView();break;case "hide":this.viewer.hide(b);break;case "show":this.viewer.show(b);break;case "toggleVisibility":this.viewer.toggleVisibility(b)}};
Autodesk.Viewing.Extensions.ViewerModelStructurePanel.prototype.ctrlDown=function(a){return this.isMac&&a.metaKey||!this.isMac&&a.ctrlKey};Autodesk.Viewing.Extensions.ViewerModelStructurePanel.prototype.onClick=function(a,b){var c="click";this.ctrlDown(b)&&(c+="Ctrl");b.shiftKey&&(c+="Shift");b.altKey&&(c+="Alt");this.clickConfig&&this.clickConfig[c]?this.handleAction(this.clickConfig[c].onObject,a):this.viewer.select([a.dbId])};
Autodesk.Viewing.Extensions.ViewerModelStructurePanel.prototype.onDoubleClick=function(a,b){this.handleAction(["focus"],a)};Autodesk.Viewing.Extensions.ViewerModelStructurePanel.prototype.onRightClick=function(a,b){var c=[a.dbId];if(b.shiftKey||this.isMac&&b.metaKey||b.ctrlKey&&(!this.isMac||2===b.button))for(var e=this.viewer.impl.selector.getSelection(),d=0;d<e.length;++d)c.push(e[d].dbId);this.viewer.isolateById(c);this.viewer.select(c);return this.viewer.contextMenu.show(b)};
Autodesk.Viewing.Extensions.ViewerModelStructurePanel.prototype.setHidden=function(a,b){if(0<a.length)for(var c=0;c<a.length;++c){var e=a[c];b?-1===this.hiddenNodes.indexOf(e)&&this.addClass(a[c].dbId,"dim")&&(this.hiddenNodes.push(a[c]),e=this.visibleNodes.indexOf(e),-1<e&&(this.removeClass(a[c].dbId,"visible"),this.visibleNodes.splice(e))):-1===this.visibleNodes.indexOf(e)&&this.addClass(a[c].dbId,"visible")&&(this.visibleNodes.push(a[c]),e=this.hiddenNodes.indexOf(e),-1<e&&(this.removeClass(a[c].dbId,
"dim"),this.hiddenNodes.splice(e)))}};Autodesk.Viewing.Extensions.ViewerModelStructurePanel.prototype.setIsolation=function(a){for(var b=0;b<this.hiddenNodes.length;++b)this.removeClass(this.hiddenNodes[b].dbId,"dim");for(b=0;b<this.visibleNodes.length;++b)this.removeClass(this.visibleNodes[b].dbId,"visible");this.hiddenNodes=[];this.visibleNodes=[];if(0<a.length&&(1!==a.length||a[0]!==this.modelRoot))for(this.setHidden([this.modelRoot],!0),b=0;b<a.length;++b)this.setHidden([a[b]],!1)};AutodeskNamespace("Autodesk.Viewing.Extensions");
Autodesk.Viewing.Extensions.ViewerPropertyPanel=function(a){this.viewer=a;this.currentNodeIds=[];Autodesk.Viewing.UI.PropertyPanel.call(this,a.container,"ViewerPropertyPanel","Object Properties Loading...")};Autodesk.Viewing.Extensions.ViewerPropertyPanel.prototype=Object.create(Autodesk.Viewing.UI.PropertyPanel.prototype);Autodesk.Viewing.Extensions.ViewerPropertyPanel.prototype.constructor=Autodesk.Viewing.Extensions.ViewerPropertyPanel;
Autodesk.Viewing.Extensions.ViewerPropertyPanel.prototype.initialize=function(){function a(){0<b.currentNodeIds.length?b.setNodeProperties(b.currentNodeIds[b.currentNodeIds.length-1]):b.setDefaultProperties()}Autodesk.Viewing.UI.PropertyPanel.prototype.initialize.call(this);var b=this;b.addEventListener(b.viewer,Autodesk.Viewing.SELECTION_CHANGED_EVENT,function(c){b.currentNodeIds=c.dbIdArray;a()});b.addEventListener(b.viewer,Autodesk.Viewing.ISOLATE_EVENT,function(c){for(var e=[],d=0;d<c.nodeIdArray.length;d++){var g=
c.nodeIdArray[d].dbId;g&&e.push(g)}b.currentNodeIds=e;a()});b.addEventListener(b.viewer,Autodesk.Viewing.HIDE_EVENT,function(b){a()});b.addEventListener(b.viewer,Autodesk.Viewing.SHOW_EVENT,function(b){a()})};
Autodesk.Viewing.Extensions.ViewerPropertyPanel.prototype.setNodeProperties=function(a){var b=this;b.viewer.getProperties(a,function(a){var e=a.name;e||(e="Object Properties");b.title.textContent=Autodesk.Viewing.i18n.translate(e);b.setProperties(a.properties);b.highlight(b.viewer.searchText);a=b.viewer.getDimensions();b.resizeToContent({maxHeight:a.height})})};
Autodesk.Viewing.Extensions.ViewerPropertyPanel.prototype.setDefaultProperties=function(){var a=this.viewer.model.getRoot()?this.viewer.model.getRootId():null;a&&this.setNodeProperties(a)};Autodesk.Viewing.Extensions.ViewerPropertyPanel.prototype.uninitialize=function(){Autodesk.Viewing.UI.PropertyPanel.prototype.uninitialize.call(this);this.viewer=null};
Autodesk.Viewing.Extensions.ViewerPropertyPanel.prototype.onCategoryClick=function(a,b){Autodesk.Viewing.UI.PropertyPanel.prototype.onCategoryClick.call(this,a,b);var c=this.viewer.getDimensions();this.resizeToContent({maxHeight:c.height})};AutodeskNamespace("Autodesk.Viewing.Extensions");
Autodesk.Viewing.Extensions.RaaSPanel=function(a){var b=this;this.viewer=a;Autodesk.Viewing.UI.DockingPanel.call(this,a.container,"RaaSPanel","Gallery");this.thumbnailPanel=document.createElement("div");this.thumbnailPanel.id="thumbnailPanel";this.imageNum=0;this.thumbList=[];this.imageList=[];this.imageIndex=0;this.container.style.width="140px";this.container.style.top="200px";this.container.style.left="150px";this.container.style.height="560px";this.container.dockRight=!0;this.container.style.display=
"none";this.addEventListener(this.viewer,Autodesk.Viewing.GEOMETRY_LOADED_EVENT,function(){b.syncUI()})};Autodesk.Viewing.Extensions.RaaSPanel.prototype=Object.create(Autodesk.Viewing.UI.DockingPanel.prototype);Autodesk.Viewing.Extensions.RaaSPanel.prototype.constructor=Autodesk.Viewing.Extensions.RaaSPanel;Autodesk.Viewing.Extensions.RaaSPanel.prototype.syncUI=function(){};Autodesk.Viewing.Extensions.RaaSPanel.prototype.screenCapture=function(a){return Autodesk.Viewing.ScreenCapture(a)};
Autodesk.Viewing.Extensions.RaaSPanel.prototype.addImage=function(){var a=this,b=new Image;b.src=this.screenCapture(this.viewer);b.className="thumbnail";b.style.top=130*this.imageNum+"px";b.index=this.imageNum;b.cameraPosition=this.viewer.impl.camera.position.clone();b.cameraTarget=this.viewer.impl.camera.target.clone();b.cameraUp=this.viewer.impl.camera.up.clone();this.thumbList.push(b);this.thumbnailPanel.appendChild(this.thumbList[this.imageNum]);b=new Image;b.src="";b.status="progress";this.imageList.push(b);
this.imageNum++;this.container.appendChild(this.thumbnailPanel);this.imageIndex=this.imageNum-1;this.addEventListener(this.thumbList[this.imageIndex],"click",function(){"progress"==a.imageList[this.index].status?a.imageIndex=this.index:"complete"==a.imageList[this.index].status?(a.imageIndex=this.index,a.displayImage(a.imageList[a.imageIndex],a.imageIndex)):"error"==a.imageList[this.index].status&&(a.imageIndex=this.index)});this.zoomin()};
Autodesk.Viewing.Extensions.RaaSPanel.prototype.loadThumbnail=function(a,b){this.thumbList[b-1].src=a};Autodesk.Viewing.Extensions.RaaSPanel.prototype.loadImage=function(a,b){this.imageList[b-1].src=a;this.imageList[b-1].status="complete"};Autodesk.Viewing.Extensions.RaaSPanel.prototype.imageError=function(a){this.imageList[a-1].status="error"};
Autodesk.Viewing.Extensions.RaaSPanel.prototype.displayImage=function(a,b){if(0!=document.getElementsByClassName("imageContainer").length){var c=document.getElementsByClassName("imageContainer")[0];c.parentNode.removeChild(c)}var e=this.viewer.container,d=document.createElement("div");d.className="imageContainer";d.style.width=e.style.width;d.style.height=e.style.height;e.parentNode.appendChild(d);var g=document.createElement("canvas");d.appendChild(g);g.style.width=e.style.width;g.style.height=e.style.height;
g.width=this.viewer.impl.canvas.width;g.height=this.viewer.impl.canvas.height;this.addEventListener(g,"click",function(){e.style.zIndex="";null!=d.parentNode&&d.parentNode.removeChild(d)});e.style.zIndex=-1;d.style.zIndex=1;a.complete?toggleAnim(g,a):a.onload=function(){toggleAnim(g,a)};this.viewer.impl.camera.position=this.thumbList[b].cameraPosition.clone();this.viewer.impl.camera.target=this.thumbList[b].cameraTarget.clone();this.viewer.impl.camera.up=this.thumbList[b].cameraUp.clone();this.viewer.impl.syncCamera()};
Autodesk.Viewing.Extensions.RaaSPanel.prototype.uninitialize=function(){this.imageIndex=this.imageList=this.thumbList=this.imageNum=this.thumbnailPanel=this.viewer=null;Autodesk.Viewing.UI.DockingPanel.prototype.uninitialize.call(this)};
Autodesk.Viewing.Extensions.RaaSPanel.prototype.zoomin=function(){var a=this,b=new Image;b.src=this.screenCapture(this.viewer);var c=this.viewer.container,e=document.createElement("div");e.id="imageTemp";e.style.width=c.style.width;e.style.height=c.style.height;c.parentNode.appendChild(e);b.style.width=c.style.width;b.style.height=c.style.height;e.appendChild(b);c.style.zIndex=-1;e.style.zIndex=1;setTimeout(function(){var b=(a.thumbList[a.imageIndex].getBoundingClientRect().left+a.thumbList[a.imageIndex].getBoundingClientRect().right)/
2-(e.getBoundingClientRect().left+e.getBoundingClientRect().right)/2,g=a.thumbList[a.imageIndex].getBoundingClientRect().bottom<=a.thumbnailPanel.getBoundingClientRect().bottom?(a.thumbList[a.imageIndex].getBoundingClientRect().top+a.thumbList[a.imageIndex].getBoundingClientRect().bottom)/2-(e.getBoundingClientRect().top+e.getBoundingClientRect().bottom)/2:a.thumbnailPanel.getBoundingClientRect().bottom-a.thumbList[a.imageIndex].offsetHeight/2-(e.getBoundingClientRect().top+e.getBoundingClientRect().bottom)/
2,f=a.thumbList[a.imageIndex].clientWidth/c.clientWidth,h=a.thumbList[a.imageIndex].clientHeight/c.clientHeight;e.style.webkitTransform="translate("+b+"px,"+g+"px) scale("+f+","+h+")";e.style.transform="translate("+b+"px,"+g+"px) scale("+f+","+h+")"},10);setTimeout(function(){e.parentNode.removeChild(e);c.style.zIndex=""},500)};
function toggleAnim(a,b){function c(){var g=e+=d,f=a,h=b,k=f.getContext("2d");k.mozImageSmoothingEnabled=!1;k.webkitImageSmoothingEnabled=!1;k.imageSmoothingEnabled=!1;var l=0.01*g,g=f.width*l,l=f.height*l;k.drawImage(h,0,0,g,l);k.drawImage(f,0,0,g,l,0,0,f.width,f.height);100>=e&&requestAnimationFrame(c)}var e=0,d=0.5;c();window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(a,
1E3/60)}}()}AutodeskNamespace("Autodesk.Viewing.Extensions");Autodesk.Viewing.Extensions.ViewerObjectContextMenu=function(a){Autodesk.Viewing.UI.ObjectContextMenu.call(this,a)};Autodesk.Viewing.Extensions.ViewerObjectContextMenu.prototype=Object.create(Autodesk.Viewing.UI.ObjectContextMenu.prototype);Autodesk.Viewing.Extensions.ViewerObjectContextMenu.prototype.constructor=Autodesk.Viewing.Extensions.ViewerObjectContextMenu;
Autodesk.Viewing.Extensions.ViewerObjectContextMenu.prototype.buildMenu=function(a,b){var c=this,e=[],d=this.viewer.model.is2d();!d&&b.hasSelected&&(e.push({title:"Isolate",target:function(){var a=c.viewer.getSelection();c.viewer.clearSelection();c.viewer.isolate(a)}}),b.hasVisible&&e.push({title:"Hide Selected",target:function(){var a=c.viewer.getSelection();c.viewer.clearSelection();c.viewer.hide(a)}}),b.hasHidden&&e.push({title:"Show Selected",target:function(){var a=c.viewer.getSelection();c.viewer.clearSelection();
c.viewer.show(a)}}));d?e.push({title:"Show All Layers",target:function(){c.viewer.setLayerVisible(null,!0)}}):e.push({title:"Show All Objects",target:function(){c.viewer.showAll()}});!d&&b.hasSelected&&e.push({title:"Focus",target:function(){c.viewer.fitToView()}});return e};"use strict";AutodeskNamespace("Autodesk.Viewing.Extensions.CAM360");Autodesk.Viewing.Extensions.CAM360.CAM360Extension=function(a,b){Autodesk.Viewing.Extension.call(this,a,b)};
Autodesk.Viewing.Extensions.CAM360.CAM360Extension.prototype=Object.create(Autodesk.Viewing.Extension.prototype);Autodesk.Viewing.Extensions.CAM360.CAM360Extension.prototype.constructor=Autodesk.Viewing.Extensions.CAM360.CAM360Extension;
Autodesk.Viewing.Extensions.CAM360.CAM360Extension.prototype.load=function(){var a=new Autodesk.Viewing.Extensions.CAM360.CAMModelStructurePanel(this.viewer,"CAM Model Structure Loading",this.options);this.viewer.setModelStructurePanel(a);this.viewer.hideLines(!1);this.viewer.setGhosting(!1);this.viewer.setQualityLevel(!1,!0);this.viewer.setLightPreset(0,!0);return!0};Autodesk.Viewing.Extensions.CAM360.CAM360Extension.prototype.unload=function(){this.viewer.setModelStructurePanel(null)};
Autodesk.Viewing.theExtensionManager.registerExtension("Autodesk.CAM360",Autodesk.Viewing.Extensions.CAM360.CAM360Extension);"use strict";AutodeskNamespace("Autodesk.Viewing.Extensions.CAM360");Autodesk.Viewing.Extensions.CAM360.CAMModelStructurePanel=function(a,b,c){Autodesk.Viewing.Extensions.ViewerModelStructurePanel.call(this,a,b,c);this.viewer=a};Autodesk.Viewing.Extensions.CAM360.CAMModelStructurePanel.prototype=Object.create(Autodesk.Viewing.Extensions.ViewerModelStructurePanel.prototype);
Autodesk.Viewing.Extensions.CAM360.CAMModelStructurePanel.prototype.constructor=Autodesk.Viewing.Extensions.CAM360.CAMModelStructurePanel;
Autodesk.Viewing.Extensions.CAM360.CAMModelStructurePanel.prototype.sortCamNodes=function(a,b){function c(a){if(a.children)for(var b=0;b<a.children.length;b++){var d=a.children[b];f.push(d);c(d)}}function e(a,b){g.viewer.getProperties(a.dbId,function(c){a:{c=c.properties;for(var d=0;d<c.length;++d){var e=c[d];if("9429B915-D020-4CEB-971B-6ADD0A5D4BFA"===e.displayName){c=e.displayValue;break a}}c=null}c?("CAM_Setup"==c?g.camSetupNodes.push(a):"CAM_Operation"==c?g.camOperationNodes.push(a):"CAM_Tool"===
c?g.camToolNodes.push(a):"CAM_Stock"===c?g.camStockNodes.push(a):"CAM_Folder"==c&&g.camFolderNodes.push(a),g.camNodes.push(a)):g.camModelNodes.push(a);b()},function(a,c,d){b()})}function d(){0<f.length?e(f.shift(),d):b()}this.camNodes=[];this.camModelNodes=[];this.camSetupNodes=[];this.camStockNodes=[];this.camOperationNodes=[];this.camToolNodes=[];this.camFolderNodes=[];var g=this,f=[];c(a);d()};
Autodesk.Viewing.Extensions.CAM360.CAMModelStructurePanel.prototype.setModel=function(a,b){var c=this;c.sortCamNodes(a,function(){Autodesk.Viewing.Extensions.ViewerModelStructurePanel.prototype.setModel.call(c,a,b);c.SetCAMNodeVisible(!1);c.setVisible(!0);c.ExpandSetupNodes()})};
Autodesk.Viewing.Extensions.CAM360.CAMModelStructurePanel.prototype.initialize=function(){function a(c){b.SetCAMNodeVisible(!1);b.removeEventListener(b.viewer,Autodesk.Viewing.GEOMETRY_LOADED_EVENT,a)}Autodesk.Viewing.Extensions.ViewerModelStructurePanel.prototype.initialize.call(this);var b=this;this.viewer.model&&this.viewer.model.isLoadDone()||b.addEventListener(b.viewer,Autodesk.Viewing.GEOMETRY_LOADED_EVENT,a);b.addEventListener(b.viewer,Autodesk.Viewing.SHOW_EVENT,function(a){if(a=a.nodeIdArray)for(var e=
0;e<a.length;e++)b.setCamNodeVisibility(a[e])});b.addEventListener(b.viewer,Autodesk.Viewing.SELECTION_CHANGED_EVENT,function(a){if(a=a.nodeArray)for(var e=0;e<a.length;e++)b.HideHightlightCAMNode(a[e])});b.addEventListener(b.viewer,Autodesk.Viewing.ISOLATE_EVENT,function(a){if(a=a.nodeIdArray)if(0==a.length)b.SetModelVisible(),b.SetCAMNodeVisible(!0);else for(var e=0;e<a.length;e++)b.setCamNodeVisibility(a[e])})};
Autodesk.Viewing.Extensions.CAM360.CAMModelStructurePanel.prototype.IsCAMNode=function(a){return-1!==this.camNodes.indexOf(a)};Autodesk.Viewing.Extensions.CAM360.CAMModelStructurePanel.prototype.IsCAMSetupNode=function(a){return-1!==this.camSetupNodes.indexOf(a)};Autodesk.Viewing.Extensions.CAM360.CAMModelStructurePanel.prototype.IsCAMStockNode=function(a){return-1!==this.camStockNodes.indexOf(a)};
Autodesk.Viewing.Extensions.CAM360.CAMModelStructurePanel.prototype.IsCAMToolNode=function(a){return-1!==this.camToolNodes.indexOf(a)};Autodesk.Viewing.Extensions.CAM360.CAMModelStructurePanel.prototype.IsCAMOperationNode=function(a){return-1!==this.camOperationNodes.indexOf(a)};Autodesk.Viewing.Extensions.CAM360.CAMModelStructurePanel.prototype.IsCAMFolderNode=function(a){return-1!==this.camFolderNodes.indexOf(a)};
Autodesk.Viewing.Extensions.CAM360.CAMModelStructurePanel.prototype.shouldInclude=function(a){return!this.IsCAMStockNode(a)};Autodesk.Viewing.Extensions.CAM360.CAMModelStructurePanel.prototype.isGroupNode=function(a){return this.IsCAMOperationNode(a)?!1:Autodesk.Viewing.Extensions.ViewerModelStructurePanel.prototype.isGroupNode.call(this,a)};Autodesk.Viewing.Extensions.CAM360.CAMModelStructurePanel.prototype.setNodeVisibility=function(a,b){b?this.viewer.show(a):this.viewer.hide(a)};
Autodesk.Viewing.Extensions.CAM360.CAMModelStructurePanel.prototype.SetModelVisible=function(){if(this.camModelNodes)for(var a=0;a<this.camModelNodes.length;a++)this.setNodeVisibility(this.camModelNodes[a],!0)};Autodesk.Viewing.Extensions.CAM360.CAMModelStructurePanel.prototype.SetCAMNodeVisible=function(a){if(this.camNodes){for(var b=0;b<this.camNodes.length;b++)this.setNodeVisibility(this.camNodes[b],a);this.SetToolNodeVisible(!1)}};
Autodesk.Viewing.Extensions.CAM360.CAMModelStructurePanel.prototype.SetToolNodeVisible=function(a){if(this.camToolNodes)for(var b=0;b<this.camToolNodes.length;b++)this.setNodeVisibility(this.camToolNodes[b],a)};
Autodesk.Viewing.Extensions.CAM360.CAMModelStructurePanel.prototype.HideHightlightNode=function(a){var b=this.viewer.impl;(function e(a){var g=a.fragIds;if("undefined"!=typeof g){Array.isArray(g)||(g=[g]);for(var f=0;f<g.length;++f)b.highlightFragment(this.modelRoot,g[f],!1)}if(a.children)for(g=0;g<a.children.length;g++)e(a.children[g])})(a)};
Autodesk.Viewing.Extensions.CAM360.CAMModelStructurePanel.prototype.HideHightlightCAMNode=function(a){var b=this.IsCAMSetupNode(a),c=this.IsCAMOperationNode(a),e=this.IsCAMFolderNode(a);if(b)for(b=0;b<a.children.length;b++)c=a.children[b],this.IsCAMStockNode(c)||this.HideHightlightNode(c);else if(c)for(b=0;b<a.children.length;b++)c=a.children[b],this.IsCAMToolNode(c)&&this.HideHightlightNode(c);else if(e)for(b=0;b<a.children.length;b++)this.HideHightlightNode(a.children[b])};
Autodesk.Viewing.Extensions.CAM360.CAMModelStructurePanel.prototype.setCamNodeVisibility=function(a){var b=this.IsCAMSetupNode(a),c=this.IsCAMOperationNode(a),e=this.IsCAMFolderNode(a);if(b)for(b=0;b<a.children.length;b++)c=a.children[b],this.IsCAMStockNode(c)?this.setNodeVisibility(c,!0):this.setNodeVisibility(c,!1);else if(c)for(b=0;b<a.children.length;b++)c=a.children[b],this.IsCAMToolNode(c)&&this.setNodeVisibility(c,!1);else if(e)for(b=0;b<a.children.length;b++)this.setNodeVisibility(a.children[b],
!1)};Autodesk.Viewing.Extensions.CAM360.CAMModelStructurePanel.prototype.onClick=function(a,b){Autodesk.Viewing.Extensions.ViewerModelStructurePanel.prototype.onClick.call(this,a,b);this.SetModelVisible();this.setCamNodeVisibility(a);this.viewer.fitToView()};Autodesk.Viewing.Extensions.CAM360.CAMModelStructurePanel.prototype.ExpandSetupNodes=function(){if(this.camSetupNodes)for(var a=0;a<this.camSetupNodes.length;a++)this.tree.setCollapsed(this.camSetupNodes[a].dbId,!1)};"use strict";AutodeskNamespace("Autodesk.Viewing.Extensions.Fusion360");
Autodesk.Viewing.Extensions.Fusion360.AnimationExtension=function(a,b){Autodesk.Viewing.Extension.call(this,a,b);this.viewer=a;this.animTools=null;this.animToolsId="animationTools"};Autodesk.Viewing.Extensions.Fusion360.AnimationExtension.prototype=Object.create(Autodesk.Viewing.Extension.prototype);Autodesk.Viewing.Extensions.Fusion360.AnimationExtension.prototype.constructor=Autodesk.Viewing.Extensions.Fusion360.AnimationExtension;
Autodesk.Viewing.Extensions.Fusion360.AnimationExtension.prototype.load=function(){function a(a,b){var c=a.getElementsByClassName("toolbar-button")[0],d=a.getElementsByClassName("toolbar-tooltip")[0];c&&d&&(c.id=b?"toolbar-animationPlayButton":"toolbar-animationPauseButton",d.textContent=b?Autodesk.Viewing.i18n.translate("Play"):Autodesk.Viewing.i18n.translate("Pause"))}function b(){var a=d.model.getData();if(a&&a.animations){var e=a.animations.animations,a=g.keyFrameAnimator=new Autodesk.Viewing.Private.KeyFrameAnimator(g,
a.animations.duration),f;for(f in e)a.add(e[f]);d.removeEventListener(Autodesk.Viewing.GEOMETRY_LOADED_EVENT,b);d.removeEventListener(Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT,c)}}function c(){d.model&&d.model.isLoadDone()?b():d.addEventListener(Autodesk.Viewing.GEOMETRY_LOADED_EVENT,b)}var e=this,d=this.viewer,g=d.impl;this.animTools=d.toolbar.addSubToolbar(this.animToolsId,!1);this.animTools.gotoStartButton=d.addMenuButton(this.animToolsId,"toolbar-animationGotoStart","Goto Start",function(b){b=
d.impl.keyFrameAnimator;void 0!==b&&b&&(b.goto(0),f.value=0,h.value=0,a(e.animTools.playbutton,b.isPaused))});this.animTools.gotoStartButton.style.opacity=1;this.animTools.backwardButton=d.addMenuButton(this.animToolsId,"toolbar-animationBackward","Backward",function(b){b=d.impl.keyFrameAnimator;void 0!==b&&b&&(b.prev(),f.value=b.currentTime/b.duration*100,h.value=b.currentTime.toFixed(2),a(e.animTools.playbutton,b.isPaused))});this.animTools.backwardButton.style.opacity=1;this.animTools.playbutton=
d.addMenuButton(this.animToolsId,"toolbar-animationPlay","Play",function(b){var c=d.impl.keyFrameAnimator;void 0!==c&&c&&(c.play(0,function(a){f.value=a;h.value=c.currentTime.toFixed(2)}),a(e.animTools.playbutton,c.isPaused))});this.animTools.playbutton.style.opacity=1;this.animTools.forwardButton=d.addMenuButton(this.animToolsId,"toolbar-animationForward","Forward",function(b){b=d.impl.keyFrameAnimator;void 0!==b&&b&&(b.next(),f.value=b.currentTime/b.duration*100,h.value=b.currentTime.toFixed(2),
a(e.animTools.playbutton,b.isPaused))});this.animTools.forwardButton.style.opacity=1;this.animTools.gotoEndButton=d.addMenuButton(this.animToolsId,"toolbar-animationGotoEnd","Goto End",function(b){b=d.impl.keyFrameAnimator;void 0!==b&&b&&(b.goto(b.duration),f.value=100,h.value=b.duration.toFixed(2),a(e.animTools.playbutton,b.isPaused))});this.animTools.gotoEndButton.style.opacity=1;this.animTools.timeline=d.addMenuButton(this.animToolsId,"toolbar-animationTimeline","Timeline",function(a){if(a.target.value){var b=
d.impl.keyFrameAnimator;void 0!==b&&b&&(a=a.target.value*b.duration/100,h.value=a.toFixed(2),b.goto(a))}});var f=document.createElement("input");f.type="range";f.value="0";f.className="animationTimelineRangeinput";f.id="rangeinput";this.animTools.timeline.appendChild(f);this.animTools.timeline.style.opacity=1;this.animTools.timetext=d.addMenuButton(this.animToolsId,"toolbar-animationTimeline","Lapse",null);var h=document.createElement("input");h.type="text";h.value="0";h.style.cssText="display: inherit;border-width:0;width:32px;position: relative;z-index: 0;color: #eeeeee;background: rgba(34,34,34,0);margin-top: 10px;";
this.animTools.timetext.appendChild(h);this.animTools.timetext.style.opacity=1;d.model&&d.model.isObjectTreeCreated()?c():d.addEventListener(Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT,c);return!0};
Autodesk.Viewing.Extensions.Fusion360.AnimationExtension.prototype.unload=function(){this.viewer.toolbar.removeFromSubToolbar(this.animToolsId,this.animTools.timetext);this.viewer.toolbar.removeFromSubToolbar(this.animToolsId,this.animTools.timeline);this.viewer.toolbar.removeFromSubToolbar(this.animToolsId,this.animTools.gotoEndButton);this.viewer.toolbar.removeFromSubToolbar(this.animToolsId,this.animTools.forwardButton);this.viewer.toolbar.removeFromSubToolbar(this.animToolsId,this.animTools.playbutton);
this.viewer.toolbar.removeFromSubToolbar(this.animToolsId,this.animTools.backwardButton);this.viewer.toolbar.removeFromSubToolbar(this.animToolsId,this.animTools.gotoStartButton);this.viewer.toolbar.removeSubToolbar(this.animToolsId);return!0};Autodesk.Viewing.theExtensionManager.registerExtension("Autodesk.Fusion360.Animation",Autodesk.Viewing.Extensions.Fusion360.AnimationExtension);AutodeskNamespace("Autodesk.Viewing.Extensions.Markers");
Autodesk.Viewing.Extensions.Markers.ViewerMarkers=function(a){Autodesk.Viewing.Extension.call(this,a)};Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype=Object.create(Autodesk.Viewing.Extension.prototype);Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.constructor=Autodesk.Viewing.Extensions.Markers.ViewerMarkers;
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.load=function(){this.markerGroups=[];this.modelMarkers=[];this.isModelHightlighted=!1;this.lines=[];this.linesVisible=this.markersVisible=!0;this.markersWrap=document.createElement("div");this.markersWrap.id="markers-wrap";this.markersWrap.style.left=0;this.markersWrap.style.top=0;this.markersWrap.style.right=0;this.markersWrap.style.bottom=0;this.markersWrap.style.width="100%";this.markersWrap.style.height="100%";this.markersWrap.style.backgroundColor=
"transparent";this.markersWrap.style.position="absolute";this.markerLines=document.createElement("canvas");this.markerLines.id="markers-lines";this.markerLines.style.left=0;this.markerLines.style.top=0;this.markerLines.style.right=0;this.markerLines.style.bottom=0;this.markerLines.style.width="100%";this.markerLines.style.height="100%";this.markerLines.style.backgroundColor="transparent";this.markerLines.style.position="absolute";this.container=this.viewer.container;this.container.firstChild?this.container.insertBefore(this.markersWrap,
this.container.firstChild):this.container.appendChild(this.markersWrap);this.markersWrap.appendChild(this.markerLines);this.markersWrap.style.pointerEvents="none";this.highlightedMeshes={};this.materialBase=new THREE.MeshBasicMaterial({color:16777215,opacity:0.25,transparent:!1});this.materialTop=new THREE.MeshBasicMaterial({color:16777215,opacity:0.01,shading:THREE.NoShading,transparent:!0});this.viewer.impl.createOverlayScene("markers",this.materialBase,this.materialTop);this.onCameraChange=function(){this.update()}.bind(this);
this.onExplodeChange=function(){this.update()}.bind(this);this.onViewerResize=function(){this.viewer.impl.updateCameraMatrices();this.update()}.bind(this);this.viewer.addEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT,this.onCameraChange);this.viewer.addEventListener(Autodesk.Viewing.EXPLODE_CHANGE_EVENT,this.onExplodeChange);this.viewer.addEventListener(Autodesk.Viewing.VIEWER_RESIZE_EVENT,this.onViewerResize);return!0};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.unload=function(){this.viewer.removeEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT,this.onCameraChange);this.viewer.removeEventListener(Autodesk.Viewing.EXPLODE_CHANGE_EVENT,this.onExplodeChange);this.viewer.removeEventListener(Autodesk.Viewing.VIEWER_RESIZE_EVENT,this.onViewerResize);this.markerGroups.splice(0,this.markerGroups.length);this.modelMarkers.splice(0,this.markerGroups.length);this.lines.splice(0,this.lines.length);this.markersWrap.parentNode.removeChild(this.markersWrap);
this.viewer.impl.removeOverlayScene("markers");this.materialBase.dispose();this.materialTop.dispose();return!0};Autodesk.Viewing.theExtensionManager.registerExtension("Autodesk.Markers",Autodesk.Viewing.Extensions.Markers.ViewerMarkers);
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.update=function(){if(this.visible&&this.viewer.model){this.markerLines.width=this.markerLines.clientWidth;this.markerLines.height=this.markerLines.clientHeight;var a=this.markerLines.getContext("2d");if(a){a.clearRect(0,0,this.markerLines.width,this.markerLines.height);var b=this.getModelBouningRectangle(this.viewer.model);this.updateMarkerGroups(a,b);this.updateModelMarkers(a,b);this.updateLines(a)}}};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.updateMarkerGroups=function(a,b){if(this.markersVisible){this.updateProxiesCenters();this.sortMarkerGroups();for(var c=this.getMarkersGravityCenter(),e=this.getModelCenter(this.viewer.model),d=this.markerGroups,g=d.length,f=b.min.x,h=b.max.x,k=0;k<g;++k)this.updateMarkerGroup(d[k],e,c,f,h);this.resolveMarkersCollisions(f,h);this.clipMarkerGroups();a.lineWidth=1;for(k=0;k<g;++k)if(c=d[k],this.drawLine(a,c.proxyCenter.x,c.proxyCenter.y,c.x,
c.y,"#FFFFFF"),this.drawCircle(a,c.proxyCenter.x,c.proxyCenter.y,4,"#FFFFFF"),e=c,f=e.length,c.clipped){h=e[0].html;h.data.setDirection(c.flip?"outside_right":"outside_left");h.style.display="block";h.style.left=c.flip?Math.round(c.x-h.offsetWidth)+"px":Math.round(c.x)+"px";h.style.top=Math.round(c.y-0.5*h.offsetHeight)+"px";for(var l=1;l<f;++l)h=e[l].html,h.style.display="none"}else for(var n=c.flip?"left":"right",m=c.flip?1:-1,l=0;l<f;++l){h=e[l].html;h.data.setDirection(0==l?n:"");h.style.display=
"";var p=c.y-0.5*h.offsetHeight;h.style.left=Math.round(c.x-0.5*h.offsetWidth+h.offsetWidth*l*m)+"px";h.style.top=Math.round(p)+"px"}}};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.updateModelMarkers=function(a,b){if(this.isModelHightlighted){for(var c=[],e=this.viewer.model.getData().fragments.fragId2dbId.length,d=0;d<e;++d)c.push(d);this.viewer.model.getRoot().fragIds=c;this.highlightNode(this.viewer.model.getRoot(),-1)}c=this.modelMarkers;e=c.length;if(0!=e)if(this.markersVisible)for(var g=10,d=0;d<e;++d){var f=c[d].html;f.style.display="";f.style.left=g+"px";f.style.top="10px";g+=parseInt(f.offsetWidth+5)}else for(d=
0;d<e;++d)f=c[d].html,f.style.display="none"};Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.updateLines=function(a){if(this.linesVisible)for(var b=this.lines,c=b.length,e=0;e<c;++e){var d=b[e],g=this.getProxyCenter(d.fragId);this.drawLine(a,g.x,g.y,d.x,d.y,d.color);this.drawCircle(a,g.x,g.y,4,"#FFFFFF")}};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.setNodeMarker=function(a,b,c){if(-1==this.getFragmentId(b)||!c)return!1;var e={id:a,html:c};c.style.display=this.markersVisible?"block":"none";c=this.getIndexFromId(b,this.markerGroups);-1!=c?(b=this.markerGroups[c],a=this.getIndexFromId(a,b),-1!=a?(this.markersWrap.removeChild(b[a].html),b.splice(a,1,e)):b.push(e)):(a=[e],a.id=b,a.fragId=this.getFragmentId(b),a.x=0,a.y=0,a.proxyCenter=new THREE.Vector2,a.distanceFromCenter=0,a.wholeBoundingBox=
new THREE.Box2,a.htmlBoundingBox=new THREE.Box2,this.markerGroups.push(a));this.markersWrap.appendChild(e.html);this.update();return!0};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.setModelMarker=function(a,b){if(!b)return!1;var c={id:a,html:b};b.style.display=this.markersVisible?"block":"none";var e=this.getIndexFromId(a,this.modelMarkers);-1!=e?(this.markersWrap.removeChild(this.modelMarkers[e].html),this.modelMarkers.splice(e,1,c)):this.modelMarkers.push(c);this.markersWrap.appendChild(c.html);this.update();return!0};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.removeMarker=function(a){for(var b=this.markerGroups,c=b.length,e=0;e<c;++e){var d=b[e],g=this.getIndexFromId(a,d);if(-1!=g){this.markersWrap.removeChild(d[g].html);d.splice(g,1);0==d.length&&b.splice(e,1);break}}a=this.getIndexFromId(a,this.modelMarkers);-1!=a&&(this.markersWrap.removeChild(this.modelMarkers[a].html),this.modelMarkers.splice(a,1));this.update()};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.setLine=function(a,b,c,e,d){if(-1==this.getFragmentId(b))return!1;b={id:a,nodeId:b,fragId:this.getFragmentId(b),x:c,y:e,color:d?d:"#FFFFFF"};a=this.getIndexFromId(a,this.lines);-1!=a?this.lines.splice(a,1,b):this.lines.push(b);this.update();return!0};Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.removeLine=function(a){a=this.getIndexFromId(a,this.lines);-1!=a&&this.lines.splice(a,1);this.update()};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.__defineGetter__("visible",function(){return"block"==this.markersWrap.style.display||""==this.markersWrap.style.display});Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.show=function(){this.markersWrap.style.display="block";this.update()};Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.hide=function(){this.markersWrap.style.display="none"};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.showMarkers=function(){if(!this.markersVisible){for(var a=this.markerGroups,b=a.length,c=0;c<b;++c)for(var e=a[c],d=e.length,g=0;g<d;++g)e[g].html.style.display="block";this.markersVisible=!0;this.update()}};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.hideMarkers=function(){if(this.markersVisible){for(var a=this.markerGroups,b=a.length,c=0;c<b;++c)for(var e=a[c],d=e.length,g=0;g<d;++g)e[g].html.style.display="none";this.markersVisible=!1;this.update()}};Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.getFragmentId=function(a){for(var b=this.viewer.model.getData().fragments.fragId2dbId,c=b.length,e=0;e<c;++e)if(b[e]==a)return e;return-1};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.getIndexFromId=function(a,b){for(var c=b.length,e=0;e<c;++e)if(b[e].id==a)return e;return-1};Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.getIndexFromId=function(a,b){for(var c=b.length,e=0;e<c;++e)if(b[e].id==a)return e;return-1};Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.getModelCenter=function(a){a=a.getBoundingBox().center();return this.worldToClient(a)};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.getModelBouningRectangle=function(a){var b=a.getBoundingBox().min;a=a.getBoundingBox().max;for(var b=[new THREE.Vector3(b.x,b.y,b.z),new THREE.Vector3(b.x,a.y,b.z),new THREE.Vector3(a.x,b.y,b.z),new THREE.Vector3(a.x,a.y,b.z),new THREE.Vector3(b.x,b.y,a.z),new THREE.Vector3(b.x,a.y,a.z),new THREE.Vector3(a.x,b.y,a.z),new THREE.Vector3(a.x,a.y,a.z)],c=a=Number.MAX_VALUE,e=Number.MIN_VALUE,d=Number.MIN_VALUE,g=b.length,f=0;f<g;++f){var h=this.worldToClient(b[f]);
a=Math.min(a,h.x);c=Math.min(c,h.y);e=Math.max(e,h.x);d=Math.max(d,h.y)}return new THREE.Box2(new THREE.Vector2(a,c),new THREE.Vector2(e,d))};Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.getProxyCenter=function(a){a=this.viewer.impl.getRenderProxy(this.viewer.model,a);var b=a.geometry.boundingBox.center();b.applyMatrix4(a.matrixWorld);return this.worldToClient(b)};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.worldToClient=function(a){a.applyMatrix4(this.viewer.impl.camera.matrixWorldInverse);a.applyProjection(this.viewer.impl.camera.projectionMatrix);a=this.viewer.impl.viewportToClient(a.x,a.y);a.x=Math.floor(a.x)+0.5;a.y=Math.floor(a.y)+0.5;var b=this.viewer.impl.canvas.getBoundingClientRect();a.x-=b.left;a.y-=b.top;return a};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.drawLine=function(a,b,c,e,d,g){a.beginPath();a.moveTo(b,c);a.lineTo(e,d);a.strokeStyle=g;a.stroke()};Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.highlightModel=function(a){(this.isModelHightlighted=a)?this.update():this.clearHighlightedNodes()};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.highlightNode=function(a,b){if(void 0!=this.highlightedMeshes[a.dbId]){var c=this.highlightedMeshes[a.dbId].requesters;-1==c.indexOf(b)&&c.push(b)}else if(c=a.fragIds,"undefined"!=typeof c){Array.isArray(c)||(c=[c]);for(var e=[],d=0;d<c.length;++d){var g=this.viewer.impl.getRenderProxy(this.viewer.model,c[d]);g.markupHighlightProxy=new THREE.Mesh(g.geometry,g.material,!0);g.markupHighlightProxy.matrixWorld=g.matrixWorld;this.viewer.impl.addOverlay("markers",
g.markupHighlightProxy);e.push(g)}this.highlightedMeshes[a.dbId]={requesters:[b],meshes:e}}};Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.clearHighlightedNode=function(a,b){var c=this.highlightedMeshes[a.dbId];if(c){var e=c.requesters,d=e.indexOf(b);-1<d&&e.splice(d,1);if(0>=e.length&&(c=c.meshes)){e=0;for(d=c.length;e<d;++e){var g=c[e];this.viewer.impl.removeOverlay("markers",g.markupHighlightProxy);g.markupHighlightProxy=null}delete this.highlightedMeshes[a.dbId]}}};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.clearHighlightedNodes=function(){for(var a in this.highlightedMeshes)for(var b=this.highlightedMeshes[a].meshes,c=0,e=b.length;c<e;++c){var d=b[c];this.viewer.impl.removeOverlay("markers",d.markupHighlightProxy);d.markupHighlightProxy=null}this.highlightedMeshes={}};Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.drawCircle=function(a,b,c,e,d){a.beginPath();a.arc(b,c,e,0,2*Math.PI,!1);a.fillStyle=d;a.fill()};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.drawCircumference=function(a,b,c,e,d){a.beginPath();a.arc(b,c,e,0,2*Math.PI,!1);a.strokeStyle=d;a.stroke()};Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.drawBoundingBox=function(a,b,c,e){a.globalAlpha=e;a.beginPath();a.rect(b.min.x,b.min.y,b.max.x-b.min.x,b.max.y-b.min.y);a.fillStyle=c;a.fill();a.globalAlpha=1};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.updateMarkerGroup=function(a,b,c,e,d){c=a.proxyCenter.x-c.x;a.distanceFromCenter=Math.abs(a.proxyCenter.x-b.x);a.flip=0<c;a.x=a.flip?0.5*a.distanceFromCenter+d:0.5*-a.distanceFromCenter+e;a.y=a.proxyCenter.y;this.updateMarkerGroupBoundingBoxes(a)};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.updateProxiesCenters=function(){for(var a=this.markerGroups,b=a.length,c=0;c<b;++c){var e=a[c];e.proxyCenter=this.getProxyCenter(e.fragId)}a=this.lines;b=a.length;for(c=0;c<b;++c)e=a[c],e.proxyCenter=this.getProxyCenter(e.fragId)};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.updateMarkerGroupBoundingBoxes=function(a){var b,c;b=a[0];var e=a.length,d=b.html.clientWidth,g=b.html.clientHeight,f=0.5*g;b=a.htmlBoundingBox.min;c=a.htmlBoundingBox.max;b.x=Math.round(a.x-0.5*d);b.y=Math.round(a.y-f);c.x=b.x+d;c.y=b.y+g;a.flip?c.x+=d*(e-1):b.x-=d*(e-1);a.wholeBoundingBox.set(b,c);a.wholeBoundingBox.expandByPoint(a.proxyCenter)};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.resolveMarkersCollisions=function(a,b){for(var c=this.markerGroups,e=c.length,d=1;d<e;++d){var g=c[d],f=this.getMarkerGroupCollider(g,!1);if(f){var h=f.x<g.x?g:f,g=f.x<g.x?f:g;this.flipMarkerGroup(h,a,b);if(!this.isMarkerGroupColliding(h,!1)&&!this.isMarkerGroupColliding(g,!1))break;this.flipMarkerGroup(h,a,b);this.flipMarkerGroup(g,a,b);if(!this.isMarkerGroupColliding(h,!1)&&!this.isMarkerGroupColliding(g,!1))break;this.flipMarkerGroup(g,
a,b);for(var f=h.flip?1:-1,k=g.flip?1:-1,l=0,n=0;h.x+=50*f,l+=50*f,this.updateMarkerGroupBoundingBoxes(h),this.isMarkerGroupColliding(h,!0););h.x-=l;for(this.updateMarkerGroupBoundingBoxes(h);g.x+=50*k,n+=50*k,this.updateMarkerGroupBoundingBoxes(g),this.isMarkerGroupColliding(g,!0););g.x-=n;this.updateMarkerGroupBoundingBoxes(g);l<=n?(h.x+=l,this.updateMarkerGroupBoundingBoxes(h)):(g.x+=n,this.updateMarkerGroupBoundingBoxes(g))}}};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.clipMarkerGroups=function(){for(var a=this.markerGroups,b=a.length,c=this.container.offsetWidth,e=c-50,d=0;d<b;++d){var g=a[d];g.clipped=!1;50>g.wholeBoundingBox.max.x?(g.flip=!1,g.x=0,g.clipped=!0):g.wholeBoundingBox.min.x>e?(g.flip=!0,g.x=c,g.clipped=!0):50>g.wholeBoundingBox.min.x?(g.flip=!1,g.x=0,g.clipped=!0):g.wholeBoundingBox.max.x>e&&(g.flip=!0,g.x=c,g.clipped=!0)}};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.getMarkersGravityCenter=function(){var a=new THREE.Vector2(0,0),b=this.markerGroups,c=b.length;if(0<c){for(var e=0;e<c;++e)a.x+=b[e].proxyCenter.x,a.y+=b[e].proxyCenter.y;a.x/=c;a.y/=c}return a};Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.sortMarkerGroups=function(){this.markerGroups.sort(function(a,b){return a.proxyCenter.y<b.proxyCenter.y?-1:a.proxyCenter.y>b.proxyCenter.y?1:0})};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.getMarkerGroupCollider=function(a,b){for(var c=this.markerGroups,e=c.length,d=0;d<e;++d){var g=c[d];if(g===a)break;if(b){if(g.htmlBoundingBox.isIntersectionBox(a.htmlBoundingBox))return g}else if(g.wholeBoundingBox.isIntersectionBox(a.wholeBoundingBox))return g}return null};
Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.isMarkerGroupColliding=function(a,b){for(var c=this.markerGroups,e=c.length,d=0;d<e;++d){var g=c[d];if(g!==a)if(b){if(g.htmlBoundingBox.isIntersectionBox(a.htmlBoundingBox))return!0}else if(g.wholeBoundingBox.isIntersectionBox(a.wholeBoundingBox))return!0}return!1};Autodesk.Viewing.Extensions.Markers.ViewerMarkers.prototype.flipMarkerGroup=function(a,b,c){a.flip=!a.flip;a.x=a.flip?0.5*a.distanceFromCenter+c:0.5*-a.distanceFromCenter+b;this.updateMarkerGroupBoundingBoxes(a)};
AutodeskNamespace("Autodesk.Viewing.Extensions");Autodesk.Viewing.TOGGLE_COMMENT_PANEL="toggleCommentPanel";Autodesk.Viewing.UNLOAD_COMMENT_PANEL="unloadCommentPanel";Autodesk.Viewing.Extensions.Commenting=function(a,b){Autodesk.Viewing.Extension.call(this,a,b)};Autodesk.Viewing.Extensions.Commenting.prototype=Object.create(Autodesk.Viewing.Extension.prototype);Autodesk.Viewing.Extensions.Commenting.prototype.constructor=Autodesk.Viewing.Extensions.Commenting;
Autodesk.Viewing.Extensions.Commenting.prototype.load=function(){function a(b){100<=b.percent&&(c.viewer.removeEventListener(Autodesk.Viewing.PROGRESS_UPDATE_EVENT,a),c.panel.requestComments())}function b(a){c.viewer.removeEventListener(Autodesk.Viewing.TOOLBAR_CREATED_EVENT,b);c.createUI()}this.inViewer=!this.options||!this.options.parentContainerId;var c=this;if(this.inViewer)this.dockingPanel=new Autodesk.Viewing.Extensions.Commenting.DockingCommentPanel(this.viewer),this.panel=this.dockingPanel.commentPanel,
this.viewer.addPanel(this.dockingPanel);else{var e=this.options.parentContainerId,d=new Autodesk.Viewing.Extensions.Commenting.CommentPanelDelegate;this.panel=new Autodesk.Viewing.Extensions.Commenting.CommentPanel(d,this.viewer,e)}this.viewer.addEventListener(Autodesk.Viewing.PROGRESS_UPDATE_EVENT,a);this.viewer.modelTools&&0<this.viewer.modelTools.getToolCount()?b():this.viewer.addEventListener(Autodesk.Viewing.TOOLBAR_CREATED_EVENT,b);return!0};
Autodesk.Viewing.Extensions.Commenting.prototype.unload=function(){this.panel.destroy();this.dockingPanel&&(this.viewer.removePanel(this.dockingPanel),this.dockingPanel.uninitialize());this.destroyUI();this.inViewer=!1;this.dockingPanel=this.panel=null;this.viewer.fireEvent({type:Autodesk.Viewing.UNLOAD_COMMENT_PANEL});return!0};
Autodesk.Viewing.Extensions.Commenting.prototype.createUI=function(){var a=this;this.commentButton=Autodesk.Viewing.UI.Toolbar.createMenuButton("toolbar-commentTool","Comments and Markers",function(b){b=a.panel.isVisible();a.inViewer&&a.panel.setVisible(!b);a.viewer.fireEvent({type:Autodesk.Viewing.TOGGLE_COMMENT_PANEL})});var b=this.viewer.modelTools.getTool("toolbar-settingsTool");b?this.viewer.modelTools.insertToolBefore(this.commentButton,b):this.viewer.modelTools.addTool(this.commentButton)};
Autodesk.Viewing.Extensions.Commenting.prototype.destroyUI=function(){this.commentButton&&this.viewer.removeMenuButton("modelTools",this.commentButton)};Autodesk.Viewing.theExtensionManager.registerExtension("Commenting",Autodesk.Viewing.Extensions.Commenting);"use strict";AutodeskNamespace("Autodesk.Viewing.Extensions");Autodesk.Viewing.Extensions.Commenting.CommentPanelDelegate=function(){};Autodesk.Viewing.Extensions.Commenting.CommentPanelDelegate.prototype.constructor=Autodesk.Viewing.Extensions.Commenting.CommentPanelDelegate;
Autodesk.Viewing.Extensions.Commenting.CommentPanelDelegate.prototype.onCommentBoxClick=function(a,b,c){};Autodesk.Viewing.Extensions.Commenting.CommentPanelDelegate.prototype.onCommentBoxDoubleClick=function(a,b,c){};Autodesk.Viewing.Extensions.Commenting.CommentPanelDelegate.prototype.onCommentBoxRightClick=function(a,b,c){};Autodesk.Viewing.Extensions.Commenting.CommentPanelDelegate.prototype.onCommentBoxEnter=function(a,b,c){};
Autodesk.Viewing.Extensions.Commenting.CommentPanelDelegate.prototype.onCommentBoxLeave=function(a,b,c){};Autodesk.Viewing.Extensions.Commenting.CommentPanelDelegate.prototype.onCommentMarkerClick=function(a,b,c){a.selectedComment!=b?(a.selectedComment&&a.clearSelectedSnapshot(!0),a.restoreCommentSnapshot(b),a.markupCheckbox.disabled=!0):(a.selectedComment&&a.clearSelectedSnapshot(),a.markupCheckbox.disabled=!1)};
Autodesk.Viewing.Extensions.Commenting.CommentPanelDelegate.prototype.onCommentMarkerDoubleClick=function(a,b,c){};Autodesk.Viewing.Extensions.Commenting.CommentPanelDelegate.prototype.onCommentMarkerRightClick=function(a,b,c){};
Autodesk.Viewing.Extensions.Commenting.CommentPanelDelegate.prototype.onCommentMarkerEnter=function(a,b,c){c=document.getElementById("comment-panel-entry-"+b.id);if(a.selectedComment){if(!b["node-id"]){a.drawCommentLine(b,c);return}if(a.selectedComment.id==b.id)return;a.hideCommentLine(a.selectedComment)}a.drawCommentLine(b,c);a.showMarkup(!1)};
Autodesk.Viewing.Extensions.Commenting.CommentPanelDelegate.prototype.onCommentMarkerLeave=function(a,b,c){a.selectedComment?a.selectedComment!=b?(a.hideCommentLine(b),a.selectedComment["node-id"]&&(b=document.getElementById("comment-panel-entry-"+a.selectedComment.id),a.drawCommentLine(a.selectedComment,b))):b["node-id"]||a.hideCommentLine(b):(a.hideCommentLine(b),a.showMarkup(!0))};
Autodesk.Viewing.Extensions.Commenting.CommentPanelDelegate.prototype.onViewerMarkerClick=function(a,b,c){a.selectedComment!=b?(a.selectedComment&&a.clearSelectedSnapshot(),a.restoreCommentSnapshot(b),a.myDelegate.isVisible(a)?(c=document.getElementById("comment-panel-entry-"+b.id),a.drawCommentLine(b,c),a.showMarkup(!1)):a.replaceSelectionWithCommentHighlights(b),a.markupCheckbox.disabled=!0):(a.clearSelectedSnapshot(),b["node-id"]?a.viewer.markers.clearHighlightedNodes():a.viewer.markers.highlightModel(!1),
a.markupCheckbox.disabled=!1)};Autodesk.Viewing.Extensions.Commenting.CommentPanelDelegate.prototype.isVisible=function(a){return"block"===document.getElementById(a.rootContainerId).style.display};Autodesk.Viewing.Extensions.Commenting.CommentPanelDelegate.prototype.setVisible=function(a,b){document.getElementById(a.rootContainerId).style.display=b?"block":"none"};
Autodesk.Viewing.Extensions.Commenting.CommentPanel=function(a,b,c){this.VIEWER_STATE_FILTER=!0;this.RESTORE_IS_IMMEDIATE=!1;this.myDelegate=a;this.viewer=b;this.commentList=[];this.nextCommentId=1;this.showMarkers=!0;this.commentsRequested=!1;this.selectedComment=this.cachedSnapshot=null;this.buildPanel(a,c)};Autodesk.Viewing.Extensions.Commenting.CommentPanel.prototype.constructor=Autodesk.Viewing.Extensions.Commenting.CommentPanel;
Autodesk.Viewing.Extensions.Commenting.CommentPanel.prototype.buildPanel=function(a,b){var c=this,e;"string"===typeof b?(e=b,b=document.getElementById(e)):e=b.id;this.parentContainerId=e;this.rootContainerId=e+"-comment-panel-wrapper";e=document.createElement("div");e.id=this.rootContainerId;e.className="comment-panel-wrapper";b.appendChild(e);var d=document.createElement("div");d.className="comment-panel-container";var g=document.createElement("textarea");g.name="text";g.className="comment-panel-post-textarea";
g.placeholder="Comment";g.setAttribute("data-i18n","[placeholder]Comment");var f=document.createElement("input");f.type="submit";f.value="Post";f.className="comment-panel-post-button";f.setAttribute("data-i18n","[value]Post");var h=document.createElement("div"),k=document.createElement("label");k.className="comment-panel-toggle-markup-label";k.appendChild(document.createTextNode("Show Markers:"));k.setAttribute("data-i18n","Show Markers:");var l=document.createElement("input");l.type="checkbox";l.className=
"comment-panel-toggle-markup-checkbox";l.checked=this.showMarkers;l.value=1;h.appendChild(k);h.appendChild(l);d.appendChild(g);d.appendChild(f);d.appendChild(h);h=document.createElement("div");h.className="comment-panel-entry-container";e.appendChild(d);e.appendChild(h);var n=function(){c.onPostClick(c)};f.addEventListener("click",n);var m=function(){c.toggleMarkup(c)};l.addEventListener("click",m);var p=function(a){if(13==a.keyCode)c.onPostClick(c)};g.addEventListener("keypress",p);this.clearEventListeners=
function(){f.removeEventListener("click",n);l.removeEventListener("click",m);g.removeEventListener("keypress",p)};this.postTextArea=g;this.commentEntryContainer=h;this.markupCheckbox=l};
Autodesk.Viewing.Extensions.Commenting.CommentPanel.prototype.destroy=function(){this.clearEventListeners();this.clearEventListeners=null;var a,b;a=0;for(b=this.commentList.length;a<b;++a){var c=this.commentList[a];document.getElementById("comment-panel-entry-"+c.id).removeListeners();this.viewer.markers.removeMarker("marker-"+c.id)}this.commentList=null;this.nextCommentId=1;this.showMarkers=!0;this.commentsRequested=!1;this.markupCheckbox=this.commentEntryContainer=this.postTextArea=this.selectedComment=
this.cachedSnapshot=null;a=document.getElementById(this.parentContainerId);b=document.getElementById(this.rootContainerId);this.rootContainerId=this.parentContainerId=null;a.removeChild(b);Autodesk.Viewing.Extensions.Commenting.CommentStorage.destroy()};Autodesk.Viewing.Extensions.Commenting.CommentPanel.prototype.delegate=function(){return this.myDelegate};Autodesk.Viewing.Extensions.Commenting.CommentPanel.prototype.isVisible=function(){return this.myDelegate.isVisible(this)};
Autodesk.Viewing.Extensions.Commenting.CommentPanel.prototype.setVisible=function(a){this.myDelegate.setVisible(this,a)};Autodesk.Viewing.Extensions.Commenting.CommentPanel.prototype.onPostClick=function(a){if(""!==a.postTextArea.value){var b=a.createComment();a.renderComment(a,b);Autodesk.Viewing.Extensions.Commenting.CommentStorage.saveComment(b)}};
Autodesk.Viewing.Extensions.Commenting.CommentPanel.prototype.createComment=function(){var a=null,b=this.nextCommentId++,c=this.viewer.getState(this.VIEWER_STATE_FILTER);c.objectState&&c.objectState.selection&&0<c.objectState.selection.length?a=c.objectState.selection[0]:c.objectState&&c.objectState.isolation&&0<c.objectState.isolation.length&&(a=c.objectState.isolation[0]);return{id:b,content:this.postTextArea.value,state:c,"marker-id":"marker-"+b,"node-id":a}};
Autodesk.Viewing.Extensions.Commenting.CommentPanel.prototype.renderComment=function(a,b){a.commentList.push(b);var c=document.createElement("div");c.className="comment-panel-entry";c.id="comment-panel-entry-"+b.id;var e=document.createElement("div");e.className="comment-panel-entry-content";var d=document.createElement("p");d.className="comment-panel-entry-paragraph";d.textContent=b.content;e.appendChild(d);a.postTextArea.value="";var d=b["node-id"],g=(new Autodesk.Viewing.Extensions.Commenting.Marker(b.id,
null,d?"right":"")).getDiv(),f=g.data.cloneDiv("");f.id="comment-marker-"+b.id;f.classList.add("comment-panel-entry-marker");c.appendChild(f);var h=function(c){a.myDelegate.onCommentMarkerClick(a,b,c);c.stopPropagation();c.preventDefault()};f.addEventListener("click",h,!1);var k=function(c){a.myDelegate.onCommentMarkerDoubleClick(a,b,c);c.stopPropagation();c.preventDefault()};f.addEventListener("dblclick",k,!1);var l=function(c){a.myDelegate.onCommentMarkerRightClick(a,b,c);c.stopPropagation();c.preventDefault()};
f.addEventListener("contextmenu",l,!1);var n=function(c){a.myDelegate.onCommentMarkerEnter(a,b,c);c.stopPropagation();c.preventDefault()};f.addEventListener("mouseenter",n,!1);var m=function(c){a.myDelegate.onCommentMarkerLeave(a,b,c);c.stopPropagation();c.preventDefault()};f.addEventListener("mouseleave",m,!1);var p=function(c){a.myDelegate.onViewerMarkerClick(a,b,c);c.stopPropagation();c.preventDefault()};g.addEventListener("click",p,!1);d?(f.getElementsByClassName("comment-marker-arrow")[0].classList.add("comment-panel-marker-arrow-override"),
this.viewer.markers.setNodeMarker(b["marker-id"],d,g,"#FFFFFF")):this.viewer.markers.setModelMarker(b["marker-id"],g);d=document.createElement("a");d.className="comment-panel-entry-delete";d.href="#";d.textContent="Delete Comment";d.setAttribute("data-i18n","Delete Comment");d.addEventListener("click",function(c){c.stopPropagation();a.deleteComment(a,b.id)});e.appendChild(d);c.appendChild(e);this.commentEntryContainer.appendChild(c);var q=function(c){a.myDelegate.onCommentBoxClick(a,b,c);c.stopPropagation();
c.preventDefault()};c.addEventListener("click",q,!1);var s=function(c){a.myDelegate.onCommentBoxDoubleClick(a,b,c);c.stopPropagation();c.preventDefault()};c.addEventListener("dblclick",s,!1);var r=function(c){a.myDelegate.onCommentBoxRightClick(a,b,c);c.stopPropagation();c.preventDefault()};c.addEventListener("contextmenu",r,!1);var u=function(c){a.myDelegate.onCommentBoxEnter(a,b,c);c.stopPropagation();c.preventDefault()};c.addEventListener("mouseenter",u,!1);var w=function(c){a.myDelegate.onCommentBoxLeave(a,
b,c);c.stopPropagation();c.preventDefault()};c.addEventListener("mouseleave",w,!1);c.removeListeners=function(){f.removeEventListener("click",h,!1);f.removeEventListener("dblclick",k,!1);f.removeEventListener("contextmenu",l,!1);f.removeEventListener("mouseenter",n,!1);f.removeEventListener("mouseleave",m,!1);g.removeEventListener("click",p,!1);c.removeEventListener("click",q,!1);c.removeEventListener("dblclick",s,!1);c.removeEventListener("contextmenu",r,!1);c.removeEventListener("mouseenter",u,
!1);c.removeEventListener("mouseleave",w,!1)}};
Autodesk.Viewing.Extensions.Commenting.CommentPanel.prototype.deleteComment=function(a,b){var c="comment-panel-entry-"+b,e=this.commentEntryContainer.children,d,g;d=0;for(g=e.length;d<g;++d){var f=e[d];if(f.id==c){f.removeListeners();this.commentEntryContainer.removeChild(f);break}}c=a.commentList;d=0;for(g=c.length;d<g;++d)if(e=c[d],e.id===b){e["marker-id"]&&(a.hideCommentLine(e),a.restoreCachedSnapshot(),a.selectedComment==e&&(a.showMarkup(!0),a.selectedComment=null));d=c.splice(d,1)[0];Autodesk.Viewing.Extensions.Commenting.CommentStorage.deleteComment(d);
break}this.viewer.markers.removeMarker("marker-"+b)};Autodesk.Viewing.Extensions.Commenting.CommentPanel.prototype.serializeComment=function(a,b){this.viewer.impl.svfloader.postComments(viewer,b)};
Autodesk.Viewing.Extensions.Commenting.CommentPanel.prototype.drawCommentLine=function(a,b){function c(a){for(var b=0,c=0;a;)b+=a.offsetLeft-a.scrollLeft+a.clientLeft,c+=a.offsetTop-a.scrollTop+a.clientTop,a=a.offsetParent;return{x:b,y:c}}if(a["node-id"]){var e=document.getElementsByClassName("adsk-viewing-viewer")[0],e=c(e),d=c(b),g=b.currentStyle||window.getComputedStyle(b),f=document.getElementById(this.rootContainerId),g=b.offsetLeft+parseInt(g.marginLeft);this.viewer.markers.setLine("line-"+
a.id,a["node-id"],Math.floor(d.x-e.x-g)+0.5,Math.floor(d.y-e.y+28-f.scrollTop)+0.5,"#FFFFFF");if(e=this.viewer.model)for(e=e.getNodesByIds(a.state.objectState.selection),d=e.length,f=0;f<d;++f)this.viewer.markers.highlightNode(e[f],a.id)}else this.viewer.markers.highlightModel(!0)};
Autodesk.Viewing.Extensions.Commenting.CommentPanel.prototype.hideCommentLine=function(a){if(a["node-id"]){this.viewer.markers.removeLine("line-"+a.id);var b=this.viewer.model;if(b)for(var b=b.getNodesByIds(a.state.objectState.selection),c=b.length,e=0;e<c;++e)this.viewer.markers.clearHighlightedNode(b[e],a.id)}else this.viewer.markers.highlightModel(!1)};
Autodesk.Viewing.Extensions.Commenting.CommentPanel.prototype.showMarkup=function(a){this.showMarkers!=a&&((this.showMarkers=a)?this.viewer.markers.showMarkers():this.viewer.markers.hideMarkers())};Autodesk.Viewing.Extensions.Commenting.CommentPanel.prototype.toggleMarkup=function(a){this.showMarkup(this.markupCheckbox.checked)};
Autodesk.Viewing.Extensions.Commenting.CommentPanel.prototype.restoreCommentSnapshot=function(a){this.selectedComment=a;document.getElementById("comment-marker-"+this.selectedComment.id).classList.add("comment-marker-selected");this.cachedSnapshot||(this.cachedSnapshot=this.viewer.getState(this.VIEWER_STATE_FILTER));this.viewer.restoreState(a.state,this.VIEWER_STATE_FILTER,this.RESTORE_IS_IMMEDIATE);this.replaceSelectionWithCommentHighlights(a)};
Autodesk.Viewing.Extensions.Commenting.CommentPanel.prototype.restoreCachedSnapshot=function(){this.cachedSnapshot&&(this.viewer.restoreState(this.cachedSnapshot,this.VIEWER_STATE_FILTER,this.RESTORE_IS_IMMEDIATE),this.cachedSnapshot=null)};
Autodesk.Viewing.Extensions.Commenting.CommentPanel.prototype.clearSelectedSnapshot=function(a){this.selectedComment&&(document.getElementById("comment-marker-"+this.selectedComment.id).classList.remove("comment-marker-selected"),a&&this.hideCommentLine(this.selectedComment),this.selectedComment=null)};Autodesk.Viewing.Extensions.Commenting.CommentPanel.prototype.clearCachedSnapshot=function(){this.clearSelectedSnapshot();this.cachedSnapshot=null};
Autodesk.Viewing.Extensions.Commenting.CommentPanel.prototype.replaceSelectionWithCommentHighlights=function(a){var b=this.viewer.impl?this.viewer.impl.selector:null;b&&b.clearSelection();if(a["node-id"]){if(b=this.viewer.model)for(var b=b.getNodesByIds(a.state.objectState.selection),c=b.length,e=0;e<c;++e)this.viewer.markers.highlightNode(b[e],a.id)}else this.viewer.markers.highlightModel(!0)};
Autodesk.Viewing.Extensions.Commenting.CommentPanel.prototype.requestComments=function(){if(!this.commentsRequested){var a=this;Autodesk.Viewing.Extensions.Commenting.CommentStorage.loadComments(function(b){for(var c=0,e=b.length;c<e;++c){var d=b[c];a.renderComment(a,d);d.id>=a.nextCommentId&&(a.nextCommentId=d.id+1)}});this.showMarkers&&this.viewer.markers.showMarkers();this.commentsRequested=!0}};
Autodesk.Viewing.Extensions.Commenting.Marker=function(a,b,c){this.commentId=a;this.symbolType=b||0;this.lastDirection="";c=c||"";this.holderDiv=document.createElement("div");this.holderDiv.className="comment-marker-holder";this.holderDiv.data=this;this.arrowDiv=document.createElement("div");this.arrowDiv.className="comment-marker-arrow";this.symbolDiv=document.createElement("div");this.symbolDiv.className="comment-marker-symbol";this.symbolDiv.innerHTML=a;0<this.symbolType&&this.symbolDiv.classList.add("comment-marker-symbol"+
b);this.holderDiv.appendChild(this.arrowDiv);this.holderDiv.appendChild(this.symbolDiv);this.lastArrowClassName=null;this.setDirection(c)};Autodesk.Viewing.Extensions.Commenting.Marker.prototype.constructor=Autodesk.Viewing.Extensions.Commenting.Marker;
Autodesk.Viewing.Extensions.Commenting.Marker.prototype.setDirection=function(a){if(this.lastDirection!=a&&(this.lastArrowClassName&&(this.arrowDiv.classList.remove(this.lastArrowClassName),this.lastArrowClassName=null),""!=a)){var b;switch(a){case "left":b="comment-marker-left";break;case "right":b="comment-marker-right";break;case "outside_left":b="comment-marker-outside-left";break;case "outside_right":b="comment-marker-outside-right";break;case "outside_top":b="comment-marker-outside-top";break;
case "outside_bottom":b="comment-marker-outside-bottom"}this.arrowDiv.classList.add(b);this.lastArrowClassName=b;this.lastDirection=a}};Autodesk.Viewing.Extensions.Commenting.Marker.prototype.setNumber=function(a){this.symbolDiv.innerHTML=a};Autodesk.Viewing.Extensions.Commenting.Marker.prototype.getDiv=function(){return this.holderDiv};
Autodesk.Viewing.Extensions.Commenting.Marker.prototype.cloneDiv=function(a){a=null!=a?a:this.lastDirection;return(new Autodesk.Viewing.Extensions.Commenting.Marker(this.commentId,this.symbolType,a)).getDiv()};AutodeskNamespace("Autodesk.Viewing.Extensions.Commenting");
Autodesk.Viewing.Extensions.Commenting.DockingCommentPanel=function(a){this.viewer=a;var b=this;Autodesk.Viewing.UI.DockingPanel.call(this,a.container,"CommentPanel","Comment and Markers");var c=new Autodesk.Viewing.Extensions.Commenting.CommentPanelDelegate;c.getViewer=function(){return a};c.isVisible=function(a){return b.isVisible()};c.setVisible=function(a,c){return b.setVisible(c)};this.commentPanel=new Autodesk.Viewing.Extensions.Commenting.CommentPanel(c,a,"CommentPanel");this.container.dockRight=
!0};Autodesk.Viewing.Extensions.Commenting.DockingCommentPanel.prototype=Object.create(Autodesk.Viewing.UI.DockingPanel.prototype);Autodesk.Viewing.Extensions.Commenting.DockingCommentPanel.prototype.constructor=Autodesk.Viewing.Extensions.Commenting.DockingCommentPanel;Autodesk.Viewing.Extensions.Commenting.DockingCommentPanel.prototype.uninitialize=function(){this.commentPanel=this.viewer=null;Autodesk.Viewing.UI.DockingPanel.prototype.uninitialize.call(this)};AutodeskNamespace("Autodesk.Viewing.Extensions.Commenting.CommentStorage");
Autodesk.Viewing.Extensions.Commenting.CommentStorage.instance;Autodesk.Viewing.Extensions.Commenting.CommentStorage=function(){var a=this;this.comments=[];this.persistence=null;this.loaded=this.loading=!1;this.onLoadCallbacks=[];this.byId={};this.getIndexById=function(b){for(var c=a.comments.length,e=0;e<c;++e)if(a.comments[e].id==b)return e;return-1}};
Autodesk.Viewing.Extensions.Commenting.CommentStorage.getInstance=function(){Autodesk.Viewing.Extensions.Commenting.CommentStorage.instance||(Autodesk.Viewing.Extensions.Commenting.CommentStorage.instance=new Autodesk.Viewing.Extensions.Commenting.CommentStorage);return Autodesk.Viewing.Extensions.Commenting.CommentStorage.instance};
Autodesk.Viewing.Extensions.Commenting.CommentStorage.setPersistenceType=function(a,b,c){a=a||"none";var e=Autodesk.Viewing.Extensions.Commenting.CommentStorage.getInstance();e.loaded=!1;e.loading=!1;if("string"==typeof a)switch(a){case "none":e.loaded=!0;e.loading=!0;b=!1;e.persistence=null;"function"==typeof c&&c();break;default:e.persistence=new Autodesk.Viewing.Extensions.Commenting.CommentStorage.LocalCommentStorage}else"function"==typeof a?e.persistence=new a:"object"==typeof a&&(e.persistence=
a);b&&Autodesk.Viewing.Extensions.Commenting.CommentStorage.loadComments(c)};Autodesk.Viewing.Extensions.Commenting.CommentStorage.loaded=function(){return Autodesk.Viewing.Extensions.Commenting.CommentStorage.getInstance().loaded};Autodesk.Viewing.Extensions.Commenting.CommentStorage.getAllComments=function(a){function b(b){a(c.comments)}var c=Autodesk.Viewing.Extensions.Commenting.CommentStorage.getInstance();c.loaded?b(c.comments):Autodesk.Viewing.Extensions.Commenting.CommentStorage.loadComments(b)};
Autodesk.Viewing.Extensions.Commenting.CommentStorage.getCommentById=function(a,b){function c(c){b(e.byId[a])}var e=Autodesk.Viewing.Extensions.Commenting.CommentStorage.getInstance();e.loaded?c(e.comments):Autodesk.Viewing.Extensions.Commenting.CommentStorage.loadComments(c)};
Autodesk.Viewing.Extensions.Commenting.CommentStorage.getCommentsByNodeId=function(a,b){function c(c){c=[];for(var g=e.comments.length,f=0;f<g;++f){var h=e.comments[f];h["node-id"]==a&&c.push(h)}b(c)}var e=Autodesk.Viewing.Extensions.Commenting.CommentStorage.getInstance();e.loaded?c(e.comments):Autodesk.Viewing.Extensions.Commenting.CommentStorage.loadComments(c)};
Autodesk.Viewing.Extensions.Commenting.CommentStorage.loadComments=function(a,b){var c=Autodesk.Viewing.Extensions.Commenting.CommentStorage.getInstance();c.persistence?c.loaded?"function"==typeof a&&a(c.comments):("function"==typeof a&&c.onLoadCallbacks.push(a),c.loading||(c.loading=!0,c.comments=[],c.byId={},c.persistence&&"function"==typeof c.persistence.loadComments?(a=a||function(){},c.persistence.loadComments(function(a){var b;c.loaded=!0;if(a&&Array.isArray(a))for(c.comments=a,f=a.length,b=
0;b<f;++b){var g=a[b];c.byId[g.id]=g}var f=c.onLoadCallbacks.length;for(b=0;b<f;++b)(0,c.onLoadCallbacks[b])(c.comments)})):"function"==typeof a&&a(c.comments))):Autodesk.Viewing.Extensions.Commenting.CommentStorage.setPersistenceType(b||"local",!0,a)};
Autodesk.Viewing.Extensions.Commenting.CommentStorage.saveComment=function(a,b){function c(c){c=e.getIndexById(a.id);-1<c?e.comments[c]=a:e.comments.push(a);e.byId[a.id]=a;e.persistence&&"function"==typeof e.persistence.saveComment&&e.persistence.saveComment(a,e.comments,b||function(){})}var e=Autodesk.Viewing.Extensions.Commenting.CommentStorage.getInstance();e.loaded?c(e.comments):Autodesk.Viewing.Extensions.Commenting.CommentStorage.loadComments(c)};
Autodesk.Viewing.Extensions.Commenting.CommentStorage.deleteComment=function(a,b){function c(c){c=e.getIndexById(a.id);-1<c&&e.comments.splice(c,1);delete e.byId[a.id];e.persistence&&"function"==typeof e.persistence.deleteComment&&e.persistence.deleteComment(a,e.comments,b||function(){})}var e=Autodesk.Viewing.Extensions.Commenting.CommentStorage.getInstance();e.loaded?c(e.comments):Autodesk.Viewing.Extensions.Commenting.CommentStorage.loadComments(c)};
Autodesk.Viewing.Extensions.Commenting.CommentStorage.destroy=function(){if(Autodesk.Viewing.Extensions.Commenting.CommentStorage.instance){var a=Autodesk.Viewing.Extensions.Commenting.CommentStorage.getInstance();a.comments=[];a.persistence=null;a.loading=!1;a.loaded=!1;a.onLoadCallbacks=[];a.byId={};Autodesk.Viewing.Extensions.Commenting.CommentStorage.instance=null}};AutodeskNamespace("Autodesk.Viewing.Extensions.Commenting.CommentStorage");
Autodesk.Viewing.Extensions.Commenting.CommentStorage.LocalCommentStorage=function(){var a=[];this.loadComments=function(b){var c=window.localStorage.getItem("comments");if(c)for(var c=JSON.parse(c),e=0,d=c.length;e<d;++e)a.push(c[e]);b(a)};this.saveComment=function(a,c,e){window.localStorage.setItem("comments",JSON.stringify(c))};this.deleteComment=function(a,c,e){window.localStorage.setItem("comments",JSON.stringify(c))}};
(function(a,b){var c=a.document,e;e=function(){var d={},e=!1,f=[],h,k,l,n,m,p,q,s,r,u,w,A;A=function(){var a,d,e=!1,f=c.createElement("fakeelement"),g={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"};for(a in g)if(f.style[a]!==b){d=g[a];e=!0;break}return{type:d,supported:e}};h=function(a){return c.getElementById(a)};d={labels:{ok:"OK",cancel:"Cancel"},delay:5E3,buttonReverse:!1,buttonFocus:"ok",transition:b,addListeners:function(a){var b=
"undefined"!==typeof l,d="undefined"!==typeof k,e="undefined"!==typeof w,f="",g=this,h,p,q,r,s;h=function(b){"undefined"!==typeof b.preventDefault&&b.preventDefault();q(b);"undefined"!==typeof w&&(f=w.value);"function"===typeof a&&("undefined"!==typeof w?a(!0,f):a(!0));return!1};p=function(b){"undefined"!==typeof b.preventDefault&&b.preventDefault();q(b);"function"===typeof a&&a(!1);return!1};q=function(a){g.hide();g.unbind(c.body,"keyup",r);g.unbind(n,"focus",s);b&&g.unbind(l,"click",h);d&&g.unbind(k,
"click",p)};r=function(a){var b=a.keyCode;(32===b&&!e||e&&13===b)&&h(a);27===b&&d&&p(a)};s=function(a){e?w.focus():!d||g.buttonReverse?l.focus():k.focus()};this.bind(n,"focus",s);this.bind(m,"focus",s);b&&this.bind(l,"click",h);d&&this.bind(k,"click",p);this.bind(c.body,"keyup",r);this.transition.supported||this.setFocus()},bind:function(a,b,c){"function"===typeof a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)},handleErrors:function(){if("undefined"!==typeof a.onerror){var b=
this;a.onerror=function(a,c,d){b.error("["+a+" on line "+d+" of "+c+"]",0)};return!0}return!1},appendButtons:function(a,b){return this.buttonReverse?b+a:a+b},build:function(a){var b=a.type,c=a.message,e=a.cssClass||"";a='<div class="alertify-dialog"><a id="alertify-resetFocusBack" class="alertify-resetFocus" href="#">Reset Focus</a>';"none"===d.buttonFocus&&(a+='<a href="#" id="alertify-noneFocus" class="alertify-hidden"></a>');"prompt"===b&&(a+='<div id="alertify-form">');a+='<article class="alertify-inner">';
a+='<p class="alertify-message">{{message}}</p>'.replace("{{message}}",c);"prompt"===b&&(a+='<div class="alertify-text-wrapper"><input type="text" class="alertify-text" id="alertify-text"></div>');a+='<nav class="alertify-buttons">{{buttons}}</nav>';a+="</article>";"prompt"===b&&(a+="</div>");a+='<a id="alertify-resetFocus" class="alertify-resetFocus" href="#">Reset Focus</a>';a+="</div>";switch(b){case "confirm":a=a.replace("{{buttons}}",this.appendButtons('<button class="alertify-button alertify-button-cancel" id="alertify-cancel">{{cancel}}</button>',
'<button class="alertify-button alertify-button-ok" id="alertify-ok">{{ok}}</button>'));a=a.replace("{{ok}}",this.labels.ok).replace("{{cancel}}",this.labels.cancel);break;case "prompt":a=a.replace("{{buttons}}",this.appendButtons('<button class="alertify-button alertify-button-cancel" id="alertify-cancel">{{cancel}}</button>','<button type="submit" class="alertify-button alertify-button-ok" id="alertify-ok">{{ok}}</button>'));a=a.replace("{{ok}}",this.labels.ok).replace("{{cancel}}",this.labels.cancel);
break;case "alert":a=a.replace("{{buttons}}",'<button class="alertify-button alertify-button-ok" id="alertify-ok">{{ok}}</button>'),a=a.replace("{{ok}}",this.labels.ok)}r.className="alertify alertify-"+b+" "+e;s.className="alertify-cover";return a},close:function(a,b){var c=b&&!isNaN(b)?+b:this.delay,d=this,e,f;this.bind(a,"click",function(){e(a)});f=function(a){a.stopPropagation();d.unbind(this,d.transition.type,f);u.removeChild(this);u.hasChildNodes()||(u.className+=" alertify-logs-hidden")};e=
function(a){"undefined"!==typeof a&&a.parentNode===u&&(d.transition.supported?(d.bind(a,d.transition.type,f),a.className+=" alertify-log-hide"):(u.removeChild(a),u.hasChildNodes()||(u.className+=" alertify-logs-hidden")))};0!==b&&setTimeout(function(){e(a)},c)},dialog:function(a,b,d,h,k){q=c.activeElement;var l=function(){u&&null!==u.scrollTop&&s&&null!==s.scrollTop||l()};if("string"!==typeof a)throw Error("message must be a string");if("string"!==typeof b)throw Error("type must be a string");if("undefined"!==
typeof d&&"function"!==typeof d)throw Error("fn must be a function");this.init();l();f.push({type:b,message:a,callback:d,placeholder:h,cssClass:k});e||this.setup();return this},extend:function(a){if("string"!==typeof a)throw Error("extend method must have exactly one paramter");return function(b,c){this.log(b,a,c);return this}},hide:function(){var a,b=this;f.splice(0,1);0<f.length?this.setup(!0):(e=!1,a=function(c){c.stopPropagation();b.unbind(r,b.transition.type,a)},this.transition.supported?(this.bind(r,
this.transition.type,a),r.className="alertify alertify-hide alertify-hidden"):r.className="alertify alertify-hide alertify-hidden alertify-isHidden",s.className="alertify-cover alertify-cover-hidden",q.focus())},init:function(){c.createElement("nav");c.createElement("article");c.createElement("section");null==h("alertify-cover")&&(s=c.createElement("div"),s.setAttribute("id","alertify-cover"),s.className="alertify-cover alertify-cover-hidden",c.body.appendChild(s));null==h("alertify")&&(e=!1,f=[],
r=c.createElement("section"),r.setAttribute("id","alertify"),r.className="alertify alertify-hidden",c.body.appendChild(r));null==h("alertify-logs")&&(u=c.createElement("section"),u.setAttribute("id","alertify-logs"),u.className="alertify-logs alertify-logs-hidden",c.body.appendChild(u));c.body.setAttribute("tabindex","0");this.transition=A()},log:function(a,b,c){var d=function(){u&&null!==u.scrollTop||d()};this.init();d();u.className="alertify-logs";this.notify(a,b,c);return this},notify:function(a,
b,d){var e=c.createElement("article");e.className="alertify-log"+("string"===typeof b&&""!==b?" alertify-log-"+b:"");e.innerHTML=a;u.appendChild(e);setTimeout(function(){e.className+=" alertify-log-show"},50);this.close(e,d)},set:function(a){var b;if("object"!==typeof a&&a instanceof Array)throw Error("args must be an object");for(b in a)a.hasOwnProperty(b)&&(this[b]=a[b])},setFocus:function(){w?(w.focus(),w.select()):p.focus()},setup:function(a){var c=f[0],q=this,s;e=!0;s=function(a){a.stopPropagation();
q.setFocus();q.unbind(r,q.transition.type,s)};this.transition.supported&&!a&&this.bind(r,this.transition.type,s);r.innerHTML=this.build(c);n=h("alertify-resetFocus");m=h("alertify-resetFocusBack");l=h("alertify-ok")||b;k=h("alertify-cancel")||b;p="cancel"===d.buttonFocus?k:"none"===d.buttonFocus?h("alertify-noneFocus"):l;w=h("alertify-text")||b;h("alertify-form");"string"===typeof c.placeholder&&""!==c.placeholder&&(w.value=c.placeholder);a&&this.setFocus();this.addListeners(c.callback)},unbind:function(a,
b,c){"function"===typeof a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent("on"+b,c)}};return{alert:function(a,b,c){d.dialog(a,"alert",b,"",c);return this},confirm:function(a,b,c){d.dialog(a,"confirm",b,"",c);return this},extend:d.extend,init:d.init,log:function(a,b,c){d.log(a,b,c);return this},prompt:function(a,b,c,e){d.dialog(a,"prompt",b,c,e);return this},success:function(a,b){d.log(a,"success",b);return this},error:function(a,b){d.log(a,"error",b);return this},set:function(a){d.set(a)},
labels:d.labels,debug:d.handleErrors}};"function"===typeof define?define([],function(){return new e}):"undefined"===typeof a.alertify&&(a.alertify=new e)})(this);AutodeskNamespace("Autodesk.Viewing.Private");var auth=null,VIEWING_URL,SEARCH_URL,RESOURCE_ROOT="",LOCALIZATION_RESOURCE_ROOT="";Autodesk.Viewing.Private.env=null;Autodesk.Viewing.Private.logger=null;Autodesk.Viewing.Private.refreshToken=null;Autodesk.Viewing.Private.lastTokenRefreshTime=null;
var USE_OAUTH_NONE=!0,USE_OAUTH_ZERO=!1,USE_OAUTH_ONE=!1,USE_OAUTH_TWO=!1,SHOULD_SET_TOKEN=!0;
Autodesk.Viewing.Private.EnvironmentConfigurations={Local:{RESOURCE:"",VIEWING:"https://viewing-dev.api.autodesk.com/viewingservice/v1",SEARCH:"https://search-dev.api.autodesk.com/search/v1"},Development:{RESOURCE:"https://viewing-dev.api.autodesk.com/viewingservice/v1/viewers/",VIEWING:"https://viewing-dev.api.autodesk.com/viewingservice/v1",SEARCH:"https://search-dev.api.autodesk.com/search/v1"},Staging:{RESOURCE:"https://viewing-staging.api.autodesk.com/viewingservice/v1/viewers/",VIEWING:"https://viewing-staging.api.autodesk.com/viewingservice/v1",
SEARCH:"https://search-staging.api.autodesk.com/search/v1"},Production:{RESOURCE:"https://viewing.api.autodesk.com/viewingservice/v1/viewers/",VIEWING:"https://viewing.api.autodesk.com/viewingservice/v1",SEARCH:"https://search.api.autodesk.com/search/v1"},AutodeskDevelopment:{RESOURCE:"https://developer-dev.api.autodesk.com/viewingservice/v1/viewers/",VIEWING:"https://developer-dev.api.autodesk.com/viewingservice/v1",SEARCH:"https://search-dev.api.autodesk.com/search/v1"},AutodeskStaging:{RESOURCE:"https://developer-stg.api.autodesk.com/viewingservice/v1/viewers/",
VIEWING:"https://developer-stg.api.autodesk.com/viewingservice/v1",SEARCH:"https://search-staging.api.autodesk.com/search/v1"},AutodeskProduction:{RESOURCE:"https://developer.api.autodesk.com/viewingservice/v1/viewers/",VIEWING:"https://developer.api.autodesk.com/viewingservice/v1",SEARCH:"https://search.api.autodesk.com/search/v1"}};
Autodesk.Viewing.Private.setAuthTokenInCookie=function(a,b,c){var e={oauth:{token:""}};e.oauth.token=a;a=new XMLHttpRequest;a.open("POST",VIEWING_URL+"/token",!0);a.setRequestHeader("Content-Type","application/json");a.withCredentials=!0;a.onload=b;a.onerror=c;a.ontimeout=c;a.send(JSON.stringify(e))};
Autodesk.Viewing.Private.setApigeeTokenInCookie=function(a,b,c){var e=new XMLHttpRequest,d=VIEWING_URL.substring(0,VIEWING_URL.indexOf("/viewingservice"));e.open("POST",d+"/utility/v1/settoken",!0);e.setRequestHeader("Content-Type","application/x-www-form-urlencoded");e.withCredentials=!0;e.onload=b;e.onerror=c;e.ontimeout=c;e.send("access-token="+a)};
Autodesk.Viewing.Private.initializeEnvironmentVariable=function(a){if(a&&a.env)a=a.env;else switch(window.location.hostname){case "viewing-dev.api.autodesk.com":a="Development";break;case "viewing-staging.api.autodesk.com":a="Staging";break;case "viewing.api.autodesk.com":a="Production";break;case "developer-dev.api.autodesk.com":a="AutodeskDevelopment";break;case "developer-stg.api.autodesk.com":a="AutodeskStaging";break;case "developer.api.autodesk.com":a="AutodeskProduction";break;case "ec2-23-20-101-198.compute-1.amazonaws.com":a=
"Development";break;case "localhost.autodesk.com":a="Local";break;case "":a="Local";break;case "127.0.0.1":a="Local";break;default:a="AutodeskProduction"}console.log("Host name : "+window.location.hostname);console.log("Environment initialized as : "+a);Autodesk.Viewing.Private.env=a};Autodesk.Viewing.Private.initializeServiceEndPoints=function(){var a=Autodesk.Viewing.Private.EnvironmentConfigurations[Autodesk.Viewing.Private.env];VIEWING_URL=a.VIEWING;SEARCH_URL=a.SEARCH;RESOURCE_ROOT=a.RESOURCE};
Autodesk.Viewing.Private.initializeAuth=function(a,b){auth=!0;var c=Autodesk.Viewing.Private,e;b?(e=b.getAccessToken?b.getAccessToken():b.accessToken?b.accessToken:c.getParameterByName("accessToken"),c.refreshToken=b.refreshToken):e=c.getParameterByName("accessToken");e||(e="6UMxTJu+ViXGKmNM/xSsvPBIfg0=",console.log("Warning : no access token is provided. Use built in token : "+e));SHOULD_SET_TOKEN&&(0==c.env.indexOf("Autodesk")?c.setApigeeTokenInCookie(e,a):c.setAuthTokenInCookie(e,a));c.initializeLogger(e);
c.lastTokenRefreshTime=Date.now();setInterval(c.heartBeat,6E4);return auth};Autodesk.Viewing.Private.initializeLogger=function(a){var b=Autodesk.Viewing.Private.logger=new Autodesk.Viewing.Private.Logger({console:!1,viewingservice:!0,webstorage:!1,endpoint:VIEWING_URL,flushThreshold:10});a={viewer_current_time:Date.now(),viewer_user_access_token:a,viewer_user_host_url:window.location.hostname,viewer_user_agent:navigator.userAgent};b.log(a)};
Autodesk.Viewing.Private.heartBeat=function(){var a=Autodesk.Viewing.Private;6E4<Date.now()-a.logger.lastFlushTime&&a.logger.flush();if(15E5<Date.now()-a.lastTokenRefreshTime){var b=a.refreshToken;b&&(b=b(),a.lastTokenRefreshTime=Date.now(),0==a.env.indexOf("Autodesk")?a.setApigeeTokenInCookie(b):a.setAuthTokenInCookie(b))}};Autodesk.Viewing.Private.getAuthObject=function(){return auth};
Autodesk.Viewing.Private.getParameterByName=function(a){return Autodesk.Viewing.Private.getParameterByNameFromPath(a,window.location.href)};Autodesk.Viewing.Private.getParameterByNameFromPath=function(a,b){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c=RegExp("[\\?&]"+a+"=([^&#]*)").exec(b);return null==c?"":decodeURIComponent(c[1].replace(/\+/g," "))};
Autodesk.Viewing.Private.getDemoDocumentURN=function(){var a;switch(Autodesk.Viewing.Private.env){case "Development":a="urn:dXJuOmFkc2suYTM2MGJldGFkZXY6ZnMuZmlsZTplbnRlcnByaXNlLmxtdnRlc3QuRFM1YTczMFFUYmYwMDIyZDA3NTFhYmE5MjZlZDZkMjJlZDY0P3ZlcnNpb249MQ==";break;case "Staging":a="urn:dXJuOmFkc2suczM6ZGVyaXZlZC5maWxlOlZpZXdpbmdTZXJ2aWNlVGVzdEFwcC91c2Vycy9NaWNoYWVsX0hhbicvTU0zNTAwQXNzZW1ibHkuZHdm";break;case "Production":a="FIXME";break;default:a="urn:dXJuOmFkc2suYTM2MGJldGFkZXY6ZnMuZmlsZTplbnRlcnByaXNlLmxtdnRlc3QuRFM1YTczMFFUYmYwMDIyZDA3NTFhYmE5MjZlZDZkMjJlZDY0P3ZlcnNpb249MQ=="}return a};
Autodesk.Viewing.Private.setLanguage=function(a,b){var c={lng:a,resGetPath:"locales/__lng__/__ns__.json.generated",ns:{namespaces:["allstrings"],defaultNs:"allstrings"},fallbackLng:"en",debug:!1};LOCALIZATION_RESOURCE_ROOT=RESOURCE_ROOT+"locales/"+a+"/";Autodesk.Viewing.i18n.init(c,function(a){Autodesk.Viewing.i18n.localize();b&&b()})};Autodesk.Viewing.Private.initializeLocalization=function(){var a=navigator.language.split("-")[0];Autodesk.Viewing.Private.setLanguage(a)};
function stderr(a){ENABLE_TRACE&&console.log(a)};
